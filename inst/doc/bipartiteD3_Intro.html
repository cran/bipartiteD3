<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Chris Terry" />

<meta name="date" content="2021-10-20" />

<title>Introduction to bipartiteD3</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>
<script src="data:application/javascript;base64,KGZ1bmN0aW9uKCkgewogIC8vIElmIHdpbmRvdy5IVE1MV2lkZ2V0cyBpcyBhbHJlYWR5IGRlZmluZWQsIHRoZW4gdXNlIGl0OyBvdGhlcndpc2UgY3JlYXRlIGEKICAvLyBuZXcgb2JqZWN0LiBUaGlzIGFsbG93cyBwcmVjZWRpbmcgY29kZSB0byBzZXQgb3B0aW9ucyB0aGF0IGFmZmVjdCB0aGUKICAvLyBpbml0aWFsaXphdGlvbiBwcm9jZXNzICh0aG91Z2ggbm9uZSBjdXJyZW50bHkgZXhpc3QpLgogIHdpbmRvdy5IVE1MV2lkZ2V0cyA9IHdpbmRvdy5IVE1MV2lkZ2V0cyB8fCB7fTsKCiAgLy8gU2VlIGlmIHdlJ3JlIHJ1bm5pbmcgaW4gYSB2aWV3ZXIgcGFuZS4gSWYgbm90LCB3ZSdyZSBpbiBhIHdlYiBicm93c2VyLgogIHZhciB2aWV3ZXJNb2RlID0gd2luZG93LkhUTUxXaWRnZXRzLnZpZXdlck1vZGUgPQogICAgICAvXGJ2aWV3ZXJfcGFuZT0xXGIvLnRlc3Qod2luZG93LmxvY2F0aW9uKTsKCiAgLy8gU2VlIGlmIHdlJ3JlIHJ1bm5pbmcgaW4gU2hpbnkgbW9kZS4gSWYgbm90LCBpdCdzIGEgc3RhdGljIGRvY3VtZW50LgogIC8vIE5vdGUgdGhhdCBzdGF0aWMgd2lkZ2V0cyBjYW4gYXBwZWFyIGluIGJvdGggU2hpbnkgYW5kIHN0YXRpYyBtb2RlcywgYnV0CiAgLy8gb2J2aW91c2x5LCBTaGlueSB3aWRnZXRzIGNhbiBvbmx5IGFwcGVhciBpbiBTaGlueSBhcHBzL2RvY3VtZW50cy4KICB2YXIgc2hpbnlNb2RlID0gd2luZG93LkhUTUxXaWRnZXRzLnNoaW55TW9kZSA9CiAgICAgIHR5cGVvZih3aW5kb3cuU2hpbnkpICE9PSAidW5kZWZpbmVkIiAmJiAhIXdpbmRvdy5TaGlueS5vdXRwdXRCaW5kaW5nczsKCiAgLy8gV2UgY2FuJ3QgY291bnQgb24galF1ZXJ5IGJlaW5nIGF2YWlsYWJsZSwgc28gd2UgaW1wbGVtZW50IG91ciBvd24KICAvLyB2ZXJzaW9uIGlmIG5lY2Vzc2FyeS4KICBmdW5jdGlvbiBxdWVyeVNlbGVjdG9yQWxsKHNjb3BlLCBzZWxlY3RvcikgewogICAgaWYgKHR5cGVvZihqUXVlcnkpICE9PSAidW5kZWZpbmVkIiAmJiBzY29wZSBpbnN0YW5jZW9mIGpRdWVyeSkgewogICAgICByZXR1cm4gc2NvcGUuZmluZChzZWxlY3Rvcik7CiAgICB9CiAgICBpZiAoc2NvcGUucXVlcnlTZWxlY3RvckFsbCkgewogICAgICByZXR1cm4gc2NvcGUucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBhc0FycmF5KHZhbHVlKSB7CiAgICBpZiAodmFsdWUgPT09IG51bGwpCiAgICAgIHJldHVybiBbXTsKICAgIGlmICgkLmlzQXJyYXkodmFsdWUpKQogICAgICByZXR1cm4gdmFsdWU7CiAgICByZXR1cm4gW3ZhbHVlXTsKICB9CgogIC8vIEltcGxlbWVudCBqUXVlcnkncyBleHRlbmQKICBmdW5jdGlvbiBleHRlbmQodGFyZ2V0IC8qLCAuLi4gKi8pIHsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDEpIHsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07CiAgICAgIGZvciAodmFyIHByb3AgaW4gc291cmNlKSB7CiAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgewogICAgICAgICAgdGFyZ2V0W3Byb3BdID0gc291cmNlW3Byb3BdOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHRhcmdldDsKICB9CgogIC8vIElFOCBkb2Vzbid0IHN1cHBvcnQgQXJyYXkuZm9yRWFjaC4KICBmdW5jdGlvbiBmb3JFYWNoKHZhbHVlcywgY2FsbGJhY2ssIHRoaXNBcmcpIHsKICAgIGlmICh2YWx1ZXMuZm9yRWFjaCkgewogICAgICB2YWx1ZXMuZm9yRWFjaChjYWxsYmFjaywgdGhpc0FyZyk7CiAgICB9IGVsc2UgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgdmFsdWVzW2ldLCBpLCB2YWx1ZXMpOwogICAgICB9CiAgICB9CiAgfQoKICAvLyBSZXBsYWNlcyB0aGUgc3BlY2lmaWVkIG1ldGhvZCB3aXRoIHRoZSByZXR1cm4gdmFsdWUgb2YgZnVuY1NvdXJjZS4KICAvLwogIC8vIE5vdGUgdGhhdCBmdW5jU291cmNlIHNob3VsZCBub3QgQkUgdGhlIG5ldyBtZXRob2QsIGl0IHNob3VsZCBiZSBhIGZ1bmN0aW9uCiAgLy8gdGhhdCBSRVRVUk5TIHRoZSBuZXcgbWV0aG9kLiBmdW5jU291cmNlIHJlY2VpdmVzIGEgc2luZ2xlIGFyZ3VtZW50IHRoYXQgaXMKICAvLyB0aGUgb3ZlcnJpZGRlbiBtZXRob2QsIGl0IGNhbiBiZSBjYWxsZWQgZnJvbSB0aGUgbmV3IG1ldGhvZC4gVGhlIG92ZXJyaWRkZW4KICAvLyBtZXRob2QgY2FuIGJlIGNhbGxlZCBsaWtlIGEgcmVndWxhciBmdW5jdGlvbiwgaXQgaGFzIHRoZSB0YXJnZXQgcGVybWFuZW50bHkKICAvLyBib3VuZCB0byBpdCBzbyAidGhpcyIgd2lsbCB3b3JrIGNvcnJlY3RseS4KICBmdW5jdGlvbiBvdmVycmlkZU1ldGhvZCh0YXJnZXQsIG1ldGhvZE5hbWUsIGZ1bmNTb3VyY2UpIHsKICAgIHZhciBzdXBlckZ1bmMgPSB0YXJnZXRbbWV0aG9kTmFtZV0gfHwgZnVuY3Rpb24oKSB7fTsKICAgIHZhciBzdXBlckZ1bmNCb3VuZCA9IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gc3VwZXJGdW5jLmFwcGx5KHRhcmdldCwgYXJndW1lbnRzKTsKICAgIH07CiAgICB0YXJnZXRbbWV0aG9kTmFtZV0gPSBmdW5jU291cmNlKHN1cGVyRnVuY0JvdW5kKTsKICB9CgogIC8vIEFkZCBhIG1ldGhvZCB0byBkZWxlZ2F0b3IgdGhhdCwgd2hlbiBpbnZva2VkLCBjYWxscwogIC8vIGRlbGVnYXRlZS5tZXRob2ROYW1lLiBJZiB0aGVyZSBpcyBubyBzdWNoIG1ldGhvZCBvbgogIC8vIHRoZSBkZWxlZ2F0ZWUsIGJ1dCB0aGVyZSB3YXMgb25lIG9uIGRlbGVnYXRvciBiZWZvcmUKICAvLyBkZWxlZ2F0ZU1ldGhvZCB3YXMgY2FsbGVkLCB0aGVuIHRoZSBvcmlnaW5hbCB2ZXJzaW9uCiAgLy8gaXMgaW52b2tlZCBpbnN0ZWFkLgogIC8vIEZvciBleGFtcGxlOgogIC8vCiAgLy8gdmFyIGEgPSB7CiAgLy8gICBtZXRob2QxOiBmdW5jdGlvbigpIHsgY29uc29sZS5sb2coJ2ExJyk7IH0KICAvLyAgIG1ldGhvZDI6IGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZygnYTInKTsgfQogIC8vIH07CiAgLy8gdmFyIGIgPSB7CiAgLy8gICBtZXRob2QxOiBmdW5jdGlvbigpIHsgY29uc29sZS5sb2coJ2IxJyk7IH0KICAvLyB9OwogIC8vIGRlbGVnYXRlTWV0aG9kKGEsIGIsICJtZXRob2QxIik7CiAgLy8gZGVsZWdhdGVNZXRob2QoYSwgYiwgIm1ldGhvZDIiKTsKICAvLyBhLm1ldGhvZDEoKTsKICAvLyBhLm1ldGhvZDIoKTsKICAvLwogIC8vIFRoZSBvdXRwdXQgd291bGQgYmUgImIxIiwgImEyIi4KICBmdW5jdGlvbiBkZWxlZ2F0ZU1ldGhvZChkZWxlZ2F0b3IsIGRlbGVnYXRlZSwgbWV0aG9kTmFtZSkgewogICAgdmFyIGluaGVyaXRlZCA9IGRlbGVnYXRvclttZXRob2ROYW1lXTsKICAgIGRlbGVnYXRvclttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCkgewogICAgICB2YXIgdGFyZ2V0ID0gZGVsZWdhdGVlOwogICAgICB2YXIgbWV0aG9kID0gZGVsZWdhdGVlW21ldGhvZE5hbWVdOwoKICAgICAgLy8gVGhlIG1ldGhvZCBkb2Vzbid0IGV4aXN0IG9uIHRoZSBkZWxlZ2F0ZWUuIEluc3RlYWQsCiAgICAgIC8vIGNhbGwgdGhlIG1ldGhvZCBvbiB0aGUgZGVsZWdhdG9yLCBpZiBpdCBleGlzdHMuCiAgICAgIGlmICghbWV0aG9kKSB7CiAgICAgICAgdGFyZ2V0ID0gZGVsZWdhdG9yOwogICAgICAgIG1ldGhvZCA9IGluaGVyaXRlZDsKICAgICAgfQoKICAgICAgaWYgKG1ldGhvZCkgewogICAgICAgIHJldHVybiBtZXRob2QuYXBwbHkodGFyZ2V0LCBhcmd1bWVudHMpOwogICAgICB9CiAgICB9OwogIH0KCiAgLy8gSW1wbGVtZW50IGEgdmFndWUgZmFjc2ltaWxpZSBvZiBqUXVlcnkncyBkYXRhIG1ldGhvZAogIGZ1bmN0aW9uIGVsZW1lbnREYXRhKGVsLCBuYW1lLCB2YWx1ZSkgewogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMikgewogICAgICByZXR1cm4gZWxbImh0bWx3aWRnZXRfZGF0YV8iICsgbmFtZV07CiAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMykgewogICAgICBlbFsiaHRtbHdpZGdldF9kYXRhXyIgKyBuYW1lXSA9IHZhbHVlOwogICAgICByZXR1cm4gZWw7CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIldyb25nIG51bWJlciBvZiBhcmd1bWVudHMgZm9yIGVsZW1lbnREYXRhOiAiICsKICAgICAgICBhcmd1bWVudHMubGVuZ3RoKTsKICAgIH0KICB9CgogIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzQ0NjE3MC9lc2NhcGUtc3RyaW5nLWZvci11c2UtaW4tamF2YXNjcmlwdC1yZWdleAogIGZ1bmN0aW9uIGVzY2FwZVJlZ0V4cChzdHIpIHsKICAgIHJldHVybiBzdHIucmVwbGFjZSgvW1wtXFtcXVwvXHtcfVwoXClcKlwrXD9cLlxcXF5cJFx8XS9nLCAiXFwkJiIpOwogIH0KCiAgZnVuY3Rpb24gaGFzQ2xhc3MoZWwsIGNsYXNzTmFtZSkgewogICAgdmFyIHJlID0gbmV3IFJlZ0V4cCgiXFxiIiArIGVzY2FwZVJlZ0V4cChjbGFzc05hbWUpICsgIlxcYiIpOwogICAgcmV0dXJuIHJlLnRlc3QoZWwuY2xhc3NOYW1lKTsKICB9CgogIC8vIGVsZW1lbnRzIC0gYXJyYXkgKG9yIGFycmF5LWxpa2Ugb2JqZWN0KSBvZiBIVE1MIGVsZW1lbnRzCiAgLy8gY2xhc3NOYW1lIC0gY2xhc3MgbmFtZSB0byB0ZXN0IGZvcgogIC8vIGluY2x1ZGUgLSBpZiB0cnVlLCBvbmx5IHJldHVybiBlbGVtZW50cyB3aXRoIGdpdmVuIGNsYXNzTmFtZTsKICAvLyAgIGlmIGZhbHNlLCBvbmx5IHJldHVybiBlbGVtZW50cyAqd2l0aG91dCogZ2l2ZW4gY2xhc3NOYW1lCiAgZnVuY3Rpb24gZmlsdGVyQnlDbGFzcyhlbGVtZW50cywgY2xhc3NOYW1lLCBpbmNsdWRlKSB7CiAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykgewogICAgICBpZiAoaGFzQ2xhc3MoZWxlbWVudHNbaV0sIGNsYXNzTmFtZSkgPT0gaW5jbHVkZSkKICAgICAgICByZXN1bHRzLnB1c2goZWxlbWVudHNbaV0pOwogICAgfQogICAgcmV0dXJuIHJlc3VsdHM7CiAgfQoKICBmdW5jdGlvbiBvbihvYmosIGV2ZW50TmFtZSwgZnVuYykgewogICAgaWYgKG9iai5hZGRFdmVudExpc3RlbmVyKSB7CiAgICAgIG9iai5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgZnVuYywgZmFsc2UpOwogICAgfSBlbHNlIGlmIChvYmouYXR0YWNoRXZlbnQpIHsKICAgICAgb2JqLmF0dGFjaEV2ZW50KGV2ZW50TmFtZSwgZnVuYyk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBvZmYob2JqLCBldmVudE5hbWUsIGZ1bmMpIHsKICAgIGlmIChvYmoucmVtb3ZlRXZlbnRMaXN0ZW5lcikKICAgICAgb2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBmdW5jLCBmYWxzZSk7CiAgICBlbHNlIGlmIChvYmouZGV0YWNoRXZlbnQpIHsKICAgICAgb2JqLmRldGFjaEV2ZW50KGV2ZW50TmFtZSwgZnVuYyk7CiAgICB9CiAgfQoKICAvLyBUcmFuc2xhdGUgYXJyYXkgb2YgdmFsdWVzIHRvIHRvcC9yaWdodC9ib3R0b20vbGVmdCwgYXMgdXN1YWwgd2l0aAogIC8vIHRoZSAicGFkZGluZyIgQ1NTIHByb3BlcnR5CiAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL3BhZGRpbmcKICBmdW5jdGlvbiB1bnBhY2tQYWRkaW5nKHZhbHVlKSB7CiAgICBpZiAodHlwZW9mKHZhbHVlKSA9PT0gIm51bWJlciIpCiAgICAgIHZhbHVlID0gW3ZhbHVlXTsKICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDEpIHsKICAgICAgcmV0dXJuIHt0b3A6IHZhbHVlWzBdLCByaWdodDogdmFsdWVbMF0sIGJvdHRvbTogdmFsdWVbMF0sIGxlZnQ6IHZhbHVlWzBdfTsKICAgIH0KICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDIpIHsKICAgICAgcmV0dXJuIHt0b3A6IHZhbHVlWzBdLCByaWdodDogdmFsdWVbMV0sIGJvdHRvbTogdmFsdWVbMF0sIGxlZnQ6IHZhbHVlWzFdfTsKICAgIH0KICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDMpIHsKICAgICAgcmV0dXJuIHt0b3A6IHZhbHVlWzBdLCByaWdodDogdmFsdWVbMV0sIGJvdHRvbTogdmFsdWVbMl0sIGxlZnQ6IHZhbHVlWzFdfTsKICAgIH0KICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDQpIHsKICAgICAgcmV0dXJuIHt0b3A6IHZhbHVlWzBdLCByaWdodDogdmFsdWVbMV0sIGJvdHRvbTogdmFsdWVbMl0sIGxlZnQ6IHZhbHVlWzNdfTsKICAgIH0KICB9CgogIC8vIENvbnZlcnQgYW4gdW5wYWNrZWQgcGFkZGluZyBvYmplY3QgdG8gYSBDU1MgdmFsdWUKICBmdW5jdGlvbiBwYWRkaW5nVG9Dc3MocGFkZGluZ09iaikgewogICAgcmV0dXJuIHBhZGRpbmdPYmoudG9wICsgInB4ICIgKyBwYWRkaW5nT2JqLnJpZ2h0ICsgInB4ICIgKyBwYWRkaW5nT2JqLmJvdHRvbSArICJweCAiICsgcGFkZGluZ09iai5sZWZ0ICsgInB4IjsKICB9CgogIC8vIE1ha2VzIGEgbnVtYmVyIHN1aXRhYmxlIGZvciBDU1MKICBmdW5jdGlvbiBweCh4KSB7CiAgICBpZiAodHlwZW9mKHgpID09PSAibnVtYmVyIikKICAgICAgcmV0dXJuIHggKyAicHgiOwogICAgZWxzZQogICAgICByZXR1cm4geDsKICB9CgogIC8vIFJldHJpZXZlcyBydW50aW1lIHdpZGdldCBzaXppbmcgaW5mb3JtYXRpb24gZm9yIGFuIGVsZW1lbnQuCiAgLy8gVGhlIHJldHVybiB2YWx1ZSBpcyBlaXRoZXIgbnVsbCwgb3IgYW4gb2JqZWN0IHdpdGggZmlsbCwgcGFkZGluZywKICAvLyBkZWZhdWx0V2lkdGgsIGRlZmF1bHRIZWlnaHQgZmllbGRzLgogIGZ1bmN0aW9uIHNpemluZ1BvbGljeShlbCkgewogICAgdmFyIHNpemluZ0VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcigic2NyaXB0W2RhdGEtZm9yPSciICsgZWwuaWQgKyAiJ11bdHlwZT0nYXBwbGljYXRpb24vaHRtbHdpZGdldC1zaXppbmcnXSIpOwogICAgaWYgKCFzaXppbmdFbCkKICAgICAgcmV0dXJuIG51bGw7CiAgICB2YXIgc3AgPSBKU09OLnBhcnNlKHNpemluZ0VsLnRleHRDb250ZW50IHx8IHNpemluZ0VsLnRleHQgfHwgInt9Iik7CiAgICBpZiAodmlld2VyTW9kZSkgewogICAgICByZXR1cm4gc3Audmlld2VyOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHNwLmJyb3dzZXI7CiAgICB9CiAgfQoKICAvLyBAcGFyYW0gdGFza3MgQXJyYXkgb2Ygc3RyaW5ncyAob3IgZmFsc3kgdmFsdWUsIGluIHdoaWNoIGNhc2Ugbm8tb3ApLgogIC8vICAgRWFjaCBlbGVtZW50IG11c3QgYmUgYSB2YWxpZCBKYXZhU2NyaXB0IGV4cHJlc3Npb24gdGhhdCB5aWVsZHMgYQogIC8vICAgZnVuY3Rpb24uIE9yLCBjYW4gYmUgYW4gYXJyYXkgb2Ygb2JqZWN0cyB3aXRoICJjb2RlIiBhbmQgImRhdGEiCiAgLy8gICBwcm9wZXJ0aWVzOyBpbiB0aGlzIGNhc2UsIHRoZSAiY29kZSIgcHJvcGVydHkgc2hvdWxkIGJlIGEgc3RyaW5nCiAgLy8gICBvZiBKUyB0aGF0J3MgYW4gZXhwciB0aGF0IHlpZWxkcyBhIGZ1bmN0aW9uLCBhbmQgImRhdGEiIHNob3VsZCBiZQogIC8vICAgYW4gb2JqZWN0IHRoYXQgd2lsbCBiZSBhZGRlZCBhcyBhbiBhZGRpdGlvbmFsIGFyZ3VtZW50IHdoZW4gdGhhdAogIC8vICAgZnVuY3Rpb24gaXMgY2FsbGVkLgogIC8vIEBwYXJhbSB0YXJnZXQgVGhlIG9iamVjdCB0aGF0IHdpbGwgYmUgInRoaXMiIGZvciBlYWNoIGZ1bmN0aW9uCiAgLy8gICBleGVjdXRpb24uCiAgLy8gQHBhcmFtIGFyZ3MgQXJyYXkgb2YgYXJndW1lbnRzIHRvIGJlIHBhc3NlZCB0byB0aGUgZnVuY3Rpb25zLiAoVGhlCiAgLy8gICBzYW1lIGFyZ3VtZW50cyB3aWxsIGJlIHBhc3NlZCB0byBhbGwgZnVuY3Rpb25zLikKICBmdW5jdGlvbiBldmFsQW5kUnVuKHRhc2tzLCB0YXJnZXQsIGFyZ3MpIHsKICAgIGlmICh0YXNrcykgewogICAgICBmb3JFYWNoKHRhc2tzLCBmdW5jdGlvbih0YXNrKSB7CiAgICAgICAgdmFyIHRoZXNlQXJncyA9IGFyZ3M7CiAgICAgICAgaWYgKHR5cGVvZih0YXNrKSA9PT0gIm9iamVjdCIpIHsKICAgICAgICAgIHRoZXNlQXJncyA9IHRoZXNlQXJncy5jb25jYXQoW3Rhc2suZGF0YV0pOwogICAgICAgICAgdGFzayA9IHRhc2suY29kZTsKICAgICAgICB9CiAgICAgICAgdmFyIHRhc2tGdW5jID0gdHJ5RXZhbCh0YXNrKTsKICAgICAgICBpZiAodHlwZW9mKHRhc2tGdW5jKSAhPT0gImZ1bmN0aW9uIikgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJUYXNrIG11c3QgYmUgYSBmdW5jdGlvbiEgU291cmNlOlxuIiArIHRhc2spOwogICAgICAgIH0KICAgICAgICB0YXNrRnVuYy5hcHBseSh0YXJnZXQsIHRoZXNlQXJncyk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgLy8gQXR0ZW1wdCBldmFsKCkgYm90aCB3aXRoIGFuZCB3aXRob3V0IGVuY2xvc2luZyBpbiBwYXJlbnRoZXNlcy4KICAvLyBOb3RlIHRoYXQgZW5jbG9zaW5nIGNvZXJjZXMgYSBmdW5jdGlvbiBkZWNsYXJhdGlvbiBpbnRvCiAgLy8gYW4gZXhwcmVzc2lvbiB0aGF0IGV2YWwoKSBjYW4gcGFyc2UKICAvLyAob3RoZXJ3aXNlLCBhIFN5bnRheEVycm9yIGlzIHRocm93bikKICBmdW5jdGlvbiB0cnlFdmFsKGNvZGUpIHsKICAgIHZhciByZXN1bHQgPSBudWxsOwogICAgdHJ5IHsKICAgICAgcmVzdWx0ID0gZXZhbCgiKCIgKyBjb2RlICsgIikiKTsKICAgIH0gY2F0Y2goZXJyb3IpIHsKICAgICAgaWYgKCEoZXJyb3IgaW5zdGFuY2VvZiBTeW50YXhFcnJvcikpIHsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfQogICAgICB0cnkgewogICAgICAgIHJlc3VsdCA9IGV2YWwoY29kZSk7CiAgICAgIH0gY2F0Y2goZSkgewogICAgICAgIGlmIChlIGluc3RhbmNlb2YgU3ludGF4RXJyb3IpIHsKICAgICAgICAgIHRocm93IGVycm9yOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aHJvdyBlOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlc3VsdDsKICB9CgogIGZ1bmN0aW9uIGluaXRTaXppbmcoZWwpIHsKICAgIHZhciBzaXppbmcgPSBzaXppbmdQb2xpY3koZWwpOwogICAgaWYgKCFzaXppbmcpCiAgICAgIHJldHVybjsKCiAgICB2YXIgY2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImh0bWx3aWRnZXRfY29udGFpbmVyIik7CiAgICBpZiAoIWNlbCkKICAgICAgcmV0dXJuOwoKICAgIGlmICh0eXBlb2Yoc2l6aW5nLnBhZGRpbmcpICE9PSAidW5kZWZpbmVkIikgewogICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm1hcmdpbiA9ICIwIjsKICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5wYWRkaW5nID0gcGFkZGluZ1RvQ3NzKHVucGFja1BhZGRpbmcoc2l6aW5nLnBhZGRpbmcpKTsKICAgIH0KCiAgICBpZiAoc2l6aW5nLmZpbGwpIHsKICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICJoaWRkZW4iOwogICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLndpZHRoID0gIjEwMCUiOwogICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmhlaWdodCA9ICIxMDAlIjsKICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLndpZHRoID0gIjEwMCUiOwogICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gIjEwMCUiOwogICAgICBpZiAoY2VsKSB7CiAgICAgICAgY2VsLnN0eWxlLnBvc2l0aW9uID0gImFic29sdXRlIjsKICAgICAgICB2YXIgcGFkID0gdW5wYWNrUGFkZGluZyhzaXppbmcucGFkZGluZyk7CiAgICAgICAgY2VsLnN0eWxlLnRvcCA9IHBhZC50b3AgKyAicHgiOwogICAgICAgIGNlbC5zdHlsZS5yaWdodCA9IHBhZC5yaWdodCArICJweCI7CiAgICAgICAgY2VsLnN0eWxlLmJvdHRvbSA9IHBhZC5ib3R0b20gKyAicHgiOwogICAgICAgIGNlbC5zdHlsZS5sZWZ0ID0gcGFkLmxlZnQgKyAicHgiOwogICAgICAgIGVsLnN0eWxlLndpZHRoID0gIjEwMCUiOwogICAgICAgIGVsLnN0eWxlLmhlaWdodCA9ICIxMDAlIjsKICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBnZXRXaWR0aDogZnVuY3Rpb24oKSB7IHJldHVybiBjZWwub2Zmc2V0V2lkdGg7IH0sCiAgICAgICAgZ2V0SGVpZ2h0OiBmdW5jdGlvbigpIHsgcmV0dXJuIGNlbC5vZmZzZXRIZWlnaHQ7IH0KICAgICAgfTsKCiAgICB9IGVsc2UgewogICAgICBlbC5zdHlsZS53aWR0aCA9IHB4KHNpemluZy53aWR0aCk7CiAgICAgIGVsLnN0eWxlLmhlaWdodCA9IHB4KHNpemluZy5oZWlnaHQpOwoKICAgICAgcmV0dXJuIHsKICAgICAgICBnZXRXaWR0aDogZnVuY3Rpb24oKSB7IHJldHVybiBlbC5vZmZzZXRXaWR0aDsgfSwKICAgICAgICBnZXRIZWlnaHQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gZWwub2Zmc2V0SGVpZ2h0OyB9CiAgICAgIH07CiAgICB9CiAgfQoKICAvLyBEZWZhdWx0IGltcGxlbWVudGF0aW9ucyBmb3IgbWV0aG9kcwogIHZhciBkZWZhdWx0cyA9IHsKICAgIGZpbmQ6IGZ1bmN0aW9uKHNjb3BlKSB7CiAgICAgIHJldHVybiBxdWVyeVNlbGVjdG9yQWxsKHNjb3BlLCAiLiIgKyB0aGlzLm5hbWUpOwogICAgfSwKICAgIHJlbmRlckVycm9yOiBmdW5jdGlvbihlbCwgZXJyKSB7CiAgICAgIHZhciAkZWwgPSAkKGVsKTsKCiAgICAgIHRoaXMuY2xlYXJFcnJvcihlbCk7CgogICAgICAvLyBBZGQgYWxsIHRoZXNlIGVycm9yIGNsYXNzZXMsIGFzIFNoaW55IGRvZXMKICAgICAgdmFyIGVyckNsYXNzID0gInNoaW55LW91dHB1dC1lcnJvciI7CiAgICAgIGlmIChlcnIudHlwZSAhPT0gbnVsbCkgewogICAgICAgIC8vIHVzZSB0aGUgY2xhc3NlcyBvZiB0aGUgZXJyb3IgY29uZGl0aW9uIGFzIENTUyBjbGFzcyBuYW1lcwogICAgICAgIGVyckNsYXNzID0gZXJyQ2xhc3MgKyAiICIgKyAkLm1hcChhc0FycmF5KGVyci50eXBlKSwgZnVuY3Rpb24odHlwZSkgewogICAgICAgICAgcmV0dXJuIGVyckNsYXNzICsgIi0iICsgdHlwZTsKICAgICAgICB9KS5qb2luKCIgIik7CiAgICAgIH0KICAgICAgZXJyQ2xhc3MgPSBlcnJDbGFzcyArICIgaHRtbHdpZGdldHMtZXJyb3IiOwoKICAgICAgLy8gSXMgZWwgaW5saW5lIG9yIGJsb2NrPyBJZiBpbmxpbmUgb3IgaW5saW5lLWJsb2NrLCBqdXN0IGRpc3BsYXk6bm9uZSBpdAogICAgICAvLyBhbmQgYWRkIGFuIGlubGluZSBlcnJvci4KICAgICAgdmFyIGRpc3BsYXkgPSAkZWwuY3NzKCJkaXNwbGF5Iik7CiAgICAgICRlbC5kYXRhKCJyZXN0b3JlLWRpc3BsYXktbW9kZSIsIGRpc3BsYXkpOwoKICAgICAgaWYgKGRpc3BsYXkgPT09ICJpbmxpbmUiIHx8IGRpc3BsYXkgPT09ICJpbmxpbmUtYmxvY2siKSB7CiAgICAgICAgJGVsLmhpZGUoKTsKICAgICAgICBpZiAoZXJyLm1lc3NhZ2UgIT09ICIiKSB7CiAgICAgICAgICB2YXIgZXJyb3JTcGFuID0gJCgiPHNwYW4+IikuYWRkQ2xhc3MoZXJyQ2xhc3MpOwogICAgICAgICAgZXJyb3JTcGFuLnRleHQoZXJyLm1lc3NhZ2UpOwogICAgICAgICAgJGVsLmFmdGVyKGVycm9yU3Bhbik7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGRpc3BsYXkgPT09ICJibG9jayIpIHsKICAgICAgICAvLyBJZiBibG9jaywgYWRkIGFuIGVycm9yIGp1c3QgYWZ0ZXIgdGhlIGVsLCBzZXQgdmlzaWJpbGl0eTpub25lIG9uIHRoZQogICAgICAgIC8vIGVsLCBhbmQgcG9zaXRpb24gdGhlIGVycm9yIHRvIGJlIG9uIHRvcCBvZiB0aGUgZWwuCiAgICAgICAgLy8gTWFyayBpdCB3aXRoIGEgdW5pcXVlIElEIGFuZCBDU1MgY2xhc3Mgc28gd2UgY2FuIHJlbW92ZSBpdCBsYXRlci4KICAgICAgICAkZWwuY3NzKCJ2aXNpYmlsaXR5IiwgImhpZGRlbiIpOwogICAgICAgIGlmIChlcnIubWVzc2FnZSAhPT0gIiIpIHsKICAgICAgICAgIHZhciBlcnJvckRpdiA9ICQoIjxkaXY+IikuYWRkQ2xhc3MoZXJyQ2xhc3MpLmNzcygicG9zaXRpb24iLCAiYWJzb2x1dGUiKQogICAgICAgICAgICAuY3NzKCJ0b3AiLCBlbC5vZmZzZXRUb3ApCiAgICAgICAgICAgIC5jc3MoImxlZnQiLCBlbC5vZmZzZXRMZWZ0KQogICAgICAgICAgICAvLyBzZXR0aW5nIHdpZHRoIGNhbiBwdXNoIG91dCB0aGUgcGFnZSBzaXplLCBmb3JjaW5nIG90aGVyd2lzZQogICAgICAgICAgICAvLyB1bm5lY2Vzc2FyeSBzY3JvbGxiYXJzIHRvIGFwcGVhciBhbmQgbWFraW5nIGl0IGltcG9zc2libGUgZm9yCiAgICAgICAgICAgIC8vIHRoZSBlbGVtZW50IHRvIHNocmluazsgc28gdXNlIG1heC13aWR0aCBpbnN0ZWFkCiAgICAgICAgICAgIC5jc3MoIm1heFdpZHRoIiwgZWwub2Zmc2V0V2lkdGgpCiAgICAgICAgICAgIC5jc3MoImhlaWdodCIsIGVsLm9mZnNldEhlaWdodCk7CiAgICAgICAgICBlcnJvckRpdi50ZXh0KGVyci5tZXNzYWdlKTsKICAgICAgICAgICRlbC5hZnRlcihlcnJvckRpdik7CgogICAgICAgICAgLy8gUmVhbGx5IGR1bWIgd2F5IHRvIGtlZXAgdGhlIHNpemUvcG9zaXRpb24gb2YgdGhlIGVycm9yIGluIHN5bmMgd2l0aAogICAgICAgICAgLy8gdGhlIHBhcmVudCBlbGVtZW50IGFzIHRoZSB3aW5kb3cgaXMgcmVzaXplZCBvciB3aGF0ZXZlci4KICAgICAgICAgIHZhciBpbnRJZCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkgewogICAgICAgICAgICBpZiAoIWVycm9yRGl2WzBdLnBhcmVudEVsZW1lbnQpIHsKICAgICAgICAgICAgICBjbGVhckludGVydmFsKGludElkKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZXJyb3JEaXYKICAgICAgICAgICAgICAuY3NzKCJ0b3AiLCBlbC5vZmZzZXRUb3ApCiAgICAgICAgICAgICAgLmNzcygibGVmdCIsIGVsLm9mZnNldExlZnQpCiAgICAgICAgICAgICAgLmNzcygibWF4V2lkdGgiLCBlbC5vZmZzZXRXaWR0aCkKICAgICAgICAgICAgICAuY3NzKCJoZWlnaHQiLCBlbC5vZmZzZXRIZWlnaHQpOwogICAgICAgICAgfSwgNTAwKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBjbGVhckVycm9yOiBmdW5jdGlvbihlbCkgewogICAgICB2YXIgJGVsID0gJChlbCk7CiAgICAgIHZhciBkaXNwbGF5ID0gJGVsLmRhdGEoInJlc3RvcmUtZGlzcGxheS1tb2RlIik7CiAgICAgICRlbC5kYXRhKCJyZXN0b3JlLWRpc3BsYXktbW9kZSIsIG51bGwpOwoKICAgICAgaWYgKGRpc3BsYXkgPT09ICJpbmxpbmUiIHx8IGRpc3BsYXkgPT09ICJpbmxpbmUtYmxvY2siKSB7CiAgICAgICAgaWYgKGRpc3BsYXkpCiAgICAgICAgICAkZWwuY3NzKCJkaXNwbGF5IiwgZGlzcGxheSk7CiAgICAgICAgJChlbC5uZXh0U2libGluZykuZmlsdGVyKCIuaHRtbHdpZGdldHMtZXJyb3IiKS5yZW1vdmUoKTsKICAgICAgfSBlbHNlIGlmIChkaXNwbGF5ID09PSAiYmxvY2siKXsKICAgICAgICAkZWwuY3NzKCJ2aXNpYmlsaXR5IiwgImluaGVyaXQiKTsKICAgICAgICAkKGVsLm5leHRTaWJsaW5nKS5maWx0ZXIoIi5odG1sd2lkZ2V0cy1lcnJvciIpLnJlbW92ZSgpOwogICAgICB9CiAgICB9LAogICAgc2l6aW5nOiB7fQogIH07CgogIC8vIENhbGxlZCBieSB3aWRnZXQgYmluZGluZ3MgdG8gcmVnaXN0ZXIgYSBuZXcgdHlwZSBvZiB3aWRnZXQuIFRoZSBkZWZpbml0aW9uCiAgLy8gb2JqZWN0IGNhbiBjb250YWluIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczoKICAvLyAtIG5hbWUgKHJlcXVpcmVkKSAtIEEgc3RyaW5nIGluZGljYXRpbmcgdGhlIGJpbmRpbmcgbmFtZSwgd2hpY2ggd2lsbCBiZQogIC8vICAgdXNlZCBieSBkZWZhdWx0IGFzIHRoZSBDU1MgY2xhc3NuYW1lIHRvIGxvb2sgZm9yLgogIC8vIC0gaW5pdGlhbGl6ZSAob3B0aW9uYWwpIC0gQSBmdW5jdGlvbihlbCkgdGhhdCB3aWxsIGJlIGNhbGxlZCBvbmNlIHBlcgogIC8vICAgd2lkZ2V0IGVsZW1lbnQ7IGlmIGEgdmFsdWUgaXMgcmV0dXJuZWQsIGl0IHdpbGwgYmUgcGFzc2VkIGFzIHRoZSB0aGlyZAogIC8vICAgdmFsdWUgdG8gcmVuZGVyVmFsdWUuCiAgLy8gLSByZW5kZXJWYWx1ZSAocmVxdWlyZWQpIC0gQSBmdW5jdGlvbihlbCwgZGF0YSwgaW5pdFZhbHVlKSB0aGF0IHdpbGwgYmUKICAvLyAgIGNhbGxlZCB3aXRoIGRhdGEuIFN0YXRpYyBjb250ZXh0cyB3aWxsIGNhdXNlIHRoaXMgdG8gYmUgY2FsbGVkIG9uY2UgcGVyCiAgLy8gICBlbGVtZW50OyBTaGlueSBhcHBzIHdpbGwgY2F1c2UgdGhpcyB0byBiZSBjYWxsZWQgbXVsdGlwbGUgdGltZXMgcGVyCiAgLy8gICBlbGVtZW50LCBhcyB0aGUgZGF0YSBjaGFuZ2VzLgogIHdpbmRvdy5IVE1MV2lkZ2V0cy53aWRnZXQgPSBmdW5jdGlvbihkZWZpbml0aW9uKSB7CiAgICBpZiAoIWRlZmluaXRpb24ubmFtZSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIldpZGdldCBtdXN0IGhhdmUgYSBuYW1lIik7CiAgICB9CiAgICBpZiAoIWRlZmluaXRpb24udHlwZSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIldpZGdldCBtdXN0IGhhdmUgYSB0eXBlIik7CiAgICB9CiAgICAvLyBDdXJyZW50bHkgd2Ugb25seSBzdXBwb3J0IG91dHB1dCB3aWRnZXRzCiAgICBpZiAoZGVmaW5pdGlvbi50eXBlICE9PSAib3V0cHV0IikgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIlVucmVjb2duaXplZCB3aWRnZXQgdHlwZSAnIiArIGRlZmluaXRpb24udHlwZSArICInIik7CiAgICB9CiAgICAvLyBUT0RPOiBWZXJpZnkgdGhhdCAubmFtZSBpcyBhIHZhbGlkIENTUyBjbGFzc25hbWUKCiAgICAvLyBTdXBwb3J0IG5ldy1zdHlsZSBpbnN0YW5jZS1ib3VuZCBkZWZpbml0aW9ucy4gT2xkLXN0eWxlIGNsYXNzLWJvdW5kCiAgICAvLyBkZWZpbml0aW9ucyBoYXZlIG9uZSB3aWRnZXQgIm9iamVjdCIgcGVyIHdpZGdldCBwZXIgdHlwZS9jbGFzcyBvZgogICAgLy8gd2lkZ2V0OyB0aGUgcmVuZGVyVmFsdWUgYW5kIHJlc2l6ZSBtZXRob2RzIG9uIHN1Y2ggd2lkZ2V0IG9iamVjdHMKICAgIC8vIHRha2UgZWwgYW5kIGluc3RhbmNlIGFyZ3VtZW50cywgYmVjYXVzZSB0aGUgd2lkZ2V0IG9iamVjdCBjYW4ndAogICAgLy8gc3RvcmUgdGhlbS4gTmV3LXN0eWxlIGluc3RhbmNlLWJvdW5kIGRlZmluaXRpb25zIGhhdmUgb25lIHdpZGdldAogICAgLy8gb2JqZWN0IHBlciB3aWRnZXQgaW5zdGFuY2U7IHRoZSBkZWZpbml0aW9uIHRoYXQncyBwYXNzZWQgaW4gZG9lc24ndAogICAgLy8gcHJvdmlkZSByZW5kZXJWYWx1ZSBvciByZXNpemUgbWV0aG9kcyBhdCBhbGwsIGp1c3QgdGhlIHNpbmdsZSBtZXRob2QKICAgIC8vICAgZmFjdG9yeShlbCwgd2lkdGgsIGhlaWdodCkKICAgIC8vIHdoaWNoIHJldHVybnMgYW4gb2JqZWN0IHRoYXQgaGFzIHJlbmRlclZhbHVlKHgpIGFuZCByZXNpemUodywgaCkuCiAgICAvLyBUaGlzIGVuYWJsZXMgYSBmYXIgbW9yZSBuYXR1cmFsIHByb2dyYW1taW5nIHN0eWxlIGZvciB0aGUgd2lkZ2V0CiAgICAvLyBhdXRob3IsIHdobyBjYW4gc3RvcmUgcGVyLWluc3RhbmNlIHN0YXRlIHVzaW5nIGVpdGhlciBPTy1zdHlsZQogICAgLy8gaW5zdGFuY2UgZmllbGRzIG9yIGZ1bmN0aW9uYWwtc3R5bGUgY2xvc3VyZSB2YXJpYWJsZXMgKEkgZ3Vlc3MgdGhpcwogICAgLy8gaXMgaW4gY29udHJhc3QgdG8gd2hhdCBjYW4gb25seSBiZSBjYWxsZWQgQy1zdHlsZSBwc2V1ZG8tT08gd2hpY2ggaXMKICAgIC8vIHdoYXQgd2UgcmVxdWlyZWQgYmVmb3JlKS4KICAgIGlmIChkZWZpbml0aW9uLmZhY3RvcnkpIHsKICAgICAgZGVmaW5pdGlvbiA9IGNyZWF0ZUxlZ2FjeURlZmluaXRpb25BZGFwdGVyKGRlZmluaXRpb24pOwogICAgfQoKICAgIGlmICghZGVmaW5pdGlvbi5yZW5kZXJWYWx1ZSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIldpZGdldCBtdXN0IGhhdmUgYSByZW5kZXJWYWx1ZSBmdW5jdGlvbiIpOwogICAgfQoKICAgIC8vIEZvciBzdGF0aWMgcmVuZGVyaW5nIChub24tU2hpbnkpLCB1c2UgYSBzaW1wbGUgd2lkZ2V0IHJlZ2lzdHJhdGlvbgogICAgLy8gc2NoZW1lLiBXZSBhbHNvIHVzZSB0aGlzIHNjaGVtZSBmb3IgU2hpbnkgYXBwcy9kb2N1bWVudHMgdGhhdCBhbHNvCiAgICAvLyBjb250YWluIHN0YXRpYyB3aWRnZXRzLgogICAgd2luZG93LkhUTUxXaWRnZXRzLndpZGdldHMgPSB3aW5kb3cuSFRNTFdpZGdldHMud2lkZ2V0cyB8fCBbXTsKICAgIC8vIE1lcmdlIGRlZmF1bHRzIGludG8gdGhlIGRlZmluaXRpb247IGRvbid0IG11dGF0ZSB0aGUgb3JpZ2luYWwgZGVmaW5pdGlvbi4KICAgIHZhciBzdGF0aWNCaW5kaW5nID0gZXh0ZW5kKHt9LCBkZWZhdWx0cywgZGVmaW5pdGlvbik7CiAgICBvdmVycmlkZU1ldGhvZChzdGF0aWNCaW5kaW5nLCAiZmluZCIsIGZ1bmN0aW9uKHN1cGVyZnVuYykgewogICAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUpIHsKICAgICAgICB2YXIgcmVzdWx0cyA9IHN1cGVyZnVuYyhzY29wZSk7CiAgICAgICAgLy8gRmlsdGVyIG91dCBTaGlueSBvdXRwdXRzLCB3ZSBvbmx5IHdhbnQgdGhlIHN0YXRpYyBraW5kCiAgICAgICAgcmV0dXJuIGZpbHRlckJ5Q2xhc3MocmVzdWx0cywgImh0bWwtd2lkZ2V0LW91dHB1dCIsIGZhbHNlKTsKICAgICAgfTsKICAgIH0pOwogICAgd2luZG93LkhUTUxXaWRnZXRzLndpZGdldHMucHVzaChzdGF0aWNCaW5kaW5nKTsKCiAgICBpZiAoc2hpbnlNb2RlKSB7CiAgICAgIC8vIFNoaW55IGlzIHJ1bm5pbmcuIFJlZ2lzdGVyIHRoZSBkZWZpbml0aW9uIHdpdGggYW4gb3V0cHV0IGJpbmRpbmcuCiAgICAgIC8vIFRoZSBkZWZpbml0aW9uIGl0c2VsZiB3aWxsIG5vdCBiZSB0aGUgb3V0cHV0IGJpbmRpbmcsIGluc3RlYWQKICAgICAgLy8gd2Ugd2lsbCBtYWtlIGFuIG91dHB1dCBiaW5kaW5nIG9iamVjdCB0aGF0IGRlbGVnYXRlcyB0byB0aGUKICAgICAgLy8gZGVmaW5pdGlvbi4gVGhpcyBpcyBiZWNhdXNlIHdlIGZvb2xpc2hseSB1c2VkIHRoZSBzYW1lIG1ldGhvZAogICAgICAvLyBuYW1lIChyZW5kZXJWYWx1ZSkgZm9yIGh0bWx3aWRnZXRzIGRlZmluaXRpb24gYW5kIFNoaW55IGJpbmRpbmdzCiAgICAgIC8vIGJ1dCB0aGV5IGFjdHVhbGx5IGhhdmUgcXVpdGUgZGlmZmVyZW50IHNlbWFudGljcyAodGhlIFNoaW55CiAgICAgIC8vIGJpbmRpbmdzIHJlY2VpdmUgZGF0YSB0aGF0IGluY2x1ZGVzIGxvdHMgb2YgbWV0YWRhdGEgdGhhdCBpdAogICAgICAvLyBzdHJpcHMgb2ZmIGJlZm9yZSBjYWxsaW5nIGh0bWx3aWRnZXRzIHJlbmRlclZhbHVlKS4gV2UgY2FuJ3QKICAgICAgLy8ganVzdCBpZ25vcmUgdGhlIGRpZmZlcmVuY2UgYmVjYXVzZSBpbiBzb21lIHdpZGdldHMgaXQncyBoZWxwZnVsCiAgICAgIC8vIHRvIGNhbGwgdGhpcy5yZW5kZXJWYWx1ZSgpIGZyb20gaW5zaWRlIG9mIHJlc2l6ZSgpLCBhbmQgaWYKICAgICAgLy8gd2UncmUgbm90IGRlbGVnYXRpbmcsIHRoZW4gdGhhdCBjYWxsIHdpbGwgZ28gdG8gdGhlIFNoaW55CiAgICAgIC8vIHZlcnNpb24gaW5zdGVhZCBvZiB0aGUgaHRtbHdpZGdldHMgdmVyc2lvbi4KCiAgICAgIC8vIE1lcmdlIGRlZmF1bHRzIHdpdGggZGVmaW5pdGlvbiwgd2l0aG91dCBtdXRhdGluZyBlaXRoZXIuCiAgICAgIHZhciBiaW5kaW5nRGVmID0gZXh0ZW5kKHt9LCBkZWZhdWx0cywgZGVmaW5pdGlvbik7CgogICAgICAvLyBUaGlzIG9iamVjdCB3aWxsIGJlIG91ciBhY3R1YWwgU2hpbnkgYmluZGluZy4KICAgICAgdmFyIHNoaW55QmluZGluZyA9IG5ldyBTaGlueS5PdXRwdXRCaW5kaW5nKCk7CgogICAgICAvLyBXaXRoIGEgZmV3IGV4Y2VwdGlvbnMsIHdlJ2xsIHdhbnQgdG8gc2ltcGx5IHVzZSB0aGUgYmluZGluZ0RlZidzCiAgICAgIC8vIHZlcnNpb24gb2YgbWV0aG9kcyBpZiB0aGV5IGFyZSBhdmFpbGFibGUsIG90aGVyd2lzZSBmYWxsIGJhY2sgdG8KICAgICAgLy8gU2hpbnkncyBkZWZhdWx0cy4gTk9URTogSWYgU2hpbnkncyBvdXRwdXQgYmluZGluZ3MgZ2FpbiBhZGRpdGlvbmFsCiAgICAgIC8vIG1ldGhvZHMgaW4gdGhlIGZ1dHVyZSwgYW5kIHdlIHdhbnQgdGhlbSB0byBiZSBvdmVycmlkZWFibGUgYnkKICAgICAgLy8gSFRNTFdpZGdldCBiaW5kaW5nIGRlZmluaXRpb25zLCB0aGVuIHdlJ2xsIG5lZWQgdG8gYWRkIHRoZW0gdG8gdGhpcwogICAgICAvLyBsaXN0LgogICAgICBkZWxlZ2F0ZU1ldGhvZChzaGlueUJpbmRpbmcsIGJpbmRpbmdEZWYsICJnZXRJZCIpOwogICAgICBkZWxlZ2F0ZU1ldGhvZChzaGlueUJpbmRpbmcsIGJpbmRpbmdEZWYsICJvblZhbHVlQ2hhbmdlIik7CiAgICAgIGRlbGVnYXRlTWV0aG9kKHNoaW55QmluZGluZywgYmluZGluZ0RlZiwgIm9uVmFsdWVFcnJvciIpOwogICAgICBkZWxlZ2F0ZU1ldGhvZChzaGlueUJpbmRpbmcsIGJpbmRpbmdEZWYsICJyZW5kZXJFcnJvciIpOwogICAgICBkZWxlZ2F0ZU1ldGhvZChzaGlueUJpbmRpbmcsIGJpbmRpbmdEZWYsICJjbGVhckVycm9yIik7CiAgICAgIGRlbGVnYXRlTWV0aG9kKHNoaW55QmluZGluZywgYmluZGluZ0RlZiwgInNob3dQcm9ncmVzcyIpOwoKICAgICAgLy8gVGhlIGZpbmQsIHJlbmRlclZhbHVlLCBhbmQgcmVzaXplIGFyZSBoYW5kbGVkIGRpZmZlcmVudGx5LCBiZWNhdXNlIHdlCiAgICAgIC8vIHdhbnQgdG8gYWN0dWFsbHkgZGVjb3JhdGUgdGhlIGJlaGF2aW9yIG9mIHRoZSBiaW5kaW5nRGVmIG1ldGhvZHMuCgogICAgICBzaGlueUJpbmRpbmcuZmluZCA9IGZ1bmN0aW9uKHNjb3BlKSB7CiAgICAgICAgdmFyIHJlc3VsdHMgPSBiaW5kaW5nRGVmLmZpbmQoc2NvcGUpOwoKICAgICAgICAvLyBPbmx5IHJldHVybiBlbGVtZW50cyB0aGF0IGFyZSBTaGlueSBvdXRwdXRzLCBub3Qgc3RhdGljIG9uZXMKICAgICAgICB2YXIgZHluYW1pY1Jlc3VsdHMgPSByZXN1bHRzLmZpbHRlcigiLmh0bWwtd2lkZ2V0LW91dHB1dCIpOwoKICAgICAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgd2hhdGV2ZXIgY2F1c2VkIFNoaW55IHRvIHRoaW5rIHRoZXJlIG1pZ2h0IGJlCiAgICAgICAgLy8gbmV3IGR5bmFtaWMgb3V0cHV0cywgYWxzbyBjYXVzZWQgdGhlcmUgdG8gYmUgbmV3IHN0YXRpYyBvdXRwdXRzLgogICAgICAgIC8vIFNpbmNlIHRoZXJlIG1pZ2h0IGJlIGxvdHMgb2YgZGlmZmVyZW50IGh0bWx3aWRnZXRzIGJpbmRpbmdzLCB3ZQogICAgICAgIC8vIHNjaGVkdWxlIGV4ZWN1dGlvbiBmb3IgbGF0ZXItLW5vIG5lZWQgdG8gc3RhdGljUmVuZGVyIG11bHRpcGxlCiAgICAgICAgLy8gdGltZXMuCiAgICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoICE9PSBkeW5hbWljUmVzdWx0cy5sZW5ndGgpCiAgICAgICAgICBzY2hlZHVsZVN0YXRpY1JlbmRlcigpOwoKICAgICAgICByZXR1cm4gZHluYW1pY1Jlc3VsdHM7CiAgICAgIH07CgogICAgICAvLyBXcmFwIHJlbmRlclZhbHVlIHRvIGhhbmRsZSBpbml0aWFsaXphdGlvbiwgd2hpY2ggdW5mb3J0dW5hdGVseSBpc24ndAogICAgICAvLyBzdXBwb3J0ZWQgbmF0aXZlbHkgYnkgU2hpbnkgYXQgdGhlIHRpbWUgb2YgdGhpcyB3cml0aW5nLgoKICAgICAgc2hpbnlCaW5kaW5nLnJlbmRlclZhbHVlID0gZnVuY3Rpb24oZWwsIGRhdGEpIHsKICAgICAgICBTaGlueS5yZW5kZXJEZXBlbmRlbmNpZXMoZGF0YS5kZXBzKTsKICAgICAgICAvLyBSZXNvbHZlIHN0cmluZ3MgbWFya2VkIGFzIGphdmFzY3JpcHQgbGl0ZXJhbHMgdG8gb2JqZWN0cwogICAgICAgIGlmICghKGRhdGEuZXZhbHMgaW5zdGFuY2VvZiBBcnJheSkpIGRhdGEuZXZhbHMgPSBbZGF0YS5ldmFsc107CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGRhdGEuZXZhbHMgJiYgaSA8IGRhdGEuZXZhbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5ldmFsdWF0ZVN0cmluZ01lbWJlcihkYXRhLngsIGRhdGEuZXZhbHNbaV0pOwogICAgICAgIH0KICAgICAgICBpZiAoIWJpbmRpbmdEZWYucmVuZGVyT25OdWxsVmFsdWUpIHsKICAgICAgICAgIGlmIChkYXRhLnggPT09IG51bGwpIHsKICAgICAgICAgICAgZWwuc3R5bGUudmlzaWJpbGl0eSA9ICJoaWRkZW4iOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBlbC5zdHlsZS52aXNpYmlsaXR5ID0gImluaGVyaXQiOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoIWVsZW1lbnREYXRhKGVsLCAiaW5pdGlhbGl6ZWQiKSkgewogICAgICAgICAgaW5pdFNpemluZyhlbCk7CgogICAgICAgICAgZWxlbWVudERhdGEoZWwsICJpbml0aWFsaXplZCIsIHRydWUpOwogICAgICAgICAgaWYgKGJpbmRpbmdEZWYuaW5pdGlhbGl6ZSkgewogICAgICAgICAgICB2YXIgcmVzdWx0ID0gYmluZGluZ0RlZi5pbml0aWFsaXplKGVsLCBlbC5vZmZzZXRXaWR0aCwKICAgICAgICAgICAgICBlbC5vZmZzZXRIZWlnaHQpOwogICAgICAgICAgICBlbGVtZW50RGF0YShlbCwgImluaXRfcmVzdWx0IiwgcmVzdWx0KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgYmluZGluZ0RlZi5yZW5kZXJWYWx1ZShlbCwgZGF0YS54LCBlbGVtZW50RGF0YShlbCwgImluaXRfcmVzdWx0IikpOwogICAgICAgIGV2YWxBbmRSdW4oZGF0YS5qc0hvb2tzLnJlbmRlciwgZWxlbWVudERhdGEoZWwsICJpbml0X3Jlc3VsdCIpLCBbZWwsIGRhdGEueF0pOwogICAgICB9OwoKICAgICAgLy8gT25seSBvdmVycmlkZSByZXNpemUgaWYgYmluZGluZ0RlZiBpbXBsZW1lbnRzIGl0CiAgICAgIGlmIChiaW5kaW5nRGVmLnJlc2l6ZSkgewogICAgICAgIHNoaW55QmluZGluZy5yZXNpemUgPSBmdW5jdGlvbihlbCwgd2lkdGgsIGhlaWdodCkgewogICAgICAgICAgLy8gU2hpbnkgY2FuIGNhbGwgcmVzaXplIGJlZm9yZSBpbml0aWFsaXplL3JlbmRlclZhbHVlIGhhdmUgYmVlbgogICAgICAgICAgLy8gY2FsbGVkLCB3aGljaCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIHdpZGdldHMuCiAgICAgICAgICBpZiAoZWxlbWVudERhdGEoZWwsICJpbml0aWFsaXplZCIpKSB7CiAgICAgICAgICAgIGJpbmRpbmdEZWYucmVzaXplKGVsLCB3aWR0aCwgaGVpZ2h0LCBlbGVtZW50RGF0YShlbCwgImluaXRfcmVzdWx0IikpOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIFNoaW55Lm91dHB1dEJpbmRpbmdzLnJlZ2lzdGVyKHNoaW55QmluZGluZywgYmluZGluZ0RlZi5uYW1lKTsKICAgIH0KICB9OwoKICB2YXIgc2NoZWR1bGVTdGF0aWNSZW5kZXJUaW1lcklkID0gbnVsbDsKICBmdW5jdGlvbiBzY2hlZHVsZVN0YXRpY1JlbmRlcigpIHsKICAgIGlmICghc2NoZWR1bGVTdGF0aWNSZW5kZXJUaW1lcklkKSB7CiAgICAgIHNjaGVkdWxlU3RhdGljUmVuZGVyVGltZXJJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgc2NoZWR1bGVTdGF0aWNSZW5kZXJUaW1lcklkID0gbnVsbDsKICAgICAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7CiAgICAgIH0sIDEpOwogICAgfQogIH0KCiAgLy8gUmVuZGVyIHN0YXRpYyB3aWRnZXRzIGFmdGVyIHRoZSBkb2N1bWVudCBmaW5pc2hlcyBsb2FkaW5nCiAgLy8gU3RhdGljYWxseSByZW5kZXIgYWxsIGVsZW1lbnRzIHRoYXQgYXJlIG9mIHRoaXMgd2lkZ2V0J3MgY2xhc3MKICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgYmluZGluZ3MgPSB3aW5kb3cuSFRNTFdpZGdldHMud2lkZ2V0cyB8fCBbXTsKICAgIGZvckVhY2goYmluZGluZ3MsIGZ1bmN0aW9uKGJpbmRpbmcpIHsKICAgICAgdmFyIG1hdGNoZXMgPSBiaW5kaW5nLmZpbmQoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTsKICAgICAgZm9yRWFjaChtYXRjaGVzLCBmdW5jdGlvbihlbCkgewogICAgICAgIHZhciBzaXplT2JqID0gaW5pdFNpemluZyhlbCwgYmluZGluZyk7CgogICAgICAgIGlmIChoYXNDbGFzcyhlbCwgImh0bWwtd2lkZ2V0LXN0YXRpYy1ib3VuZCIpKQogICAgICAgICAgcmV0dXJuOwogICAgICAgIGVsLmNsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZSArICIgaHRtbC13aWRnZXQtc3RhdGljLWJvdW5kIjsKCiAgICAgICAgdmFyIGluaXRSZXN1bHQ7CiAgICAgICAgaWYgKGJpbmRpbmcuaW5pdGlhbGl6ZSkgewogICAgICAgICAgaW5pdFJlc3VsdCA9IGJpbmRpbmcuaW5pdGlhbGl6ZShlbCwKICAgICAgICAgICAgc2l6ZU9iaiA/IHNpemVPYmouZ2V0V2lkdGgoKSA6IGVsLm9mZnNldFdpZHRoLAogICAgICAgICAgICBzaXplT2JqID8gc2l6ZU9iai5nZXRIZWlnaHQoKSA6IGVsLm9mZnNldEhlaWdodAogICAgICAgICAgKTsKICAgICAgICAgIGVsZW1lbnREYXRhKGVsLCAiaW5pdF9yZXN1bHQiLCBpbml0UmVzdWx0KTsKICAgICAgICB9CgogICAgICAgIGlmIChiaW5kaW5nLnJlc2l6ZSkgewogICAgICAgICAgdmFyIGxhc3RTaXplID0gewogICAgICAgICAgICB3OiBzaXplT2JqID8gc2l6ZU9iai5nZXRXaWR0aCgpIDogZWwub2Zmc2V0V2lkdGgsCiAgICAgICAgICAgIGg6IHNpemVPYmogPyBzaXplT2JqLmdldEhlaWdodCgpIDogZWwub2Zmc2V0SGVpZ2h0CiAgICAgICAgICB9OwogICAgICAgICAgdmFyIHJlc2l6ZUhhbmRsZXIgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHZhciBzaXplID0gewogICAgICAgICAgICAgIHc6IHNpemVPYmogPyBzaXplT2JqLmdldFdpZHRoKCkgOiBlbC5vZmZzZXRXaWR0aCwKICAgICAgICAgICAgICBoOiBzaXplT2JqID8gc2l6ZU9iai5nZXRIZWlnaHQoKSA6IGVsLm9mZnNldEhlaWdodAogICAgICAgICAgICB9OwogICAgICAgICAgICBpZiAoc2l6ZS53ID09PSAwICYmIHNpemUuaCA9PT0gMCkKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIGlmIChzaXplLncgPT09IGxhc3RTaXplLncgJiYgc2l6ZS5oID09PSBsYXN0U2l6ZS5oKQogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgbGFzdFNpemUgPSBzaXplOwogICAgICAgICAgICBiaW5kaW5nLnJlc2l6ZShlbCwgc2l6ZS53LCBzaXplLmgsIGluaXRSZXN1bHQpOwogICAgICAgICAgfTsKCiAgICAgICAgICBvbih3aW5kb3csICJyZXNpemUiLCByZXNpemVIYW5kbGVyKTsKCiAgICAgICAgICAvLyBUaGlzIGlzIG5lZWRlZCBmb3IgY2FzZXMgd2hlcmUgd2UncmUgcnVubmluZyBpbiBhIFNoaW55CiAgICAgICAgICAvLyBhcHAsIGJ1dCB0aGUgd2lkZ2V0IGl0c2VsZiBpcyBub3QgYSBTaGlueSBvdXRwdXQsIGJ1dAogICAgICAgICAgLy8gcmF0aGVyIGEgc2ltcGxlIHN0YXRpYyB3aWRnZXQuIE9uZSBleGFtcGxlIG9mIHRoaXMgaXMKICAgICAgICAgIC8vIGFuIHJtYXJrZG93biBkb2N1bWVudCB0aGF0IGhhcyBydW50aW1lOnNoaW55IGFuZCB3aWRnZXQKICAgICAgICAgIC8vIHRoYXQgaXNuJ3QgaW4gYSByZW5kZXIgZnVuY3Rpb24uIFNoaW55IG9ubHkga25vd3MgdG8KICAgICAgICAgIC8vIGNhbGwgcmVzaXplIGhhbmRsZXJzIGZvciBTaGlueSBvdXRwdXRzLCBub3QgZm9yIHN0YXRpYwogICAgICAgICAgLy8gd2lkZ2V0cywgc28gd2UgZG8gaXQgb3Vyc2VsdmVzLgogICAgICAgICAgaWYgKHdpbmRvdy5qUXVlcnkpIHsKICAgICAgICAgICAgd2luZG93LmpRdWVyeShkb2N1bWVudCkub24oCiAgICAgICAgICAgICAgInNob3duLmh0bWx3aWRnZXRzIHNob3duLmJzLnRhYi5odG1sd2lkZ2V0cyBzaG93bi5icy5jb2xsYXBzZS5odG1sd2lkZ2V0cyIsCiAgICAgICAgICAgICAgcmVzaXplSGFuZGxlcgogICAgICAgICAgICApOwogICAgICAgICAgICB3aW5kb3cualF1ZXJ5KGRvY3VtZW50KS5vbigKICAgICAgICAgICAgICAiaGlkZGVuLmh0bWx3aWRnZXRzIGhpZGRlbi5icy50YWIuaHRtbHdpZGdldHMgaGlkZGVuLmJzLmNvbGxhcHNlLmh0bWx3aWRnZXRzIiwKICAgICAgICAgICAgICByZXNpemVIYW5kbGVyCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gVGhpcyBpcyBuZWVkZWQgZm9yIHRoZSBzcGVjaWZpYyBjYXNlIG9mIGlvc2xpZGVzLCB3aGljaAogICAgICAgICAgLy8gZmxpcHMgc2xpZGVzIGJldHdlZW4gZGlzcGxheTpub25lIGFuZCBkaXNwbGF5OmJsb2NrLgogICAgICAgICAgLy8gSWRlYWxseSB3ZSB3b3VsZCBub3QgaGF2ZSB0byBoYXZlIGlvc2xpZGUtc3BlY2lmaWMgY29kZQogICAgICAgICAgLy8gaGVyZSwgYnV0IHJhdGhlciBoYXZlIGlvc2xpZGVzIHJhaXNlIGEgZ2VuZXJpYyBldmVudCwKICAgICAgICAgIC8vIGJ1dCB0aGUgcm1hcmtkb3duIHBhY2thZ2UganVzdCB3ZW50IHRvIENSQU4gc28gdGhlCiAgICAgICAgICAvLyB3aW5kb3cgdG8gZ2V0dGluZyB0aGF0IGZpeGVkIG1heSBiZSBsb25nLgogICAgICAgICAgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7CiAgICAgICAgICAgIC8vIEl0J3MgT0sgdG8gbGltaXQgdGhpcyB0byB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcgogICAgICAgICAgICAvLyBicm93c2VycyBiZWNhdXNlIGlvc2xpZGVzIGl0c2VsZiBvbmx5IHN1cHBvcnRzCiAgICAgICAgICAgIC8vIHN1Y2ggYnJvd3NlcnMuCiAgICAgICAgICAgIG9uKGRvY3VtZW50LCAic2xpZGVlbnRlciIsIHJlc2l6ZUhhbmRsZXIpOwogICAgICAgICAgICBvbihkb2N1bWVudCwgInNsaWRlbGVhdmUiLCByZXNpemVIYW5kbGVyKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciBzY3JpcHREYXRhID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcigic2NyaXB0W2RhdGEtZm9yPSciICsgZWwuaWQgKyAiJ11bdHlwZT0nYXBwbGljYXRpb24vanNvbiddIik7CiAgICAgICAgaWYgKHNjcmlwdERhdGEpIHsKICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShzY3JpcHREYXRhLnRleHRDb250ZW50IHx8IHNjcmlwdERhdGEudGV4dCk7CiAgICAgICAgICAvLyBSZXNvbHZlIHN0cmluZ3MgbWFya2VkIGFzIGphdmFzY3JpcHQgbGl0ZXJhbHMgdG8gb2JqZWN0cwogICAgICAgICAgaWYgKCEoZGF0YS5ldmFscyBpbnN0YW5jZW9mIEFycmF5KSkgZGF0YS5ldmFscyA9IFtkYXRhLmV2YWxzXTsKICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBkYXRhLmV2YWxzICYmIGsgPCBkYXRhLmV2YWxzLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5ldmFsdWF0ZVN0cmluZ01lbWJlcihkYXRhLngsIGRhdGEuZXZhbHNba10pOwogICAgICAgICAgfQogICAgICAgICAgYmluZGluZy5yZW5kZXJWYWx1ZShlbCwgZGF0YS54LCBpbml0UmVzdWx0KTsKICAgICAgICAgIGV2YWxBbmRSdW4oZGF0YS5qc0hvb2tzLnJlbmRlciwgaW5pdFJlc3VsdCwgW2VsLCBkYXRhLnhdKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CgogICAgaW52b2tlUG9zdFJlbmRlckhhbmRsZXJzKCk7CiAgfQoKCiAgZnVuY3Rpb24gaGFzX2pRdWVyeTMoKSB7CiAgICBpZiAoIXdpbmRvdy5qUXVlcnkpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgdmFyICR2ZXJzaW9uID0gd2luZG93LmpRdWVyeS5mbi5qcXVlcnk7CiAgICB2YXIgJG1ham9yX3ZlcnNpb24gPSBwYXJzZUludCgkdmVyc2lvbi5zcGxpdCgiLiIpWzBdKTsKICAgIHJldHVybiAkbWFqb3JfdmVyc2lvbiA+PSAzOwogIH0KCiAgLyoKICAvIFNoaW55IDEuNCBidW1wZWQgalF1ZXJ5IGZyb20gMS54IHRvIDMueCB3aGljaCBtZWFucyBqUXVlcnkncwogIC8gb24tcmVhZHkgaGFuZGxlciAoaS5lLiwgJChmbikpIGlzIG5vdyBhc3luY3Jvbm91cyAoaS5lLiwgaXQgbm93CiAgLyByZWFsbHkgbWVhbnMgJChzZXRUaW1lb3V0KGZuKSkuCiAgLyBodHRwczovL2pxdWVyeS5jb20vdXBncmFkZS1ndWlkZS8zLjAvI2JyZWFraW5nLWNoYW5nZS1kb2N1bWVudC1yZWFkeS1oYW5kbGVycy1hcmUtbm93LWFzeW5jaHJvbm91cwogIC8KICAvIFNpbmNlIFNoaW55IHVzZXMgJCgpIHRvIHNjaGVkdWxlIGluaXRTaGlueSwgc2hpbnk+PTEuNCBjYWxscyBpbml0U2hpbnkKICAvIG9uZSB0aWNrIGxhdGVyIHRoYW4gaXQgZGlkIGJlZm9yZSwgd2hpY2ggbWVhbnMgc3RhdGljUmVuZGVyKCkgaXMKICAvIGNhbGxlZCByZW5kZXJWYWx1ZSgpIGVhcmxpZXIgdGhhbiAoYWR2YW5jZWQpIHdpZGdldCBhdXRob3JzIG1pZ2h0IGJlIGV4cGVjdGluZy4KICAvIGh0dHBzOi8vZ2l0aHViLmNvbS9yc3R1ZGlvL3NoaW55L2lzc3Vlcy8yNjMwCiAgLwogIC8gRm9yIGEgY29uY3JldGUgZXhhbXBsZSwgbGVhZmxldCBoYXMgc29tZSBtZXRob2RzIChlLmcuLCB1cGRhdGVCb3VuZHMpCiAgLyB3aGljaCByZWZlcmVuY2UgU2hpbnkgbWV0aG9kcyByZWdpc3RlcmVkIGluIGluaXRTaGlueSAoZS5nLiwgc2V0SW5wdXRWYWx1ZSkuCiAgLyBTaW5jZSBsZWFmbGV0IGlzIHByaXZ5IHRvIHRoaXMgbGlmZS1jeWNsZSwgaXQga25vd3MgdG8gdXNlIHNldFRpbWVvdXQoKSB0bwogIC8gZGVsYXkgZXhlY3V0aW9uIG9mIHRob3NlIG1ldGhvZHMgKHVudGlsIFNoaW55IG1ldGhvZHMgYXJlIHJlYWR5KQogIC8gaHR0cHM6Ly9naXRodWIuY29tL3JzdHVkaW8vbGVhZmxldC9ibG9iLzE4ZWM5ODEvamF2YXNjcmlwdC9zcmMvaW5kZXguanMjTDI2Ni1MMjY4CiAgLwogIC8gSWRlYWxseSB3aWRnZXQgYXV0aG9ycyB3b3VsZG4ndCBuZWVkIHRvIHVzZSB0aGlzIHNldFRpbWVvdXQoKSBoYWNrIHRoYXQKICAvIGxlYWZsZXQgdXNlcyB0byBjYWxsIFNoaW55IG1ldGhvZHMgb24gYSBzdGF0aWNSZW5kZXIoKS4gSW4gdGhlIGxvbmcgcnVuLAogIC8gdGhlIGxvZ2ljIGluaXRTaGlueSBzaG91bGQgYmUgYnJva2VuIHVwIHNvIHRoYXQgbWV0aG9kIHJlZ2lzdHJhdGlvbiBoYXBwZW5zCiAgLyByaWdodCBhd2F5LCBidXQgYmluZGluZyBoYXBwZW5zIGxhdGVyLgogICovCiAgZnVuY3Rpb24gbWF5YmVTdGF0aWNSZW5kZXJMYXRlcigpIHsKICAgIGlmIChzaGlueU1vZGUgJiYgaGFzX2pRdWVyeTMoKSkgewogICAgICB3aW5kb3cualF1ZXJ5KHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIpOwogICAgfSBlbHNlIHsKICAgICAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlcigpOwogICAgfQogIH0KCiAgaWYgKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIpIHsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLCBmdW5jdGlvbigpIHsKICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsIGFyZ3VtZW50cy5jYWxsZWUsIGZhbHNlKTsKICAgICAgbWF5YmVTdGF0aWNSZW5kZXJMYXRlcigpOwogICAgfSwgZmFsc2UpOwogIH0gZWxzZSBpZiAoZG9jdW1lbnQuYXR0YWNoRXZlbnQpIHsKICAgIGRvY3VtZW50LmF0dGFjaEV2ZW50KCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCBmdW5jdGlvbigpIHsKICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICJjb21wbGV0ZSIpIHsKICAgICAgICBkb2N1bWVudC5kZXRhY2hFdmVudCgib25yZWFkeXN0YXRlY2hhbmdlIiwgYXJndW1lbnRzLmNhbGxlZSk7CiAgICAgICAgbWF5YmVTdGF0aWNSZW5kZXJMYXRlcigpOwogICAgICB9CiAgICB9KTsKICB9CgoKICB3aW5kb3cuSFRNTFdpZGdldHMuZ2V0QXR0YWNobWVudFVybCA9IGZ1bmN0aW9uKGRlcG5hbWUsIGtleSkgewogICAgLy8gSWYgbm8ga2V5LCBkZWZhdWx0IHRvIHRoZSBmaXJzdCBpdGVtCiAgICBpZiAodHlwZW9mKGtleSkgPT09ICJ1bmRlZmluZWQiKQogICAgICBrZXkgPSAxOwoKICAgIHZhciBsaW5rID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGVwbmFtZSArICItIiArIGtleSArICItYXR0YWNobWVudCIpOwogICAgaWYgKCFsaW5rKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiQXR0YWNobWVudCAiICsgZGVwbmFtZSArICIvIiArIGtleSArICIgbm90IGZvdW5kIGluIGRvY3VtZW50Iik7CiAgICB9CiAgICByZXR1cm4gbGluay5nZXRBdHRyaWJ1dGUoImhyZWYiKTsKICB9OwoKICB3aW5kb3cuSFRNTFdpZGdldHMuZGF0YWZyYW1lVG9EMyA9IGZ1bmN0aW9uKGRmKSB7CiAgICB2YXIgbmFtZXMgPSBbXTsKICAgIHZhciBsZW5ndGg7CiAgICBmb3IgKHZhciBuYW1lIGluIGRmKSB7CiAgICAgICAgaWYgKGRmLmhhc093blByb3BlcnR5KG5hbWUpKQogICAgICAgICAgICBuYW1lcy5wdXNoKG5hbWUpOwogICAgICAgIGlmICh0eXBlb2YoZGZbbmFtZV0pICE9PSAib2JqZWN0IiB8fCB0eXBlb2YoZGZbbmFtZV0ubGVuZ3RoKSA9PT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJBbGwgZmllbGRzIG11c3QgYmUgYXJyYXlzIik7CiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YobGVuZ3RoKSAhPT0gInVuZGVmaW5lZCIgJiYgbGVuZ3RoICE9PSBkZltuYW1lXS5sZW5ndGgpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJBbGwgZmllbGRzIG11c3QgYmUgYXJyYXlzIG9mIHRoZSBzYW1lIGxlbmd0aCIpOwogICAgICAgIH0KICAgICAgICBsZW5ndGggPSBkZltuYW1lXS5sZW5ndGg7CiAgICB9CiAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgdmFyIGl0ZW07CiAgICBmb3IgKHZhciByb3cgPSAwOyByb3cgPCBsZW5ndGg7IHJvdysrKSB7CiAgICAgICAgaXRlbSA9IHt9OwogICAgICAgIGZvciAodmFyIGNvbCA9IDA7IGNvbCA8IG5hbWVzLmxlbmd0aDsgY29sKyspIHsKICAgICAgICAgICAgaXRlbVtuYW1lc1tjb2xdXSA9IGRmW25hbWVzW2NvbF1dW3Jvd107CiAgICAgICAgfQogICAgICAgIHJlc3VsdHMucHVzaChpdGVtKTsKICAgIH0KICAgIHJldHVybiByZXN1bHRzOwogIH07CgogIHdpbmRvdy5IVE1MV2lkZ2V0cy50cmFuc3Bvc2VBcnJheTJEID0gZnVuY3Rpb24oYXJyYXkpIHsKICAgICAgaWYgKGFycmF5Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIGFycmF5OwogICAgICB2YXIgbmV3QXJyYXkgPSBhcnJheVswXS5tYXAoZnVuY3Rpb24oY29sLCBpKSB7CiAgICAgICAgICByZXR1cm4gYXJyYXkubWFwKGZ1bmN0aW9uKHJvdykgewogICAgICAgICAgICAgIHJldHVybiByb3dbaV0KICAgICAgICAgIH0pCiAgICAgIH0pOwogICAgICByZXR1cm4gbmV3QXJyYXk7CiAgfTsKICAvLyBTcGxpdCB2YWx1ZSBhdCBzcGxpdENoYXIsIGJ1dCBhbGxvdyBzcGxpdENoYXIgdG8gYmUgZXNjYXBlZAogIC8vIHVzaW5nIGVzY2FwZUNoYXIuIEFueSBvdGhlciBjaGFyYWN0ZXJzIGVzY2FwZWQgYnkgZXNjYXBlQ2hhcgogIC8vIHdpbGwgYmUgaW5jbHVkZWQgYXMgdXN1YWwgKGluY2x1ZGluZyBlc2NhcGVDaGFyIGl0c2VsZikuCiAgZnVuY3Rpb24gc3BsaXRXaXRoRXNjYXBlKHZhbHVlLCBzcGxpdENoYXIsIGVzY2FwZUNoYXIpIHsKICAgIHZhciByZXN1bHRzID0gW107CiAgICB2YXIgZXNjYXBlTW9kZSA9IGZhbHNlOwogICAgdmFyIGN1cnJlbnRSZXN1bHQgPSAiIjsKICAgIGZvciAodmFyIHBvcyA9IDA7IHBvcyA8IHZhbHVlLmxlbmd0aDsgcG9zKyspIHsKICAgICAgaWYgKCFlc2NhcGVNb2RlKSB7CiAgICAgICAgaWYgKHZhbHVlW3Bvc10gPT09IHNwbGl0Q2hhcikgewogICAgICAgICAgcmVzdWx0cy5wdXNoKGN1cnJlbnRSZXN1bHQpOwogICAgICAgICAgY3VycmVudFJlc3VsdCA9ICIiOwogICAgICAgIH0gZWxzZSBpZiAodmFsdWVbcG9zXSA9PT0gZXNjYXBlQ2hhcikgewogICAgICAgICAgZXNjYXBlTW9kZSA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGN1cnJlbnRSZXN1bHQgKz0gdmFsdWVbcG9zXTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY3VycmVudFJlc3VsdCArPSB2YWx1ZVtwb3NdOwogICAgICAgIGVzY2FwZU1vZGUgPSBmYWxzZTsKICAgICAgfQogICAgfQogICAgaWYgKGN1cnJlbnRSZXN1bHQgIT09ICIiKSB7CiAgICAgIHJlc3VsdHMucHVzaChjdXJyZW50UmVzdWx0KTsKICAgIH0KICAgIHJldHVybiByZXN1bHRzOwogIH0KICAvLyBGdW5jdGlvbiBhdXRob3JlZCBieSBZaWh1aS9KSiBBbGxhaXJlCiAgd2luZG93LkhUTUxXaWRnZXRzLmV2YWx1YXRlU3RyaW5nTWVtYmVyID0gZnVuY3Rpb24obywgbWVtYmVyKSB7CiAgICB2YXIgcGFydHMgPSBzcGxpdFdpdGhFc2NhcGUobWVtYmVyLCAnLicsICdcXCcpOwogICAgZm9yICh2YXIgaSA9IDAsIGwgPSBwYXJ0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgdmFyIHBhcnQgPSBwYXJ0c1tpXTsKICAgICAgLy8gcGFydCBtYXkgYmUgYSBjaGFyYWN0ZXIgb3IgJ251bWVyaWMnIG1lbWJlciBuYW1lCiAgICAgIGlmIChvICE9PSBudWxsICYmIHR5cGVvZiBvID09PSAib2JqZWN0IiAmJiBwYXJ0IGluIG8pIHsKICAgICAgICBpZiAoaSA9PSAobCAtIDEpKSB7IC8vIGlmIHdlIGFyZSBhdCB0aGUgZW5kIG9mIHRoZSBsaW5lIHRoZW4gZXZhbHVsYXRlCiAgICAgICAgICBpZiAodHlwZW9mIG9bcGFydF0gPT09ICJzdHJpbmciKQogICAgICAgICAgICBvW3BhcnRdID0gdHJ5RXZhbChvW3BhcnRdKTsKICAgICAgICB9IGVsc2UgeyAvLyBvdGhlcndpc2UgY29udGludWUgdG8gbmV4dCBlbWJlZGRlZCBvYmplY3QKICAgICAgICAgIG8gPSBvW3BhcnRdOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIC8vIFJldHJpZXZlIHRoZSBIVE1MV2lkZ2V0IGluc3RhbmNlIChpLmUuIHRoZSByZXR1cm4gdmFsdWUgb2YgYW4KICAvLyBIVE1MV2lkZ2V0IGJpbmRpbmcncyBpbml0aWFsaXplKCkgb3IgZmFjdG9yeSgpIGZ1bmN0aW9uKQogIC8vIGFzc29jaWF0ZWQgd2l0aCBhbiBlbGVtZW50LCBvciBudWxsIGlmIG5vbmUuCiAgd2luZG93LkhUTUxXaWRnZXRzLmdldEluc3RhbmNlID0gZnVuY3Rpb24oZWwpIHsKICAgIHJldHVybiBlbGVtZW50RGF0YShlbCwgImluaXRfcmVzdWx0Iik7CiAgfTsKCiAgLy8gRmluZHMgdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIHNjb3BlIHRoYXQgbWF0Y2hlcyB0aGUgc2VsZWN0b3IsCiAgLy8gYW5kIHJldHVybnMgdGhlIEhUTUxXaWRnZXQgaW5zdGFuY2UgKGkuZS4gdGhlIHJldHVybiB2YWx1ZSBvZgogIC8vIGFuIEhUTUxXaWRnZXQgYmluZGluZydzIGluaXRpYWxpemUoKSBvciBmYWN0b3J5KCkgZnVuY3Rpb24pCiAgLy8gYXNzb2NpYXRlZCB3aXRoIHRoYXQgZWxlbWVudCwgaWYgYW55LiBJZiBubyBlbGVtZW50IG1hdGNoZXMgdGhlCiAgLy8gc2VsZWN0b3IsIG9yIHRoZSBmaXJzdCBtYXRjaGluZyBlbGVtZW50IGhhcyBubyBIVE1MV2lkZ2V0CiAgLy8gaW5zdGFuY2UgYXNzb2NpYXRlZCB3aXRoIGl0LCB0aGVuIG51bGwgaXMgcmV0dXJuZWQuCiAgLy8KICAvLyBUaGUgc2NvcGUgYXJndW1lbnQgaXMgb3B0aW9uYWwsIGFuZCBkZWZhdWx0cyB0byB3aW5kb3cuZG9jdW1lbnQuCiAgd2luZG93LkhUTUxXaWRnZXRzLmZpbmQgPSBmdW5jdGlvbihzY29wZSwgc2VsZWN0b3IpIHsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDEpIHsKICAgICAgc2VsZWN0b3IgPSBzY29wZTsKICAgICAgc2NvcGUgPSBkb2N1bWVudDsKICAgIH0KCiAgICB2YXIgZWwgPSBzY29wZS5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTsKICAgIGlmIChlbCA9PT0gbnVsbCkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiB3aW5kb3cuSFRNTFdpZGdldHMuZ2V0SW5zdGFuY2UoZWwpOwogICAgfQogIH07CgogIC8vIEZpbmRzIGFsbCBlbGVtZW50cyBpbiB0aGUgc2NvcGUgdGhhdCBtYXRjaCB0aGUgc2VsZWN0b3IsIGFuZAogIC8vIHJldHVybnMgdGhlIEhUTUxXaWRnZXQgaW5zdGFuY2VzIChpLmUuIHRoZSByZXR1cm4gdmFsdWVzIG9mCiAgLy8gYW4gSFRNTFdpZGdldCBiaW5kaW5nJ3MgaW5pdGlhbGl6ZSgpIG9yIGZhY3RvcnkoKSBmdW5jdGlvbikKICAvLyBhc3NvY2lhdGVkIHdpdGggdGhlIGVsZW1lbnRzLCBpbiBhbiBhcnJheS4gSWYgZWxlbWVudHMgdGhhdAogIC8vIG1hdGNoIHRoZSBzZWxlY3RvciBkb24ndCBoYXZlIGFuIGFzc29jaWF0ZWQgSFRNTFdpZGdldAogIC8vIGluc3RhbmNlLCB0aGUgcmV0dXJuZWQgYXJyYXkgd2lsbCBjb250YWluIG51bGxzLgogIC8vCiAgLy8gVGhlIHNjb3BlIGFyZ3VtZW50IGlzIG9wdGlvbmFsLCBhbmQgZGVmYXVsdHMgdG8gd2luZG93LmRvY3VtZW50LgogIHdpbmRvdy5IVE1MV2lkZ2V0cy5maW5kQWxsID0gZnVuY3Rpb24oc2NvcGUsIHNlbGVjdG9yKSB7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7CiAgICAgIHNlbGVjdG9yID0gc2NvcGU7CiAgICAgIHNjb3BlID0gZG9jdW1lbnQ7CiAgICB9CgogICAgdmFyIG5vZGVzID0gc2NvcGUucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7CiAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykgewogICAgICByZXN1bHRzLnB1c2god2luZG93LkhUTUxXaWRnZXRzLmdldEluc3RhbmNlKG5vZGVzW2ldKSk7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0czsKICB9OwoKICB2YXIgcG9zdFJlbmRlckhhbmRsZXJzID0gW107CiAgZnVuY3Rpb24gaW52b2tlUG9zdFJlbmRlckhhbmRsZXJzKCkgewogICAgd2hpbGUgKHBvc3RSZW5kZXJIYW5kbGVycy5sZW5ndGgpIHsKICAgICAgdmFyIGhhbmRsZXIgPSBwb3N0UmVuZGVySGFuZGxlcnMuc2hpZnQoKTsKICAgICAgaWYgKGhhbmRsZXIpIHsKICAgICAgICBoYW5kbGVyKCk7CiAgICAgIH0KICAgIH0KICB9CgogIC8vIFJlZ2lzdGVyIHRoZSBnaXZlbiBjYWxsYmFjayBmdW5jdGlvbiB0byBiZSBpbnZva2VkIGFmdGVyIHRoZQogIC8vIG5leHQgdGltZSBzdGF0aWMgd2lkZ2V0cyBhcmUgcmVuZGVyZWQuCiAgd2luZG93LkhUTUxXaWRnZXRzLmFkZFBvc3RSZW5kZXJIYW5kbGVyID0gZnVuY3Rpb24oY2FsbGJhY2spIHsKICAgIHBvc3RSZW5kZXJIYW5kbGVycy5wdXNoKGNhbGxiYWNrKTsKICB9OwoKICAvLyBUYWtlcyBhIG5ldy1zdHlsZSBpbnN0YW5jZS1ib3VuZCBkZWZpbml0aW9uLCBhbmQgcmV0dXJucyBhbgogIC8vIG9sZC1zdHlsZSBjbGFzcy1ib3VuZCBkZWZpbml0aW9uLiBUaGlzIHNhdmVzIHVzIGZyb20gaGF2aW5nCiAgLy8gdG8gcmV3cml0ZSBhbGwgdGhlIGxvZ2ljIGluIHRoaXMgZmlsZSB0byBhY2NvbW9kYXRlIGJvdGgKICAvLyB0eXBlcyBvZiBkZWZpbml0aW9ucy4KICBmdW5jdGlvbiBjcmVhdGVMZWdhY3lEZWZpbml0aW9uQWRhcHRlcihkZWZuKSB7CiAgICB2YXIgcmVzdWx0ID0gewogICAgICBuYW1lOiBkZWZuLm5hbWUsCiAgICAgIHR5cGU6IGRlZm4udHlwZSwKICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oZWwsIHdpZHRoLCBoZWlnaHQpIHsKICAgICAgICByZXR1cm4gZGVmbi5mYWN0b3J5KGVsLCB3aWR0aCwgaGVpZ2h0KTsKICAgICAgfSwKICAgICAgcmVuZGVyVmFsdWU6IGZ1bmN0aW9uKGVsLCB4LCBpbnN0YW5jZSkgewogICAgICAgIHJldHVybiBpbnN0YW5jZS5yZW5kZXJWYWx1ZSh4KTsKICAgICAgfSwKICAgICAgcmVzaXplOiBmdW5jdGlvbihlbCwgd2lkdGgsIGhlaWdodCwgaW5zdGFuY2UpIHsKICAgICAgICByZXR1cm4gaW5zdGFuY2UucmVzaXplKHdpZHRoLCBoZWlnaHQpOwogICAgICB9CiAgICB9OwoKICAgIGlmIChkZWZuLmZpbmQpCiAgICAgIHJlc3VsdC5maW5kID0gZGVmbi5maW5kOwogICAgaWYgKGRlZm4ucmVuZGVyRXJyb3IpCiAgICAgIHJlc3VsdC5yZW5kZXJFcnJvciA9IGRlZm4ucmVuZGVyRXJyb3I7CiAgICBpZiAoZGVmbi5jbGVhckVycm9yKQogICAgICByZXN1bHQuY2xlYXJFcnJvciA9IGRlZm4uY2xlYXJFcnJvcjsKCiAgICByZXR1cm4gcmVzdWx0OwogIH0KfSkoKTsKCg=="></script>
<script src="data:application/javascript;base64,ZnVuY3Rpb24gUjJEMyhlbCwgd2lkdGgsIGhlaWdodCkgewogIHZhciBzZWxmID0gdGhpczsKICB2YXIgeCA9IG51bGw7CiAgdmFyIHZlcnNpb24gPSBudWxsOwoKICBzZWxmLmRhdGEgPSBudWxsOwogIHNlbGYuc2hhZG93ID0gbnVsbDsKICBzZWxmLnJvb3QgPSBzZWxmLnN2ZyA9IHNlbGYuY2FudmFzID0gbnVsbDsKICBzZWxmLndpZHRoID0gd2lkdGg7CiAgc2VsZi5oZWlnaHQgPSBoZWlnaHQ7CiAgc2VsZi5vcHRpb25zID0gbnVsbDsKICBzZWxmLnJlc2l6ZXIgPSBudWxsOwogIHNlbGYucmVuZGVyZXIgPSBudWxsOwogIHNlbGYucmVuZGVyZXJEZWZhdXQgPSB0cnVlOwogIHNlbGYuY2FwdHVyZUVycm9ycyA9IG51bGw7CiAgc2VsZi50aGVtZSA9IHt9OwogIHNlbGYuc3R5bGUgPSBudWxsOwogIHNlbGYudXNlU2hhZG93ID0gdHJ1ZTsKCiAgc2VsZi5zZXRYID0gZnVuY3Rpb24obmV3WCkgewogICAgeCA9IG5ld1g7CiAgICBzZWxmLmRhdGEgPSB4LmRhdGE7CgogICAgaWYgKHgudHlwZSA9PSAiZGF0YS5mcmFtZSIpIHsKICAgICAgc2VsZi5kYXRhID0gSFRNTFdpZGdldHMuZGF0YWZyYW1lVG9EMyhzZWxmLmRhdGEpOwogICAgfQoKICAgIGlmICh4LnRoZW1lKSB7CiAgICAgIHNlbGYudGhlbWUgPSB0aGVtZUNhcGFibGUoKSA/IHgudGhlbWUucnVudGltZSA6IHgudGhlbWUuZGVmYXVsdDsKICAgIH0KCiAgICBzZWxmLm9wdGlvbnMgPSB4Lm9wdGlvbnM7CgogICAgaWYgKCF4LnVzZVNoYWRvdykgewogICAgICBzZWxmLnVzZVNoYWRvdyA9IGZhbHNlOwogICAgfQogIH07CgogIHNlbGYuc2V0Q29udGFpbmVyID0gZnVuY3Rpb24oY29udGFpbmVyKSB7CiAgICBzZWxmLmNvbnRhaW5lciA9IGNvbnRhaW5lcjsKICB9OwoKICBzZWxmLnNldFJvb3QgPSBmdW5jdGlvbihyb290KSB7CiAgICBzZWxmLnJvb3QgPSBzZWxmLnN2ZyA9IHNlbGYuY2FudmFzID0gcm9vdDsKICB9OwoKICB2YXIgY3JlYXRlQ29udGFpbmVyID0gZnVuY3Rpb24oKSB7CiAgICBpZiAoc2VsZi5jb250YWluZXIgPT0gInN2ZyIpCiAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwgInN2ZyIpOwogICAgZWxzZQogICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChzZWxmLmNvbnRhaW5lcik7CiAgfTsKCiAgc2VsZi5jcmVhdGVSb290ID0gZnVuY3Rpb24oKSB7CiAgICBpZiAoc2VsZi5zaGFkb3cgPT09IG51bGwpIHsKICAgICAgaWYgKHNlbGYudXNlU2hhZG93ICYmIGVsLmF0dGFjaFNoYWRvdykgewogICAgICAgIHNlbGYuc2hhZG93ID0gZWwuYXR0YWNoU2hhZG93KHsKICAgICAgICAgIG1vZGU6ICJvcGVuIgogICAgICAgIH0pOwogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIHNlbGYuc2hhZG93ID0gZWw7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoc2VsZi5yb290ICE9PSBudWxsKSB7CiAgICAgIHNlbGYuZDMoKS5zZWxlY3Qoc2VsZi5zaGFkb3cpLnNlbGVjdChzZWxmLmNvbnRhaW5lcikucmVtb3ZlKCk7CiAgICAgIHNlbGYuc2V0Um9vdChudWxsKTsKICAgIH0KCiAgICB2YXIgY29udGFpbmVyID0gY3JlYXRlQ29udGFpbmVyKCk7CiAgICBzZWxmLnNoYWRvdy5hcHBlbmRDaGlsZChjb250YWluZXIpOwogICAgdmFyIHJvb3QgPSBzZWxmLmQzKCkuc2VsZWN0KGNvbnRhaW5lcikKICAgICAgLmF0dHIoIndpZHRoIiwgc2VsZi53aWR0aCkKICAgICAgLmF0dHIoImhlaWdodCIsIHNlbGYuaGVpZ2h0KTsKCiAgICBpZiAoc2VsZi50aGVtZS5iYWNrZ3JvdW5kKSByb290LnN0eWxlKCJiYWNrZ3JvdW5kIiwgc2VsZi50aGVtZS5iYWNrZ3JvdW5kKTsKICAgIGlmIChzZWxmLnRoZW1lLmZvcmVncm91bmQpIHsKICAgICAgcm9vdC5zdHlsZSgiZmlsbCIsIHNlbGYudGhlbWUuZm9yZWdyb3VuZCk7CiAgICAgIHJvb3Quc3R5bGUoImNvbG9yIiwgc2VsZi50aGVtZS5mb3JlZ3JvdW5kKTsKICAgIH0KCiAgICBzZWxmLnNldFJvb3Qocm9vdCk7CiAgICBzZWxmLmFkZFN0eWxlKCk7CiAgfTsKCiAgc2VsZi5zZXRXaWR0aCA9IGZ1bmN0aW9uKHdpZHRoKSB7CiAgICBzZWxmLndpZHRoID0gd2lkdGg7CiAgfTsKCiAgc2VsZi5zZXRIZWlnaHQgPSBmdW5jdGlvbihoZWlnaHQpIHsKICAgIHNlbGYuaGVpZ2h0ID0gaGVpZ2h0OwogIH07CgogIHNlbGYub25SZW5kZXIgPSBmdW5jdGlvbihyZW5kZXJlcikgewogICAgc2VsZi5yZW5kZXJlciA9IHJlbmRlcmVyOwogICAgc2VsZi5yZW5kZXJlckRlZmF1dCA9IGZhbHNlOwogIH07CgogIHNlbGYub25SZXNpemUgPSBmdW5jdGlvbihyZXNpemVyKSB7CiAgICBzZWxmLnJlc2l6ZXIgPSByZXNpemVyOwogIH07CgogIHNlbGYucmVuZGVyID0gZnVuY3Rpb24oKSB7CiAgICBpZiAoc2VsZi5yZW5kZXJlciA9PT0gbnVsbCkgcmV0dXJuOwoKICAgIHRyeSB7CiAgICAgIHNlbGYucmVuZGVyZXIoc2VsZi5kYXRhLCBzZWxmLnJvb3QsIHNlbGYud2lkdGgsIHNlbGYuaGVpZ2h0LCBzZWxmLm9wdGlvbnMpOwogICAgfQogICAgY2F0Y2ggKGVycikgewogICAgICBzZWxmLnNob3dFcnJvcihlcnIsIG51bGwsIG51bGwpOwogICAgfQogIH07CgogIHNlbGYucmVzaXplID0gZnVuY3Rpb24oKSB7CiAgICBpZiAoc2VsZi5yZXNpemVyID09PSBudWxsKSByZXR1cm47CiAgICB0cnkgewogICAgICBzZWxmLnJlc2l6ZXIoc2VsZi53aWR0aCwgc2VsZi5oZWlnaHQpOwogICAgfQogICAgY2F0Y2ggKGVycikgewogICAgICBzZWxmLnNob3dFcnJvcihlcnIsIG51bGwsIG51bGwpOwogICAgfQogIH07CgogIHZhciBzaW1wbGVIYXNoID0gZnVuY3Rpb24oZGF0YSkgewogICAgdmFyIHN0ZXAgPSBNYXRoLm1heCgxLCBNYXRoLmZsb29yKGRhdGEubGVuZ3RoIC8gMTAwMCkpOwoKICAgIHZhciBoYXNoID0gMDsKICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGRhdGEubGVuZ3RoOyBpZHggKz0gc3RlcCkgewoJCSAgaGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpICsgZGF0YS5jaGFyQ29kZUF0KGlkeCk7CgkJICBoYXNoID0gaGFzaCAmIGhhc2g7CiAgICB9CgogICAgcmV0dXJuIE1hdGguYWJzKGhhc2gpICUgMTAwMDsKICB9OwoKICBzZWxmLmFkZFNjcmlwdCA9IGZ1bmN0aW9uKHNjcmlwdCkgewogICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7CiAgICBlbC50eXBlID0gInRleHQvamF2YXNjcmlwdCI7CgogICAgdmFyIGRlYnVnSGVhZGVyID0gIi8vIyBzb3VyY2VVUkw9cjJkMy1zY3JpcHQtIiArIHNpbXBsZUhhc2goc2NyaXB0KSArICJcbiI7CiAgICBlbC50ZXh0ID0gZGVidWdIZWFkZXIgKyBzY3JpcHQ7CgogICAgc2VsZi5jYXB0dXJlRXJyb3JzID0gZnVuY3Rpb24obXNnLCB1cmwsIGxpbmVObywgY29sdW1uTm8sIGVycm9yKSB7CiAgICAgIHNlbGYuc2hvd0Vycm9yKHsKICAgICAgICAgIG1lc3NhZ2U6IG1zZywKICAgICAgICAgIHN0YWNrOiBudWxsCiAgICAgICAgfSwgbGluZU5vLCBjb2x1bW5Obyk7CiAgICB9OwoKICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoZWwpOwogICAgc2VsZi5jYXB0dXJlRXJyb3JzID0gbnVsbDsKICB9OwoKICBzZWxmLnNldFN0eWxlID0gZnVuY3Rpb24oc3R5bGUpIHsKICAgIHNlbGYuc3R5bGUgPSBzdHlsZTsKICB9OwoKICBzZWxmLmFkZFN0eWxlID0gZnVuY3Rpb24oKSB7CiAgICBpZiAoIXNlbGYuc3R5bGUpIHJldHVybjsKCiAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpOwoKICAgIGVsLnR5cGUgPSAidGV4dC9jc3MiOwogICAgaWYgKGVsLnN0eWxlU2hlZXQpIHsKICAgICAgZWwuc3R5bGVTaGVldC5jc3NUZXh0ID0gc2VsZi5zdHlsZTsKICAgIH0gZWxzZSB7CiAgICAgIGVsLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHNlbGYuc3R5bGUpKTsKICAgIH0KCiAgICBzZWxmLnJvb3Qubm9kZSgpLmFwcGVuZENoaWxkKGVsKTsKICB9OwoKICBzZWxmLnNldFZlcnNpb24gPSBmdW5jdGlvbihuZXdWZXJzaW9uKSB7CiAgICB2ZXJzaW9uID0gbmV3VmVyc2lvbjsKICB9OwoKICBzZWxmLmQzID0gZnVuY3Rpb24oKSB7CiAgICBzd2l0Y2godmVyc2lvbikgewogICAgICBjYXNlIDM6CiAgICAgICAgcmV0dXJuIHdpbmRvdy5kMzsKICAgICAgY2FzZSA0OgogICAgICAgIHJldHVybiB3aW5kb3cuZDN2NDsKICAgICAgY2FzZSA1OgogICAgICAgIHJldHVybiB3aW5kb3cuZDN2NTsKICAgICAgY2FzZSA2OgogICAgICAgIHJldHVybiB3aW5kb3cuZDN2NjsKICAgIH0KICB9OwoKICB2YXIgY29uc29sZUxvZyA9IGZ1bmN0aW9uKGRhdGEpIHsKICAgIGNvbnNvbGUubG9nKGRhdGEpOwoKICAgIHZhciBlbnRyeSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgbGFzdENvbnNvbGVFbnRyeSA9IGVudHJ5OwogICAgZW50cnkuc3R5bGUuYm90dG9tID0gIjAiOwogICAgZW50cnkuc3R5bGUubGVmdCA9ICIwIjsKICAgIGVudHJ5LnN0eWxlLnJpZ2h0ID0gIjAiOwogICAgZW50cnkuc3R5bGUuYmFja2dyb3VuZCA9ICJyZ2IoMjQ0LCAyNDgsIDI0OSkiOwogICAgZW50cnkuc3R5bGUuYm9yZGVyID0gIjFweCBzb2xpZCAjZDZkYWRjIjsKICAgIGVudHJ5LnN0eWxlLnBhZGRpbmcgPSAiOHB4IDE1cHggOHB4IDE1cHgiOwogICAgZW50cnkuc3R5bGUucG9zaXRpb24gPSAiYWJzb2x1dGUiOwogICAgZW50cnkuc3R5bGUuZm9udEZhbWlseSA9ICInTHVjaWRhIFNhbnMnLCAnRGVqYVZ1IFNhbnMnLCAnTHVjaWRhIEdyYW5kZScsICdTZWdvZSBVSScsIFZlcmRhbmEsIEhlbHZldGljYSwgc2Fucy1zZXJpZiwgc2VyaWYiOwogICAgZW50cnkuc3R5bGUuZm9udFNpemUgPSAiOXB0IjsKICAgIHNlbGYuc2hhZG93LmFwcGVuZENoaWxkKGVudHJ5KTsKCiAgICBlbnRyeS5zdHlsZS50cmFuc2Zvcm0gPSAidHJhbnNsYXRlWSg0MHB4KSI7CiAgICBlbnRyeS5zdHlsZS5vcGFjaXR5ID0gIjAiOwogICAgZW50cnkuc3R5bGUudHJhbnNpdGlvbiA9ICJhbGwgMC4yNXMiOwoKICAgIGVudHJ5Lm9ubW91c2VlbnRlciA9IGZ1bmN0aW9uKGUpIHsKICAgICAgY29uc29sZUhvdmVyaW5nID0gdHJ1ZTsKICAgIH07CgogICAgZW50cnkub25tb3VzZWxlYXZlID0gZnVuY3Rpb24oZSkgewogICAgICBpZiAobGFzdENvbnNvbGVFbnRyeSA9PSBlLnRhcmdldCkgY29uc29sZUhvdmVyaW5nID0gZmFsc2U7CiAgICB9OwoKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgIGVudHJ5LnN0eWxlLnRyYW5zZm9ybSA9ICJ0cmFuc2xhdGVZKDApIjsKICAgICAgZW50cnkuc3R5bGUub3BhY2l0eSA9ICIxIjsKICAgICAgZW50cnkuc3R5bGUudHJhbnNpdGlvbiA9ICJhbGwgMC41cyI7CiAgICB9LCA1MCk7CgogICAgZW50cnkuaW5uZXJUZXh0ID0gZGF0YTsKCiAgICAoZnVuY3Rpb24oZW50cnkpIHsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICB2YXIgaGlkZUNvbnNvbGUgPSBmdW5jdGlvbigpIHsKICAgICAgICAgIGVudHJ5LnN0eWxlLm9wYWNpdHkgPSAiMCI7CiAgICAgICAgICBlbnRyeS5hZGRFdmVudExpc3RlbmVyKCJ0cmFuc2l0aW9uZW5kIiwgZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZXZlbnQudGFyZ2V0KTsKICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIHZhciByZXRyeUhpZGUgPSBmdW5jdGlvbigpIHsKICAgICAgICAgIGlmIChjb25zb2xlSG92ZXJpbmcgJiYgbGFzdENvbnNvbGVFbnRyeSA9PSBlbnRyeSkgewogICAgICAgICAgICBzZXRUaW1lb3V0KHJldHJ5SGlkZSwgMTAwKTsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICBoaWRlQ29uc29sZSgpOwogICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIHJldHJ5SGlkZSgpOwogICAgICB9LCAzMDAwKTsKICAgIH0pKGVudHJ5KTsKICB9OwoKICB2YXIgY29uc29sZUhvdmVyaW5nID0gZmFsc2U7CiAgdmFyIGxhc3RDb25zb2xlRW50cnkgPSBudWxsOwogIHZhciBjcmVhdGVDb25zb2xlT3ZlcnJpZGUgPSBmdW5jdGlvbih0eXBlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24oZGF0YSkgewogICAgICBjb25zb2xlTG9nKHR5cGUgKyBkYXRhKTsKICAgIH07CiAgfTsKCiAgc2VsZi5jb25zb2xlID0gewogICAgYXNzZXJ0OiBjb25zb2xlLmFzc2VydCwKICAgIGNsZWFyOiBjb25zb2xlLmNsZWFyLAogICAgY291bnQ6IGNvbnNvbGUuY291bnQsCiAgICBlcnJvcjogY3JlYXRlQ29uc29sZU92ZXJyaWRlKCJFcnJvcjogIiksCiAgICBncm91cDogY29uc29sZS5ncm91cCwKICAgIGdyb3VwQ29sbGFwc2VkOiBjb25zb2xlLmdyb3VwQ29sbGFwc2VkLAogICAgZ3JvdXBFbmQ6IGNvbnNvbGUuZ3JvdXBFbmQsCiAgICBpbmZvOiBjcmVhdGVDb25zb2xlT3ZlcnJpZGUoIkluZm86ICIpLAogICAgbG9nOiBjcmVhdGVDb25zb2xlT3ZlcnJpZGUoIiIpLAogICAgdGFibGU6IGNvbnNvbGUudGFibGUsCiAgICB0aW1lOiBjb25zb2xlLnRpbWUsCiAgICB0aW1lRW5kOiBjb25zb2xlLnRpbWVFbmQsCiAgICB0cmFjZTogY29uc29sZS50cmFjZSwKICAgIHdhcm46IGNvbnNvbGUud2FybgogIH07CgogIHNlbGYuY2FsbEQzU2NyaXB0ID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgZDNTY3JpcHQgPSBzZWxmLmQzU2NyaXB0OwoKICAgIHRyeSB7CiAgICAgIGQzU2NyaXB0KHNlbGYuZDMoKSwgc2VsZiwgc2VsZi5kYXRhLCBzZWxmLnJvb3QsIHNlbGYud2lkdGgsIHNlbGYuaGVpZ2h0LCBzZWxmLm9wdGlvbnMsIHNlbGYudGhlbWUsIHNlbGYuY29uc29sZSk7CiAgICB9CiAgICBjYXRjaCAoZXJyKSB7CiAgICAgIHNlbGYuc2hvd0Vycm9yKGVyciwgbnVsbCwgbnVsbCk7CiAgICB9CiAgfTsKCiAgc2VsZi53aWRnZXRSZW5kZXIgPSBmdW5jdGlvbih4KSB7CiAgICBzZWxmLnNldFgoeCk7CgogICAgaWYgKCFzZWxmLnJvb3QpIHsKICAgICAgc2VsZi5zZXRWZXJzaW9uKHgudmVyc2lvbik7CiAgICAgIHNlbGYuc2V0U3R5bGUoeC5zdHlsZSk7CiAgICAgIHNlbGYuYWRkU2NyaXB0KHguc2NyaXB0KTsKICAgICAgc2VsZi5kM1NjcmlwdCA9IGQzU2NyaXB0OwogICAgICBzZWxmLnNldENvbnRhaW5lcih4LmNvbnRhaW5lcik7CgogICAgICBzZWxmLmNyZWF0ZVJvb3QoKTsKCiAgICAgIHNlbGYuY2FsbEQzU2NyaXB0KCk7CiAgICB9CgogICAgc2VsZi5yZW5kZXIoKTsKCiAgICBpZiAoc2VsZi5yZW5kZXJlciA9PT0gbnVsbCkgewogICAgICBzZWxmLnJlbmRlcmVyID0gZnVuY3Rpb24oZGF0YSwgY29udGFpbmVyLCB3aWR0aCwgaGVpZ2h0LCBvcHRpb25zKSB7CiAgICAgICAgc2VsZi5jYWxsRDNTY3JpcHQoKTsKICAgICAgfTsKICAgIH0KCiAgICBpZiAoc2VsZi5yZXNpemVyID09PSBudWxsKSB7CiAgICAgIHNlbGYucmVzaXplciA9IGZ1bmN0aW9uKHdpZHRoLCBoZWlnaHQpIHsKICAgICAgICBzZWxmLmNyZWF0ZVJvb3QoKTsKICAgICAgICBzZWxmLmNhbGxEM1NjcmlwdCgpOwogICAgICAgIGlmICghc2VsZi5yZW5kZXJlckRlZmF1dCkgc2VsZi5yZW5kZXIoKTsKICAgICAgfTsKICAgIH0KICB9OwoKICBzZWxmLmRlYm91bmNlID0gZnVuY3Rpb24oZiwgd2FpdCkgewogICAgdmFyIHRpbWVvdXQgPSBudWxsOwogICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICBpZiAodGltZW91dCkgd2luZG93LmNsZWFyVGltZW91dCh0aW1lb3V0KTsKICAgICAgdGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KGYsIHdhaXQpOwogICAgfTsKICB9OwoKICBzZWxmLnJlc2l6ZURlYm91bmNlID0gc2VsZi5kZWJvdW5jZShzZWxmLnJlc2l6ZSwgMTAwKTsKCiAgc2VsZi53aWRnZXRSZXNpemUgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KSB7CiAgICBzZWxmLnJvb3QKICAgICAgLmF0dHIoIndpZHRoIiwgd2lkdGgpCiAgICAgIC5hdHRyKCJoZWlnaHQiLCBoZWlnaHQpOwoKICAgIHNlbGYuc2V0V2lkdGgod2lkdGgpOwogICAgc2VsZi5zZXRIZWlnaHQoaGVpZ2h0KTsKCiAgICBzZWxmLnJlc2l6ZURlYm91bmNlKCk7CiAgfTsKCiAgdmFyIG9wZW5Tb3VyY2UgPSBmdW5jdGlvbihmaWxlbmFtZSwgbGluZSwgY29sdW1uLCBkb21haW4sIGhpZ2hsaWdodCkgewogICAgaWYgKHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UpIHsKICAgICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7CiAgICAgICAgbWVzc2FnZTogIm9wZW5maWxlIiwKICAgICAgICBzb3VyY2U6ICJyMmQzIiwKICAgICAgICBmaWxlOiBmaWxlbmFtZSwKICAgICAgICBsaW5lOiBsaW5lLAogICAgICAgIGNvbHVtbjogY29sdW1uLAogICAgICAgIGhpZ2hsaWdodDogaGlnaGxpZ2h0CiAgICAgIH0sIGRvbWFpbik7CiAgICB9CiAgfTsKCiAgdmFyIHRoZW1lc0xvYWRlZCA9IGZhbHNlOwogIHZhciByZWdpc3RlclRoZW1lID0gZnVuY3Rpb24oZG9tYWluKSB7CiAgICBkb21haW4gPSBkb21haW4gPyBkb21haW4gOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luOwogICAgaWYgKHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UpIHsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbihldmVudCkgewogICAgICAgIGlmICh0eXBlb2YgZXZlbnQuZGF0YSAhPSAnb2JqZWN0JykKICAgICAgICAgIHJldHVybjsKICAgICAgCWlmIChldmVudC5vcmlnaW4gIT09IGRvbWFpbikKICAgICAgCSAgcmV0dXJuOwogICAgCSAgaWYgKGV2ZW50LmRhdGEubWVzc2FnZSAhPT0gIm9udGhlbWUiKQogICAgICAgICAgcmV0dXJuOwoKICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmJhY2tncm91bmQgPSBldmVudC5kYXRhLmJhY2tncm91bmQ7CgogICAgICAgIHNlbGYudGhlbWUuYmFja2dyb3VuZCA9IGV2ZW50LmRhdGEuYmFja2dyb3VuZDsKICAgICAgICBzZWxmLnRoZW1lLmZvcmVncm91bmQgPSBldmVudC5kYXRhLmZvcmVncm91bmQ7CgogICAgICAJLy8gcmVzaXplIHRvIGdpdmUgc2NyaXB0IGNoYW5jZSB0byBwaWNrIG5ldyB0aGVtZQogICAgICAJaWYgKHRoZW1lc0xvYWRlZCkgc2VsZi5yZXNpemUoKTsKICAgICAgCXRoZW1lc0xvYWRlZCA9IHRydWU7CiAgICAgIH0sIGZhbHNlKTsKCiAgICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UoewogICAgICAgIG1lc3NhZ2U6ICJvbnRoZW1lIiwKICAgICAgICBzb3VyY2U6ICJyMmQzIgogICAgICB9LCBkb21haW4pOwogICAgfQogIH07CgogIHZhciBlcnJvck9iamVjdCA9IG51bGw7CiAgdmFyIGVycm9yTGluZSA9IG51bGw7CiAgdmFyIGVycm9yQ29sdW1uID0gbnVsbDsKICB2YXIgZXJyb3JGaWxlID0gbnVsbDsKICB2YXIgZXJyb3JIaWdobGlnaHRPbmNlID0gZmFsc2U7CiAgdmFyIGhvc3REb21haW4gPSBudWxsOwoKICB2YXIgcXVlcnlQYXJhbWV0ZXIgPSBmdW5jdGlvbihwYXJhbSkgewogICAgdmFyIHF1ZXJ5ID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSk7CiAgICB2YXIgZW50cmllcyA9IHF1ZXJ5LnNwbGl0KCcmJyk7CgogICAgZm9yICh2YXIgaWR4RW50cnkgPSAwOyBpZHhFbnRyeSA8IGVudHJpZXMubGVuZ3RoOyBpZHhFbnRyeSsrKSB7CiAgICAgICAgdmFyIHBhcmFtcyA9IGVudHJpZXNbaWR4RW50cnldLnNwbGl0KCc9Jyk7CiAgICAgICAgaWYgKGRlY29kZVVSSUNvbXBvbmVudChwYXJhbXNbMF0pID09IHBhcmFtKSB7CiAgICAgICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocGFyYW1zWzFdKTsKICAgICAgICB9CiAgICB9CgogICAgcmV0dXJuIG51bGw7CiAgfTsKCiAgdmFyIHRoZW1lQ2FwYWJsZSA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHF1ZXJ5UGFyYW1ldGVyKCJjYXBhYmlsaXRpZXMiKSA9PT0gIjEiOwogIH07CgogIHZhciByZWdpc3Rlck1lc3NhZ2VMaXN0ZW5lcnMgPSBmdW5jdGlvbihldmVudCkgewogICAgaWYgKCF0aGVtZUNhcGFibGUoKSkgewogICAgICBob3N0RG9tYWluID0gbnVsbDsKICAgIH0gZWxzZSB7CiAgICAgIGhvc3REb21haW4gPSBxdWVyeVBhcmFtZXRlcigiaG9zdCIpOwogICAgICByZWdpc3RlclRoZW1lKGhvc3REb21haW4pOwogICAgfQogIH07CgogIHZhciBjbGVhblN0YWNrVHJhY2UgPSBmdW5jdGlvbihzdGFjaykgewogICAgdmFyIGNsZWFuZWQgPSBzdGFjay5zdWJzdHIoMCwgc3RhY2suaW5kZXhPZigiYXQgZDNTY3JpcHQiKSk7CiAgICBjbGVhbmVkID0gY2xlYW5lZC5yZXBsYWNlKG5ldyBSZWdFeHAoIlxcKC4qL3Nlc3Npb24vdmlld1teL10qL2xpYi9bXi9dKy8iLCAiZyIpLCAiKCIpOwogICAgY2xlYW5lZCA9IGNsZWFuZWQucmVwbGFjZShuZXcgUmVnRXhwKCJcXCguKi9zZXNzaW9uL3ZpZXdbXi9dKi8iLCAiZyIpLCAiKCIpOwoKICAgIHJldHVybiBjbGVhbmVkOwogIH07CgogIHZhciBwYXJzZUxpbmVGaWxlUmVmID0gZnVuY3Rpb24obGluZSkgewogICAgdmFyIGxpbmVzID0geC5zY3JpcHQuc3BsaXQoIlxuIik7CiAgICBsaW5lID0gTWF0aC5taW4obGluZXMubGVuZ3RoIC0gMSwgbGluZSk7CgogICAgdmFyIGhlYWRlciA9ICIvKiBSMkQzIFNvdXJjZSBGaWxlOiAiOwogICAgdmFyIGZpbGUgPSBudWxsOwogICAgZm9yICh2YXIgbWF5YmUgPSBsaW5lOyBsaW5lICYmIG1heWJlID49IDA7IG1heWJlLS0pIHsKICAgICAgaWYgKGxpbmVzW21heWJlXS5pbmNsdWRlcyhoZWFkZXIpKSB7CiAgICAgICAgdmFyIGRhdGEgPSBsaW5lc1ttYXliZV0uc3BsaXQoaGVhZGVyKVsxXTsKICAgICAgICB2YXIgc291cmNlID0gZGF0YS5zcGxpdCgiKi8iKVswXS50cmltKCk7CgogICAgICAgIGxpbmUgPSBsaW5lIC0gKG1heWJlICsgMik7CiAgICAgICAgZmlsZSA9IHNvdXJjZTsKCiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gewogICAgICBmaWxlOiBmaWxlLAogICAgICBsaW5lOiBsaW5lCiAgICB9OwogIH07CgogIHZhciBwYXJzZUNhbGxzdGFja1JlZiA9IGZ1bmN0aW9uKGNhbGxzdGFjaykgewogICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoImF0IFteXFxuXSsgXFwoKDxhbm9ueW1vdXM+fHIyZDMtc2NyaXB0LVswLTldKyk6KFswLTldKyk6KFswLTldKylcXCkiKTsKICAgIHZhciBtYXRjaGVzID0gcmVnLmV4ZWMoY2FsbHN0YWNrKTsKICAgIGlmIChtYXRjaGVzICYmIG1hdGNoZXMubGVuZ3RoID09PSA0KSB7CgogICAgICB2YXIgbGluZSA9IHBhcnNlSW50KG1hdGNoZXNbMl0pOwogICAgICB2YXIgY29sdW1uID0gcGFyc2VJbnQobWF0Y2hlc1szXSk7CiAgICAgIHZhciBmaWxlID0gbnVsbDsKICAgICAgdmFyIGxpbmVSZWYgPSBwYXJzZUxpbmVGaWxlUmVmKGxpbmUpOwogICAgICBpZiAobGluZVJlZikgewogICAgICAgIGZpbGUgPSBsaW5lUmVmLmZpbGU7CiAgICAgICAgbGluZSA9IGxpbmVSZWYubGluZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBmaWxlOiBmaWxlLAogICAgICAgIGxpbmU6IGxpbmUsCiAgICAgICAgY29sdW1uOiBjb2x1bW4KICAgICAgfTsKICAgIH0KICAgIGVsc2UgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9OwoKICB2YXIgY3JlYXRlU291cmNlTGluayA9IGZ1bmN0aW9uKHBhdGgsIGxpbmUsIGNvbHVtbiwgZG9tYWluKSB7CiAgICB2YXIgbmFtZSA9IGJhc2VOYW1lKHBhdGgpOwogICAgdmFyIGxpbmtFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgIGxpbmtFbC5pbm5lclRleHQgPSAiKCIgKyBuYW1lICsgIiMiICsgbGluZSArICI6IiArIGNvbHVtbiArICIpIjsKICAgIGxpbmtFbC5ocmVmID0gIiMiOwogICAgbGlua0VsLmNvbG9yID0gIiM0NTMxZDYiOwogICAgbGlua0VsLnN0eWxlLmRpc3BsYXkgPSAiaW5saW5lLWJsb2NrIjsKICAgIGxpbmtFbC5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICJub25lIjsKICAgIGxpbmtFbC5vbmNsaWNrID0gZnVuY3Rpb24oKSB7CiAgICAgIG9wZW5Tb3VyY2UocGF0aCwgbGluZSwgY29sdW1uLCBkb21haW4sIGZhbHNlKTsKICAgIH07CgogICAgcmV0dXJuIGxpbmtFbDsKICB9OwoKICB2YXIgYmFzZU5hbWUgPSBmdW5jdGlvbihwYXRoKSB7CiAgICB2YXIgcGFydHMgPSBwYXRoLnNwbGl0KG5ldyBSZWdFeHAoIi98XFxcXCIpKTsKICAgIHJldHVybiBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXTsKICB9OwoKICB2YXIgc2hvd0Vycm9ySW1wbCA9IGZ1bmN0aW9uKCkgewogICAgdmFyIG1lc3NhZ2UgPSBlcnJvck9iamVjdCwgY2FsbHN0YWNrID0gIiI7CgogICAgaWYgKGVycm9yT2JqZWN0Lm1lc3NhZ2UpIG1lc3NhZ2UgPSBlcnJvck9iamVjdC5tZXNzYWdlOwogICAgaWYgKGVycm9yT2JqZWN0LnN0YWNrKSBjYWxsc3RhY2sgPSBlcnJvck9iamVjdC5zdGFjazsKCiAgICBpZiAoZXJyb3JMaW5lID09PSBudWxsIHx8IGVycm9yQ29sdW1uID09PSBudWxsKSB7CiAgICAgIHZhciBwYXJzZVJlc3VsdCA9IHBhcnNlQ2FsbHN0YWNrUmVmKGNhbGxzdGFjayk7CiAgICAgIGlmIChwYXJzZVJlc3VsdCkgewogICAgICAgIGVycm9yRmlsZSA9IHBhcnNlUmVzdWx0LmZpbGU7CiAgICAgICAgZXJyb3JMaW5lID0gcGFyc2VSZXN1bHQubGluZTsKICAgICAgICBlcnJvckNvbHVtbiA9IHBhcnNlUmVzdWx0LmNvbHVtbjsKICAgICAgfQogICAgfQogICAgZWxzZSB7CiAgICAgIHZhciBwYXJzZUxpbmVSZXN1bHQgPSBwYXJzZUxpbmVGaWxlUmVmKGVycm9yTGluZSk7CiAgICAgIGlmIChwYXJzZUxpbmVSZXN1bHQpIHsKICAgICAgICBlcnJvckZpbGUgPSBwYXJzZUxpbmVSZXN1bHQuZmlsZTsKICAgICAgICBlcnJvckxpbmUgPSBwYXJzZUxpbmVSZXN1bHQubGluZTsKICAgICAgfQogICAgfQoKICAgIGlmIChlcnJvckZpbGUpIHsKICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UgKyAiIGluICI7CiAgICB9CgogICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJyMmQzLWVycm9yLWNvbnRhaW5lciIpOwogICAgaWYgKCFjb250YWluZXIpIHsKICAgICAgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIHNlbGYuc2hhZG93LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7CiAgICB9CiAgICBlbHNlIHsKICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICIiOwogICAgfQoKICAgIGNvbnRhaW5lci5pZCA9ICJyMmQzLWVycm9yLWNvbnRhaW5lciI7CiAgICBjb250YWluZXIuc3R5bGUuZm9udEZhbWlseSA9ICInTHVjaWRhIFNhbnMnLCAnRGVqYVZ1IFNhbnMnLCAnTHVjaWRhIEdyYW5kZScsICdTZWdvZSBVSScsIFZlcmRhbmEsIEhlbHZldGljYSwgc2Fucy1zZXJpZiwgc2VyaWYiOwogICAgY29udGFpbmVyLnN0eWxlLmZvbnRTaXplID0gIjlwdCI7CiAgICBjb250YWluZXIuc3R5bGUuY29sb3IgPSAiIzQ0NCI7CiAgICBjb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAiYWJzb2x1dGUiOwogICAgY29udGFpbmVyLnN0eWxlLnRvcCA9ICIwIjsKICAgIGNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gIjhweCI7CiAgICBjb250YWluZXIuc3R5bGUucmlnaHQgPSAiOHB4IjsKICAgIGNvbnRhaW5lci5zdHlsZS5vdmVyZmxvdyA9ICJzY3JvbGwiOwogICAgY29udGFpbmVyLnN0eWxlLmxpbmVIZWlnaHQgPSAiMTZweCI7CgogICAgdmFyIGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgaGVhZGVyLmlubmVyVGV4dCA9ICJFcnJvcjogIiArIG1lc3NhZ2UucmVwbGFjZSgiXG4iLCAiIik7CiAgICBoZWFkZXIuc3R5bGUubWFyZ2luVG9wID0gIjhweCI7CiAgICBoZWFkZXIuc3R5bGUuYmFja2dyb3VuZCA9ICJyZ2IoMjQ0LCAyNDgsIDI0OSkiOwogICAgaGVhZGVyLnN0eWxlLmJvcmRlciA9ICIxcHggc29saWQgI2Q2ZGFkYyI7CiAgICBoZWFkZXIuc3R5bGUucGFkZGluZyA9ICI4cHggMTVweCA4cHggMTVweCI7CiAgICBoZWFkZXIuc3R5bGUubGluZUhlaWdodCA9ICIyNHB4IjsKICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChoZWFkZXIpOwoKICAgIGlmIChlcnJvckZpbGUpIHsKICAgICAgaWYgKGhvc3REb21haW4pIHsKICAgICAgICBpZiAoIWVycm9ySGlnaGxpZ2h0T25jZSkgewogICAgICAgICAgb3BlblNvdXJjZShlcnJvckZpbGUsIGVycm9yTGluZSwgZXJyb3JDb2x1bW4sIGhvc3REb21haW4sIHRydWUpOwogICAgICAgICAgZXJyb3JIaWdobGlnaHRPbmNlID0gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHZhciBsaW5rRWwgPSBjcmVhdGVTb3VyY2VMaW5rKGVycm9yRmlsZSwgZXJyb3JMaW5lLCBlcnJvckNvbHVtbiwgaG9zdERvbWFpbik7CiAgICAgICAgaGVhZGVyLmFwcGVuZENoaWxkKGxpbmtFbCk7CiAgICAgIH0KICAgICAgZWxzZSB7CiAgICAgICAgaGVhZGVyLmlubmVyVGV4dCA9ICJFcnJvcjogIiArIG1lc3NhZ2UucmVwbGFjZSgiXG4iLCAiIikgKyAiICIgKyBlcnJvckZpbGUgKyAiIyIgKyBlcnJvckxpbmUgKyAiOiIgKyBlcnJvckNvbHVtbjsKICAgICAgfQogICAgfQoKICAgIGlmIChjYWxsc3RhY2spIHsKICAgICAgdmFyIHN0YWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIHZhciBjbGVhblN0YWNrID0gY2xlYW5TdGFja1RyYWNlKGNhbGxzdGFjayk7CiAgICAgIHN0YWNrLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogICAgICBzdGFjay5zdHlsZS5ib3JkZXIgPSAiMXB4IHNvbGlkICNkNmRhZGMiOwogICAgICBzdGFjay5zdHlsZS5wYWRkaW5nID0gIjEycHggMTVweCAxMnB4IDE1cHgiOwogICAgICBzdGFjay5zdHlsZS5iYWNrZ3JvdW5kID0gIiNGRkZGRkYiOwogICAgICBzdGFjay5zdHlsZS5ib3JkZXJUb3AgPSAiMCI7CgogICAgICB2YXIgYWxsRW1wdHkgPSB0cnVlOwogICAgICB2YXIgZW50cmllcyA9IGNsZWFuU3RhY2suc3BsaXQoIlxuIik7CiAgICAgIGZvciAodmFyIGlkeEVudHJ5IGluIGVudHJpZXMpIHsKICAgICAgICB2YXIgZW50cnkgPSBlbnRyaWVzW2lkeEVudHJ5XTsKICAgICAgICB2YXIgc3RhY2tFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoKICAgICAgICB2YXIgc3RhY2tSZXMgPSBwYXJzZUNhbGxzdGFja1JlZihlbnRyeSk7CiAgICAgICAgaWYgKGlkeEVudHJ5ID09PSAiMCIpIHsKICAgICAgICAgIGhlYWRlci5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJiciIpKTsKICAgICAgICAgIGhlYWRlci5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShlbnRyeSkpOwogICAgICAgIH0gZWxzZSBpZiAoaG9zdERvbWFpbiAmJiBzdGFja1JlcykgewogICAgICAgICAgc3RhY2tFbC5pbm5lclRleHQgPSBlbnRyeS5zdWJzdHIoCiAgICAgICAgICAgIDAsCiAgICAgICAgICAgIE1hdGgubWF4KGVudHJ5LmluZGV4T2YoIig8YW5vbnkiKSwgZW50cnkuaW5kZXhPZigiKHIyZDMtc2NyaXB0LSIpKQogICAgICAgICAgKTsKICAgICAgICAgIHZhciBzdGFja0xpbmtFbCA9IGNyZWF0ZVNvdXJjZUxpbmsoc3RhY2tSZXMuZmlsZSwgc3RhY2tSZXMubGluZSwgc3RhY2tSZXMuY29sdW1uLCBob3N0RG9tYWluKTsKICAgICAgICAgIHN0YWNrRWwuYXBwZW5kQ2hpbGQoc3RhY2tMaW5rRWwpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgIHN0YWNrRWwuaW5uZXJUZXh0ID0gZW50cnk7CiAgICAgICAgfQoKICAgICAgICBpZiAoc3RhY2tFbC5pbm5lckhUTUwudHJpbSgpLmxlbmd0aCA+IDApICBzdGFjay5hcHBlbmRDaGlsZChzdGFja0VsKTsKICAgICAgfQoKICAgICAgaWYgKHN0YWNrLmNoaWxkRWxlbWVudENvdW50ID4gMCkKICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc3RhY2spOwogICAgfQogIH07CgogIHNlbGYuc2hvd0Vycm9yID0gZnVuY3Rpb24oZXJyb3IsIGxpbmUsIGNvbHVtbikgewogICAgZXJyb3JPYmplY3QgPSBlcnJvcjsKICAgIGVycm9yTGluZSA9IGxpbmU7CiAgICBlcnJvckNvbHVtbiA9IGNvbHVtbjsKCiAgICBzaG93RXJyb3JJbXBsKCk7CiAgfTsKCiAgd2luZG93Lm9uZXJyb3IgPSBmdW5jdGlvbiAobXNnLCB1cmwsIGxpbmVObywgY29sdW1uTm8sIGVycm9yKSB7CiAgICBpZiAoc2VsZi5jYXB0dXJlRXJyb3JzKSB7CiAgICAgIHNlbGYuY2FwdHVyZUVycm9ycyhtc2csIHVybCwgbGluZU5vLCBjb2x1bW5ObywgZXJyb3IpOwogICAgfQoKICAgIHJldHVybiBmYWxzZTsKICB9OwoKICByZWdpc3Rlck1lc3NhZ2VMaXN0ZW5lcnMoKTsKfQ=="></script>
<script src="data:application/javascript;base64,Ly8gd2ViY29tcG9uZW50cy5qcyByZXF1aXJlcyBTZXQgYXBpIHdoaWNoIGlzIG5vdCBhdmFpbGFibGUgaW4gYWxsIGJyb3dzZXJzCmlmICh0eXBlb2YoU2V0KSAhPT0gInVuZGVmaW5lZCIpIHsKLyoqCkBsaWNlbnNlIEBub2NvbXBpbGUKQ29weXJpZ2h0IChjKSAyMDE4IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dApUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dApUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHQKQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc28Kc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHQKKi8KKGZ1bmN0aW9uKCl7LyoKCiBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dAogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHQKIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dAogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc28KIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0CiovCid1c2Ugc3RyaWN0Jzt2YXIgcSxhYT0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93PT09dGhpcz90aGlzOiJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsJiZudWxsIT1nbG9iYWw/Z2xvYmFsOnRoaXMsYmE9ImZ1bmN0aW9uIj09dHlwZW9mIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzP09iamVjdC5kZWZpbmVQcm9wZXJ0eTpmdW5jdGlvbihhLGIsYyl7YSE9QXJyYXkucHJvdG90eXBlJiZhIT1PYmplY3QucHJvdG90eXBlJiYoYVtiXT1jLnZhbHVlKX07ZnVuY3Rpb24gY2EoKXtjYT1mdW5jdGlvbigpe307YWEuU3ltYm9sfHwoYWEuU3ltYm9sPWRhKX12YXIgZGE9ZnVuY3Rpb24oKXt2YXIgYT0wO3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4ianNjb21wX3N5bWJvbF8iKyhifHwiIikrYSsrfX0oKTsKZnVuY3Rpb24gZWEoKXtjYSgpO3ZhciBhPWFhLlN5bWJvbC5pdGVyYXRvcjthfHwoYT1hYS5TeW1ib2wuaXRlcmF0b3I9YWEuU3ltYm9sKCJpdGVyYXRvciIpKTsiZnVuY3Rpb24iIT10eXBlb2YgQXJyYXkucHJvdG90eXBlW2FdJiZiYShBcnJheS5wcm90b3R5cGUsYSx7Y29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIGZhKHRoaXMpfX0pO2VhPWZ1bmN0aW9uKCl7fX1mdW5jdGlvbiBmYShhKXt2YXIgYj0wO3JldHVybiBoYShmdW5jdGlvbigpe3JldHVybiBiPGEubGVuZ3RoP3tkb25lOiExLHZhbHVlOmFbYisrXX06e2RvbmU6ITB9fSl9ZnVuY3Rpb24gaGEoYSl7ZWEoKTthPXtuZXh0OmF9O2FbYWEuU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTtyZXR1cm4gYX1mdW5jdGlvbiBpYShhKXtlYSgpO3ZhciBiPWFbU3ltYm9sLml0ZXJhdG9yXTtyZXR1cm4gYj9iLmNhbGwoYSk6ZmEoYSl9CmZ1bmN0aW9uIGphKGEpe2Zvcih2YXIgYixjPVtdOyEoYj1hLm5leHQoKSkuZG9uZTspYy5wdXNoKGIudmFsdWUpO3JldHVybiBjfQooZnVuY3Rpb24oKXtpZighZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFdmVudCgiRXZlbnQiKTthLmluaXRFdmVudCgiZm9vIiwhMCwhMCk7YS5wcmV2ZW50RGVmYXVsdCgpO3JldHVybiBhLmRlZmF1bHRQcmV2ZW50ZWR9KCkpe3ZhciBhPUV2ZW50LnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdDtFdmVudC5wcm90b3R5cGUucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oKXt0aGlzLmNhbmNlbGFibGUmJihhLmNhbGwodGhpcyksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsImRlZmF1bHRQcmV2ZW50ZWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hMH0sY29uZmlndXJhYmxlOiEwfSkpfX12YXIgYj0vVHJpZGVudC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtpZighd2luZG93LkN1c3RvbUV2ZW50fHxiJiYiZnVuY3Rpb24iIT09dHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCl3aW5kb3cuQ3VzdG9tRXZlbnQ9ZnVuY3Rpb24oYSxiKXtiPWJ8fHt9O3ZhciBjPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJDdXN0b21FdmVudCIpOwpjLmluaXRDdXN0b21FdmVudChhLCEhYi5idWJibGVzLCEhYi5jYW5jZWxhYmxlLGIuZGV0YWlsKTtyZXR1cm4gY30sd2luZG93LkN1c3RvbUV2ZW50LnByb3RvdHlwZT13aW5kb3cuRXZlbnQucHJvdG90eXBlO2lmKCF3aW5kb3cuRXZlbnR8fGImJiJmdW5jdGlvbiIhPT10eXBlb2Ygd2luZG93LkV2ZW50KXt2YXIgYz13aW5kb3cuRXZlbnQ7d2luZG93LkV2ZW50PWZ1bmN0aW9uKGEsYil7Yj1ifHx7fTt2YXIgYz1kb2N1bWVudC5jcmVhdGVFdmVudCgiRXZlbnQiKTtjLmluaXRFdmVudChhLCEhYi5idWJibGVzLCEhYi5jYW5jZWxhYmxlKTtyZXR1cm4gY307aWYoYylmb3IodmFyIGQgaW4gYyl3aW5kb3cuRXZlbnRbZF09Y1tkXTt3aW5kb3cuRXZlbnQucHJvdG90eXBlPWMucHJvdG90eXBlfWlmKCF3aW5kb3cuTW91c2VFdmVudHx8YiYmImZ1bmN0aW9uIiE9PXR5cGVvZiB3aW5kb3cuTW91c2VFdmVudCl7Yj13aW5kb3cuTW91c2VFdmVudDt3aW5kb3cuTW91c2VFdmVudD1mdW5jdGlvbihhLApiKXtiPWJ8fHt9O3ZhciBjPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJNb3VzZUV2ZW50Iik7Yy5pbml0TW91c2VFdmVudChhLCEhYi5idWJibGVzLCEhYi5jYW5jZWxhYmxlLGIudmlld3x8d2luZG93LGIuZGV0YWlsLGIuc2NyZWVuWCxiLnNjcmVlblksYi5jbGllbnRYLGIuY2xpZW50WSxiLmN0cmxLZXksYi5hbHRLZXksYi5zaGlmdEtleSxiLm1ldGFLZXksYi5idXR0b24sYi5yZWxhdGVkVGFyZ2V0KTtyZXR1cm4gY307aWYoYilmb3IoZCBpbiBiKXdpbmRvdy5Nb3VzZUV2ZW50W2RdPWJbZF07d2luZG93Lk1vdXNlRXZlbnQucHJvdG90eXBlPWIucHJvdG90eXBlfUFycmF5LmZyb218fChBcnJheS5mcm9tPWZ1bmN0aW9uKGEpe3JldHVybltdLnNsaWNlLmNhbGwoYSl9KTtPYmplY3QuYXNzaWdufHwoT2JqZWN0LmFzc2lnbj1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxkPTAsZTtkPGMubGVuZ3RoO2QrKylpZihlPWNbZF0pZm9yKHZhciBmPQphLG49ZSxyPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG4pLEc9MDtHPHIubGVuZ3RoO0crKyllPXJbR10sZltlXT1uW2VdO3JldHVybiBhfSl9KSh3aW5kb3cuV2ViQ29tcG9uZW50cyk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe31mdW5jdGlvbiBiKGEsYil7aWYoIWEuY2hpbGROb2Rlcy5sZW5ndGgpcmV0dXJuW107c3dpdGNoKGEubm9kZVR5cGUpe2Nhc2UgTm9kZS5ET0NVTUVOVF9OT0RFOnJldHVybiBHLmNhbGwoYSxiKTtjYXNlIE5vZGUuRE9DVU1FTlRfRlJBR01FTlRfTk9ERTpyZXR1cm4geC5jYWxsKGEsYik7ZGVmYXVsdDpyZXR1cm4gci5jYWxsKGEsYil9fXZhciBjPSJ1bmRlZmluZWQiPT09dHlwZW9mIEhUTUxUZW1wbGF0ZUVsZW1lbnQsZD0hKGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKS5jbG9uZU5vZGUoKWluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudCksZT0hMTsvVHJpZGVudC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSYmZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYil7aWYoYSBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpZm9yKHZhciBkO2Q9YS5maXJzdENoaWxkOyljLmNhbGwodGhpcyxkLGIpO2Vsc2UgYy5jYWxsKHRoaXMsCmEsYik7cmV0dXJuIGF9ZT0hMDt2YXIgYj1Ob2RlLnByb3RvdHlwZS5jbG9uZU5vZGU7Tm9kZS5wcm90b3R5cGUuY2xvbmVOb2RlPWZ1bmN0aW9uKGEpe2E9Yi5jYWxsKHRoaXMsYSk7dGhpcyBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQmJihhLl9fcHJvdG9fXz1Eb2N1bWVudEZyYWdtZW50LnByb3RvdHlwZSk7cmV0dXJuIGF9O0RvY3VtZW50RnJhZ21lbnQucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3JBbGw9SFRNTEVsZW1lbnQucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3JBbGw7RG9jdW1lbnRGcmFnbWVudC5wcm90b3R5cGUucXVlcnlTZWxlY3Rvcj1IVE1MRWxlbWVudC5wcm90b3R5cGUucXVlcnlTZWxlY3RvcjtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhEb2N1bWVudEZyYWdtZW50LnByb3RvdHlwZSx7bm9kZVR5cGU6e2dldDpmdW5jdGlvbigpe3JldHVybiBOb2RlLkRPQ1VNRU5UX0ZSQUdNRU5UX05PREV9LGNvbmZpZ3VyYWJsZTohMH0sbG9jYWxOYW1lOntnZXQ6ZnVuY3Rpb24oKXt9LApjb25maWd1cmFibGU6ITB9LG5vZGVOYW1lOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4iI2RvY3VtZW50LWZyYWdtZW50In0sY29uZmlndXJhYmxlOiEwfX0pO3ZhciBjPU5vZGUucHJvdG90eXBlLmluc2VydEJlZm9yZTtOb2RlLnByb3RvdHlwZS5pbnNlcnRCZWZvcmU9YTt2YXIgZD1Ob2RlLnByb3RvdHlwZS5hcHBlbmRDaGlsZDtOb2RlLnByb3RvdHlwZS5hcHBlbmRDaGlsZD1mdW5jdGlvbihiKXtiIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudD9hLmNhbGwodGhpcyxiLG51bGwpOmQuY2FsbCh0aGlzLGIpO3JldHVybiBifTt2YXIgZj1Ob2RlLnByb3RvdHlwZS5yZW1vdmVDaGlsZCxnPU5vZGUucHJvdG90eXBlLnJlcGxhY2VDaGlsZDtOb2RlLnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQ9ZnVuY3Rpb24oYixjKXtiIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudD8oYS5jYWxsKHRoaXMsYixjKSxmLmNhbGwodGhpcyxjKSk6Zy5jYWxsKHRoaXMsYixjKTtyZXR1cm4gY307RG9jdW1lbnQucHJvdG90eXBlLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQ9CmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jcmVhdGVFbGVtZW50KCJkZiIpO2EuX19wcm90b19fPURvY3VtZW50RnJhZ21lbnQucHJvdG90eXBlO3JldHVybiBhfTt2YXIgaD1Eb2N1bWVudC5wcm90b3R5cGUuaW1wb3J0Tm9kZTtEb2N1bWVudC5wcm90b3R5cGUuaW1wb3J0Tm9kZT1mdW5jdGlvbihhLGIpe2I9aC5jYWxsKHRoaXMsYSxifHwhMSk7YSBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQmJihiLl9fcHJvdG9fXz1Eb2N1bWVudEZyYWdtZW50LnByb3RvdHlwZSk7cmV0dXJuIGJ9fSgpO3ZhciBmPU5vZGUucHJvdG90eXBlLmNsb25lTm9kZSxnPURvY3VtZW50LnByb3RvdHlwZS5jcmVhdGVFbGVtZW50LGg9RG9jdW1lbnQucHJvdG90eXBlLmltcG9ydE5vZGUsaz1Ob2RlLnByb3RvdHlwZS5yZW1vdmVDaGlsZCxtPU5vZGUucHJvdG90eXBlLmFwcGVuZENoaWxkLG49Tm9kZS5wcm90b3R5cGUucmVwbGFjZUNoaWxkLHI9RWxlbWVudC5wcm90b3R5cGUucXVlcnlTZWxlY3RvckFsbCwKRz1Eb2N1bWVudC5wcm90b3R5cGUucXVlcnlTZWxlY3RvckFsbCx4PURvY3VtZW50RnJhZ21lbnQucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3JBbGwsdj1mdW5jdGlvbigpe2lmKCFjKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIpLGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKTtiLmNvbnRlbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpO2EuY29udGVudC5hcHBlbmRDaGlsZChiKTthPWEuY2xvbmVOb2RlKCEwKTtyZXR1cm4gMD09PWEuY29udGVudC5jaGlsZE5vZGVzLmxlbmd0aHx8MD09PWEuY29udGVudC5maXJzdENoaWxkLmNvbnRlbnQuY2hpbGROb2Rlcy5sZW5ndGh8fGR9fSgpO2lmKGMpe3ZhciBVPWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgidGVtcGxhdGUiKSxEYz0hMCx4YT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO3hhLnRleHRDb250ZW50PSJ0ZW1wbGF0ZXtkaXNwbGF5Om5vbmU7fSI7CnZhciBFYz1kb2N1bWVudC5oZWFkO0VjLmluc2VydEJlZm9yZSh4YSxFYy5maXJzdEVsZW1lbnRDaGlsZCk7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShIVE1MRWxlbWVudC5wcm90b3R5cGUpO3ZhciBtZj0hZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikuaGFzT3duUHJvcGVydHkoImlubmVySFRNTCIpO2EuUj1mdW5jdGlvbihiKXtpZighYi5jb250ZW50JiZiLm5hbWVzcGFjZVVSST09PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5uYW1lc3BhY2VVUkkpe2IuY29udGVudD1VLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtmb3IodmFyIGM7Yz1iLmZpcnN0Q2hpbGQ7KW0uY2FsbChiLmNvbnRlbnQsYyk7aWYobWYpYi5fX3Byb3RvX189YS5wcm90b3R5cGU7ZWxzZSBpZihiLmNsb25lTm9kZT1mdW5jdGlvbihiKXtyZXR1cm4gYS5hKHRoaXMsYil9LERjKXRyeXtwKGIpLEZjKGIpfWNhdGNoKHpoKXtEYz0hMX1hLmIoYi5jb250ZW50KX19O3ZhciBwPWZ1bmN0aW9uKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShiLAoiaW5uZXJIVE1MIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEdjKHRoaXMpfSxzZXQ6ZnVuY3Rpb24oYil7VS5ib2R5LmlubmVySFRNTD1iO2ZvcihhLmIoVSk7dGhpcy5jb250ZW50LmZpcnN0Q2hpbGQ7KWsuY2FsbCh0aGlzLmNvbnRlbnQsdGhpcy5jb250ZW50LmZpcnN0Q2hpbGQpO2Zvcig7VS5ib2R5LmZpcnN0Q2hpbGQ7KW0uY2FsbCh0aGlzLmNvbnRlbnQsVS5ib2R5LmZpcnN0Q2hpbGQpfSxjb25maWd1cmFibGU6ITB9KX0sRmM9ZnVuY3Rpb24oYSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsIm91dGVySFRNTCIse2dldDpmdW5jdGlvbigpe3JldHVybiI8dGVtcGxhdGU+Iit0aGlzLmlubmVySFRNTCsiPC90ZW1wbGF0ZT4ifSxzZXQ6ZnVuY3Rpb24oYSl7aWYodGhpcy5wYXJlbnROb2RlKXtVLmJvZHkuaW5uZXJIVE1MPWE7Zm9yKGE9dGhpcy5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtVLmJvZHkuZmlyc3RDaGlsZDspbS5jYWxsKGEsVS5ib2R5LmZpcnN0Q2hpbGQpOwpuLmNhbGwodGhpcy5wYXJlbnROb2RlLGEsdGhpcyl9ZWxzZSB0aHJvdyBFcnJvcigiRmFpbGVkIHRvIHNldCB0aGUgJ291dGVySFRNTCcgcHJvcGVydHkgb24gJ0VsZW1lbnQnOiBUaGlzIGVsZW1lbnQgaGFzIG5vIHBhcmVudCBub2RlLiIpO30sY29uZmlndXJhYmxlOiEwfSl9O3AoYS5wcm90b3R5cGUpO0ZjKGEucHJvdG90eXBlKTthLmI9ZnVuY3Rpb24oYyl7Yz1iKGMsInRlbXBsYXRlIik7Zm9yKHZhciBkPTAsZT1jLmxlbmd0aCxmO2Q8ZSYmKGY9Y1tkXSk7ZCsrKWEuUihmKX07ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXthLmIoZG9jdW1lbnQpfSk7RG9jdW1lbnQucHJvdG90eXBlLmNyZWF0ZUVsZW1lbnQ9ZnVuY3Rpb24oKXt2YXIgYj1nLmFwcGx5KHRoaXMsYXJndW1lbnRzKTsidGVtcGxhdGUiPT09Yi5sb2NhbE5hbWUmJmEuUihiKTtyZXR1cm4gYn07dmFyIG5mPS9bJlx1MDBBMCJdL2csa2I9L1smXHUwMEEwPD5dL2csCmw9ZnVuY3Rpb24oYSl7c3dpdGNoKGEpe2Nhc2UgIiYiOnJldHVybiImYW1wOyI7Y2FzZSAiPCI6cmV0dXJuIiZsdDsiO2Nhc2UgIj4iOnJldHVybiImZ3Q7IjtjYXNlICciJzpyZXR1cm4iJnF1b3Q7IjtjYXNlICJcdTAwYTAiOnJldHVybiImbmJzcDsifX07eGE9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXt9LGM9MDtjPGEubGVuZ3RoO2MrKyliW2FbY11dPSEwO3JldHVybiBifTt2YXIgRj14YSgiYXJlYSBiYXNlIGJyIGNvbCBjb21tYW5kIGVtYmVkIGhyIGltZyBpbnB1dCBrZXlnZW4gbGluayBtZXRhIHBhcmFtIHNvdXJjZSB0cmFjayB3YnIiLnNwbGl0KCIgIikpLG9mPXhhKCJzdHlsZSBzY3JpcHQgeG1wIGlmcmFtZSBub2VtYmVkIG5vZnJhbWVzIHBsYWludGV4dCBub3NjcmlwdCIuc3BsaXQoIiAiKSksR2M9ZnVuY3Rpb24oYSxiKXsidGVtcGxhdGUiPT09YS5sb2NhbE5hbWUmJihhPWEuY29udGVudCk7Zm9yKHZhciBjPSIiLGQ9Yj9iKGEpOmEuY2hpbGROb2RlcyxlPTAsZj1kLmxlbmd0aCwKZztlPGYmJihnPWRbZV0pO2UrKyl7YTp7dmFyIGg9Zzt2YXIgaz1hO3ZhciBtPWI7c3dpdGNoKGgubm9kZVR5cGUpe2Nhc2UgTm9kZS5FTEVNRU5UX05PREU6Zm9yKHZhciBuPWgubG9jYWxOYW1lLHY9IjwiK24scj1oLmF0dHJpYnV0ZXMscD0wO2s9cltwXTtwKyspdis9IiAiK2submFtZSsnPSInK2sudmFsdWUucmVwbGFjZShuZixsKSsnIic7dis9Ij4iO2g9RltuXT92OnYrR2MoaCxtKSsiPC8iK24rIj4iO2JyZWFrIGE7Y2FzZSBOb2RlLlRFWFRfTk9ERTpoPWguZGF0YTtoPWsmJm9mW2subG9jYWxOYW1lXT9oOmgucmVwbGFjZShrYixsKTticmVhayBhO2Nhc2UgTm9kZS5DT01NRU5UX05PREU6aD0iXHgzYyEtLSIraC5kYXRhKyItLVx4M2UiO2JyZWFrIGE7ZGVmYXVsdDp0aHJvdyB3aW5kb3cuY29uc29sZS5lcnJvcihoKSxFcnJvcigibm90IGltcGxlbWVudGVkIik7fX1jKz1ofXJldHVybiBjfX1pZihjfHx2KXthLmE9ZnVuY3Rpb24oYSxiKXt2YXIgYz1mLmNhbGwoYSwhMSk7CnRoaXMuUiYmdGhpcy5SKGMpO2ImJihtLmNhbGwoYy5jb250ZW50LGYuY2FsbChhLmNvbnRlbnQsITApKSxsYihjLmNvbnRlbnQsYS5jb250ZW50KSk7cmV0dXJuIGN9O3ZhciBsYj1mdW5jdGlvbihjLGQpe2lmKGQucXVlcnlTZWxlY3RvckFsbCYmKGQ9YihkLCJ0ZW1wbGF0ZSIpLDAhPT1kLmxlbmd0aCkpe2M9YihjLCJ0ZW1wbGF0ZSIpO2Zvcih2YXIgZT0wLGY9Yy5sZW5ndGgsZyxoO2U8ZjtlKyspaD1kW2VdLGc9Y1tlXSxhJiZhLlImJmEuUihoKSxuLmNhbGwoZy5wYXJlbnROb2RlLHBmLmNhbGwoaCwhMCksZyl9fSxwZj1Ob2RlLnByb3RvdHlwZS5jbG9uZU5vZGU9ZnVuY3Rpb24oYil7aWYoIWUmJmQmJnRoaXMgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KWlmKGIpdmFyIGM9cWYuY2FsbCh0aGlzLm93bmVyRG9jdW1lbnQsdGhpcywhMCk7ZWxzZSByZXR1cm4gdGhpcy5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtlbHNlIHRoaXMubm9kZVR5cGU9PT0KTm9kZS5FTEVNRU5UX05PREUmJiJ0ZW1wbGF0ZSI9PT10aGlzLmxvY2FsTmFtZSYmdGhpcy5uYW1lc3BhY2VVUkk9PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5uYW1lc3BhY2VVUkk/Yz1hLmEodGhpcyxiKTpjPWYuY2FsbCh0aGlzLGIpO2ImJmxiKGMsdGhpcyk7cmV0dXJuIGN9LHFmPURvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlPWZ1bmN0aW9uKGMsZCl7ZD1kfHwhMTtpZigidGVtcGxhdGUiPT09Yy5sb2NhbE5hbWUpcmV0dXJuIGEuYShjLGQpO3ZhciBlPWguY2FsbCh0aGlzLGMsZCk7aWYoZCl7bGIoZSxjKTtjPWIoZSwnc2NyaXB0Om5vdChbdHlwZV0pLHNjcmlwdFt0eXBlPSJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0Il0sc2NyaXB0W3R5cGU9InRleHQvamF2YXNjcmlwdCJdJyk7Zm9yKHZhciBmLGs9MDtrPGMubGVuZ3RoO2srKyl7Zj1jW2tdO2Q9Zy5jYWxsKGRvY3VtZW50LCJzY3JpcHQiKTtkLnRleHRDb250ZW50PWYudGV4dENvbnRlbnQ7Zm9yKHZhciBtPWYuYXR0cmlidXRlcywKbD0wLHY7bDxtLmxlbmd0aDtsKyspdj1tW2xdLGQuc2V0QXR0cmlidXRlKHYubmFtZSx2LnZhbHVlKTtuLmNhbGwoZi5wYXJlbnROb2RlLGQsZil9fXJldHVybiBlfX1jJiYod2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQ9YSl9KSgpO3ZhciBrYTtBcnJheS5pc0FycmF5P2thPUFycmF5LmlzQXJyYXk6a2E9ZnVuY3Rpb24oYSl7cmV0dXJuIltvYmplY3QgQXJyYXldIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKX07dmFyIGxhPWthO3ZhciBtYT0wLG5hLG9hPSJ1bmRlZmluZWQiIT09dHlwZW9mIHdpbmRvdz93aW5kb3c6dm9pZCAwLHBhPW9hfHx7fSxxYT1wYS5NdXRhdGlvbk9ic2VydmVyfHxwYS5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLHJhPSJ1bmRlZmluZWQiPT09dHlwZW9mIHNlbGYmJiJ1bmRlZmluZWQiIT09dHlwZW9mIHByb2Nlc3MmJiJbb2JqZWN0IHByb2Nlc3NdIj09PXt9LnRvU3RyaW5nLmNhbGwocHJvY2Vzcyksc2E9InVuZGVmaW5lZCIhPT10eXBlb2YgVWludDhDbGFtcGVkQXJyYXkmJiJ1bmRlZmluZWQiIT09dHlwZW9mIGltcG9ydFNjcmlwdHMmJiJ1bmRlZmluZWQiIT09dHlwZW9mIE1lc3NhZ2VDaGFubmVsO2Z1bmN0aW9uIHRhKCl7cmV0dXJuInVuZGVmaW5lZCIhPT10eXBlb2YgbmE/ZnVuY3Rpb24oKXtuYSh1YSl9OnZhKCl9CmZ1bmN0aW9uIHdhKCl7dmFyIGE9MCxiPW5ldyBxYSh1YSksYz1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7Yi5vYnNlcnZlKGMse2NoYXJhY3RlckRhdGE6ITB9KTtyZXR1cm4gZnVuY3Rpb24oKXtjLmRhdGE9YT0rK2ElMn19ZnVuY3Rpb24geWEoKXt2YXIgYT1uZXcgTWVzc2FnZUNoYW5uZWw7YS5wb3J0MS5vbm1lc3NhZ2U9dWE7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEucG9ydDIucG9zdE1lc3NhZ2UoMCl9fWZ1bmN0aW9uIHZhKCl7dmFyIGE9c2V0VGltZW91dDtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYSh1YSwxKX19dmFyIHphPUFycmF5KDFFMyk7ZnVuY3Rpb24gdWEoKXtmb3IodmFyIGE9MDthPG1hO2ErPTIpKDAsemFbYV0pKHphW2ErMV0pLHphW2FdPXZvaWQgMCx6YVthKzFdPXZvaWQgMDttYT0wfXZhciBBYSxCYTsKaWYocmEpQmE9ZnVuY3Rpb24oKXtyZXR1cm4gcHJvY2Vzcy54Yih1YSl9O2Vsc2V7dmFyIENhO2lmKHFhKUNhPXdhKCk7ZWxzZXt2YXIgRGE7aWYoc2EpRGE9eWEoKTtlbHNle3ZhciBFYTtpZih2b2lkIDA9PT1vYSYmImZ1bmN0aW9uIj09PXR5cGVvZiByZXF1aXJlKXRyeXt2YXIgRmE9cmVxdWlyZSgidmVydHgiKTtuYT1GYS56Ynx8RmEueWI7RWE9dGEoKX1jYXRjaChhKXtFYT12YSgpfWVsc2UgRWE9dmEoKTtEYT1FYX1DYT1EYX1CYT1DYX1BYT1CYTtmdW5jdGlvbiBHYShhLGIpe3phW21hXT1hO3phW21hKzFdPWI7bWErPTI7Mj09PW1hJiZBYSgpfTtmdW5jdGlvbiBIYShhLGIpe3ZhciBjPXRoaXMsZD1uZXcgdGhpcy5jb25zdHJ1Y3RvcihJYSk7dm9pZCAwPT09ZFtKYV0mJkthKGQpO3ZhciBlPWMubztpZihlKXt2YXIgZj1hcmd1bWVudHNbZS0xXTtHYShmdW5jdGlvbigpe3JldHVybiBMYShlLGQsZixjLmwpfSl9ZWxzZSBNYShjLGQsYSxiKTtyZXR1cm4gZH07ZnVuY3Rpb24gTmEoYSl7aWYoYSYmIm9iamVjdCI9PT10eXBlb2YgYSYmYS5jb25zdHJ1Y3Rvcj09PXRoaXMpcmV0dXJuIGE7dmFyIGI9bmV3IHRoaXMoSWEpO09hKGIsYSk7cmV0dXJuIGJ9O3ZhciBKYT1NYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMTYpO2Z1bmN0aW9uIElhKCl7fXZhciBRYT1uZXcgUGE7ZnVuY3Rpb24gUmEoYSl7dHJ5e3JldHVybiBhLnRoZW59Y2F0Y2goYil7cmV0dXJuIFFhLmVycm9yPWIsUWF9fWZ1bmN0aW9uIFNhKGEsYixjLGQpe3RyeXthLmNhbGwoYixjLGQpfWNhdGNoKGUpe3JldHVybiBlfX1mdW5jdGlvbiBUYShhLGIsYyl7R2EoZnVuY3Rpb24oYSl7dmFyIGQ9ITEsZj1TYShjLGIsZnVuY3Rpb24oYyl7ZHx8KGQ9ITAsYiE9PWM/T2EoYSxjKTp0KGEsYykpfSxmdW5jdGlvbihiKXtkfHwoZD0hMCx1KGEsYikpfSk7IWQmJmYmJihkPSEwLHUoYSxmKSl9LGEpfWZ1bmN0aW9uIFVhKGEsYil7MT09PWIubz90KGEsYi5sKToyPT09Yi5vP3UoYSxiLmwpOk1hKGIsdm9pZCAwLGZ1bmN0aW9uKGIpe3JldHVybiBPYShhLGIpfSxmdW5jdGlvbihiKXtyZXR1cm4gdShhLGIpfSl9CmZ1bmN0aW9uIFZhKGEsYixjKXtiLmNvbnN0cnVjdG9yPT09YS5jb25zdHJ1Y3RvciYmYz09PUhhJiZiLmNvbnN0cnVjdG9yLnJlc29sdmU9PT1OYT9VYShhLGIpOmM9PT1RYT8odShhLFFhLmVycm9yKSxRYS5lcnJvcj1udWxsKTp2b2lkIDA9PT1jP3QoYSxiKToiZnVuY3Rpb24iPT09dHlwZW9mIGM/VGEoYSxiLGMpOnQoYSxiKX1mdW5jdGlvbiBPYShhLGIpe2lmKGE9PT1iKXUoYSxuZXcgVHlwZUVycm9yKCJZb3UgY2Fubm90IHJlc29sdmUgYSBwcm9taXNlIHdpdGggaXRzZWxmIikpO2Vsc2V7dmFyIGM9dHlwZW9mIGI7bnVsbD09PWJ8fCJvYmplY3QiIT09YyYmImZ1bmN0aW9uIiE9PWM/dChhLGIpOlZhKGEsYixSYShiKSl9fWZ1bmN0aW9uIFdhKGEpe2EueGEmJmEueGEoYS5sKTtYYShhKX1mdW5jdGlvbiB0KGEsYil7dm9pZCAwPT09YS5vJiYoYS5sPWIsYS5vPTEsMCE9PWEuVS5sZW5ndGgmJkdhKFhhLGEpKX0KZnVuY3Rpb24gdShhLGIpe3ZvaWQgMD09PWEubyYmKGEubz0yLGEubD1iLEdhKFdhLGEpKX1mdW5jdGlvbiBNYShhLGIsYyxkKXt2YXIgZT1hLlUsZj1lLmxlbmd0aDthLnhhPW51bGw7ZVtmXT1iO2VbZisxXT1jO2VbZisyXT1kOzA9PT1mJiZhLm8mJkdhKFhhLGEpfWZ1bmN0aW9uIFhhKGEpe3ZhciBiPWEuVSxjPWEubztpZigwIT09Yi5sZW5ndGgpe2Zvcih2YXIgZCxlLGY9YS5sLGc9MDtnPGIubGVuZ3RoO2crPTMpZD1iW2ddLGU9YltnK2NdLGQ/TGEoYyxkLGUsZik6ZShmKTthLlUubGVuZ3RoPTB9fWZ1bmN0aW9uIFBhKCl7dGhpcy5lcnJvcj1udWxsfXZhciBZYT1uZXcgUGE7CmZ1bmN0aW9uIExhKGEsYixjLGQpe3ZhciBlPSJmdW5jdGlvbiI9PT10eXBlb2YgYztpZihlKXt0cnl7dmFyIGY9YyhkKX1jYXRjaChtKXtZYS5lcnJvcj1tLGY9WWF9aWYoZj09PVlhKXt2YXIgZz0hMDt2YXIgaD1mLmVycm9yO2YuZXJyb3I9bnVsbH1lbHNlIHZhciBrPSEwO2lmKGI9PT1mKXt1KGIsbmV3IFR5cGVFcnJvcigiQSBwcm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0dXJuIHRoYXQgc2FtZSBwcm9taXNlLiIpKTtyZXR1cm59fWVsc2UgZj1kLGs9ITA7dm9pZCAwPT09Yi5vJiYoZSYmaz9PYShiLGYpOmc/dShiLGgpOjE9PT1hP3QoYixmKToyPT09YSYmdShiLGYpKX1mdW5jdGlvbiBaYShhLGIpe3RyeXtiKGZ1bmN0aW9uKGIpe09hKGEsYil9LGZ1bmN0aW9uKGIpe3UoYSxiKX0pfWNhdGNoKGMpe3UoYSxjKX19dmFyICRhPTA7ZnVuY3Rpb24gS2EoYSl7YVtKYV09JGErKzthLm89dm9pZCAwO2EubD12b2lkIDA7YS5VPVtdfTtmdW5jdGlvbiBhYihhLGIpe3RoaXMuTmE9YTt0aGlzLk49bmV3IGEoSWEpO3RoaXMuTltKYV18fEthKHRoaXMuTik7aWYobGEoYikpaWYodGhpcy4kPXRoaXMubGVuZ3RoPWIubGVuZ3RoLHRoaXMubD1BcnJheSh0aGlzLmxlbmd0aCksMD09PXRoaXMubGVuZ3RoKXQodGhpcy5OLHRoaXMubCk7ZWxzZXt0aGlzLmxlbmd0aD10aGlzLmxlbmd0aHx8MDtmb3IoYT0wO3ZvaWQgMD09PXRoaXMubyYmYTxiLmxlbmd0aDthKyspYmIodGhpcyxiW2FdLGEpOzA9PT10aGlzLiQmJnQodGhpcy5OLHRoaXMubCl9ZWxzZSB1KHRoaXMuTixFcnJvcigiQXJyYXkgTWV0aG9kcyBtdXN0IGJlIHByb3ZpZGVkIGFuIEFycmF5IikpfQpmdW5jdGlvbiBiYihhLGIsYyl7dmFyIGQ9YS5OYSxlPWQucmVzb2x2ZTtlPT09TmE/KGU9UmEoYiksZT09PUhhJiZ2b2lkIDAhPT1iLm8/Y2IoYSxiLm8sYyxiLmwpOiJmdW5jdGlvbiIhPT10eXBlb2YgZT8oYS4kLS0sYS5sW2NdPWIpOmQ9PT13PyhkPW5ldyBkKElhKSxWYShkLGIsZSksZGIoYSxkLGMpKTpkYihhLG5ldyBkKGZ1bmN0aW9uKGEpe3JldHVybiBhKGIpfSksYykpOmRiKGEsZShiKSxjKX1mdW5jdGlvbiBjYihhLGIsYyxkKXt2YXIgZT1hLk47dm9pZCAwPT09ZS5vJiYoYS4kLS0sMj09PWI/dShlLGQpOmEubFtjXT1kKTswPT09YS4kJiZ0KGUsYS5sKX1mdW5jdGlvbiBkYihhLGIsYyl7TWEoYix2b2lkIDAsZnVuY3Rpb24oYil7cmV0dXJuIGNiKGEsMSxjLGIpfSxmdW5jdGlvbihiKXtyZXR1cm4gY2IoYSwyLGMsYil9KX07ZnVuY3Rpb24gZWIoYSl7cmV0dXJuKG5ldyBhYih0aGlzLGEpKS5OfTtmdW5jdGlvbiBmYihhKXt2YXIgYj10aGlzO3JldHVybiBsYShhKT9uZXcgYihmdW5jdGlvbihjLGQpe2Zvcih2YXIgZT1hLmxlbmd0aCxmPTA7ZjxlO2YrKyliLnJlc29sdmUoYVtmXSkudGhlbihjLGQpfSk6bmV3IGIoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYihuZXcgVHlwZUVycm9yKCJZb3UgbXVzdCBwYXNzIGFuIGFycmF5IHRvIHJhY2UuIikpfSl9O2Z1bmN0aW9uIGdiKGEpe3ZhciBiPW5ldyB0aGlzKElhKTt1KGIsYSk7cmV0dXJuIGJ9O2Z1bmN0aW9uIHcoYSl7dGhpc1tKYV09JGErKzt0aGlzLmw9dGhpcy5vPXZvaWQgMDt0aGlzLlU9W107aWYoSWEhPT1hKXtpZigiZnVuY3Rpb24iIT09dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcigiWW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvciIpO2lmKHRoaXMgaW5zdGFuY2VvZiB3KVphKHRoaXMsYSk7ZWxzZSB0aHJvdyBuZXcgVHlwZUVycm9yKCJGYWlsZWQgdG8gY29uc3RydWN0ICdQcm9taXNlJzogUGxlYXNlIHVzZSB0aGUgJ25ldycgb3BlcmF0b3IsIHRoaXMgb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi4iKTt9fXcucHJvdG90eXBlPXtjb25zdHJ1Y3Rvcjp3LHRoZW46SGEsYTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy50aGVuKG51bGwsYSl9fTsvKgoKQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dApUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dApUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHQKQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc28Kc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHQKKi8Kd2luZG93LlByb21pc2V8fCh3aW5kb3cuUHJvbWlzZT13LHcucHJvdG90eXBlWyJjYXRjaCJdPXcucHJvdG90eXBlLmEsdy5wcm90b3R5cGUudGhlbj13LnByb3RvdHlwZS50aGVuLHcuYWxsPWViLHcucmFjZT1mYix3LnJlc29sdmU9TmEsdy5yZWplY3Q9Z2IpOy8qCgogQ29weXJpZ2h0IChjKSAyMDE0IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQKIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0CiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHQKIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvCiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dAoqLwp3aW5kb3cuV2ViQ29tcG9uZW50cz13aW5kb3cuV2ViQ29tcG9uZW50c3x8e2ZsYWdzOnt9fTt2YXIgaGI9ZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2NyaXB0W3NyYyo9IndlYmNvbXBvbmVudHMtYnVuZGxlIl0nKSxpYj0vd2MtKC4rKS8seT17fTtpZigheS5ub09wdHMpe2xvY2F0aW9uLnNlYXJjaC5zbGljZSgxKS5zcGxpdCgiJiIpLmZvckVhY2goZnVuY3Rpb24oYSl7YT1hLnNwbGl0KCI9Iik7dmFyIGI7YVswXSYmKGI9YVswXS5tYXRjaChpYikpJiYoeVtiWzFdXT1hWzFdfHwhMCl9KTtpZihoYilmb3IodmFyIGpiPTAsbWI7bWI9aGIuYXR0cmlidXRlc1tqYl07amIrKykic3JjIiE9PW1iLm5hbWUmJih5W21iLm5hbWVdPW1iLnZhbHVlfHwhMCk7aWYoeS5sb2cmJnkubG9nLnNwbGl0KXt2YXIgbmI9eS5sb2cuc3BsaXQoIiwiKTt5LmxvZz17fTtuYi5mb3JFYWNoKGZ1bmN0aW9uKGEpe3kubG9nW2FdPSEwfSl9ZWxzZSB5LmxvZz17fX0Kd2luZG93LldlYkNvbXBvbmVudHMuZmxhZ3M9eTt2YXIgb2I9eS5zaGFkeWRvbTtvYiYmKHdpbmRvdy5TaGFkeURPTT13aW5kb3cuU2hhZHlET018fHt9LHdpbmRvdy5TaGFkeURPTS5mb3JjZT1vYik7dmFyIHBiPXkucmVnaXN0ZXJ8fHkuY2U7cGImJndpbmRvdy5jdXN0b21FbGVtZW50cyYmKHdpbmRvdy5jdXN0b21FbGVtZW50cy5mb3JjZVBvbHlmaWxsPXBiKTsvKgoKQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dApUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dApUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHQKQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc28Kc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHQKKi8KZnVuY3Rpb24gcWIoKXt0aGlzLkRhPXRoaXMucm9vdD1udWxsO3RoaXMuZGE9ITE7dGhpcy5MPXRoaXMuWj10aGlzLnBhPXRoaXMuYXNzaWduZWRTbG90PXRoaXMuYXNzaWduZWROb2Rlcz10aGlzLlM9bnVsbDt0aGlzLmNoaWxkTm9kZXM9dGhpcy5uZXh0U2libGluZz10aGlzLnByZXZpb3VzU2libGluZz10aGlzLmxhc3RDaGlsZD10aGlzLmZpcnN0Q2hpbGQ9dGhpcy5wYXJlbnROb2RlPXRoaXMuVj12b2lkIDA7dGhpcy5JYT10aGlzLnZhPSExfXFiLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57fX07ZnVuY3Rpb24geihhKXthLmthfHwoYS5rYT1uZXcgcWIpO3JldHVybiBhLmthfWZ1bmN0aW9uIEEoYSl7cmV0dXJuIGEmJmEua2F9O3ZhciBCPXdpbmRvdy5TaGFkeURPTXx8e307Qi5VYT0hKCFFbGVtZW50LnByb3RvdHlwZS5hdHRhY2hTaGFkb3d8fCFOb2RlLnByb3RvdHlwZS5nZXRSb290Tm9kZSk7dmFyIHJiPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTm9kZS5wcm90b3R5cGUsImZpcnN0Q2hpbGQiKTtCLkk9ISEocmImJnJiLmNvbmZpZ3VyYWJsZSYmcmIuZ2V0KTtCLkJhPUIuZm9yY2V8fCFCLlVhO3ZhciBzYj1uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKCJUcmlkZW50IiksdGI9bmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgiRWRnZSIpO3ZvaWQgMD09PUIuRmEmJihCLkZhPUIuSSYmKHNifHx0YikpO2Z1bmN0aW9uIHViKGEpe3JldHVybihhPUEoYSkpJiZ2b2lkIDAhPT1hLmZpcnN0Q2hpbGR9ZnVuY3Rpb24gQyhhKXtyZXR1cm4iU2hhZHlSb290Ij09PWEuT2F9ZnVuY3Rpb24gdmIoYSl7YT1hLmdldFJvb3ROb2RlKCk7aWYoQyhhKSlyZXR1cm4gYX0KdmFyIHdiPUVsZW1lbnQucHJvdG90eXBlLHhiPXdiLm1hdGNoZXN8fHdiLm1hdGNoZXNTZWxlY3Rvcnx8d2IubW96TWF0Y2hlc1NlbGVjdG9yfHx3Yi5tc01hdGNoZXNTZWxlY3Rvcnx8d2Iub01hdGNoZXNTZWxlY3Rvcnx8d2Iud2Via2l0TWF0Y2hlc1NlbGVjdG9yO2Z1bmN0aW9uIHliKGEsYil7aWYoYSYmYilmb3IodmFyIGM9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYiksZD0wLGU7ZDxjLmxlbmd0aCYmKGU9Y1tkXSk7ZCsrKXt2YXIgZj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsZSk7ZiYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsZSxmKX19ZnVuY3Rpb24gemIoYSxiKXtmb3IodmFyIGM9W10sZD0xO2Q8YXJndW1lbnRzLmxlbmd0aDsrK2QpY1tkLTFdPWFyZ3VtZW50c1tkXTtmb3IoZD0wO2Q8Yy5sZW5ndGg7ZCsrKXliKGEsY1tkXSk7cmV0dXJuIGF9ZnVuY3Rpb24gQWIoYSxiKXtmb3IodmFyIGMgaW4gYilhW2NdPWJbY119CnZhciBCYj1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIiksQ2I9MCxEYj1bXTsobmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oKXtmb3IoO0RiLmxlbmd0aDspdHJ5e0RiLnNoaWZ0KCkoKX1jYXRjaChhKXt0aHJvdyBCYi50ZXh0Q29udGVudD1DYisrLGE7fX0pKS5vYnNlcnZlKEJiLHtjaGFyYWN0ZXJEYXRhOiEwfSk7ZnVuY3Rpb24gRWIoYSl7RGIucHVzaChhKTtCYi50ZXh0Q29udGVudD1DYisrfXZhciBGYj0hIWRvY3VtZW50LmNvbnRhaW5zO2Z1bmN0aW9uIEdiKGEsYil7Zm9yKDtiOyl7aWYoYj09YSlyZXR1cm4hMDtiPWIucGFyZW50Tm9kZX1yZXR1cm4hMX07dmFyIEhiPVtdLEliO2Z1bmN0aW9uIEpiKGEpe0lifHwoSWI9ITAsRWIoS2IpKTtIYi5wdXNoKGEpfWZ1bmN0aW9uIEtiKCl7SWI9ITE7Zm9yKHZhciBhPSEhSGIubGVuZ3RoO0hiLmxlbmd0aDspSGIuc2hpZnQoKSgpO3JldHVybiBhfUtiLmxpc3Q9SGI7ZnVuY3Rpb24gTGIoKXt0aGlzLmE9ITE7dGhpcy5hZGRlZE5vZGVzPVtdO3RoaXMucmVtb3ZlZE5vZGVzPVtdO3RoaXMuY2E9bmV3IFNldH1mdW5jdGlvbiBNYihhKXthLmF8fChhLmE9ITAsRWIoZnVuY3Rpb24oKXtOYihhKX0pKX1mdW5jdGlvbiBOYihhKXtpZihhLmEpe2EuYT0hMTt2YXIgYj1hLnRha2VSZWNvcmRzKCk7Yi5sZW5ndGgmJmEuY2EuZm9yRWFjaChmdW5jdGlvbihhKXthKGIpfSl9fUxiLnByb3RvdHlwZS50YWtlUmVjb3Jkcz1mdW5jdGlvbigpe2lmKHRoaXMuYWRkZWROb2Rlcy5sZW5ndGh8fHRoaXMucmVtb3ZlZE5vZGVzLmxlbmd0aCl7dmFyIGE9W3thZGRlZE5vZGVzOnRoaXMuYWRkZWROb2RlcyxyZW1vdmVkTm9kZXM6dGhpcy5yZW1vdmVkTm9kZXN9XTt0aGlzLmFkZGVkTm9kZXM9W107dGhpcy5yZW1vdmVkTm9kZXM9W107cmV0dXJuIGF9cmV0dXJuW119OwpmdW5jdGlvbiBPYihhLGIpe3ZhciBjPXooYSk7Yy5TfHwoYy5TPW5ldyBMYik7Yy5TLmNhLmFkZChiKTt2YXIgZD1jLlM7cmV0dXJue0xhOmIsUDpkLFBhOmEsdGFrZVJlY29yZHM6ZnVuY3Rpb24oKXtyZXR1cm4gZC50YWtlUmVjb3JkcygpfX19ZnVuY3Rpb24gUGIoYSl7dmFyIGI9YSYmYS5QO2ImJihiLmNhLmRlbGV0ZShhLkxhKSxiLmNhLnNpemV8fCh6KGEuUGEpLlM9bnVsbCkpfQpmdW5jdGlvbiBRYihhLGIpe3ZhciBjPWIuZ2V0Um9vdE5vZGUoKTtyZXR1cm4gYS5tYXAoZnVuY3Rpb24oYSl7dmFyIGI9Yz09PWEudGFyZ2V0LmdldFJvb3ROb2RlKCk7aWYoYiYmYS5hZGRlZE5vZGVzKXtpZihiPUFycmF5LmZyb20oYS5hZGRlZE5vZGVzKS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIGM9PT1hLmdldFJvb3ROb2RlKCl9KSxiLmxlbmd0aClyZXR1cm4gYT1PYmplY3QuY3JlYXRlKGEpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCJhZGRlZE5vZGVzIix7dmFsdWU6Yixjb25maWd1cmFibGU6ITB9KSxhfWVsc2UgaWYoYilyZXR1cm4gYX0pLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gYX0pfTt2YXIgRD17fSxSYj1FbGVtZW50LnByb3RvdHlwZS5pbnNlcnRCZWZvcmUsU2I9RWxlbWVudC5wcm90b3R5cGUucmVwbGFjZUNoaWxkLFRiPUVsZW1lbnQucHJvdG90eXBlLnJlbW92ZUNoaWxkLFViPUVsZW1lbnQucHJvdG90eXBlLnNldEF0dHJpYnV0ZSxWYj1FbGVtZW50LnByb3RvdHlwZS5yZW1vdmVBdHRyaWJ1dGUsV2I9RWxlbWVudC5wcm90b3R5cGUuY2xvbmVOb2RlLFhiPURvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlLFliPUVsZW1lbnQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIsWmI9RWxlbWVudC5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciwkYj1XaW5kb3cucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIsYWM9V2luZG93LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyLGJjPUVsZW1lbnQucHJvdG90eXBlLmRpc3BhdGNoRXZlbnQsY2M9Tm9kZS5wcm90b3R5cGUuY29udGFpbnN8fEhUTUxFbGVtZW50LnByb3RvdHlwZS5jb250YWlucyxkYz1Eb2N1bWVudC5wcm90b3R5cGUuZ2V0RWxlbWVudEJ5SWQsCmVjPUVsZW1lbnQucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3IsZmM9RG9jdW1lbnRGcmFnbWVudC5wcm90b3R5cGUucXVlcnlTZWxlY3RvcixnYz1Eb2N1bWVudC5wcm90b3R5cGUucXVlcnlTZWxlY3RvcixoYz1FbGVtZW50LnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yQWxsLGljPURvY3VtZW50RnJhZ21lbnQucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3JBbGwsamM9RG9jdW1lbnQucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3JBbGw7RC5hcHBlbmRDaGlsZD1FbGVtZW50LnByb3RvdHlwZS5hcHBlbmRDaGlsZDtELmluc2VydEJlZm9yZT1SYjtELnJlcGxhY2VDaGlsZD1TYjtELnJlbW92ZUNoaWxkPVRiO0Quc2V0QXR0cmlidXRlPVViO0QucmVtb3ZlQXR0cmlidXRlPVZiO0QuY2xvbmVOb2RlPVdiO0QuaW1wb3J0Tm9kZT1YYjtELmFkZEV2ZW50TGlzdGVuZXI9WWI7RC5yZW1vdmVFdmVudExpc3RlbmVyPVpiO0QuZWI9JGI7RC5mYj1hYztELmRpc3BhdGNoRXZlbnQ9YmM7RC5jb250YWlucz1jYzsKRC5nZXRFbGVtZW50QnlJZD1kYztELm9iPWVjO0Quc2I9ZmM7RC5tYj1nYztELnF1ZXJ5U2VsZWN0b3I9ZnVuY3Rpb24oYSl7c3dpdGNoKHRoaXMubm9kZVR5cGUpe2Nhc2UgTm9kZS5FTEVNRU5UX05PREU6cmV0dXJuIGVjLmNhbGwodGhpcyxhKTtjYXNlIE5vZGUuRE9DVU1FTlRfTk9ERTpyZXR1cm4gZ2MuY2FsbCh0aGlzLGEpO2RlZmF1bHQ6cmV0dXJuIGZjLmNhbGwodGhpcyxhKX19O0QucGI9aGM7RC50Yj1pYztELm5iPWpjO0QucXVlcnlTZWxlY3RvckFsbD1mdW5jdGlvbihhKXtzd2l0Y2godGhpcy5ub2RlVHlwZSl7Y2FzZSBOb2RlLkVMRU1FTlRfTk9ERTpyZXR1cm4gaGMuY2FsbCh0aGlzLGEpO2Nhc2UgTm9kZS5ET0NVTUVOVF9OT0RFOnJldHVybiBqYy5jYWxsKHRoaXMsYSk7ZGVmYXVsdDpyZXR1cm4gaWMuY2FsbCh0aGlzLGEpfX07dmFyIGtjPS9bJlx1MDBBMCJdL2csbGM9L1smXHUwMEEwPD5dL2c7ZnVuY3Rpb24gbWMoYSl7c3dpdGNoKGEpe2Nhc2UgIiYiOnJldHVybiImYW1wOyI7Y2FzZSAiPCI6cmV0dXJuIiZsdDsiO2Nhc2UgIj4iOnJldHVybiImZ3Q7IjtjYXNlICciJzpyZXR1cm4iJnF1b3Q7IjtjYXNlICJcdTAwYTAiOnJldHVybiImbmJzcDsifX1mdW5jdGlvbiBuYyhhKXtmb3IodmFyIGI9e30sYz0wO2M8YS5sZW5ndGg7YysrKWJbYVtjXV09ITA7cmV0dXJuIGJ9dmFyIG9jPW5jKCJhcmVhIGJhc2UgYnIgY29sIGNvbW1hbmQgZW1iZWQgaHIgaW1nIGlucHV0IGtleWdlbiBsaW5rIG1ldGEgcGFyYW0gc291cmNlIHRyYWNrIHdiciIuc3BsaXQoIiAiKSkscGM9bmMoInN0eWxlIHNjcmlwdCB4bXAgaWZyYW1lIG5vZW1iZWQgbm9mcmFtZXMgcGxhaW50ZXh0IG5vc2NyaXB0Ii5zcGxpdCgiICIpKTsKZnVuY3Rpb24gcWMoYSxiKXsidGVtcGxhdGUiPT09YS5sb2NhbE5hbWUmJihhPWEuY29udGVudCk7Zm9yKHZhciBjPSIiLGQ9Yj9iKGEpOmEuY2hpbGROb2RlcyxlPTAsZj1kLmxlbmd0aCxnO2U8ZiYmKGc9ZFtlXSk7ZSsrKXthOnt2YXIgaD1nO3ZhciBrPWE7dmFyIG09Yjtzd2l0Y2goaC5ub2RlVHlwZSl7Y2FzZSBOb2RlLkVMRU1FTlRfTk9ERTpmb3IodmFyIG49aC5sb2NhbE5hbWUscj0iPCIrbixHPWguYXR0cmlidXRlcyx4PTA7az1HW3hdO3grKylyKz0iICIray5uYW1lKyc9Iicray52YWx1ZS5yZXBsYWNlKGtjLG1jKSsnIic7cis9Ij4iO2g9b2Nbbl0/cjpyK3FjKGgsbSkrIjwvIituKyI+IjticmVhayBhO2Nhc2UgTm9kZS5URVhUX05PREU6aD1oLmRhdGE7aD1rJiZwY1trLmxvY2FsTmFtZV0/aDpoLnJlcGxhY2UobGMsbWMpO2JyZWFrIGE7Y2FzZSBOb2RlLkNPTU1FTlRfTk9ERTpoPSJceDNjIS0tIitoLmRhdGErIi0tXHgzZSI7YnJlYWsgYTtkZWZhdWx0OnRocm93IHdpbmRvdy5jb25zb2xlLmVycm9yKGgpLApFcnJvcigibm90IGltcGxlbWVudGVkIik7fX1jKz1ofXJldHVybiBjfTt2YXIgRT17fSxIPWRvY3VtZW50LmNyZWF0ZVRyZWVXYWxrZXIoZG9jdW1lbnQsTm9kZUZpbHRlci5TSE9XX0FMTCxudWxsLCExKSxJPWRvY3VtZW50LmNyZWF0ZVRyZWVXYWxrZXIoZG9jdW1lbnQsTm9kZUZpbHRlci5TSE9XX0VMRU1FTlQsbnVsbCwhMSk7ZnVuY3Rpb24gcmMoYSl7dmFyIGI9W107SC5jdXJyZW50Tm9kZT1hO2ZvcihhPUguZmlyc3RDaGlsZCgpO2E7KWIucHVzaChhKSxhPUgubmV4dFNpYmxpbmcoKTtyZXR1cm4gYn1FLnBhcmVudE5vZGU9ZnVuY3Rpb24oYSl7SC5jdXJyZW50Tm9kZT1hO3JldHVybiBILnBhcmVudE5vZGUoKX07RS5maXJzdENoaWxkPWZ1bmN0aW9uKGEpe0guY3VycmVudE5vZGU9YTtyZXR1cm4gSC5maXJzdENoaWxkKCl9O0UubGFzdENoaWxkPWZ1bmN0aW9uKGEpe0guY3VycmVudE5vZGU9YTtyZXR1cm4gSC5sYXN0Q2hpbGQoKX07RS5wcmV2aW91c1NpYmxpbmc9ZnVuY3Rpb24oYSl7SC5jdXJyZW50Tm9kZT1hO3JldHVybiBILnByZXZpb3VzU2libGluZygpfTsKRS5uZXh0U2libGluZz1mdW5jdGlvbihhKXtILmN1cnJlbnROb2RlPWE7cmV0dXJuIEgubmV4dFNpYmxpbmcoKX07RS5jaGlsZE5vZGVzPXJjO0UucGFyZW50RWxlbWVudD1mdW5jdGlvbihhKXtJLmN1cnJlbnROb2RlPWE7cmV0dXJuIEkucGFyZW50Tm9kZSgpfTtFLmZpcnN0RWxlbWVudENoaWxkPWZ1bmN0aW9uKGEpe0kuY3VycmVudE5vZGU9YTtyZXR1cm4gSS5maXJzdENoaWxkKCl9O0UubGFzdEVsZW1lbnRDaGlsZD1mdW5jdGlvbihhKXtJLmN1cnJlbnROb2RlPWE7cmV0dXJuIEkubGFzdENoaWxkKCl9O0UucHJldmlvdXNFbGVtZW50U2libGluZz1mdW5jdGlvbihhKXtJLmN1cnJlbnROb2RlPWE7cmV0dXJuIEkucHJldmlvdXNTaWJsaW5nKCl9O0UubmV4dEVsZW1lbnRTaWJsaW5nPWZ1bmN0aW9uKGEpe0kuY3VycmVudE5vZGU9YTtyZXR1cm4gSS5uZXh0U2libGluZygpfTsKRS5jaGlsZHJlbj1mdW5jdGlvbihhKXt2YXIgYj1bXTtJLmN1cnJlbnROb2RlPWE7Zm9yKGE9SS5maXJzdENoaWxkKCk7YTspYi5wdXNoKGEpLGE9SS5uZXh0U2libGluZygpO3JldHVybiBifTtFLmlubmVySFRNTD1mdW5jdGlvbihhKXtyZXR1cm4gcWMoYSxmdW5jdGlvbihhKXtyZXR1cm4gcmMoYSl9KX07RS50ZXh0Q29udGVudD1mdW5jdGlvbihhKXtzd2l0Y2goYS5ub2RlVHlwZSl7Y2FzZSBOb2RlLkVMRU1FTlRfTk9ERTpjYXNlIE5vZGUuRE9DVU1FTlRfRlJBR01FTlRfTk9ERTphPWRvY3VtZW50LmNyZWF0ZVRyZWVXYWxrZXIoYSxOb2RlRmlsdGVyLlNIT1dfVEVYVCxudWxsLCExKTtmb3IodmFyIGI9IiIsYztjPWEubmV4dE5vZGUoKTspYis9Yy5ub2RlVmFsdWU7cmV0dXJuIGI7ZGVmYXVsdDpyZXR1cm4gYS5ub2RlVmFsdWV9fTt2YXIgSj17fSxzYz1CLkksdGM9W05vZGUucHJvdG90eXBlLEVsZW1lbnQucHJvdG90eXBlLEhUTUxFbGVtZW50LnByb3RvdHlwZV07ZnVuY3Rpb24gSyhhKXt2YXIgYjthOntmb3IoYj0wO2I8dGMubGVuZ3RoO2IrKyl7dmFyIGM9dGNbYl07aWYoYy5oYXNPd25Qcm9wZXJ0eShhKSl7Yj1jO2JyZWFrIGF9fWI9dm9pZCAwfWlmKCFiKXRocm93IEVycm9yKCJDb3VsZCBub3QgZmluZCBkZXNjcmlwdG9yIGZvciAiK2EpO3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGIsYSl9CnZhciBMPXNjP3twYXJlbnROb2RlOksoInBhcmVudE5vZGUiKSxmaXJzdENoaWxkOksoImZpcnN0Q2hpbGQiKSxsYXN0Q2hpbGQ6SygibGFzdENoaWxkIikscHJldmlvdXNTaWJsaW5nOksoInByZXZpb3VzU2libGluZyIpLG5leHRTaWJsaW5nOksoIm5leHRTaWJsaW5nIiksY2hpbGROb2RlczpLKCJjaGlsZE5vZGVzIikscGFyZW50RWxlbWVudDpLKCJwYXJlbnRFbGVtZW50IikscHJldmlvdXNFbGVtZW50U2libGluZzpLKCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiksbmV4dEVsZW1lbnRTaWJsaW5nOksoIm5leHRFbGVtZW50U2libGluZyIpLGlubmVySFRNTDpLKCJpbm5lckhUTUwiKSx0ZXh0Q29udGVudDpLKCJ0ZXh0Q29udGVudCIpLGZpcnN0RWxlbWVudENoaWxkOksoImZpcnN0RWxlbWVudENoaWxkIiksbGFzdEVsZW1lbnRDaGlsZDpLKCJsYXN0RWxlbWVudENoaWxkIiksY2hpbGRyZW46SygiY2hpbGRyZW4iKX06e30sdWM9c2M/e2ZpcnN0RWxlbWVudENoaWxkOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoRG9jdW1lbnRGcmFnbWVudC5wcm90b3R5cGUsCiJmaXJzdEVsZW1lbnRDaGlsZCIpLGxhc3RFbGVtZW50Q2hpbGQ6T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihEb2N1bWVudEZyYWdtZW50LnByb3RvdHlwZSwibGFzdEVsZW1lbnRDaGlsZCIpLGNoaWxkcmVuOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoRG9jdW1lbnRGcmFnbWVudC5wcm90b3R5cGUsImNoaWxkcmVuIil9Ont9LHZjPXNjP3tmaXJzdEVsZW1lbnRDaGlsZDpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKERvY3VtZW50LnByb3RvdHlwZSwiZmlyc3RFbGVtZW50Q2hpbGQiKSxsYXN0RWxlbWVudENoaWxkOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoRG9jdW1lbnQucHJvdG90eXBlLCJsYXN0RWxlbWVudENoaWxkIiksY2hpbGRyZW46T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihEb2N1bWVudC5wcm90b3R5cGUsImNoaWxkcmVuIil9Ont9O0ouQ2E9TDtKLnJiPXVjO0oubGI9dmM7Si5wYXJlbnROb2RlPWZ1bmN0aW9uKGEpe3JldHVybiBMLnBhcmVudE5vZGUuZ2V0LmNhbGwoYSl9OwpKLmZpcnN0Q2hpbGQ9ZnVuY3Rpb24oYSl7cmV0dXJuIEwuZmlyc3RDaGlsZC5nZXQuY2FsbChhKX07Si5sYXN0Q2hpbGQ9ZnVuY3Rpb24oYSl7cmV0dXJuIEwubGFzdENoaWxkLmdldC5jYWxsKGEpfTtKLnByZXZpb3VzU2libGluZz1mdW5jdGlvbihhKXtyZXR1cm4gTC5wcmV2aW91c1NpYmxpbmcuZ2V0LmNhbGwoYSl9O0oubmV4dFNpYmxpbmc9ZnVuY3Rpb24oYSl7cmV0dXJuIEwubmV4dFNpYmxpbmcuZ2V0LmNhbGwoYSl9O0ouY2hpbGROb2Rlcz1mdW5jdGlvbihhKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoTC5jaGlsZE5vZGVzLmdldC5jYWxsKGEpKX07Si5wYXJlbnRFbGVtZW50PWZ1bmN0aW9uKGEpe3JldHVybiBMLnBhcmVudEVsZW1lbnQuZ2V0LmNhbGwoYSl9O0oucHJldmlvdXNFbGVtZW50U2libGluZz1mdW5jdGlvbihhKXtyZXR1cm4gTC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmdldC5jYWxsKGEpfTtKLm5leHRFbGVtZW50U2libGluZz1mdW5jdGlvbihhKXtyZXR1cm4gTC5uZXh0RWxlbWVudFNpYmxpbmcuZ2V0LmNhbGwoYSl9OwpKLmlubmVySFRNTD1mdW5jdGlvbihhKXtyZXR1cm4gTC5pbm5lckhUTUwuZ2V0LmNhbGwoYSl9O0oudGV4dENvbnRlbnQ9ZnVuY3Rpb24oYSl7cmV0dXJuIEwudGV4dENvbnRlbnQuZ2V0LmNhbGwoYSl9O0ouY2hpbGRyZW49ZnVuY3Rpb24oYSl7c3dpdGNoKGEubm9kZVR5cGUpe2Nhc2UgTm9kZS5ET0NVTUVOVF9GUkFHTUVOVF9OT0RFOmE9dWMuY2hpbGRyZW4uZ2V0LmNhbGwoYSk7YnJlYWs7Y2FzZSBOb2RlLkRPQ1VNRU5UX05PREU6YT12Yy5jaGlsZHJlbi5nZXQuY2FsbChhKTticmVhaztkZWZhdWx0OmE9TC5jaGlsZHJlbi5nZXQuY2FsbChhKX1yZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYSl9OwpKLmZpcnN0RWxlbWVudENoaWxkPWZ1bmN0aW9uKGEpe3N3aXRjaChhLm5vZGVUeXBlKXtjYXNlIE5vZGUuRE9DVU1FTlRfRlJBR01FTlRfTk9ERTpyZXR1cm4gdWMuZmlyc3RFbGVtZW50Q2hpbGQuZ2V0LmNhbGwoYSk7Y2FzZSBOb2RlLkRPQ1VNRU5UX05PREU6cmV0dXJuIHZjLmZpcnN0RWxlbWVudENoaWxkLmdldC5jYWxsKGEpO2RlZmF1bHQ6cmV0dXJuIEwuZmlyc3RFbGVtZW50Q2hpbGQuZ2V0LmNhbGwoYSl9fTtKLmxhc3RFbGVtZW50Q2hpbGQ9ZnVuY3Rpb24oYSl7c3dpdGNoKGEubm9kZVR5cGUpe2Nhc2UgTm9kZS5ET0NVTUVOVF9GUkFHTUVOVF9OT0RFOnJldHVybiB1Yy5sYXN0RWxlbWVudENoaWxkLmdldC5jYWxsKGEpO2Nhc2UgTm9kZS5ET0NVTUVOVF9OT0RFOnJldHVybiB2Yy5sYXN0RWxlbWVudENoaWxkLmdldC5jYWxsKGEpO2RlZmF1bHQ6cmV0dXJuIEwubGFzdEVsZW1lbnRDaGlsZC5nZXQuY2FsbChhKX19O3ZhciBNPUIuRmE/SjpFO2Z1bmN0aW9uIHdjKGEpe2Zvcig7YS5maXJzdENoaWxkOylhLnJlbW92ZUNoaWxkKGEuZmlyc3RDaGlsZCl9CnZhciB4Yz1CLkkseWM9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCJpbmVydCIpLHpjPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTm9kZS5wcm90b3R5cGUsImlzQ29ubmVjdGVkIiksQWM9emMmJnpjLmdldCxCYz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKERvY3VtZW50LnByb3RvdHlwZSwiYWN0aXZlRWxlbWVudCIpLENjPXtwYXJlbnRFbGVtZW50OntnZXQ6ZnVuY3Rpb24oKXt2YXIgYT1BKHRoaXMpOyhhPWEmJmEucGFyZW50Tm9kZSkmJmEubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERSYmKGE9bnVsbCk7cmV0dXJuIHZvaWQgMCE9PWE/YTpNLnBhcmVudEVsZW1lbnQodGhpcyl9LGNvbmZpZ3VyYWJsZTohMH0scGFyZW50Tm9kZTp7Z2V0OmZ1bmN0aW9uKCl7dmFyIGE9QSh0aGlzKTthPWEmJmEucGFyZW50Tm9kZTtyZXR1cm4gdm9pZCAwIT09YT9hOk0ucGFyZW50Tm9kZSh0aGlzKX0sY29uZmlndXJhYmxlOiEwfSwKbmV4dFNpYmxpbmc6e2dldDpmdW5jdGlvbigpe3ZhciBhPUEodGhpcyk7YT1hJiZhLm5leHRTaWJsaW5nO3JldHVybiB2b2lkIDAhPT1hP2E6TS5uZXh0U2libGluZyh0aGlzKX0sY29uZmlndXJhYmxlOiEwfSxwcmV2aW91c1NpYmxpbmc6e2dldDpmdW5jdGlvbigpe3ZhciBhPUEodGhpcyk7YT1hJiZhLnByZXZpb3VzU2libGluZztyZXR1cm4gdm9pZCAwIT09YT9hOk0ucHJldmlvdXNTaWJsaW5nKHRoaXMpfSxjb25maWd1cmFibGU6ITB9LG5leHRFbGVtZW50U2libGluZzp7Z2V0OmZ1bmN0aW9uKCl7dmFyIGE9QSh0aGlzKTtpZihhJiZ2b2lkIDAhPT1hLm5leHRTaWJsaW5nKXtmb3IoYT10aGlzLm5leHRTaWJsaW5nO2EmJmEubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERTspYT1hLm5leHRTaWJsaW5nO3JldHVybiBhfXJldHVybiBNLm5leHRFbGVtZW50U2libGluZyh0aGlzKX0sY29uZmlndXJhYmxlOiEwfSxwcmV2aW91c0VsZW1lbnRTaWJsaW5nOntnZXQ6ZnVuY3Rpb24oKXt2YXIgYT0KQSh0aGlzKTtpZihhJiZ2b2lkIDAhPT1hLnByZXZpb3VzU2libGluZyl7Zm9yKGE9dGhpcy5wcmV2aW91c1NpYmxpbmc7YSYmYS5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFOylhPWEucHJldmlvdXNTaWJsaW5nO3JldHVybiBhfXJldHVybiBNLnByZXZpb3VzRWxlbWVudFNpYmxpbmcodGhpcyl9LGNvbmZpZ3VyYWJsZTohMH19LEhjPXtjbGFzc05hbWU6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiJ9LHNldDpmdW5jdGlvbihhKXt0aGlzLnNldEF0dHJpYnV0ZSgiY2xhc3MiLGEpfSxjb25maWd1cmFibGU6ITB9fSxJYz17Y2hpbGROb2Rlczp7Z2V0OmZ1bmN0aW9uKCl7aWYodWIodGhpcykpe3ZhciBhPUEodGhpcyk7aWYoIWEuY2hpbGROb2Rlcyl7YS5jaGlsZE5vZGVzPVtdO2Zvcih2YXIgYj10aGlzLmZpcnN0Q2hpbGQ7YjtiPWIubmV4dFNpYmxpbmcpYS5jaGlsZE5vZGVzLnB1c2goYil9dmFyIGM9YS5jaGlsZE5vZGVzfWVsc2UgYz0KTS5jaGlsZE5vZGVzKHRoaXMpO2MuaXRlbT1mdW5jdGlvbihhKXtyZXR1cm4gY1thXX07cmV0dXJuIGN9LGNvbmZpZ3VyYWJsZTohMH0sY2hpbGRFbGVtZW50Q291bnQ6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNoaWxkcmVuLmxlbmd0aH0sY29uZmlndXJhYmxlOiEwfSxmaXJzdENoaWxkOntnZXQ6ZnVuY3Rpb24oKXt2YXIgYT1BKHRoaXMpO2E9YSYmYS5maXJzdENoaWxkO3JldHVybiB2b2lkIDAhPT1hP2E6TS5maXJzdENoaWxkKHRoaXMpfSxjb25maWd1cmFibGU6ITB9LGxhc3RDaGlsZDp7Z2V0OmZ1bmN0aW9uKCl7dmFyIGE9QSh0aGlzKTthPWEmJmEubGFzdENoaWxkO3JldHVybiB2b2lkIDAhPT1hP2E6TS5sYXN0Q2hpbGQodGhpcyl9LGNvbmZpZ3VyYWJsZTohMH0sdGV4dENvbnRlbnQ6e2dldDpmdW5jdGlvbigpe2lmKHViKHRoaXMpKXtmb3IodmFyIGE9W10sYj0wLGM9dGhpcy5jaGlsZE5vZGVzLGQ7ZD1jW2JdO2IrKylkLm5vZGVUeXBlIT09Tm9kZS5DT01NRU5UX05PREUmJgphLnB1c2goZC50ZXh0Q29udGVudCk7cmV0dXJuIGEuam9pbigiIil9cmV0dXJuIE0udGV4dENvbnRlbnQodGhpcyl9LHNldDpmdW5jdGlvbihhKXtpZigidW5kZWZpbmVkIj09PXR5cGVvZiBhfHxudWxsPT09YSlhPSIiO3N3aXRjaCh0aGlzLm5vZGVUeXBlKXtjYXNlIE5vZGUuRUxFTUVOVF9OT0RFOmNhc2UgTm9kZS5ET0NVTUVOVF9GUkFHTUVOVF9OT0RFOmlmKCF1Yih0aGlzKSYmeGMpe3ZhciBiPXRoaXMuZmlyc3RDaGlsZDsoYiE9dGhpcy5sYXN0Q2hpbGR8fGImJmIubm9kZVR5cGUhPU5vZGUuVEVYVF9OT0RFKSYmd2ModGhpcyk7Si5DYS50ZXh0Q29udGVudC5zZXQuY2FsbCh0aGlzLGEpfWVsc2Ugd2ModGhpcyksKDA8YS5sZW5ndGh8fHRoaXMubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSkmJnRoaXMuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYSkpO2JyZWFrO2RlZmF1bHQ6dGhpcy5ub2RlVmFsdWU9YX19LGNvbmZpZ3VyYWJsZTohMH0sZmlyc3RFbGVtZW50Q2hpbGQ6e2dldDpmdW5jdGlvbigpe3ZhciBhPQpBKHRoaXMpO2lmKGEmJnZvaWQgMCE9PWEuZmlyc3RDaGlsZCl7Zm9yKGE9dGhpcy5maXJzdENoaWxkO2EmJmEubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERTspYT1hLm5leHRTaWJsaW5nO3JldHVybiBhfXJldHVybiBNLmZpcnN0RWxlbWVudENoaWxkKHRoaXMpfSxjb25maWd1cmFibGU6ITB9LGxhc3RFbGVtZW50Q2hpbGQ6e2dldDpmdW5jdGlvbigpe3ZhciBhPUEodGhpcyk7aWYoYSYmdm9pZCAwIT09YS5sYXN0Q2hpbGQpe2ZvcihhPXRoaXMubGFzdENoaWxkO2EmJmEubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERTspYT1hLnByZXZpb3VzU2libGluZztyZXR1cm4gYX1yZXR1cm4gTS5sYXN0RWxlbWVudENoaWxkKHRoaXMpfSxjb25maWd1cmFibGU6ITB9LGNoaWxkcmVuOntnZXQ6ZnVuY3Rpb24oKXt2YXIgYTt1Yih0aGlzKT9hPUFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCh0aGlzLmNoaWxkTm9kZXMsZnVuY3Rpb24oYSl7cmV0dXJuIGEubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERX0pOgphPU0uY2hpbGRyZW4odGhpcyk7YS5pdGVtPWZ1bmN0aW9uKGIpe3JldHVybiBhW2JdfTtyZXR1cm4gYX0sY29uZmlndXJhYmxlOiEwfSxpbm5lckhUTUw6e2dldDpmdW5jdGlvbigpe3JldHVybiB1Yih0aGlzKT9xYygidGVtcGxhdGUiPT09dGhpcy5sb2NhbE5hbWU/dGhpcy5jb250ZW50OnRoaXMpOk0uaW5uZXJIVE1MKHRoaXMpfSxzZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9InRlbXBsYXRlIj09PXRoaXMubG9jYWxOYW1lP3RoaXMuY29udGVudDp0aGlzO3djKGIpO3ZhciBjPXRoaXMubG9jYWxOYW1lO2MmJiJ0ZW1wbGF0ZSIhPT1jfHwoYz0iZGl2Iik7Yz15Yy5jcmVhdGVFbGVtZW50KGMpO2Zvcih4Yz9KLkNhLmlubmVySFRNTC5zZXQuY2FsbChjLGEpOmMuaW5uZXJIVE1MPWE7Yy5maXJzdENoaWxkOyliLmFwcGVuZENoaWxkKGMuZmlyc3RDaGlsZCl9LGNvbmZpZ3VyYWJsZTohMH19LEpjPXtzaGFkb3dSb290OntnZXQ6ZnVuY3Rpb24oKXt2YXIgYT1BKHRoaXMpO3JldHVybiBhJiYKYS5EYXx8bnVsbH0sY29uZmlndXJhYmxlOiEwfX0sS2M9e2FjdGl2ZUVsZW1lbnQ6e2dldDpmdW5jdGlvbigpe3ZhciBhPUJjJiZCYy5nZXQ/QmMuZ2V0LmNhbGwoZG9jdW1lbnQpOkIuST92b2lkIDA6ZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtpZihhJiZhLm5vZGVUeXBlKXt2YXIgYj0hIUModGhpcyk7aWYodGhpcz09PWRvY3VtZW50fHxiJiZ0aGlzLmhvc3QhPT1hJiZELmNvbnRhaW5zLmNhbGwodGhpcy5ob3N0LGEpKXtmb3IoYj12YihhKTtiJiZiIT09dGhpczspYT1iLmhvc3QsYj12YihhKTthPXRoaXM9PT1kb2N1bWVudD9iP251bGw6YTpiPT09dGhpcz9hOm51bGx9ZWxzZSBhPW51bGx9ZWxzZSBhPW51bGw7cmV0dXJuIGF9LHNldDpmdW5jdGlvbigpe30sY29uZmlndXJhYmxlOiEwfX07CmZ1bmN0aW9uIE4oYSxiLGMpe2Zvcih2YXIgZCBpbiBiKXt2YXIgZT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGEsZCk7ZSYmZS5jb25maWd1cmFibGV8fCFlJiZjP09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGQsYltkXSk6YyYmY29uc29sZS53YXJuKCJDb3VsZCBub3QgZGVmaW5lIixkLCJvbiIsYSl9fWZ1bmN0aW9uIExjKGEpe04oYSxDYyk7TihhLEhjKTtOKGEsSWMpO04oYSxLYyl9CmZ1bmN0aW9uIE1jKCl7dmFyIGE9TmMucHJvdG90eXBlO2EuX19wcm90b19fPURvY3VtZW50RnJhZ21lbnQucHJvdG90eXBlO04oYSxDYywhMCk7TihhLEljLCEwKTtOKGEsS2MsITApO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGEse25vZGVUeXBlOnt2YWx1ZTpOb2RlLkRPQ1VNRU5UX0ZSQUdNRU5UX05PREUsY29uZmlndXJhYmxlOiEwfSxub2RlTmFtZTp7dmFsdWU6IiNkb2N1bWVudC1mcmFnbWVudCIsY29uZmlndXJhYmxlOiEwfSxub2RlVmFsdWU6e3ZhbHVlOm51bGwsY29uZmlndXJhYmxlOiEwfX0pO1sibG9jYWxOYW1lIiwibmFtZXNwYWNlVVJJIiwicHJlZml4Il0uZm9yRWFjaChmdW5jdGlvbihiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxiLHt2YWx1ZTp2b2lkIDAsY29uZmlndXJhYmxlOiEwfSl9KTtbIm93bmVyRG9jdW1lbnQiLCJiYXNlVVJJIiwiaXNDb25uZWN0ZWQiXS5mb3JFYWNoKGZ1bmN0aW9uKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhvc3RbYl19LApjb25maWd1cmFibGU6ITB9KX0pfXZhciBPYz1CLkk/ZnVuY3Rpb24oKXt9OmZ1bmN0aW9uKGEpe3ZhciBiPXooYSk7Yi52YXx8KGIudmE9ITAsTihhLENjLCEwKSxOKGEsSGMsITApKX0sUGM9Qi5JP2Z1bmN0aW9uKCl7fTpmdW5jdGlvbihhKXt6KGEpLklhfHwoTihhLEljLCEwKSxOKGEsSmMsITApKX07dmFyIFFjPU0uY2hpbGROb2RlcztmdW5jdGlvbiBSYyhhLGIsYyl7T2MoYSk7Yz1jfHxudWxsO3ZhciBkPXooYSksZT16KGIpLGY9Yz96KGMpOm51bGw7ZC5wcmV2aW91c1NpYmxpbmc9Yz9mLnByZXZpb3VzU2libGluZzpiLmxhc3RDaGlsZDtpZihmPUEoZC5wcmV2aW91c1NpYmxpbmcpKWYubmV4dFNpYmxpbmc9YTtpZihmPUEoZC5uZXh0U2libGluZz1jKSlmLnByZXZpb3VzU2libGluZz1hO2QucGFyZW50Tm9kZT1iO2M/Yz09PWUuZmlyc3RDaGlsZCYmKGUuZmlyc3RDaGlsZD1hKTooZS5sYXN0Q2hpbGQ9YSxlLmZpcnN0Q2hpbGR8fChlLmZpcnN0Q2hpbGQ9YSkpO2UuY2hpbGROb2Rlcz1udWxsfQpmdW5jdGlvbiBTYyhhLGIpe3ZhciBjPXooYSk7aWYodm9pZCAwPT09Yy5maXJzdENoaWxkKWZvcihiPWJ8fFFjKGEpLGMuZmlyc3RDaGlsZD1iWzBdfHxudWxsLGMubGFzdENoaWxkPWJbYi5sZW5ndGgtMV18fG51bGwsUGMoYSksYz0wO2M8Yi5sZW5ndGg7YysrKXt2YXIgZD1iW2NdLGU9eihkKTtlLnBhcmVudE5vZGU9YTtlLm5leHRTaWJsaW5nPWJbYysxXXx8bnVsbDtlLnByZXZpb3VzU2libGluZz1iW2MtMV18fG51bGw7T2MoZCl9fTt2YXIgVGM9TS5wYXJlbnROb2RlOwpmdW5jdGlvbiBVYyhhLGIsYyl7aWYoYj09PWEpdGhyb3cgRXJyb3IoIkZhaWxlZCB0byBleGVjdXRlICdhcHBlbmRDaGlsZCcgb24gJ05vZGUnOiBUaGUgbmV3IGNoaWxkIGVsZW1lbnQgY29udGFpbnMgdGhlIHBhcmVudC4iKTtpZihjKXt2YXIgZD1BKGMpO2Q9ZCYmZC5wYXJlbnROb2RlO2lmKHZvaWQgMCE9PWQmJmQhPT1hfHx2b2lkIDA9PT1kJiZUYyhjKSE9PWEpdGhyb3cgRXJyb3IoIkZhaWxlZCB0byBleGVjdXRlICdpbnNlcnRCZWZvcmUnIG9uICdOb2RlJzogVGhlIG5vZGUgYmVmb3JlIHdoaWNoIHRoZSBuZXcgbm9kZSBpcyB0byBiZSBpbnNlcnRlZCBpcyBub3QgYSBjaGlsZCBvZiB0aGlzIG5vZGUuIik7fWlmKGM9PT1iKXJldHVybiBiO2IucGFyZW50Tm9kZSYmVmMoYi5wYXJlbnROb2RlLGIpO3ZhciBlLGY7aWYoIWIuX19ub0luc2VydGlvblBvaW50KXtpZihmPWU9dmIoYSkpe3ZhciBnOyJzbG90Ij09PWIubG9jYWxOYW1lP2c9W2JdOmIucXVlcnlTZWxlY3RvckFsbCYmCihnPWIucXVlcnlTZWxlY3RvckFsbCgic2xvdCIpKTtmPWcmJmcubGVuZ3RoP2c6dm9pZCAwfWYmJihnPWUsZD1mLGcuYT1nLmF8fFtdLGcubT1nLm18fFtdLGcudz1nLnd8fHt9LGcuYS5wdXNoLmFwcGx5KGcuYSxbXS5jb25jYXQoZCBpbnN0YW5jZW9mIEFycmF5P2Q6amEoaWEoZCkpKSkpfSgic2xvdCI9PT1hLmxvY2FsTmFtZXx8ZikmJihlPWV8fHZiKGEpKSYmV2MoZSk7aWYodWIoYSkpe2U9YztQYyhhKTtmPXooYSk7dm9pZCAwIT09Zi5maXJzdENoaWxkJiYoZi5jaGlsZE5vZGVzPW51bGwpO2lmKGIubm9kZVR5cGU9PT1Ob2RlLkRPQ1VNRU5UX0ZSQUdNRU5UX05PREUpe2Y9Yi5jaGlsZE5vZGVzO2ZvcihnPTA7ZzxmLmxlbmd0aDtnKyspUmMoZltnXSxhLGUpO2U9eihiKTtmPXZvaWQgMCE9PWUuZmlyc3RDaGlsZD9udWxsOnZvaWQgMDtlLmZpcnN0Q2hpbGQ9ZS5sYXN0Q2hpbGQ9ZjtlLmNoaWxkTm9kZXM9Zn1lbHNlIFJjKGIsYSxlKTtlPUEoYSk7aWYoWGMoYSkpe1djKGUucm9vdCk7CnZhciBoPSEwfWVsc2UgZS5yb290JiYoaD0hMCl9aHx8KGg9QyhhKT9hLmhvc3Q6YSxjPyhjPVljKGMpLEQuaW5zZXJ0QmVmb3JlLmNhbGwoaCxiLGMpKTpELmFwcGVuZENoaWxkLmNhbGwoaCxiKSk7WmMoYSxiKTtyZXR1cm4gYn0KZnVuY3Rpb24gVmMoYSxiKXtpZihiLnBhcmVudE5vZGUhPT1hKXRocm93IEVycm9yKCJUaGUgbm9kZSB0byBiZSByZW1vdmVkIGlzIG5vdCBhIGNoaWxkIG9mIHRoaXMgbm9kZTogIitiKTt2YXIgYz12YihiKSxkPUEoYSk7aWYodWIoYSkpe3ZhciBlPXooYiksZj16KGEpO2I9PT1mLmZpcnN0Q2hpbGQmJihmLmZpcnN0Q2hpbGQ9ZS5uZXh0U2libGluZyk7Yj09PWYubGFzdENoaWxkJiYoZi5sYXN0Q2hpbGQ9ZS5wcmV2aW91c1NpYmxpbmcpO3ZhciBnPWUucHJldmlvdXNTaWJsaW5nLGg9ZS5uZXh0U2libGluZztnJiYoeihnKS5uZXh0U2libGluZz1oKTtoJiYoeihoKS5wcmV2aW91c1NpYmxpbmc9Zyk7ZS5wYXJlbnROb2RlPWUucHJldmlvdXNTaWJsaW5nPWUubmV4dFNpYmxpbmc9dm9pZCAwO3ZvaWQgMCE9PWYuY2hpbGROb2RlcyYmKGYuY2hpbGROb2Rlcz1udWxsKTtpZihYYyhhKSl7V2MoZC5yb290KTt2YXIgaz0hMH19JGMoYik7aWYoYyl7KGU9YSYmInNsb3QiPT09YS5sb2NhbE5hbWUpJiYKKGs9ITApO2lmKGMubSl7YWQoYyk7Zj1jLnc7Zm9yKHYgaW4gZilmb3IoZz1mW3ZdLGg9MDtoPGcubGVuZ3RoO2grKyl7dmFyIG09Z1toXTtpZihHYihiLG0pKXtnLnNwbGljZShoLDEpO3ZhciBuPWMubS5pbmRleE9mKG0pOzA8PW4mJmMubS5zcGxpY2UobiwxKTtoLS07bj1BKG0pO2lmKG09bi5MKWZvcih2YXIgcj0wO3I8bS5sZW5ndGg7cisrKXt2YXIgRz1tW3JdLHg9YmQoRyk7eCYmRC5yZW1vdmVDaGlsZC5jYWxsKHgsRyl9bi5MPVtdO24uYXNzaWduZWROb2Rlcz1bXTtuPSEwfX12YXIgdj1ufWVsc2Ugdj12b2lkIDA7KHZ8fGUpJiZXYyhjKX1rfHwoaz1DKGEpP2EuaG9zdDphLCghZC5yb290JiYic2xvdCIhPT1iLmxvY2FsTmFtZXx8az09PVRjKGIpKSYmRC5yZW1vdmVDaGlsZC5jYWxsKGssYikpO1pjKGEsbnVsbCxiKTtyZXR1cm4gYn0KZnVuY3Rpb24gJGMoYSl7dmFyIGI9QShhKTtpZihiJiZ2b2lkIDAhPT1iLlYpe2I9YS5jaGlsZE5vZGVzO2Zvcih2YXIgYz0wLGQ9Yi5sZW5ndGgsZTtjPGQmJihlPWJbY10pO2MrKykkYyhlKX1pZihhPUEoYSkpYS5WPXZvaWQgMH1mdW5jdGlvbiBZYyhhKXt2YXIgYj1hO2EmJiJzbG90Ij09PWEubG9jYWxOYW1lJiYoYj0oYj0oYj1BKGEpKSYmYi5MKSYmYi5sZW5ndGg/YlswXTpZYyhhLm5leHRTaWJsaW5nKSk7cmV0dXJuIGJ9ZnVuY3Rpb24gWGMoYSl7cmV0dXJuKGE9KGE9QShhKSkmJmEucm9vdCkmJmNkKGEpfQpmdW5jdGlvbiBkZChhLGIpe2lmKCJzbG90Ij09PWIpYT1hLnBhcmVudE5vZGUsWGMoYSkmJldjKEEoYSkucm9vdCk7ZWxzZSBpZigic2xvdCI9PT1hLmxvY2FsTmFtZSYmIm5hbWUiPT09YiYmKGI9dmIoYSkpKXtpZihiLm0pe3ZhciBjPWEuSmEsZD1lZChhKTtpZihkIT09Yyl7Yz1iLndbY107dmFyIGU9Yy5pbmRleE9mKGEpOzA8PWUmJmMuc3BsaWNlKGUsMSk7Yz1iLndbZF18fChiLndbZF09W10pO2MucHVzaChhKTsxPGMubGVuZ3RoJiYoYi53W2RdPWZkKGMpKX19V2MoYil9fWZ1bmN0aW9uIFpjKGEsYixjKXtpZihhPShhPUEoYSkpJiZhLlMpYiYmYS5hZGRlZE5vZGVzLnB1c2goYiksYyYmYS5yZW1vdmVkTm9kZXMucHVzaChjKSxNYihhKX0KZnVuY3Rpb24gZ2QoYSl7aWYoYSYmYS5ub2RlVHlwZSl7dmFyIGI9eihhKSxjPWIuVjt2b2lkIDA9PT1jJiYoQyhhKT8oYz1hLGIuVj1jKTooYz0oYz1hLnBhcmVudE5vZGUpP2dkKGMpOmEsRC5jb250YWlucy5jYWxsKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxhKSYmKGIuVj1jKSkpO3JldHVybiBjfX1mdW5jdGlvbiBoZChhLGIsYyl7dmFyIGQ9W107aWQoYS5jaGlsZE5vZGVzLGIsYyxkKTtyZXR1cm4gZH1mdW5jdGlvbiBpZChhLGIsYyxkKXtmb3IodmFyIGU9MCxmPWEubGVuZ3RoLGc7ZTxmJiYoZz1hW2VdKTtlKyspe3ZhciBoO2lmKGg9Zy5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXtoPWc7dmFyIGs9YixtPWMsbj1kLHI9ayhoKTtyJiZuLnB1c2goaCk7bSYmbShyKT9oPXI6KGlkKGguY2hpbGROb2RlcyxrLG0sbiksaD12b2lkIDApfWlmKGgpYnJlYWt9fXZhciBqZD1udWxsOwpmdW5jdGlvbiBrZChhLGIsYyl7amR8fChqZD13aW5kb3cuU2hhZHlDU1MmJndpbmRvdy5TaGFkeUNTUy5TY29waW5nU2hpbSk7amQmJiJjbGFzcyI9PT1iP2pkLnNldEVsZW1lbnRDbGFzcyhhLGMpOihELnNldEF0dHJpYnV0ZS5jYWxsKGEsYixjKSxkZChhLGIpKX1mdW5jdGlvbiBsZChhLGIpe2lmKGEub3duZXJEb2N1bWVudCE9PWRvY3VtZW50KXJldHVybiBELmltcG9ydE5vZGUuY2FsbChkb2N1bWVudCxhLGIpO3ZhciBjPUQuaW1wb3J0Tm9kZS5jYWxsKGRvY3VtZW50LGEsITEpO2lmKGIpe2E9YS5jaGlsZE5vZGVzO2I9MDtmb3IodmFyIGQ7YjxhLmxlbmd0aDtiKyspZD1sZChhW2JdLCEwKSxjLmFwcGVuZENoaWxkKGQpfXJldHVybiBjfTt2YXIgbWQ9Il9fZXZlbnRXcmFwcGVycyIrRGF0ZS5ub3coKSxuZD17Ymx1cjohMCxmb2N1czohMCxmb2N1c2luOiEwLGZvY3Vzb3V0OiEwLGNsaWNrOiEwLGRibGNsaWNrOiEwLG1vdXNlZG93bjohMCxtb3VzZWVudGVyOiEwLG1vdXNlbGVhdmU6ITAsbW91c2Vtb3ZlOiEwLG1vdXNlb3V0OiEwLG1vdXNlb3ZlcjohMCxtb3VzZXVwOiEwLHdoZWVsOiEwLGJlZm9yZWlucHV0OiEwLGlucHV0OiEwLGtleWRvd246ITAsa2V5dXA6ITAsY29tcG9zaXRpb25zdGFydDohMCxjb21wb3NpdGlvbnVwZGF0ZTohMCxjb21wb3NpdGlvbmVuZDohMCx0b3VjaHN0YXJ0OiEwLHRvdWNoZW5kOiEwLHRvdWNobW92ZTohMCx0b3VjaGNhbmNlbDohMCxwb2ludGVyb3ZlcjohMCxwb2ludGVyZW50ZXI6ITAscG9pbnRlcmRvd246ITAscG9pbnRlcm1vdmU6ITAscG9pbnRlcnVwOiEwLHBvaW50ZXJjYW5jZWw6ITAscG9pbnRlcm91dDohMCxwb2ludGVybGVhdmU6ITAsZ290cG9pbnRlcmNhcHR1cmU6ITAsbG9zdHBvaW50ZXJjYXB0dXJlOiEwLApkcmFnc3RhcnQ6ITAsZHJhZzohMCxkcmFnZW50ZXI6ITAsZHJhZ2xlYXZlOiEwLGRyYWdvdmVyOiEwLGRyb3A6ITAsZHJhZ2VuZDohMCxET01BY3RpdmF0ZTohMCxET01Gb2N1c0luOiEwLERPTUZvY3VzT3V0OiEwLGtleXByZXNzOiEwfTtmdW5jdGlvbiBvZChhLGIpe3ZhciBjPVtdLGQ9YTtmb3IoYT1hPT09d2luZG93P3dpbmRvdzphLmdldFJvb3ROb2RlKCk7ZDspYy5wdXNoKGQpLGQ9ZC5hc3NpZ25lZFNsb3Q/ZC5hc3NpZ25lZFNsb3Q6ZC5ub2RlVHlwZT09PU5vZGUuRE9DVU1FTlRfRlJBR01FTlRfTk9ERSYmZC5ob3N0JiYoYnx8ZCE9PWEpP2QuaG9zdDpkLnBhcmVudE5vZGU7Y1tjLmxlbmd0aC0xXT09PWRvY3VtZW50JiZjLnB1c2god2luZG93KTtyZXR1cm4gY30KZnVuY3Rpb24gcGQoYSxiKXtpZighQylyZXR1cm4gYTthPW9kKGEsITApO2Zvcih2YXIgYz0wLGQsZSxmLGc7YzxiLmxlbmd0aDtjKyspaWYoZD1iW2NdLGY9ZD09PXdpbmRvdz93aW5kb3c6ZC5nZXRSb290Tm9kZSgpLGYhPT1lJiYoZz1hLmluZGV4T2YoZiksZT1mKSwhQyhmKXx8LTE8ZylyZXR1cm4gZH0KdmFyIHFkPXtnZXQgY29tcG9zZWQoKXshMSE9PXRoaXMuaXNUcnVzdGVkJiZ2b2lkIDA9PT10aGlzLmhhJiYodGhpcy5oYT1uZFt0aGlzLnR5cGVdKTtyZXR1cm4gdGhpcy5oYXx8ITF9LGNvbXBvc2VkUGF0aDpmdW5jdGlvbigpe3RoaXMudGF8fCh0aGlzLnRhPW9kKHRoaXMuX190YXJnZXQsdGhpcy5jb21wb3NlZCkpO3JldHVybiB0aGlzLnRhfSxnZXQgdGFyZ2V0KCl7cmV0dXJuIHBkKHRoaXMuY3VycmVudFRhcmdldCx0aGlzLmNvbXBvc2VkUGF0aCgpKX0sZ2V0IHJlbGF0ZWRUYXJnZXQoKXtpZighdGhpcy5qYSlyZXR1cm4gbnVsbDt0aGlzLndhfHwodGhpcy53YT1vZCh0aGlzLmphLCEwKSk7cmV0dXJuIHBkKHRoaXMuY3VycmVudFRhcmdldCx0aGlzLndhKX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7RXZlbnQucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbi5jYWxsKHRoaXMpO3RoaXMuaWE9ITB9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe0V2ZW50LnByb3RvdHlwZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24uY2FsbCh0aGlzKTsKdGhpcy5pYT10aGlzLkhhPSEwfX07ZnVuY3Rpb24gcmQoYSl7ZnVuY3Rpb24gYihiLGQpe2I9bmV3IGEoYixkKTtiLmhhPWQmJiEhZC5jb21wb3NlZDtyZXR1cm4gYn1BYihiLGEpO2IucHJvdG90eXBlPWEucHJvdG90eXBlO3JldHVybiBifXZhciBzZD17Zm9jdXM6ITAsYmx1cjohMH07ZnVuY3Rpb24gdGQoYSl7cmV0dXJuIGEuX190YXJnZXQhPT1hLnRhcmdldHx8YS5qYSE9PWEucmVsYXRlZFRhcmdldH1mdW5jdGlvbiB1ZChhLGIsYyl7aWYoYz1iLl9faGFuZGxlcnMmJmIuX19oYW5kbGVyc1thLnR5cGVdJiZiLl9faGFuZGxlcnNbYS50eXBlXVtjXSlmb3IodmFyIGQ9MCxlOyhlPWNbZF0pJiYoIXRkKGEpfHxhLnRhcmdldCE9PWEucmVsYXRlZFRhcmdldCkmJihlLmNhbGwoYixhKSwhYS5IYSk7ZCsrKTt9CmZ1bmN0aW9uIHZkKGEpe3ZhciBiPWEuY29tcG9zZWRQYXRoKCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsImN1cnJlbnRUYXJnZXQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZH0sY29uZmlndXJhYmxlOiEwfSk7Zm9yKHZhciBjPWIubGVuZ3RoLTE7MDw9YztjLS0pe3ZhciBkPWJbY107dWQoYSxkLCJjYXB0dXJlIik7aWYoYS5pYSlyZXR1cm59T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsImV2ZW50UGhhc2UiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gRXZlbnQuQVRfVEFSR0VUfX0pO3ZhciBlO2ZvcihjPTA7YzxiLmxlbmd0aDtjKyspe2Q9YltjXTt2YXIgZj1BKGQpO2Y9ZiYmZi5yb290O2lmKDA9PT1jfHxmJiZmPT09ZSlpZih1ZChhLGQsImJ1YmJsZSIpLGQhPT13aW5kb3cmJihlPWQuZ2V0Um9vdE5vZGUoKSksYS5pYSlicmVha319CmZ1bmN0aW9uIHdkKGEsYixjLGQsZSxmKXtmb3IodmFyIGc9MDtnPGEubGVuZ3RoO2crKyl7dmFyIGg9YVtnXSxrPWgudHlwZSxtPWguY2FwdHVyZSxuPWgub25jZSxyPWgucGFzc2l2ZTtpZihiPT09aC5ub2RlJiZjPT09ayYmZD09PW0mJmU9PT1uJiZmPT09cilyZXR1cm4gZ31yZXR1cm4tMX0KZnVuY3Rpb24geGQoYSxiLGMpe2lmKGIpe3ZhciBkPXR5cGVvZiBiO2lmKCJmdW5jdGlvbiI9PT1kfHwib2JqZWN0Ij09PWQpaWYoIm9iamVjdCIhPT1kfHxiLmhhbmRsZUV2ZW50JiYiZnVuY3Rpb24iPT09dHlwZW9mIGIuaGFuZGxlRXZlbnQpe2lmKGMmJiJvYmplY3QiPT09dHlwZW9mIGMpe3ZhciBlPSEhYy5jYXB0dXJlO3ZhciBmPSEhYy5vbmNlO3ZhciBnPSEhYy5wYXNzaXZlfWVsc2UgZT0hIWMsZz1mPSExO3ZhciBoPWMmJmMubGF8fHRoaXMsaz1iW21kXTtpZihrKXtpZigtMTx3ZChrLGgsYSxlLGYsZykpcmV0dXJufWVsc2UgYlttZF09W107az1mdW5jdGlvbihlKXtmJiZ0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxiLGMpO2UuX190YXJnZXR8fHlkKGUpO2lmKGghPT10aGlzKXt2YXIgZz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsImN1cnJlbnRUYXJnZXQiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiY3VycmVudFRhcmdldCIse2dldDpmdW5jdGlvbigpe3JldHVybiBofSwKY29uZmlndXJhYmxlOiEwfSl9aWYoZS5jb21wb3NlZHx8LTE8ZS5jb21wb3NlZFBhdGgoKS5pbmRleE9mKGgpKWlmKHRkKGUpJiZlLnRhcmdldD09PWUucmVsYXRlZFRhcmdldCllLmV2ZW50UGhhc2U9PT1FdmVudC5CVUJCTElOR19QSEFTRSYmZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtlbHNlIGlmKGUuZXZlbnRQaGFzZT09PUV2ZW50LkNBUFRVUklOR19QSEFTRXx8ZS5idWJibGVzfHxlLnRhcmdldD09PWh8fGggaW5zdGFuY2VvZiBXaW5kb3cpe3ZhciBrPSJmdW5jdGlvbiI9PT1kP2IuY2FsbChoLGUpOmIuaGFuZGxlRXZlbnQmJmIuaGFuZGxlRXZlbnQoZSk7aCE9PXRoaXMmJihnPyhPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiY3VycmVudFRhcmdldCIsZyksZz1udWxsKTpkZWxldGUgZS5jdXJyZW50VGFyZ2V0KTtyZXR1cm4ga319O2JbbWRdLnB1c2goe25vZGU6aCx0eXBlOmEsY2FwdHVyZTplLG9uY2U6ZixwYXNzaXZlOmcsZ2I6a30pO3NkW2FdPyh0aGlzLl9faGFuZGxlcnM9CnRoaXMuX19oYW5kbGVyc3x8e30sdGhpcy5fX2hhbmRsZXJzW2FdPXRoaXMuX19oYW5kbGVyc1thXXx8e2NhcHR1cmU6W10sYnViYmxlOltdfSx0aGlzLl9faGFuZGxlcnNbYV1bZT8iY2FwdHVyZSI6ImJ1YmJsZSJdLnB1c2goaykpOih0aGlzIGluc3RhbmNlb2YgV2luZG93P0QuZWI6RC5hZGRFdmVudExpc3RlbmVyKS5jYWxsKHRoaXMsYSxrLGMpfX19CmZ1bmN0aW9uIHpkKGEsYixjKXtpZihiKXtpZihjJiYib2JqZWN0Ij09PXR5cGVvZiBjKXt2YXIgZD0hIWMuY2FwdHVyZTt2YXIgZT0hIWMub25jZTt2YXIgZj0hIWMucGFzc2l2ZX1lbHNlIGQ9ISFjLGY9ZT0hMTt2YXIgZz1jJiZjLmxhfHx0aGlzLGg9dm9pZCAwO3ZhciBrPW51bGw7dHJ5e2s9YlttZF19Y2F0Y2gobSl7fWsmJihlPXdkKGssZyxhLGQsZSxmKSwtMTxlJiYoaD1rLnNwbGljZShlLDEpWzBdLmdiLGsubGVuZ3RofHwoYlttZF09dm9pZCAwKSkpOyh0aGlzIGluc3RhbmNlb2YgV2luZG93P0QuZmI6RC5yZW1vdmVFdmVudExpc3RlbmVyKS5jYWxsKHRoaXMsYSxofHxiLGMpO2gmJnNkW2FdJiZ0aGlzLl9faGFuZGxlcnMmJnRoaXMuX19oYW5kbGVyc1thXSYmKGE9dGhpcy5fX2hhbmRsZXJzW2FdW2Q/ImNhcHR1cmUiOiJidWJibGUiXSxoPWEuaW5kZXhPZihoKSwtMTxoJiZhLnNwbGljZShoLDEpKX19CmZ1bmN0aW9uIEFkKCl7Zm9yKHZhciBhIGluIHNkKXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGEsZnVuY3Rpb24oYSl7YS5fX3RhcmdldHx8KHlkKGEpLHZkKGEpKX0sITApfWZ1bmN0aW9uIHlkKGEpe2EuX190YXJnZXQ9YS50YXJnZXQ7YS5qYT1hLnJlbGF0ZWRUYXJnZXQ7aWYoQi5JKXt2YXIgYj1PYmplY3QuZ2V0UHJvdG90eXBlT2YoYSk7aWYoIWIuaGFzT3duUHJvcGVydHkoIl9fcGF0Y2hQcm90byIpKXt2YXIgYz1PYmplY3QuY3JlYXRlKGIpO2MuaWI9Yjt5YihjLHFkKTtiLl9fcGF0Y2hQcm90bz1jfWEuX19wcm90b19fPWIuX19wYXRjaFByb3RvfWVsc2UgeWIoYSxxZCl9dmFyIEJkPXJkKHdpbmRvdy5FdmVudCksQ2Q9cmQod2luZG93LkN1c3RvbUV2ZW50KSxEZD1yZCh3aW5kb3cuTW91c2VFdmVudCk7ZnVuY3Rpb24gRWQoYSxiKXtyZXR1cm57aW5kZXg6YSxXOltdLGJhOmJ9fQpmdW5jdGlvbiBGZChhLGIsYyxkKXt2YXIgZT0wLGY9MCxnPTAsaD0wLGs9TWF0aC5taW4oYi1lLGQtZik7aWYoMD09ZSYmMD09ZilhOntmb3IoZz0wO2c8aztnKyspaWYoYVtnXSE9PWNbZ10pYnJlYWsgYTtnPWt9aWYoYj09YS5sZW5ndGgmJmQ9PWMubGVuZ3RoKXtoPWEubGVuZ3RoO2Zvcih2YXIgbT1jLmxlbmd0aCxuPTA7bjxrLWcmJkdkKGFbLS1oXSxjWy0tbV0pOyluKys7aD1ufWUrPWc7Zis9ZztiLT1oO2QtPWg7aWYoMD09Yi1lJiYwPT1kLWYpcmV0dXJuW107aWYoZT09Yil7Zm9yKGI9RWQoZSwwKTtmPGQ7KWIuVy5wdXNoKGNbZisrXSk7cmV0dXJuW2JdfWlmKGY9PWQpcmV0dXJuW0VkKGUsYi1lKV07az1lO2c9ZjtkPWQtZysxO2g9Yi1rKzE7Yj1BcnJheShkKTtmb3IobT0wO208ZDttKyspYlttXT1BcnJheShoKSxiW21dWzBdPW07Zm9yKG09MDttPGg7bSsrKWJbMF1bbV09bTtmb3IobT0xO208ZDttKyspZm9yKG49MTtuPGg7bisrKWlmKGFbaytuLTFdPT09Y1tnK20tMV0pYlttXVtuXT0KYlttLTFdW24tMV07ZWxzZXt2YXIgcj1iW20tMV1bbl0rMSxHPWJbbV1bbi0xXSsxO2JbbV1bbl09cjxHP3I6R31rPWIubGVuZ3RoLTE7Zz1iWzBdLmxlbmd0aC0xO2Q9YltrXVtnXTtmb3IoYT1bXTswPGt8fDA8ZzspMD09az8oYS5wdXNoKDIpLGctLSk6MD09Zz8oYS5wdXNoKDMpLGstLSk6KGg9YltrLTFdW2ctMV0sbT1iW2stMV1bZ10sbj1iW2tdW2ctMV0scj1tPG4/bTxoP206aDpuPGg/bjpoLHI9PWg/KGg9PWQ/YS5wdXNoKDApOihhLnB1c2goMSksZD1oKSxrLS0sZy0tKTpyPT1tPyhhLnB1c2goMyksay0tLGQ9bSk6KGEucHVzaCgyKSxnLS0sZD1uKSk7YS5yZXZlcnNlKCk7Yj12b2lkIDA7az1bXTtmb3IoZz0wO2c8YS5sZW5ndGg7ZysrKXN3aXRjaChhW2ddKXtjYXNlIDA6YiYmKGsucHVzaChiKSxiPXZvaWQgMCk7ZSsrO2YrKzticmVhaztjYXNlIDE6Ynx8KGI9RWQoZSwwKSk7Yi5iYSsrO2UrKztiLlcucHVzaChjW2ZdKTtmKys7YnJlYWs7Y2FzZSAyOmJ8fChiPUVkKGUsCjApKTtiLmJhKys7ZSsrO2JyZWFrO2Nhc2UgMzpifHwoYj1FZChlLDApKSxiLlcucHVzaChjW2ZdKSxmKyt9YiYmay5wdXNoKGIpO3JldHVybiBrfWZ1bmN0aW9uIEdkKGEsYil7cmV0dXJuIGE9PT1ifTt2YXIgYmQ9TS5wYXJlbnROb2RlLEhkPU0uY2hpbGROb2RlcyxJZD17fTtmdW5jdGlvbiBKZChhKXt2YXIgYj1bXTtkbyBiLnVuc2hpZnQoYSk7d2hpbGUoYT1hLnBhcmVudE5vZGUpO3JldHVybiBifWZ1bmN0aW9uIE5jKGEsYixjKXtpZihhIT09SWQpdGhyb3cgbmV3IFR5cGVFcnJvcigiSWxsZWdhbCBjb25zdHJ1Y3RvciIpO3RoaXMuT2E9IlNoYWR5Um9vdCI7YT1IZChiKTt0aGlzLmhvc3Q9Yjt0aGlzLmI9YyYmYy5tb2RlO1NjKGIsYSk7Yz1BKGIpO2Mucm9vdD10aGlzO2MuRGE9ImNsb3NlZCIhPT10aGlzLmI/dGhpczpudWxsO2M9eih0aGlzKTtjLmZpcnN0Q2hpbGQ9Yy5sYXN0Q2hpbGQ9Yy5wYXJlbnROb2RlPWMubmV4dFNpYmxpbmc9Yy5wcmV2aW91c1NpYmxpbmc9bnVsbDtjLmNoaWxkTm9kZXM9W107dGhpcy5hYT0hMTt0aGlzLmE9dGhpcy53PXRoaXMubT1udWxsO2M9MDtmb3IodmFyIGQ9YS5sZW5ndGg7YzxkO2MrKylELnJlbW92ZUNoaWxkLmNhbGwoYixhW2NdKX0KZnVuY3Rpb24gV2MoYSl7YS5hYXx8KGEuYWE9ITAsSmIoZnVuY3Rpb24oKXtyZXR1cm4gS2QoYSl9KSl9ZnVuY3Rpb24gS2QoYSl7Zm9yKHZhciBiO2E7KXthLmFhJiYoYj1hKTthOnt2YXIgYz1hO2E9Yy5ob3N0LmdldFJvb3ROb2RlKCk7aWYoQyhhKSlmb3IodmFyIGQ9Yy5ob3N0LmNoaWxkTm9kZXMsZT0wO2U8ZC5sZW5ndGg7ZSsrKWlmKGM9ZFtlXSwic2xvdCI9PWMubG9jYWxOYW1lKWJyZWFrIGE7YT12b2lkIDB9fWImJmIuX3JlbmRlclJvb3QoKX0KTmMucHJvdG90eXBlLl9yZW5kZXJSb290PWZ1bmN0aW9uKCl7dGhpcy5hYT0hMTtpZih0aGlzLm0pe2FkKHRoaXMpO2Zvcih2YXIgYT0wLGI7YTx0aGlzLm0ubGVuZ3RoO2ErKyl7Yj10aGlzLm1bYV07dmFyIGM9QShiKSxkPWMuYXNzaWduZWROb2RlcztjLmFzc2lnbmVkTm9kZXM9W107Yy5MPVtdO2lmKGMucGE9ZClmb3IoYz0wO2M8ZC5sZW5ndGg7YysrKXt2YXIgZT1BKGRbY10pO2UuWj1lLmFzc2lnbmVkU2xvdDtlLmFzc2lnbmVkU2xvdD09PWImJihlLmFzc2lnbmVkU2xvdD1udWxsKX19Zm9yKGI9dGhpcy5ob3N0LmZpcnN0Q2hpbGQ7YjtiPWIubmV4dFNpYmxpbmcpTGQodGhpcyxiKTtmb3IoYT0wO2E8dGhpcy5tLmxlbmd0aDthKyspe2I9dGhpcy5tW2FdO2Q9QShiKTtpZighZC5hc3NpZ25lZE5vZGVzLmxlbmd0aClmb3IoYz1iLmZpcnN0Q2hpbGQ7YztjPWMubmV4dFNpYmxpbmcpTGQodGhpcyxjLGIpOyhjPShjPUEoYi5wYXJlbnROb2RlKSkmJmMucm9vdCkmJmNkKGMpJiZjLl9yZW5kZXJSb290KCk7Ck1kKHRoaXMsZC5MLGQuYXNzaWduZWROb2Rlcyk7aWYoYz1kLnBhKXtmb3IoZT0wO2U8Yy5sZW5ndGg7ZSsrKUEoY1tlXSkuWj1udWxsO2QucGE9bnVsbDtjLmxlbmd0aD5kLmFzc2lnbmVkTm9kZXMubGVuZ3RoJiYoZC5kYT0hMCl9ZC5kYSYmKGQuZGE9ITEsTmQodGhpcyxiKSl9YT10aGlzLm07Yj1bXTtmb3IoZD0wO2Q8YS5sZW5ndGg7ZCsrKWM9YVtkXS5wYXJlbnROb2RlLChlPUEoYykpJiZlLnJvb3R8fCEoMD5iLmluZGV4T2YoYykpfHxiLnB1c2goYyk7Zm9yKGE9MDthPGIubGVuZ3RoO2ErKyl7ZD1iW2FdO2M9ZD09PXRoaXM/dGhpcy5ob3N0OmQ7ZT1bXTtkPWQuY2hpbGROb2Rlcztmb3IodmFyIGY9MDtmPGQubGVuZ3RoO2YrKyl7dmFyIGc9ZFtmXTtpZigic2xvdCI9PWcubG9jYWxOYW1lKXtnPUEoZykuTDtmb3IodmFyIGg9MDtoPGcubGVuZ3RoO2grKyllLnB1c2goZ1toXSl9ZWxzZSBlLnB1c2goZyl9ZD12b2lkIDA7Zj1IZChjKTtnPUZkKGUsZS5sZW5ndGgsZixmLmxlbmd0aCk7CmZvcih2YXIgaz1oPTA7aDxnLmxlbmd0aCYmKGQ9Z1toXSk7aCsrKXtmb3IodmFyIG09MCxuO208ZC5XLmxlbmd0aCYmKG49ZC5XW21dKTttKyspYmQobik9PT1jJiZELnJlbW92ZUNoaWxkLmNhbGwoYyxuKSxmLnNwbGljZShkLmluZGV4K2ssMSk7ay09ZC5iYX1mb3Ioaz0wO2s8Zy5sZW5ndGgmJihkPWdba10pO2srKylmb3IoaD1mW2QuaW5kZXhdLG09ZC5pbmRleDttPGQuaW5kZXgrZC5iYTttKyspbj1lW21dLEQuaW5zZXJ0QmVmb3JlLmNhbGwoYyxuLGgpLGYuc3BsaWNlKG0sMCxuKX19fTtmdW5jdGlvbiBMZChhLGIsYyl7dmFyIGQ9eihiKSxlPWQuWjtkLlo9bnVsbDtjfHwoYz0oYT1hLndbYi5zbG90fHwiX19jYXRjaGFsbCJdKSYmYVswXSk7Yz8oeihjKS5hc3NpZ25lZE5vZGVzLnB1c2goYiksZC5hc3NpZ25lZFNsb3Q9Yyk6ZC5hc3NpZ25lZFNsb3Q9dm9pZCAwO2UhPT1kLmFzc2lnbmVkU2xvdCYmZC5hc3NpZ25lZFNsb3QmJih6KGQuYXNzaWduZWRTbG90KS5kYT0hMCl9CmZ1bmN0aW9uIE1kKGEsYixjKXtmb3IodmFyIGQ9MCxlO2Q8Yy5sZW5ndGgmJihlPWNbZF0pO2QrKylpZigic2xvdCI9PWUubG9jYWxOYW1lKXt2YXIgZj1BKGUpLmFzc2lnbmVkTm9kZXM7ZiYmZi5sZW5ndGgmJk1kKGEsYixmKX1lbHNlIGIucHVzaChjW2RdKX1mdW5jdGlvbiBOZChhLGIpe0QuZGlzcGF0Y2hFdmVudC5jYWxsKGIsbmV3IEV2ZW50KCJzbG90Y2hhbmdlIikpO2I9QShiKTtiLmFzc2lnbmVkU2xvdCYmTmQoYSxiLmFzc2lnbmVkU2xvdCl9ZnVuY3Rpb24gYWQoYSl7aWYoYS5hJiZhLmEubGVuZ3RoKXtmb3IodmFyIGI9YS5hLGMsZD0wO2Q8Yi5sZW5ndGg7ZCsrKXt2YXIgZT1iW2RdO1NjKGUpO1NjKGUucGFyZW50Tm9kZSk7dmFyIGY9ZWQoZSk7YS53W2ZdPyhjPWN8fHt9LGNbZl09ITAsYS53W2ZdLnB1c2goZSkpOmEud1tmXT1bZV07YS5tLnB1c2goZSl9aWYoYylmb3IodmFyIGcgaW4gYylhLndbZ109ZmQoYS53W2ddKTthLmE9W119fQpmdW5jdGlvbiBlZChhKXt2YXIgYj1hLm5hbWV8fGEuZ2V0QXR0cmlidXRlKCJuYW1lIil8fCJfX2NhdGNoYWxsIjtyZXR1cm4gYS5KYT1ifWZ1bmN0aW9uIGZkKGEpe3JldHVybiBhLnNvcnQoZnVuY3Rpb24oYSxjKXthPUpkKGEpO2Zvcih2YXIgYj1KZChjKSxlPTA7ZTxhLmxlbmd0aDtlKyspe2M9YVtlXTt2YXIgZj1iW2VdO2lmKGMhPT1mKXJldHVybiBhPUFycmF5LmZyb20oYy5wYXJlbnROb2RlLmNoaWxkTm9kZXMpLGEuaW5kZXhPZihjKS1hLmluZGV4T2YoZil9fSl9ZnVuY3Rpb24gY2QoYSl7YWQoYSk7cmV0dXJuISghYS5tfHwhYS5tLmxlbmd0aCl9O2Z1bmN0aW9uIE9kKGEpe3ZhciBiPWEuZ2V0Um9vdE5vZGUoKTtDKGIpJiZLZChiKTtyZXR1cm4oYT1BKGEpKSYmYS5hc3NpZ25lZFNsb3R8fG51bGx9CnZhciBQZD17YWRkRXZlbnRMaXN0ZW5lcjp4ZC5iaW5kKHdpbmRvdykscmVtb3ZlRXZlbnRMaXN0ZW5lcjp6ZC5iaW5kKHdpbmRvdyl9LFFkPXthZGRFdmVudExpc3RlbmVyOnhkLHJlbW92ZUV2ZW50TGlzdGVuZXI6emQsYXBwZW5kQ2hpbGQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFVjKHRoaXMsYSl9LGluc2VydEJlZm9yZTpmdW5jdGlvbihhLGIpe3JldHVybiBVYyh0aGlzLGEsYil9LHJlbW92ZUNoaWxkOmZ1bmN0aW9uKGEpe3JldHVybiBWYyh0aGlzLGEpfSxyZXBsYWNlQ2hpbGQ6ZnVuY3Rpb24oYSxiKXtVYyh0aGlzLGEsYik7VmModGhpcyxiKTtyZXR1cm4gYX0sY2xvbmVOb2RlOmZ1bmN0aW9uKGEpe2lmKCJ0ZW1wbGF0ZSI9PXRoaXMubG9jYWxOYW1lKXZhciBiPUQuY2xvbmVOb2RlLmNhbGwodGhpcyxhKTtlbHNlIGlmKGI9RC5jbG9uZU5vZGUuY2FsbCh0aGlzLCExKSxhKXthPXRoaXMuY2hpbGROb2Rlcztmb3IodmFyIGM9MCxkO2M8YS5sZW5ndGg7YysrKWQ9YVtjXS5jbG9uZU5vZGUoITApLApiLmFwcGVuZENoaWxkKGQpfXJldHVybiBifSxnZXRSb290Tm9kZTpmdW5jdGlvbigpe3JldHVybiBnZCh0aGlzKX0sY29udGFpbnM6ZnVuY3Rpb24oYSl7cmV0dXJuIEdiKHRoaXMsYSl9LGRpc3BhdGNoRXZlbnQ6ZnVuY3Rpb24oYSl7S2IoKTtyZXR1cm4gRC5kaXNwYXRjaEV2ZW50LmNhbGwodGhpcyxhKX19OwpPYmplY3QuZGVmaW5lUHJvcGVydGllcyhRZCx7aXNDb25uZWN0ZWQ6e2dldDpmdW5jdGlvbigpe2lmKEFjJiZBYy5jYWxsKHRoaXMpKXJldHVybiEwO2lmKHRoaXMubm9kZVR5cGU9PU5vZGUuRE9DVU1FTlRfRlJBR01FTlRfTk9ERSlyZXR1cm4hMTt2YXIgYT10aGlzLm93bmVyRG9jdW1lbnQ7aWYoRmIpe2lmKEQuY29udGFpbnMuY2FsbChhLHRoaXMpKXJldHVybiEwfWVsc2UgaWYoYS5kb2N1bWVudEVsZW1lbnQmJkQuY29udGFpbnMuY2FsbChhLmRvY3VtZW50RWxlbWVudCx0aGlzKSlyZXR1cm4hMDtmb3IoYT10aGlzO2EmJiEoYSBpbnN0YW5jZW9mIERvY3VtZW50KTspYT1hLnBhcmVudE5vZGV8fChDKGEpP2EuaG9zdDp2b2lkIDApO3JldHVybiEhKGEmJmEgaW5zdGFuY2VvZiBEb2N1bWVudCl9LGNvbmZpZ3VyYWJsZTohMH19KTsKdmFyIFJkPXtnZXQgYXNzaWduZWRTbG90KCl7cmV0dXJuIE9kKHRoaXMpfX0sU2Q9e3F1ZXJ5U2VsZWN0b3I6ZnVuY3Rpb24oYSl7cmV0dXJuIGhkKHRoaXMsZnVuY3Rpb24oYil7cmV0dXJuIHhiLmNhbGwoYixhKX0sZnVuY3Rpb24oYSl7cmV0dXJuISFhfSlbMF18fG51bGx9LHF1ZXJ5U2VsZWN0b3JBbGw6ZnVuY3Rpb24oYSxiKXtpZihiKXtiPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKEQucXVlcnlTZWxlY3RvckFsbCh0aGlzLGEpKTt2YXIgYz10aGlzLmdldFJvb3ROb2RlKCk7cmV0dXJuIGIuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhLmdldFJvb3ROb2RlKCk9PWN9KX1yZXR1cm4gaGQodGhpcyxmdW5jdGlvbihiKXtyZXR1cm4geGIuY2FsbChiLGEpfSl9fSxUZD17YXNzaWduZWROb2RlczpmdW5jdGlvbihhKXtpZigic2xvdCI9PT10aGlzLmxvY2FsTmFtZSl7dmFyIGI9dGhpcy5nZXRSb290Tm9kZSgpO0MoYikmJktkKGIpO3JldHVybihiPUEodGhpcykpPyhhJiZhLmZsYXR0ZW4/CmIuTDpiLmFzc2lnbmVkTm9kZXMpfHxbXTpbXX19fSxVZD16Yih7c2V0QXR0cmlidXRlOmZ1bmN0aW9uKGEsYil7a2QodGhpcyxhLGIpfSxyZW1vdmVBdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7RC5yZW1vdmVBdHRyaWJ1dGUuY2FsbCh0aGlzLGEpO2RkKHRoaXMsYSl9LGF0dGFjaFNoYWRvdzpmdW5jdGlvbihhKXtpZighdGhpcyl0aHJvdyJNdXN0IHByb3ZpZGUgYSBob3N0LiI7aWYoIWEpdGhyb3ciTm90IGVub3VnaCBhcmd1bWVudHMuIjtyZXR1cm4gbmV3IE5jKElkLHRoaXMsYSl9LGdldCBzbG90KCl7cmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCJzbG90Iil9LHNldCBzbG90KGEpe2tkKHRoaXMsInNsb3QiLGEpfSxnZXQgYXNzaWduZWRTbG90KCl7cmV0dXJuIE9kKHRoaXMpfX0sU2QsVGQpO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFVkLEpjKTsKdmFyIFZkPXpiKHtpbXBvcnROb2RlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGxkKGEsYil9LGdldEVsZW1lbnRCeUlkOmZ1bmN0aW9uKGEpe3JldHVybiBoZCh0aGlzLGZ1bmN0aW9uKGIpe3JldHVybiBiLmlkPT1hfSxmdW5jdGlvbihhKXtyZXR1cm4hIWF9KVswXXx8bnVsbH19LFNkKTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhWZCx7X2FjdGl2ZUVsZW1lbnQ6S2MuYWN0aXZlRWxlbWVudH0pOwp2YXIgV2Q9SFRNTEVsZW1lbnQucHJvdG90eXBlLmJsdXIsWGQ9emIoe2JsdXI6ZnVuY3Rpb24oKXt2YXIgYT1BKHRoaXMpOyhhPShhPWEmJmEucm9vdCkmJmEuYWN0aXZlRWxlbWVudCk/YS5ibHVyKCk6V2QuY2FsbCh0aGlzKX19KSxZZD17YWRkRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihhLGIsYyl7Im9iamVjdCIhPT10eXBlb2YgYyYmKGM9e2NhcHR1cmU6ISFjfSk7Yy5sYT10aGlzO3RoaXMuaG9zdC5hZGRFdmVudExpc3RlbmVyKGEsYixjKX0scmVtb3ZlRXZlbnRMaXN0ZW5lcjpmdW5jdGlvbihhLGIsYyl7Im9iamVjdCIhPT10eXBlb2YgYyYmKGM9e2NhcHR1cmU6ISFjfSk7Yy5sYT10aGlzO3RoaXMuaG9zdC5yZW1vdmVFdmVudExpc3RlbmVyKGEsYixjKX0sZ2V0RWxlbWVudEJ5SWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGhkKHRoaXMsZnVuY3Rpb24oYil7cmV0dXJuIGIuaWQ9PWF9LGZ1bmN0aW9uKGEpe3JldHVybiEhYX0pWzBdfHxudWxsfX07CmZ1bmN0aW9uIFpkKGEsYil7Zm9yKHZhciBjPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGIpLGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXSxmPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYixlKTtmLnZhbHVlP2FbZV09Zi52YWx1ZTpPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxlLGYpfX07aWYoQi5CYSl7dmFyIFNoYWR5RE9NPXtpblVzZTpCLkJhLHBhdGNoOmZ1bmN0aW9uKGEpe1BjKGEpO09jKGEpO3JldHVybiBhfSxpc1NoYWR5Um9vdDpDLGVucXVldWU6SmIsZmx1c2g6S2Isc2V0dGluZ3M6QixmaWx0ZXJNdXRhdGlvbnM6UWIsb2JzZXJ2ZUNoaWxkcmVuOk9iLHVub2JzZXJ2ZUNoaWxkcmVuOlBiLG5hdGl2ZU1ldGhvZHM6RCxuYXRpdmVUcmVlOk19O3dpbmRvdy5TaGFkeURPTT1TaGFkeURPTTt3aW5kb3cuRXZlbnQ9QmQ7d2luZG93LkN1c3RvbUV2ZW50PUNkO3dpbmRvdy5Nb3VzZUV2ZW50PURkO0FkKCk7dmFyICRkPXdpbmRvdy5jdXN0b21FbGVtZW50cyYmd2luZG93LmN1c3RvbUVsZW1lbnRzLm5hdGl2ZUhUTUxFbGVtZW50fHxIVE1MRWxlbWVudDtaZChOYy5wcm90b3R5cGUsWWQpO1pkKHdpbmRvdy5Ob2RlLnByb3RvdHlwZSxRZCk7WmQod2luZG93LldpbmRvdy5wcm90b3R5cGUsUGQpO1pkKHdpbmRvdy5UZXh0LnByb3RvdHlwZSxSZCk7WmQod2luZG93LkRvY3VtZW50RnJhZ21lbnQucHJvdG90eXBlLApTZCk7WmQod2luZG93LkVsZW1lbnQucHJvdG90eXBlLFVkKTtaZCh3aW5kb3cuRG9jdW1lbnQucHJvdG90eXBlLFZkKTt3aW5kb3cuSFRNTFNsb3RFbGVtZW50JiZaZCh3aW5kb3cuSFRNTFNsb3RFbGVtZW50LnByb3RvdHlwZSxUZCk7WmQoJGQucHJvdG90eXBlLFhkKTtCLkkmJihMYyh3aW5kb3cuTm9kZS5wcm90b3R5cGUpLExjKHdpbmRvdy5UZXh0LnByb3RvdHlwZSksTGMod2luZG93LkRvY3VtZW50RnJhZ21lbnQucHJvdG90eXBlKSxMYyh3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUpLExjKCRkLnByb3RvdHlwZSksTGMod2luZG93LkRvY3VtZW50LnByb3RvdHlwZSksd2luZG93LkhUTUxTbG90RWxlbWVudCYmTGMod2luZG93LkhUTUxTbG90RWxlbWVudC5wcm90b3R5cGUpKTtNYygpO3dpbmRvdy5TaGFkb3dSb290PU5jfTt2YXIgYWU9bmV3IFNldCgiYW5ub3RhdGlvbi14bWwgY29sb3ItcHJvZmlsZSBmb250LWZhY2UgZm9udC1mYWNlLXNyYyBmb250LWZhY2UtdXJpIGZvbnQtZmFjZS1mb3JtYXQgZm9udC1mYWNlLW5hbWUgbWlzc2luZy1nbHlwaCIuc3BsaXQoIiAiKSk7ZnVuY3Rpb24gYmUoYSl7dmFyIGI9YWUuaGFzKGEpO2E9L15bYS16XVsuMC05X2Etel0qLVtcLS4wLTlfYS16XSokLy50ZXN0KGEpO3JldHVybiFiJiZhfWZ1bmN0aW9uIE8oYSl7dmFyIGI9YS5pc0Nvbm5lY3RlZDtpZih2b2lkIDAhPT1iKXJldHVybiBiO2Zvcig7YSYmIShhLl9fQ0VfaXNJbXBvcnREb2N1bWVudHx8YSBpbnN0YW5jZW9mIERvY3VtZW50KTspYT1hLnBhcmVudE5vZGV8fCh3aW5kb3cuU2hhZG93Um9vdCYmYSBpbnN0YW5jZW9mIFNoYWRvd1Jvb3Q/YS5ob3N0OnZvaWQgMCk7cmV0dXJuISghYXx8IShhLl9fQ0VfaXNJbXBvcnREb2N1bWVudHx8YSBpbnN0YW5jZW9mIERvY3VtZW50KSl9CmZ1bmN0aW9uIGNlKGEsYil7Zm9yKDtiJiZiIT09YSYmIWIubmV4dFNpYmxpbmc7KWI9Yi5wYXJlbnROb2RlO3JldHVybiBiJiZiIT09YT9iLm5leHRTaWJsaW5nOm51bGx9CmZ1bmN0aW9uIGRlKGEsYixjKXtjPXZvaWQgMD09PWM/bmV3IFNldDpjO2Zvcih2YXIgZD1hO2Q7KXtpZihkLm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUpe3ZhciBlPWQ7YihlKTt2YXIgZj1lLmxvY2FsTmFtZTtpZigibGluayI9PT1mJiYiaW1wb3J0Ij09PWUuZ2V0QXR0cmlidXRlKCJyZWwiKSl7ZD1lLmltcG9ydDtpZihkIGluc3RhbmNlb2YgTm9kZSYmIWMuaGFzKGQpKWZvcihjLmFkZChkKSxkPWQuZmlyc3RDaGlsZDtkO2Q9ZC5uZXh0U2libGluZylkZShkLGIsYyk7ZD1jZShhLGUpO2NvbnRpbnVlfWVsc2UgaWYoInRlbXBsYXRlIj09PWYpe2Q9Y2UoYSxlKTtjb250aW51ZX1pZihlPWUuX19DRV9zaGFkb3dSb290KWZvcihlPWUuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZylkZShlLGIsYyl9ZD1kLmZpcnN0Q2hpbGQ/ZC5maXJzdENoaWxkOmNlKGEsZCl9fWZ1bmN0aW9uIFAoYSxiLGMpe2FbYl09Y307ZnVuY3Rpb24gZWUoKXt0aGlzLmE9bmV3IE1hcDt0aGlzLk09bmV3IE1hcDt0aGlzLkY9W107dGhpcy5jPSExfWZ1bmN0aW9uIGZlKGEsYixjKXthLmEuc2V0KGIsYyk7YS5NLnNldChjLmNvbnN0cnVjdG9yLGMpfWZ1bmN0aW9uIGdlKGEsYil7YS5jPSEwO2EuRi5wdXNoKGIpfWZ1bmN0aW9uIGhlKGEsYil7YS5jJiZkZShiLGZ1bmN0aW9uKGIpe3JldHVybiBhLmIoYil9KX1lZS5wcm90b3R5cGUuYj1mdW5jdGlvbihhKXtpZih0aGlzLmMmJiFhLl9fQ0VfcGF0Y2hlZCl7YS5fX0NFX3BhdGNoZWQ9ITA7Zm9yKHZhciBiPTA7Yjx0aGlzLkYubGVuZ3RoO2IrKyl0aGlzLkZbYl0oYSl9fTtmdW5jdGlvbiBRKGEsYil7dmFyIGM9W107ZGUoYixmdW5jdGlvbihhKXtyZXR1cm4gYy5wdXNoKGEpfSk7Zm9yKGI9MDtiPGMubGVuZ3RoO2IrKyl7dmFyIGQ9Y1tiXTsxPT09ZC5fX0NFX3N0YXRlP2EuY29ubmVjdGVkQ2FsbGJhY2soZCk6aWUoYSxkKX19CmZ1bmN0aW9uIFIoYSxiKXt2YXIgYz1bXTtkZShiLGZ1bmN0aW9uKGEpe3JldHVybiBjLnB1c2goYSl9KTtmb3IoYj0wO2I8Yy5sZW5ndGg7YisrKXt2YXIgZD1jW2JdOzE9PT1kLl9fQ0Vfc3RhdGUmJmEuZGlzY29ubmVjdGVkQ2FsbGJhY2soZCl9fQpmdW5jdGlvbiBqZShhLGIsYyl7Yz12b2lkIDA9PT1jP3t9OmM7dmFyIGQ9Yy5iYnx8bmV3IFNldCxlPWMuZ2F8fGZ1bmN0aW9uKGIpe3JldHVybiBpZShhLGIpfSxmPVtdO2RlKGIsZnVuY3Rpb24oYil7aWYoImxpbmsiPT09Yi5sb2NhbE5hbWUmJiJpbXBvcnQiPT09Yi5nZXRBdHRyaWJ1dGUoInJlbCIpKXt2YXIgYz1iLmltcG9ydDtjIGluc3RhbmNlb2YgTm9kZSYmKGMuX19DRV9pc0ltcG9ydERvY3VtZW50PSEwLGMuX19DRV9oYXNSZWdpc3RyeT0hMCk7YyYmImNvbXBsZXRlIj09PWMucmVhZHlTdGF0ZT9jLl9fQ0VfZG9jdW1lbnRMb2FkSGFuZGxlZD0hMDpiLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGZ1bmN0aW9uKCl7dmFyIGM9Yi5pbXBvcnQ7aWYoIWMuX19DRV9kb2N1bWVudExvYWRIYW5kbGVkKXtjLl9fQ0VfZG9jdW1lbnRMb2FkSGFuZGxlZD0hMDt2YXIgZj1uZXcgU2V0KGQpO2YuZGVsZXRlKGMpO2plKGEsYyx7YmI6ZixnYTplfSl9fSl9ZWxzZSBmLnB1c2goYil9LGQpOwppZihhLmMpZm9yKGI9MDtiPGYubGVuZ3RoO2IrKylhLmIoZltiXSk7Zm9yKGI9MDtiPGYubGVuZ3RoO2IrKyllKGZbYl0pfQpmdW5jdGlvbiBpZShhLGIpe2lmKHZvaWQgMD09PWIuX19DRV9zdGF0ZSl7dmFyIGM9Yi5vd25lckRvY3VtZW50O2lmKGMuZGVmYXVsdFZpZXd8fGMuX19DRV9pc0ltcG9ydERvY3VtZW50JiZjLl9fQ0VfaGFzUmVnaXN0cnkpaWYoYz1hLmEuZ2V0KGIubG9jYWxOYW1lKSl7Yy5jb25zdHJ1Y3Rpb25TdGFjay5wdXNoKGIpO3ZhciBkPWMuY29uc3RydWN0b3I7dHJ5e3RyeXtpZihuZXcgZCE9PWIpdGhyb3cgRXJyb3IoIlRoZSBjdXN0b20gZWxlbWVudCBjb25zdHJ1Y3RvciBkaWQgbm90IHByb2R1Y2UgdGhlIGVsZW1lbnQgYmVpbmcgdXBncmFkZWQuIik7fWZpbmFsbHl7Yy5jb25zdHJ1Y3Rpb25TdGFjay5wb3AoKX19Y2F0Y2goZyl7dGhyb3cgYi5fX0NFX3N0YXRlPTIsZzt9Yi5fX0NFX3N0YXRlPTE7Yi5fX0NFX2RlZmluaXRpb249YztpZihjLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjaylmb3IoYz1jLm9ic2VydmVkQXR0cmlidXRlcyxkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciBlPWNbZF0sCmY9Yi5nZXRBdHRyaWJ1dGUoZSk7bnVsbCE9PWYmJmEuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGIsZSxudWxsLGYsbnVsbCl9TyhiKSYmYS5jb25uZWN0ZWRDYWxsYmFjayhiKX19fWVlLnByb3RvdHlwZS5jb25uZWN0ZWRDYWxsYmFjaz1mdW5jdGlvbihhKXt2YXIgYj1hLl9fQ0VfZGVmaW5pdGlvbjtiLmNvbm5lY3RlZENhbGxiYWNrJiZiLmNvbm5lY3RlZENhbGxiYWNrLmNhbGwoYSl9O2VlLnByb3RvdHlwZS5kaXNjb25uZWN0ZWRDYWxsYmFjaz1mdW5jdGlvbihhKXt2YXIgYj1hLl9fQ0VfZGVmaW5pdGlvbjtiLmRpc2Nvbm5lY3RlZENhbGxiYWNrJiZiLmRpc2Nvbm5lY3RlZENhbGxiYWNrLmNhbGwoYSl9OwplZS5wcm90b3R5cGUuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrPWZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9YS5fX0NFX2RlZmluaXRpb247Zi5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2smJi0xPGYub2JzZXJ2ZWRBdHRyaWJ1dGVzLmluZGV4T2YoYikmJmYuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrLmNhbGwoYSxiLGMsZCxlKX07ZnVuY3Rpb24ga2UoYSl7dmFyIGI9ZG9jdW1lbnQ7dGhpcy5BPWE7dGhpcy5hPWI7dGhpcy5QPXZvaWQgMDtqZSh0aGlzLkEsdGhpcy5hKTsibG9hZGluZyI9PT10aGlzLmEucmVhZHlTdGF0ZSYmKHRoaXMuUD1uZXcgTXV0YXRpb25PYnNlcnZlcih0aGlzLmIuYmluZCh0aGlzKSksdGhpcy5QLm9ic2VydmUodGhpcy5hLHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pKX1mdW5jdGlvbiBsZShhKXthLlAmJmEuUC5kaXNjb25uZWN0KCl9a2UucHJvdG90eXBlLmI9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hLnJlYWR5U3RhdGU7ImludGVyYWN0aXZlIiE9PWImJiJjb21wbGV0ZSIhPT1ifHxsZSh0aGlzKTtmb3IoYj0wO2I8YS5sZW5ndGg7YisrKWZvcih2YXIgYz1hW2JdLmFkZGVkTm9kZXMsZD0wO2Q8Yy5sZW5ndGg7ZCsrKWplKHRoaXMuQSxjW2RdKX07ZnVuY3Rpb24gbWUoKXt2YXIgYT10aGlzO3RoaXMuYj10aGlzLmE9dm9pZCAwO3RoaXMuYz1uZXcgUHJvbWlzZShmdW5jdGlvbihiKXthLmI9YjthLmEmJmIoYS5hKX0pfW1lLnByb3RvdHlwZS5yZXNvbHZlPWZ1bmN0aW9uKGEpe2lmKHRoaXMuYSl0aHJvdyBFcnJvcigiQWxyZWFkeSByZXNvbHZlZC4iKTt0aGlzLmE9YTt0aGlzLmImJnRoaXMuYihhKX07ZnVuY3Rpb24gUyhhKXt0aGlzLm1hPSExO3RoaXMuQT1hO3RoaXMucmE9bmV3IE1hcDt0aGlzLm5hPWZ1bmN0aW9uKGEpe3JldHVybiBhKCl9O3RoaXMuWT0hMTt0aGlzLm9hPVtdO3RoaXMuTWE9bmV3IGtlKGEpfXE9Uy5wcm90b3R5cGU7CnEuZGVmaW5lPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztpZighKGIgaW5zdGFuY2VvZiBGdW5jdGlvbikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ3VzdG9tIGVsZW1lbnQgY29uc3RydWN0b3JzIG11c3QgYmUgZnVuY3Rpb25zLiIpO2lmKCFiZShhKSl0aHJvdyBuZXcgU3ludGF4RXJyb3IoIlRoZSBlbGVtZW50IG5hbWUgJyIrYSsiJyBpcyBub3QgdmFsaWQuIik7aWYodGhpcy5BLmEuZ2V0KGEpKXRocm93IEVycm9yKCJBIGN1c3RvbSBlbGVtZW50IHdpdGggbmFtZSAnIithKyInIGhhcyBhbHJlYWR5IGJlZW4gZGVmaW5lZC4iKTtpZih0aGlzLm1hKXRocm93IEVycm9yKCJBIGN1c3RvbSBlbGVtZW50IGlzIGFscmVhZHkgYmVpbmcgZGVmaW5lZC4iKTt0aGlzLm1hPSEwO3RyeXt2YXIgZD1mdW5jdGlvbihhKXt2YXIgYj1lW2FdO2lmKHZvaWQgMCE9PWImJiEoYiBpbnN0YW5jZW9mIEZ1bmN0aW9uKSl0aHJvdyBFcnJvcigiVGhlICciK2ErIicgY2FsbGJhY2sgbXVzdCBiZSBhIGZ1bmN0aW9uLiIpOwpyZXR1cm4gYn0sZT1iLnByb3RvdHlwZTtpZighKGUgaW5zdGFuY2VvZiBPYmplY3QpKXRocm93IG5ldyBUeXBlRXJyb3IoIlRoZSBjdXN0b20gZWxlbWVudCBjb25zdHJ1Y3RvcidzIHByb3RvdHlwZSBpcyBub3QgYW4gb2JqZWN0LiIpO3ZhciBmPWQoImNvbm5lY3RlZENhbGxiYWNrIik7dmFyIGc9ZCgiZGlzY29ubmVjdGVkQ2FsbGJhY2siKTt2YXIgaD1kKCJhZG9wdGVkQ2FsbGJhY2siKTt2YXIgaz1kKCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2siKTt2YXIgbT1iLm9ic2VydmVkQXR0cmlidXRlc3x8W119Y2F0Y2gobil7cmV0dXJufWZpbmFsbHl7dGhpcy5tYT0hMX1iPXtsb2NhbE5hbWU6YSxjb25zdHJ1Y3RvcjpiLGNvbm5lY3RlZENhbGxiYWNrOmYsZGlzY29ubmVjdGVkQ2FsbGJhY2s6ZyxhZG9wdGVkQ2FsbGJhY2s6aCxhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2s6ayxvYnNlcnZlZEF0dHJpYnV0ZXM6bSxjb25zdHJ1Y3Rpb25TdGFjazpbXX07ZmUodGhpcy5BLGEsYik7dGhpcy5vYS5wdXNoKGIpOwp0aGlzLll8fCh0aGlzLlk9ITAsdGhpcy5uYShmdW5jdGlvbigpe3JldHVybiBuZShjKX0pKX07cS5nYT1mdW5jdGlvbihhKXtqZSh0aGlzLkEsYSl9OwpmdW5jdGlvbiBuZShhKXtpZighMSE9PWEuWSl7YS5ZPSExO2Zvcih2YXIgYj1hLm9hLGM9W10sZD1uZXcgTWFwLGU9MDtlPGIubGVuZ3RoO2UrKylkLnNldChiW2VdLmxvY2FsTmFtZSxbXSk7amUoYS5BLGRvY3VtZW50LHtnYTpmdW5jdGlvbihiKXtpZih2b2lkIDA9PT1iLl9fQ0Vfc3RhdGUpe3ZhciBlPWIubG9jYWxOYW1lLGY9ZC5nZXQoZSk7Zj9mLnB1c2goYik6YS5BLmEuZ2V0KGUpJiZjLnB1c2goYil9fX0pO2ZvcihlPTA7ZTxjLmxlbmd0aDtlKyspaWUoYS5BLGNbZV0pO2Zvcig7MDxiLmxlbmd0aDspe3ZhciBmPWIuc2hpZnQoKTtlPWYubG9jYWxOYW1lO2Y9ZC5nZXQoZi5sb2NhbE5hbWUpO2Zvcih2YXIgZz0wO2c8Zi5sZW5ndGg7ZysrKWllKGEuQSxmW2ddKTsoZT1hLnJhLmdldChlKSkmJmUucmVzb2x2ZSh2b2lkIDApfX19cS5nZXQ9ZnVuY3Rpb24oYSl7aWYoYT10aGlzLkEuYS5nZXQoYSkpcmV0dXJuIGEuY29uc3RydWN0b3J9OwpxLndoZW5EZWZpbmVkPWZ1bmN0aW9uKGEpe2lmKCFiZShhKSlyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IFN5bnRheEVycm9yKCInIithKyInIGlzIG5vdCBhIHZhbGlkIGN1c3RvbSBlbGVtZW50IG5hbWUuIikpO3ZhciBiPXRoaXMucmEuZ2V0KGEpO2lmKGIpcmV0dXJuIGIuYztiPW5ldyBtZTt0aGlzLnJhLnNldChhLGIpO3RoaXMuQS5hLmdldChhKSYmIXRoaXMub2Euc29tZShmdW5jdGlvbihiKXtyZXR1cm4gYi5sb2NhbE5hbWU9PT1hfSkmJmIucmVzb2x2ZSh2b2lkIDApO3JldHVybiBiLmN9O3EuWGE9ZnVuY3Rpb24oYSl7bGUodGhpcy5NYSk7dmFyIGI9dGhpcy5uYTt0aGlzLm5hPWZ1bmN0aW9uKGMpe3JldHVybiBhKGZ1bmN0aW9uKCl7cmV0dXJuIGIoYyl9KX19O3dpbmRvdy5DdXN0b21FbGVtZW50UmVnaXN0cnk9UztTLnByb3RvdHlwZS5kZWZpbmU9Uy5wcm90b3R5cGUuZGVmaW5lO1MucHJvdG90eXBlLnVwZ3JhZGU9Uy5wcm90b3R5cGUuZ2E7ClMucHJvdG90eXBlLmdldD1TLnByb3RvdHlwZS5nZXQ7Uy5wcm90b3R5cGUud2hlbkRlZmluZWQ9Uy5wcm90b3R5cGUud2hlbkRlZmluZWQ7Uy5wcm90b3R5cGUucG9seWZpbGxXcmFwRmx1c2hDYWxsYmFjaz1TLnByb3RvdHlwZS5YYTt2YXIgb2U9d2luZG93LkRvY3VtZW50LnByb3RvdHlwZS5jcmVhdGVFbGVtZW50LHBlPXdpbmRvdy5Eb2N1bWVudC5wcm90b3R5cGUuY3JlYXRlRWxlbWVudE5TLHFlPXdpbmRvdy5Eb2N1bWVudC5wcm90b3R5cGUuaW1wb3J0Tm9kZSxyZT13aW5kb3cuRG9jdW1lbnQucHJvdG90eXBlLnByZXBlbmQsc2U9d2luZG93LkRvY3VtZW50LnByb3RvdHlwZS5hcHBlbmQsdGU9d2luZG93LkRvY3VtZW50RnJhZ21lbnQucHJvdG90eXBlLnByZXBlbmQsdWU9d2luZG93LkRvY3VtZW50RnJhZ21lbnQucHJvdG90eXBlLmFwcGVuZCx2ZT13aW5kb3cuTm9kZS5wcm90b3R5cGUuY2xvbmVOb2RlLHdlPXdpbmRvdy5Ob2RlLnByb3RvdHlwZS5hcHBlbmRDaGlsZCx4ZT13aW5kb3cuTm9kZS5wcm90b3R5cGUuaW5zZXJ0QmVmb3JlLHllPXdpbmRvdy5Ob2RlLnByb3RvdHlwZS5yZW1vdmVDaGlsZCx6ZT13aW5kb3cuTm9kZS5wcm90b3R5cGUucmVwbGFjZUNoaWxkLEFlPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iod2luZG93Lk5vZGUucHJvdG90eXBlLAoidGV4dENvbnRlbnQiKSxCZT13aW5kb3cuRWxlbWVudC5wcm90b3R5cGUuYXR0YWNoU2hhZG93LENlPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iod2luZG93LkVsZW1lbnQucHJvdG90eXBlLCJpbm5lckhUTUwiKSxEZT13aW5kb3cuRWxlbWVudC5wcm90b3R5cGUuZ2V0QXR0cmlidXRlLEVlPXdpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5zZXRBdHRyaWJ1dGUsRmU9d2luZG93LkVsZW1lbnQucHJvdG90eXBlLnJlbW92ZUF0dHJpYnV0ZSxHZT13aW5kb3cuRWxlbWVudC5wcm90b3R5cGUuZ2V0QXR0cmlidXRlTlMsSGU9d2luZG93LkVsZW1lbnQucHJvdG90eXBlLnNldEF0dHJpYnV0ZU5TLEllPXdpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5yZW1vdmVBdHRyaWJ1dGVOUyxKZT13aW5kb3cuRWxlbWVudC5wcm90b3R5cGUuaW5zZXJ0QWRqYWNlbnRFbGVtZW50LEtlPXdpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5pbnNlcnRBZGphY2VudEhUTUwsTGU9d2luZG93LkVsZW1lbnQucHJvdG90eXBlLnByZXBlbmQsCk1lPXdpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5hcHBlbmQsTmU9d2luZG93LkVsZW1lbnQucHJvdG90eXBlLmJlZm9yZSxPZT13aW5kb3cuRWxlbWVudC5wcm90b3R5cGUuYWZ0ZXIsUGU9d2luZG93LkVsZW1lbnQucHJvdG90eXBlLnJlcGxhY2VXaXRoLFFlPXdpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5yZW1vdmUsUmU9d2luZG93LkhUTUxFbGVtZW50LFNlPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iod2luZG93LkhUTUxFbGVtZW50LnByb3RvdHlwZSwiaW5uZXJIVE1MIiksVGU9d2luZG93LkhUTUxFbGVtZW50LnByb3RvdHlwZS5pbnNlcnRBZGphY2VudEVsZW1lbnQsVWU9d2luZG93LkhUTUxFbGVtZW50LnByb3RvdHlwZS5pbnNlcnRBZGphY2VudEhUTUw7dmFyIFZlPW5ldyBmdW5jdGlvbigpe307ZnVuY3Rpb24gV2UoKXt2YXIgYT1YZTt3aW5kb3cuSFRNTEVsZW1lbnQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBiKCl7dmFyIGI9dGhpcy5jb25zdHJ1Y3RvcixkPWEuTS5nZXQoYik7aWYoIWQpdGhyb3cgRXJyb3IoIlRoZSBjdXN0b20gZWxlbWVudCBiZWluZyBjb25zdHJ1Y3RlZCB3YXMgbm90IHJlZ2lzdGVyZWQgd2l0aCBgY3VzdG9tRWxlbWVudHNgLiIpO3ZhciBlPWQuY29uc3RydWN0aW9uU3RhY2s7aWYoMD09PWUubGVuZ3RoKXJldHVybiBlPW9lLmNhbGwoZG9jdW1lbnQsZC5sb2NhbE5hbWUpLE9iamVjdC5zZXRQcm90b3R5cGVPZihlLGIucHJvdG90eXBlKSxlLl9fQ0Vfc3RhdGU9MSxlLl9fQ0VfZGVmaW5pdGlvbj1kLGEuYihlKSxlO2Q9ZS5sZW5ndGgtMTt2YXIgZj1lW2RdO2lmKGY9PT1WZSl0aHJvdyBFcnJvcigiVGhlIEhUTUxFbGVtZW50IGNvbnN0cnVjdG9yIHdhcyBlaXRoZXIgY2FsbGVkIHJlZW50cmFudGx5IGZvciB0aGlzIGNvbnN0cnVjdG9yIG9yIGNhbGxlZCBtdWx0aXBsZSB0aW1lcy4iKTsKZVtkXT1WZTtPYmplY3Quc2V0UHJvdG90eXBlT2YoZixiLnByb3RvdHlwZSk7YS5iKGYpO3JldHVybiBmfWIucHJvdG90eXBlPVJlLnByb3RvdHlwZTtyZXR1cm4gYn0oKX07ZnVuY3Rpb24gWWUoYSxiLGMpe2Z1bmN0aW9uIGQoYil7cmV0dXJuIGZ1bmN0aW9uKGMpe2Zvcih2YXIgZD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoOysrZSlkW2UtMF09YXJndW1lbnRzW2VdO2U9W107Zm9yKHZhciBmPVtdLG09MDttPGQubGVuZ3RoO20rKyl7dmFyIG49ZFttXTtuIGluc3RhbmNlb2YgRWxlbWVudCYmTyhuKSYmZi5wdXNoKG4pO2lmKG4gaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KWZvcihuPW4uZmlyc3RDaGlsZDtuO249bi5uZXh0U2libGluZyllLnB1c2gobik7ZWxzZSBlLnB1c2gobil9Yi5hcHBseSh0aGlzLGQpO2ZvcihkPTA7ZDxmLmxlbmd0aDtkKyspUihhLGZbZF0pO2lmKE8odGhpcykpZm9yKGQ9MDtkPGUubGVuZ3RoO2QrKylmPWVbZF0sZiBpbnN0YW5jZW9mIEVsZW1lbnQmJlEoYSxmKX19dm9pZCAwIT09Yy5mYSYmKGIucHJlcGVuZD1kKGMuZmEpKTt2b2lkIDAhPT1jLmFwcGVuZCYmKGIuYXBwZW5kPWQoYy5hcHBlbmQpKX07ZnVuY3Rpb24gWmUoKXt2YXIgYT1YZTtQKERvY3VtZW50LnByb3RvdHlwZSwiY3JlYXRlRWxlbWVudCIsZnVuY3Rpb24oYil7aWYodGhpcy5fX0NFX2hhc1JlZ2lzdHJ5KXt2YXIgYz1hLmEuZ2V0KGIpO2lmKGMpcmV0dXJuIG5ldyBjLmNvbnN0cnVjdG9yfWI9b2UuY2FsbCh0aGlzLGIpO2EuYihiKTtyZXR1cm4gYn0pO1AoRG9jdW1lbnQucHJvdG90eXBlLCJpbXBvcnROb2RlIixmdW5jdGlvbihiLGMpe2I9cWUuY2FsbCh0aGlzLGIsYyk7dGhpcy5fX0NFX2hhc1JlZ2lzdHJ5P2plKGEsYik6aGUoYSxiKTtyZXR1cm4gYn0pO1AoRG9jdW1lbnQucHJvdG90eXBlLCJjcmVhdGVFbGVtZW50TlMiLGZ1bmN0aW9uKGIsYyl7aWYodGhpcy5fX0NFX2hhc1JlZ2lzdHJ5JiYobnVsbD09PWJ8fCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIj09PWIpKXt2YXIgZD1hLmEuZ2V0KGMpO2lmKGQpcmV0dXJuIG5ldyBkLmNvbnN0cnVjdG9yfWI9cGUuY2FsbCh0aGlzLGIsYyk7YS5iKGIpO3JldHVybiBifSk7ClllKGEsRG9jdW1lbnQucHJvdG90eXBlLHtmYTpyZSxhcHBlbmQ6c2V9KX07ZnVuY3Rpb24gJGUoKXt2YXIgYT1YZTtmdW5jdGlvbiBiKGIsZCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGIsInRleHRDb250ZW50Iix7ZW51bWVyYWJsZTpkLmVudW1lcmFibGUsY29uZmlndXJhYmxlOiEwLGdldDpkLmdldCxzZXQ6ZnVuY3Rpb24oYil7aWYodGhpcy5ub2RlVHlwZT09PU5vZGUuVEVYVF9OT0RFKWQuc2V0LmNhbGwodGhpcyxiKTtlbHNle3ZhciBjPXZvaWQgMDtpZih0aGlzLmZpcnN0Q2hpbGQpe3ZhciBlPXRoaXMuY2hpbGROb2RlcyxoPWUubGVuZ3RoO2lmKDA8aCYmTyh0aGlzKSl7Yz1BcnJheShoKTtmb3IodmFyIGs9MDtrPGg7aysrKWNba109ZVtrXX19ZC5zZXQuY2FsbCh0aGlzLGIpO2lmKGMpZm9yKGI9MDtiPGMubGVuZ3RoO2IrKylSKGEsY1tiXSl9fX0pfVAoTm9kZS5wcm90b3R5cGUsImluc2VydEJlZm9yZSIsZnVuY3Rpb24oYixkKXtpZihiIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudCl7dmFyIGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGIuY2hpbGROb2Rlcyk7CmI9eGUuY2FsbCh0aGlzLGIsZCk7aWYoTyh0aGlzKSlmb3IoZD0wO2Q8Yy5sZW5ndGg7ZCsrKVEoYSxjW2RdKTtyZXR1cm4gYn1jPU8oYik7ZD14ZS5jYWxsKHRoaXMsYixkKTtjJiZSKGEsYik7Tyh0aGlzKSYmUShhLGIpO3JldHVybiBkfSk7UChOb2RlLnByb3RvdHlwZSwiYXBwZW5kQ2hpbGQiLGZ1bmN0aW9uKGIpe2lmKGIgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KXt2YXIgYz1BcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYi5jaGlsZE5vZGVzKTtiPXdlLmNhbGwodGhpcyxiKTtpZihPKHRoaXMpKWZvcih2YXIgZT0wO2U8Yy5sZW5ndGg7ZSsrKVEoYSxjW2VdKTtyZXR1cm4gYn1jPU8oYik7ZT13ZS5jYWxsKHRoaXMsYik7YyYmUihhLGIpO08odGhpcykmJlEoYSxiKTtyZXR1cm4gZX0pO1AoTm9kZS5wcm90b3R5cGUsImNsb25lTm9kZSIsZnVuY3Rpb24oYil7Yj12ZS5jYWxsKHRoaXMsYik7dGhpcy5vd25lckRvY3VtZW50Ll9fQ0VfaGFzUmVnaXN0cnk/amUoYSxiKToKaGUoYSxiKTtyZXR1cm4gYn0pO1AoTm9kZS5wcm90b3R5cGUsInJlbW92ZUNoaWxkIixmdW5jdGlvbihiKXt2YXIgYz1PKGIpLGU9eWUuY2FsbCh0aGlzLGIpO2MmJlIoYSxiKTtyZXR1cm4gZX0pO1AoTm9kZS5wcm90b3R5cGUsInJlcGxhY2VDaGlsZCIsZnVuY3Rpb24oYixkKXtpZihiIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudCl7dmFyIGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGIuY2hpbGROb2Rlcyk7Yj16ZS5jYWxsKHRoaXMsYixkKTtpZihPKHRoaXMpKWZvcihSKGEsZCksZD0wO2Q8Yy5sZW5ndGg7ZCsrKVEoYSxjW2RdKTtyZXR1cm4gYn1jPU8oYik7dmFyIGY9emUuY2FsbCh0aGlzLGIsZCksZz1PKHRoaXMpO2cmJlIoYSxkKTtjJiZSKGEsYik7ZyYmUShhLGIpO3JldHVybiBmfSk7QWUmJkFlLmdldD9iKE5vZGUucHJvdG90eXBlLEFlKTpnZShhLGZ1bmN0aW9uKGEpe2IoYSx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPQpbXSxiPTA7Yjx0aGlzLmNoaWxkTm9kZXMubGVuZ3RoO2IrKylhLnB1c2godGhpcy5jaGlsZE5vZGVzW2JdLnRleHRDb250ZW50KTtyZXR1cm4gYS5qb2luKCIiKX0sc2V0OmZ1bmN0aW9uKGEpe2Zvcig7dGhpcy5maXJzdENoaWxkOyl5ZS5jYWxsKHRoaXMsdGhpcy5maXJzdENoaWxkKTt3ZS5jYWxsKHRoaXMsZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYSkpfX0pfSl9O2Z1bmN0aW9uIGFmKGEpe3ZhciBiPUVsZW1lbnQucHJvdG90eXBlO2Z1bmN0aW9uIGMoYil7cmV0dXJuIGZ1bmN0aW9uKGMpe2Zvcih2YXIgZD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoOysrZSlkW2UtMF09YXJndW1lbnRzW2VdO2U9W107Zm9yKHZhciBoPVtdLGs9MDtrPGQubGVuZ3RoO2srKyl7dmFyIG09ZFtrXTttIGluc3RhbmNlb2YgRWxlbWVudCYmTyhtKSYmaC5wdXNoKG0pO2lmKG0gaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KWZvcihtPW0uZmlyc3RDaGlsZDttO209bS5uZXh0U2libGluZyllLnB1c2gobSk7ZWxzZSBlLnB1c2gobSl9Yi5hcHBseSh0aGlzLGQpO2ZvcihkPTA7ZDxoLmxlbmd0aDtkKyspUihhLGhbZF0pO2lmKE8odGhpcykpZm9yKGQ9MDtkPGUubGVuZ3RoO2QrKyloPWVbZF0saCBpbnN0YW5jZW9mIEVsZW1lbnQmJlEoYSxoKX19dm9pZCAwIT09TmUmJihiLmJlZm9yZT1jKE5lKSk7dm9pZCAwIT09TmUmJihiLmFmdGVyPWMoT2UpKTt2b2lkIDAhPT0KUGUmJlAoYiwicmVwbGFjZVdpdGgiLGZ1bmN0aW9uKGIpe2Zvcih2YXIgYz1bXSxkPTA7ZDxhcmd1bWVudHMubGVuZ3RoOysrZCljW2QtMF09YXJndW1lbnRzW2RdO2Q9W107Zm9yKHZhciBnPVtdLGg9MDtoPGMubGVuZ3RoO2grKyl7dmFyIGs9Y1toXTtrIGluc3RhbmNlb2YgRWxlbWVudCYmTyhrKSYmZy5wdXNoKGspO2lmKGsgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KWZvcihrPWsuZmlyc3RDaGlsZDtrO2s9ay5uZXh0U2libGluZylkLnB1c2goayk7ZWxzZSBkLnB1c2goayl9aD1PKHRoaXMpO1BlLmFwcGx5KHRoaXMsYyk7Zm9yKGM9MDtjPGcubGVuZ3RoO2MrKylSKGEsZ1tjXSk7aWYoaClmb3IoUihhLHRoaXMpLGM9MDtjPGQubGVuZ3RoO2MrKylnPWRbY10sZyBpbnN0YW5jZW9mIEVsZW1lbnQmJlEoYSxnKX0pO3ZvaWQgMCE9PVFlJiZQKGIsInJlbW92ZSIsZnVuY3Rpb24oKXt2YXIgYj1PKHRoaXMpO1FlLmNhbGwodGhpcyk7YiYmUihhLHRoaXMpfSl9O2Z1bmN0aW9uIGJmKCl7dmFyIGE9WGU7ZnVuY3Rpb24gYihiLGMpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShiLCJpbm5lckhUTUwiLHtlbnVtZXJhYmxlOmMuZW51bWVyYWJsZSxjb25maWd1cmFibGU6ITAsZ2V0OmMuZ2V0LHNldDpmdW5jdGlvbihiKXt2YXIgZD10aGlzLGU9dm9pZCAwO08odGhpcykmJihlPVtdLGRlKHRoaXMsZnVuY3Rpb24oYSl7YSE9PWQmJmUucHVzaChhKX0pKTtjLnNldC5jYWxsKHRoaXMsYik7aWYoZSlmb3IodmFyIGY9MDtmPGUubGVuZ3RoO2YrKyl7dmFyIGc9ZVtmXTsxPT09Zy5fX0NFX3N0YXRlJiZhLmRpc2Nvbm5lY3RlZENhbGxiYWNrKGcpfXRoaXMub3duZXJEb2N1bWVudC5fX0NFX2hhc1JlZ2lzdHJ5P2plKGEsdGhpcyk6aGUoYSx0aGlzKTtyZXR1cm4gYn19KX1mdW5jdGlvbiBjKGIsYyl7UChiLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLGZ1bmN0aW9uKGIsZCl7dmFyIGU9TyhkKTtiPWMuY2FsbCh0aGlzLGIsZCk7ZSYmUihhLGQpO08oYikmJlEoYSwKZCk7cmV0dXJuIGJ9KX1mdW5jdGlvbiBkKGIsYyl7ZnVuY3Rpb24gZChiLGMpe2Zvcih2YXIgZD1bXTtiIT09YztiPWIubmV4dFNpYmxpbmcpZC5wdXNoKGIpO2ZvcihjPTA7YzxkLmxlbmd0aDtjKyspamUoYSxkW2NdKX1QKGIsImluc2VydEFkamFjZW50SFRNTCIsZnVuY3Rpb24oYSxiKXthPWEudG9Mb3dlckNhc2UoKTtpZigiYmVmb3JlYmVnaW4iPT09YSl7dmFyIGU9dGhpcy5wcmV2aW91c1NpYmxpbmc7Yy5jYWxsKHRoaXMsYSxiKTtkKGV8fHRoaXMucGFyZW50Tm9kZS5maXJzdENoaWxkLHRoaXMpfWVsc2UgaWYoImFmdGVyYmVnaW4iPT09YSllPXRoaXMuZmlyc3RDaGlsZCxjLmNhbGwodGhpcyxhLGIpLGQodGhpcy5maXJzdENoaWxkLGUpO2Vsc2UgaWYoImJlZm9yZWVuZCI9PT1hKWU9dGhpcy5sYXN0Q2hpbGQsYy5jYWxsKHRoaXMsYSxiKSxkKGV8fHRoaXMuZmlyc3RDaGlsZCxudWxsKTtlbHNlIGlmKCJhZnRlcmVuZCI9PT1hKWU9dGhpcy5uZXh0U2libGluZyxjLmNhbGwodGhpcywKYSxiKSxkKHRoaXMubmV4dFNpYmxpbmcsZSk7ZWxzZSB0aHJvdyBuZXcgU3ludGF4RXJyb3IoIlRoZSB2YWx1ZSBwcm92aWRlZCAoIitTdHJpbmcoYSkrIikgaXMgbm90IG9uZSBvZiAnYmVmb3JlYmVnaW4nLCAnYWZ0ZXJiZWdpbicsICdiZWZvcmVlbmQnLCBvciAnYWZ0ZXJlbmQnLiIpO30pfUJlJiZQKEVsZW1lbnQucHJvdG90eXBlLCJhdHRhY2hTaGFkb3ciLGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9fQ0Vfc2hhZG93Um9vdD1hPUJlLmNhbGwodGhpcyxhKX0pO0NlJiZDZS5nZXQ/YihFbGVtZW50LnByb3RvdHlwZSxDZSk6U2UmJlNlLmdldD9iKEhUTUxFbGVtZW50LnByb3RvdHlwZSxTZSk6Z2UoYSxmdW5jdGlvbihhKXtiKGEse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB2ZS5jYWxsKHRoaXMsITApLmlubmVySFRNTH0sc2V0OmZ1bmN0aW9uKGEpe3ZhciBiPSJ0ZW1wbGF0ZSI9PT10aGlzLmxvY2FsTmFtZSxjPWI/dGhpcy5jb250ZW50Ogp0aGlzLGQ9b2UuY2FsbChkb2N1bWVudCx0aGlzLmxvY2FsTmFtZSk7Zm9yKGQuaW5uZXJIVE1MPWE7MDxjLmNoaWxkTm9kZXMubGVuZ3RoOyl5ZS5jYWxsKGMsYy5jaGlsZE5vZGVzWzBdKTtmb3IoYT1iP2QuY29udGVudDpkOzA8YS5jaGlsZE5vZGVzLmxlbmd0aDspd2UuY2FsbChjLGEuY2hpbGROb2Rlc1swXSl9fSl9KTtQKEVsZW1lbnQucHJvdG90eXBlLCJzZXRBdHRyaWJ1dGUiLGZ1bmN0aW9uKGIsYyl7aWYoMSE9PXRoaXMuX19DRV9zdGF0ZSlyZXR1cm4gRWUuY2FsbCh0aGlzLGIsYyk7dmFyIGQ9RGUuY2FsbCh0aGlzLGIpO0VlLmNhbGwodGhpcyxiLGMpO2M9RGUuY2FsbCh0aGlzLGIpO2EuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKHRoaXMsYixkLGMsbnVsbCl9KTtQKEVsZW1lbnQucHJvdG90eXBlLCJzZXRBdHRyaWJ1dGVOUyIsZnVuY3Rpb24oYixjLGQpe2lmKDEhPT10aGlzLl9fQ0Vfc3RhdGUpcmV0dXJuIEhlLmNhbGwodGhpcyxiLGMsZCk7dmFyIGU9R2UuY2FsbCh0aGlzLApiLGMpO0hlLmNhbGwodGhpcyxiLGMsZCk7ZD1HZS5jYWxsKHRoaXMsYixjKTthLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayh0aGlzLGMsZSxkLGIpfSk7UChFbGVtZW50LnByb3RvdHlwZSwicmVtb3ZlQXR0cmlidXRlIixmdW5jdGlvbihiKXtpZigxIT09dGhpcy5fX0NFX3N0YXRlKXJldHVybiBGZS5jYWxsKHRoaXMsYik7dmFyIGM9RGUuY2FsbCh0aGlzLGIpO0ZlLmNhbGwodGhpcyxiKTtudWxsIT09YyYmYS5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sodGhpcyxiLGMsbnVsbCxudWxsKX0pO1AoRWxlbWVudC5wcm90b3R5cGUsInJlbW92ZUF0dHJpYnV0ZU5TIixmdW5jdGlvbihiLGMpe2lmKDEhPT10aGlzLl9fQ0Vfc3RhdGUpcmV0dXJuIEllLmNhbGwodGhpcyxiLGMpO3ZhciBkPUdlLmNhbGwodGhpcyxiLGMpO0llLmNhbGwodGhpcyxiLGMpO3ZhciBlPUdlLmNhbGwodGhpcyxiLGMpO2QhPT1lJiZhLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayh0aGlzLGMsZCxlLGIpfSk7VGU/CmMoSFRNTEVsZW1lbnQucHJvdG90eXBlLFRlKTpKZT9jKEVsZW1lbnQucHJvdG90eXBlLEplKTpjb25zb2xlLndhcm4oIkN1c3RvbSBFbGVtZW50czogYEVsZW1lbnQjaW5zZXJ0QWRqYWNlbnRFbGVtZW50YCB3YXMgbm90IHBhdGNoZWQuIik7VWU/ZChIVE1MRWxlbWVudC5wcm90b3R5cGUsVWUpOktlP2QoRWxlbWVudC5wcm90b3R5cGUsS2UpOmNvbnNvbGUud2FybigiQ3VzdG9tIEVsZW1lbnRzOiBgRWxlbWVudCNpbnNlcnRBZGphY2VudEhUTUxgIHdhcyBub3QgcGF0Y2hlZC4iKTtZZShhLEVsZW1lbnQucHJvdG90eXBlLHtmYTpMZSxhcHBlbmQ6TWV9KTthZihhKX07dmFyIGNmPXdpbmRvdy5jdXN0b21FbGVtZW50cztpZighY2Z8fGNmLmZvcmNlUG9seWZpbGx8fCJmdW5jdGlvbiIhPXR5cGVvZiBjZi5kZWZpbmV8fCJmdW5jdGlvbiIhPXR5cGVvZiBjZi5nZXQpe3ZhciBYZT1uZXcgZWU7V2UoKTtaZSgpO1llKFhlLERvY3VtZW50RnJhZ21lbnQucHJvdG90eXBlLHtmYTp0ZSxhcHBlbmQ6dWV9KTskZSgpO2JmKCk7ZG9jdW1lbnQuX19DRV9oYXNSZWdpc3RyeT0hMDt2YXIgY3VzdG9tRWxlbWVudHM9bmV3IFMoWGUpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csImN1c3RvbUVsZW1lbnRzIix7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsdmFsdWU6Y3VzdG9tRWxlbWVudHN9KX07ZnVuY3Rpb24gZGYoKXt0aGlzLmVuZD10aGlzLnN0YXJ0PTA7dGhpcy5ydWxlcz10aGlzLnBhcmVudD10aGlzLnByZXZpb3VzPW51bGw7dGhpcy5jc3NUZXh0PXRoaXMucGFyc2VkQ3NzVGV4dD0iIjt0aGlzLmF0UnVsZT0hMTt0aGlzLnR5cGU9MDt0aGlzLnBhcnNlZFNlbGVjdG9yPXRoaXMuc2VsZWN0b3I9dGhpcy5rZXlmcmFtZXNOYW1lPSIifQpmdW5jdGlvbiBlZihhKXthPWEucmVwbGFjZShmZiwiIikucmVwbGFjZShnZiwiIik7dmFyIGI9aGYsYz1hLGQ9bmV3IGRmO2Quc3RhcnQ9MDtkLmVuZD1jLmxlbmd0aDtmb3IodmFyIGU9ZCxmPTAsZz1jLmxlbmd0aDtmPGc7ZisrKWlmKCJ7Ij09PWNbZl0pe2UucnVsZXN8fChlLnJ1bGVzPVtdKTt2YXIgaD1lLGs9aC5ydWxlc1toLnJ1bGVzLmxlbmd0aC0xXXx8bnVsbDtlPW5ldyBkZjtlLnN0YXJ0PWYrMTtlLnBhcmVudD1oO2UucHJldmlvdXM9aztoLnJ1bGVzLnB1c2goZSl9ZWxzZSJ9Ij09PWNbZl0mJihlLmVuZD1mKzEsZT1lLnBhcmVudHx8ZCk7cmV0dXJuIGIoZCxhKX0KZnVuY3Rpb24gaGYoYSxiKXt2YXIgYz1iLnN1YnN0cmluZyhhLnN0YXJ0LGEuZW5kLTEpO2EucGFyc2VkQ3NzVGV4dD1hLmNzc1RleHQ9Yy50cmltKCk7YS5wYXJlbnQmJihjPWIuc3Vic3RyaW5nKGEucHJldmlvdXM/YS5wcmV2aW91cy5lbmQ6YS5wYXJlbnQuc3RhcnQsYS5zdGFydC0xKSxjPWpmKGMpLGM9Yy5yZXBsYWNlKGtmLCIgIiksYz1jLnN1YnN0cmluZyhjLmxhc3RJbmRleE9mKCI7IikrMSksYz1hLnBhcnNlZFNlbGVjdG9yPWEuc2VsZWN0b3I9Yy50cmltKCksYS5hdFJ1bGU9MD09PWMuaW5kZXhPZigiQCIpLGEuYXRSdWxlPzA9PT1jLmluZGV4T2YoIkBtZWRpYSIpP2EudHlwZT1sZjpjLm1hdGNoKHJmKSYmKGEudHlwZT1zZixhLmtleWZyYW1lc05hbWU9YS5zZWxlY3Rvci5zcGxpdChrZikucG9wKCkpOmEudHlwZT0wPT09Yy5pbmRleE9mKCItLSIpP3RmOnVmKTtpZihjPWEucnVsZXMpZm9yKHZhciBkPTAsZT1jLmxlbmd0aCxmO2Q8ZSYmKGY9Y1tkXSk7ZCsrKWhmKGYsCmIpO3JldHVybiBhfWZ1bmN0aW9uIGpmKGEpe3JldHVybiBhLnJlcGxhY2UoL1xcKFswLTlhLWZdezEsNn0pXHMvZ2ksZnVuY3Rpb24oYSxjKXthPWM7Zm9yKGM9Ni1hLmxlbmd0aDtjLS07KWE9IjAiK2E7cmV0dXJuIlxcIithfSl9CmZ1bmN0aW9uIHZmKGEsYixjKXtjPXZvaWQgMD09PWM/IiI6Yzt2YXIgZD0iIjtpZihhLmNzc1RleHR8fGEucnVsZXMpe3ZhciBlPWEucnVsZXMsZjtpZihmPWUpZj1lWzBdLGY9IShmJiZmLnNlbGVjdG9yJiYwPT09Zi5zZWxlY3Rvci5pbmRleE9mKCItLSIpKTtpZihmKXtmPTA7Zm9yKHZhciBnPWUubGVuZ3RoLGg7ZjxnJiYoaD1lW2ZdKTtmKyspZD12ZihoLGIsZCl9ZWxzZSBiP2I9YS5jc3NUZXh0OihiPWEuY3NzVGV4dCxiPWIucmVwbGFjZSh3ZiwiIikucmVwbGFjZSh4ZiwiIiksYj1iLnJlcGxhY2UoeWYsIiIpLnJlcGxhY2UoemYsIiIpKSwoZD1iLnRyaW0oKSkmJihkPSIgICIrZCsiXG4iKX1kJiYoYS5zZWxlY3RvciYmKGMrPWEuc2VsZWN0b3IrIiB7XG4iKSxjKz1kLGEuc2VsZWN0b3ImJihjKz0ifVxuXG4iKSk7cmV0dXJuIGN9CnZhciB1Zj0xLHNmPTcsbGY9NCx0Zj0xRTMsZmY9L1wvXCpbXipdKlwqKyhbXi8qXVteKl0qXCorKSpcLy9naW0sZ2Y9L0BpbXBvcnRbXjtdKjsvZ2ltLHdmPS8oPzpeW147XC1cc31dKyk/LS1bXjt7fV0qPzpbXnt9O10qPyg/Ols7XG5dfCQpL2dpbSx4Zj0vKD86XlteO1wtXHN9XSspPy0tW147e31dKj86W157fTtdKj97W159XSo/fSg/Ols7XG5dfCQpPy9naW0seWY9L0BhcHBseVxzKlwoP1teKTtdKlwpP1xzKig/Ols7XG5dfCQpPy9naW0semY9L1teOzpdKj86W147XSo/dmFyXChbXjtdKlwpKD86Wztcbl18JCk/L2dpbSxyZj0vXkBbXlxzXSprZXlmcmFtZXMvLGtmPS9ccysvZzt2YXIgVD0hKHdpbmRvdy5TaGFkeURPTSYmd2luZG93LlNoYWR5RE9NLmluVXNlKSxBZjtmdW5jdGlvbiBCZihhKXtBZj1hJiZhLnNoaW1jc3Nwcm9wZXJ0aWVzPyExOlR8fCEobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQXBwbGVXZWJLaXRcLzYwMXxFZGdlXC8xNS8pfHwhd2luZG93LkNTU3x8IUNTUy5zdXBwb3J0c3x8IUNTUy5zdXBwb3J0cygiYm94LXNoYWRvdyIsIjAgMCAwIHZhcigtLWZvbykiKSl9d2luZG93LlNoYWR5Q1NTJiZ2b2lkIDAhPT13aW5kb3cuU2hhZHlDU1MubmF0aXZlQ3NzP0FmPXdpbmRvdy5TaGFkeUNTUy5uYXRpdmVDc3M6d2luZG93LlNoYWR5Q1NTPyhCZih3aW5kb3cuU2hhZHlDU1MpLHdpbmRvdy5TaGFkeUNTUz12b2lkIDApOkJmKHdpbmRvdy5XZWJDb21wb25lbnRzJiZ3aW5kb3cuV2ViQ29tcG9uZW50cy5mbGFncyk7dmFyIFY9QWY7dmFyIENmPS8oPzpefFs7XHN7XVxzKikoLS1bXHctXSo/KVxzKjpccyooPzooKD86Jyg/OlxcJ3wuKSo/J3wiKD86XFwifC4pKj8ifFwoW14pXSo/XCl8W159O3tdKSspfFx7KFtefV0qKVx9KD86KD89Wztcc31dKXwkKSkvZ2ksRGY9Lyg/Ol58XFcrKUBhcHBseVxzKlwoPyhbXik7XG5dKilcKT8vZ2ksRWY9LygtLVtcdy1dKylccyooWzosOyldfCQpL2dpLEZmPS8oYW5pbWF0aW9uXHMqOil8KGFuaW1hdGlvbi1uYW1lXHMqOikvLEdmPS9AbWVkaWFccyguKikvLEhmPS9ce1tefV0qXH0vZzt2YXIgSWY9bmV3IFNldDtmdW5jdGlvbiBKZihhLGIpe2lmKCFhKXJldHVybiIiOyJzdHJpbmciPT09dHlwZW9mIGEmJihhPWVmKGEpKTtiJiZLZihhLGIpO3JldHVybiB2ZihhLFYpfWZ1bmN0aW9uIExmKGEpeyFhLl9fY3NzUnVsZXMmJmEudGV4dENvbnRlbnQmJihhLl9fY3NzUnVsZXM9ZWYoYS50ZXh0Q29udGVudCkpO3JldHVybiBhLl9fY3NzUnVsZXN8fG51bGx9ZnVuY3Rpb24gTWYoYSl7cmV0dXJuISFhLnBhcmVudCYmYS5wYXJlbnQudHlwZT09PXNmfWZ1bmN0aW9uIEtmKGEsYixjLGQpe2lmKGEpe3ZhciBlPSExLGY9YS50eXBlO2lmKGQmJmY9PT1sZil7dmFyIGc9YS5zZWxlY3Rvci5tYXRjaChHZik7ZyYmKHdpbmRvdy5tYXRjaE1lZGlhKGdbMV0pLm1hdGNoZXN8fChlPSEwKSl9Zj09PXVmP2IoYSk6YyYmZj09PXNmP2MoYSk6Zj09PXRmJiYoZT0hMCk7aWYoKGE9YS5ydWxlcykmJiFlKXtlPTA7Zj1hLmxlbmd0aDtmb3IodmFyIGg7ZTxmJiYoaD1hW2VdKTtlKyspS2YoaCxiLGMsZCl9fX0KZnVuY3Rpb24gTmYoYSxiLGMsZCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtiJiZlLnNldEF0dHJpYnV0ZSgic2NvcGUiLGIpO2UudGV4dENvbnRlbnQ9YTtPZihlLGMsZCk7cmV0dXJuIGV9dmFyIFBmPW51bGw7ZnVuY3Rpb24gT2YoYSxiLGMpe2I9Ynx8ZG9jdW1lbnQuaGVhZDtiLmluc2VydEJlZm9yZShhLGMmJmMubmV4dFNpYmxpbmd8fGIuZmlyc3RDaGlsZCk7UGY/YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihQZik9PT1Ob2RlLkRPQ1VNRU5UX1BPU0lUSU9OX1BSRUNFRElORyYmKFBmPWEpOlBmPWF9CmZ1bmN0aW9uIFFmKGEsYil7dmFyIGM9YS5pbmRleE9mKCJ2YXIoIik7aWYoLTE9PT1jKXJldHVybiBiKGEsIiIsIiIsIiIpO2E6e3ZhciBkPTA7dmFyIGU9YyszO2Zvcih2YXIgZj1hLmxlbmd0aDtlPGY7ZSsrKWlmKCIoIj09PWFbZV0pZCsrO2Vsc2UgaWYoIikiPT09YVtlXSYmMD09PS0tZClicmVhayBhO2U9LTF9ZD1hLnN1YnN0cmluZyhjKzQsZSk7Yz1hLnN1YnN0cmluZygwLGMpO2E9UWYoYS5zdWJzdHJpbmcoZSsxKSxiKTtlPWQuaW5kZXhPZigiLCIpO3JldHVybi0xPT09ZT9iKGMsZC50cmltKCksIiIsYSk6YihjLGQuc3Vic3RyaW5nKDAsZSkudHJpbSgpLGQuc3Vic3RyaW5nKGUrMSkudHJpbSgpLGEpfWZ1bmN0aW9uIFJmKGEsYil7VD9hLnNldEF0dHJpYnV0ZSgiY2xhc3MiLGIpOndpbmRvdy5TaGFkeURPTS5uYXRpdmVNZXRob2RzLnNldEF0dHJpYnV0ZS5jYWxsKGEsImNsYXNzIixiKX0KZnVuY3Rpb24gU2YoYSl7dmFyIGI9YS5sb2NhbE5hbWUsYz0iIjtiPy0xPGIuaW5kZXhPZigiLSIpfHwoYz1iLGI9YS5nZXRBdHRyaWJ1dGUmJmEuZ2V0QXR0cmlidXRlKCJpcyIpfHwiIik6KGI9YS5pcyxjPWEuZXh0ZW5kcyk7cmV0dXJue2lzOmIsWDpjfX07ZnVuY3Rpb24gVGYoKXt9ZnVuY3Rpb24gVWYoYSxiLGMpe3ZhciBkPVZmO2EuX19zdHlsZVNjb3BlZD9hLl9fc3R5bGVTY29wZWQ9bnVsbDpXZihkLGEsYnx8IiIsYyl9ZnVuY3Rpb24gV2YoYSxiLGMsZCl7Yi5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFJiZYZihiLGMsZCk7aWYoYj0idGVtcGxhdGUiPT09Yi5sb2NhbE5hbWU/KGIuY29udGVudHx8Yi5qYikuY2hpbGROb2RlczpiLmNoaWxkcmVufHxiLmNoaWxkTm9kZXMpZm9yKHZhciBlPTA7ZTxiLmxlbmd0aDtlKyspV2YoYSxiW2VdLGMsZCl9CmZ1bmN0aW9uIFhmKGEsYixjKXtpZihiKWlmKGEuY2xhc3NMaXN0KWM/KGEuY2xhc3NMaXN0LnJlbW92ZSgic3R5bGUtc2NvcGUiKSxhLmNsYXNzTGlzdC5yZW1vdmUoYikpOihhLmNsYXNzTGlzdC5hZGQoInN0eWxlLXNjb3BlIiksYS5jbGFzc0xpc3QuYWRkKGIpKTtlbHNlIGlmKGEuZ2V0QXR0cmlidXRlKXt2YXIgZD1hLmdldEF0dHJpYnV0ZShZZik7Yz9kJiYoYj1kLnJlcGxhY2UoInN0eWxlLXNjb3BlIiwiIikucmVwbGFjZShiLCIiKSxSZihhLGIpKTpSZihhLChkP2QrIiAiOiIiKSsic3R5bGUtc2NvcGUgIitiKX19ZnVuY3Rpb24gWmYoYSxiLGMpe3ZhciBkPVZmLGU9YS5fX2Nzc0J1aWxkO1R8fCJzaGFkeSI9PT1lP2I9SmYoYixjKTooYT1TZihhKSxiPSRmKGQsYixhLmlzLGEuWCxjKSsiXG5cbiIpO3JldHVybiBiLnRyaW0oKX0KZnVuY3Rpb24gJGYoYSxiLGMsZCxlKXt2YXIgZj1hZyhjLGQpO2M9Yz9iZytjOiIiO3JldHVybiBKZihiLGZ1bmN0aW9uKGIpe2IuY3x8KGIuc2VsZWN0b3I9Yi5HPWNnKGEsYixhLmIsYyxmKSxiLmM9ITApO2UmJmUoYixjLGYpfSl9ZnVuY3Rpb24gYWcoYSxiKXtyZXR1cm4gYj8iW2lzPSIrYSsiXSI6YX1mdW5jdGlvbiBjZyhhLGIsYyxkLGUpe3ZhciBmPWIuc2VsZWN0b3Iuc3BsaXQoZGcpO2lmKCFNZihiKSl7Yj0wO2Zvcih2YXIgZz1mLmxlbmd0aCxoO2I8ZyYmKGg9ZltiXSk7YisrKWZbYl09Yy5jYWxsKGEsaCxkLGUpfXJldHVybiBmLmpvaW4oZGcpfWZ1bmN0aW9uIGVnKGEpe3JldHVybiBhLnJlcGxhY2UoZmcsZnVuY3Rpb24oYSxjLGQpey0xPGQuaW5kZXhPZigiKyIpP2Q9ZC5yZXBsYWNlKC9cKy9nLCJfX18iKTotMTxkLmluZGV4T2YoIl9fXyIpJiYoZD1kLnJlcGxhY2UoL19fXy9nLCIrIikpO3JldHVybiI6IitjKyIoIitkKyIpIn0pfQpUZi5wcm90b3R5cGUuYj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9ITE7YT1hLnRyaW0oKTt2YXIgZT1mZy50ZXN0KGEpO2UmJihhPWEucmVwbGFjZShmZyxmdW5jdGlvbihhLGIsYyl7cmV0dXJuIjoiK2IrIigiK2MucmVwbGFjZSgvXHMvZywiIikrIikifSksYT1lZyhhKSk7YT1hLnJlcGxhY2UoZ2csaGcrIiAkMSIpO2E9YS5yZXBsYWNlKGlnLGZ1bmN0aW9uKGEsZSxoKXtkfHwoYT1qZyhoLGUsYixjKSxkPWR8fGEuc3RvcCxlPWEuU2EsaD1hLnZhbHVlKTtyZXR1cm4gZStofSk7ZSYmKGE9ZWcoYSkpO3JldHVybiBhfTsKZnVuY3Rpb24gamcoYSxiLGMsZCl7dmFyIGU9YS5pbmRleE9mKGtnKTswPD1hLmluZGV4T2YoaGcpP2E9bGcoYSxkKTowIT09ZSYmKGE9Yz9tZyhhLGMpOmEpO2M9ITE7MDw9ZSYmKGI9IiIsYz0hMCk7aWYoYyl7dmFyIGY9ITA7YyYmKGE9YS5yZXBsYWNlKG5nLGZ1bmN0aW9uKGEsYil7cmV0dXJuIiA+ICIrYn0pKX1hPWEucmVwbGFjZShvZyxmdW5jdGlvbihhLGIsYyl7cmV0dXJuJ1tkaXI9IicrYysnIl0gJytiKyIsICIrYisnW2Rpcj0iJytjKyciXSd9KTtyZXR1cm57dmFsdWU6YSxTYTpiLHN0b3A6Zn19ZnVuY3Rpb24gbWcoYSxiKXthPWEuc3BsaXQocGcpO2FbMF0rPWI7cmV0dXJuIGEuam9pbihwZyl9CmZ1bmN0aW9uIGxnKGEsYil7dmFyIGM9YS5tYXRjaChxZyk7cmV0dXJuKGM9YyYmY1syXS50cmltKCl8fCIiKT9jWzBdLm1hdGNoKHJnKT9hLnJlcGxhY2UocWcsZnVuY3Rpb24oYSxjLGYpe3JldHVybiBiK2Z9KTpjLnNwbGl0KHJnKVswXT09PWI/YzpzZzphLnJlcGxhY2UoaGcsYil9ZnVuY3Rpb24gdGcoYSl7YS5zZWxlY3Rvcj09PXVnJiYoYS5zZWxlY3Rvcj0iaHRtbCIpfVRmLnByb3RvdHlwZS5jPWZ1bmN0aW9uKGEpe3JldHVybiBhLm1hdGNoKGtnKT90aGlzLmIoYSx2Zyk6bWcoYS50cmltKCksdmcpfTthYS5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhUZi5wcm90b3R5cGUse2E6e2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiJzdHlsZS1zY29wZSJ9fX0pOwp2YXIgZmc9LzoobnRoWy1cd10rKVwoKFteKV0rKVwpLyx2Zz0iOm5vdCguc3R5bGUtc2NvcGUpIixkZz0iLCIsaWc9LyhefFtccz4rfl0rKSgoPzpcWy4rP1xdfFteXHM+K349W10pKykvZyxyZz0vW1suOiMqXS8saGc9Ijpob3N0Iix1Zz0iOnJvb3QiLGtnPSI6OnNsb3R0ZWQiLGdnPW5ldyBSZWdFeHAoIl4oIitrZysiKSIpLHFnPS8oOmhvc3QpKD86XCgoKD86XChbXikoXSpcKXxbXikoXSopKz8pXCkpLyxuZz0vKD86OjpzbG90dGVkKSg/OlwoKCg/OlwoW14pKF0qXCl8W14pKF0qKSs/KVwpKS8sb2c9LyguKik6ZGlyXCgoPzoobHRyfHJ0bCkpXCkvLGJnPSIuIixwZz0iOiIsWWY9ImNsYXNzIixzZz0ic2hvdWxkX25vdF9tYXRjaCIsVmY9bmV3IFRmO2Z1bmN0aW9uIHdnKGEsYixjLGQpe3RoaXMuSz1hfHxudWxsO3RoaXMuYj1ifHxudWxsO3RoaXMuc2E9Y3x8W107dGhpcy5UPW51bGw7dGhpcy5YPWR8fCIiO3RoaXMuYT10aGlzLkg9dGhpcy5PPW51bGx9ZnVuY3Rpb24geGcoYSl7cmV0dXJuIGE/YS5fX3N0eWxlSW5mbzpudWxsfWZ1bmN0aW9uIHlnKGEsYil7cmV0dXJuIGEuX19zdHlsZUluZm89Yn13Zy5wcm90b3R5cGUuYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLkt9O3dnLnByb3RvdHlwZS5fZ2V0U3R5bGVSdWxlcz13Zy5wcm90b3R5cGUuYztmdW5jdGlvbiB6ZyhhKXt2YXIgYj10aGlzLm1hdGNoZXN8fHRoaXMubWF0Y2hlc1NlbGVjdG9yfHx0aGlzLm1vek1hdGNoZXNTZWxlY3Rvcnx8dGhpcy5tc01hdGNoZXNTZWxlY3Rvcnx8dGhpcy5vTWF0Y2hlc1NlbGVjdG9yfHx0aGlzLndlYmtpdE1hdGNoZXNTZWxlY3RvcjtyZXR1cm4gYiYmYi5jYWxsKHRoaXMsYSl9dmFyIEFnPW5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goIlRyaWRlbnQiKTtmdW5jdGlvbiBCZygpe31mdW5jdGlvbiBDZyhhKXt2YXIgYj17fSxjPVtdLGQ9MDtLZihhLGZ1bmN0aW9uKGEpe0RnKGEpO2EuaW5kZXg9ZCsrO2E9YS5CLmNzc1RleHQ7Zm9yKHZhciBjO2M9RWYuZXhlYyhhKTspe3ZhciBlPWNbMV07IjoiIT09Y1syXSYmKGJbZV09ITApfX0sZnVuY3Rpb24oYSl7Yy5wdXNoKGEpfSk7YS5iPWM7YT1bXTtmb3IodmFyIGUgaW4gYilhLnB1c2goZSk7cmV0dXJuIGF9CmZ1bmN0aW9uIERnKGEpe2lmKCFhLkIpe3ZhciBiPXt9LGM9e307RWcoYSxjKSYmKGIuSj1jLGEucnVsZXM9bnVsbCk7Yi5jc3NUZXh0PWEucGFyc2VkQ3NzVGV4dC5yZXBsYWNlKEhmLCIiKS5yZXBsYWNlKENmLCIiKTthLkI9Yn19ZnVuY3Rpb24gRWcoYSxiKXt2YXIgYz1hLkI7aWYoYyl7aWYoYy5KKXJldHVybiBPYmplY3QuYXNzaWduKGIsYy5KKSwhMH1lbHNle2M9YS5wYXJzZWRDc3NUZXh0O2Zvcih2YXIgZDthPUNmLmV4ZWMoYyk7KXtkPShhWzJdfHxhWzNdKS50cmltKCk7aWYoImluaGVyaXQiIT09ZHx8InVuc2V0IiE9PWQpYlthWzFdLnRyaW0oKV09ZDtkPSEwfXJldHVybiBkfX0KZnVuY3Rpb24gRmcoYSxiLGMpe2ImJihiPTA8PWIuaW5kZXhPZigiOyIpP0dnKGEsYixjKTpRZihiLGZ1bmN0aW9uKGIsZSxmLGcpe2lmKCFlKXJldHVybiBiK2c7KGU9RmcoYSxjW2VdLGMpKSYmImluaXRpYWwiIT09ZT8iYXBwbHktc2hpbS1pbmhlcml0Ij09PWUmJihlPSJpbmhlcml0Iik6ZT1GZyhhLGNbZl18fGYsYyl8fGY7cmV0dXJuIGIrKGV8fCIiKStnfSkpO3JldHVybiBiJiZiLnRyaW0oKXx8IiJ9CmZ1bmN0aW9uIEdnKGEsYixjKXtiPWIuc3BsaXQoIjsiKTtmb3IodmFyIGQ9MCxlLGY7ZDxiLmxlbmd0aDtkKyspaWYoZT1iW2RdKXtEZi5sYXN0SW5kZXg9MDtpZihmPURmLmV4ZWMoZSkpZT1GZyhhLGNbZlsxXV0sYyk7ZWxzZSBpZihmPWUuaW5kZXhPZigiOiIpLC0xIT09Zil7dmFyIGc9ZS5zdWJzdHJpbmcoZik7Zz1nLnRyaW0oKTtnPUZnKGEsZyxjKXx8ZztlPWUuc3Vic3RyaW5nKDAsZikrZ31iW2RdPWUmJmUubGFzdEluZGV4T2YoIjsiKT09PWUubGVuZ3RoLTE/ZS5zbGljZSgwLC0xKTplfHwiIn1yZXR1cm4gYi5qb2luKCI7Iil9CmZ1bmN0aW9uIEhnKGEsYil7dmFyIGM9e30sZD1bXTtLZihhLGZ1bmN0aW9uKGEpe2EuQnx8RGcoYSk7dmFyIGU9YS5HfHxhLnBhcnNlZFNlbGVjdG9yO2ImJmEuQi5KJiZlJiZ6Zy5jYWxsKGIsZSkmJihFZyhhLGMpLGE9YS5pbmRleCxlPXBhcnNlSW50KGEvMzIsMTApLGRbZV09KGRbZV18fDApfDE8PGElMzIpfSxudWxsLCEwKTtyZXR1cm57SjpjLGtleTpkfX0KZnVuY3Rpb24gSWcoYSxiLGMsZCl7Yi5CfHxEZyhiKTtpZihiLkIuSil7dmFyIGU9U2YoYSk7YT1lLmlzO2U9ZS5YO2U9YT9hZyhhLGUpOiJodG1sIjt2YXIgZj1iLnBhcnNlZFNlbGVjdG9yLGc9Ijpob3N0ID4gKiI9PT1mfHwiaHRtbCI9PT1mLGg9MD09PWYuaW5kZXhPZigiOmhvc3QiKSYmIWc7InNoYWR5Ij09PWMmJihnPWY9PT1lKyIgPiAqLiIrZXx8LTEhPT1mLmluZGV4T2YoImh0bWwiKSxoPSFnJiYwPT09Zi5pbmRleE9mKGUpKTsic2hhZG93Ij09PWMmJihnPSI6aG9zdCA+ICoiPT09Znx8Imh0bWwiPT09ZixoPWgmJiFnKTtpZihnfHxoKWM9ZSxoJiYoYi5HfHwoYi5HPWNnKFZmLGIsVmYuYixhP2JnK2E6IiIsZSkpLGM9Yi5HfHxlKSxkKHtaYTpjLFdhOmgsd2I6Z30pfX0KZnVuY3Rpb24gSmcoYSxiKXt2YXIgYz17fSxkPXt9LGU9YiYmYi5fX2Nzc0J1aWxkO0tmKGIsZnVuY3Rpb24oYil7SWcoYSxiLGUsZnVuY3Rpb24oZSl7emcuY2FsbChhLmtifHxhLGUuWmEpJiYoZS5XYT9FZyhiLGMpOkVnKGIsZCkpfSl9LG51bGwsITApO3JldHVybntZYTpkLFZhOmN9fQpmdW5jdGlvbiBLZyhhLGIsYyxkKXt2YXIgZT1TZihiKSxmPWFnKGUuaXMsZS5YKSxnPW5ldyBSZWdFeHAoIig/Ol58W14uI1s6XSkiKyhiLmV4dGVuZHM/IlxcIitmLnNsaWNlKDAsLTEpKyJcXF0iOmYpKyIoJHxbLjpbXFxzPit+XSkiKTtlPXhnKGIpLks7dmFyIGg9TGcoZSxkKTtyZXR1cm4gWmYoYixlLGZ1bmN0aW9uKGIpe3ZhciBlPSIiO2IuQnx8RGcoYik7Yi5CLmNzc1RleHQmJihlPUdnKGEsYi5CLmNzc1RleHQsYykpO2IuY3NzVGV4dD1lO2lmKCFUJiYhTWYoYikmJmIuY3NzVGV4dCl7dmFyIGs9ZT1iLmNzc1RleHQ7bnVsbD09Yi56YSYmKGIuemE9RmYudGVzdChlKSk7aWYoYi56YSlpZihudWxsPT1iLmVhKXtiLmVhPVtdO2Zvcih2YXIgciBpbiBoKWs9aFtyXSxrPWsoZSksZSE9PWsmJihlPWssYi5lYS5wdXNoKHIpKX1lbHNle2ZvcihyPTA7cjxiLmVhLmxlbmd0aDsrK3Ipaz1oW2IuZWFbcl1dLGU9ayhlKTtrPWV9Yi5jc3NUZXh0PWs7Yi5HPWIuR3x8Yi5zZWxlY3RvcjsKZT0iLiIrZDtyPWIuRy5zcGxpdCgiLCIpO2s9MDtmb3IodmFyIEc9ci5sZW5ndGgseDtrPEcmJih4PXJba10pO2srKylyW2tdPXgubWF0Y2goZyk/eC5yZXBsYWNlKGYsZSk6ZSsiICIreDtiLnNlbGVjdG9yPXIuam9pbigiLCIpfX0pfWZ1bmN0aW9uIExnKGEsYil7YT1hLmI7dmFyIGM9e307aWYoIVQmJmEpZm9yKHZhciBkPTAsZT1hW2RdO2Q8YS5sZW5ndGg7ZT1hWysrZF0pe3ZhciBmPWUsZz1iO2YuRj1uZXcgUmVnRXhwKCJcXGIiK2Yua2V5ZnJhbWVzTmFtZSsiKD8hXFxCfC0pIiwiZyIpO2YuYT1mLmtleWZyYW1lc05hbWUrIi0iK2c7Zi5HPWYuR3x8Zi5zZWxlY3RvcjtmLnNlbGVjdG9yPWYuRy5yZXBsYWNlKGYua2V5ZnJhbWVzTmFtZSxmLmEpO2NbZS5rZXlmcmFtZXNOYW1lXT1NZyhlKX1yZXR1cm4gY31mdW5jdGlvbiBNZyhhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGIucmVwbGFjZShhLkYsYS5hKX19CmZ1bmN0aW9uIE5nKGEsYil7dmFyIGM9T2csZD1MZihhKTthLnRleHRDb250ZW50PUpmKGQsZnVuY3Rpb24oYSl7dmFyIGQ9YS5jc3NUZXh0PWEucGFyc2VkQ3NzVGV4dDthLkImJmEuQi5jc3NUZXh0JiYoZD1kLnJlcGxhY2Uod2YsIiIpLnJlcGxhY2UoeGYsIiIpLGEuY3NzVGV4dD1HZyhjLGQsYikpfSl9YWEuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoQmcucHJvdG90eXBlLHthOntjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4ieC1zY29wZSJ9fX0pO3ZhciBPZz1uZXcgQmc7dmFyIFBnPXt9LFFnPXdpbmRvdy5jdXN0b21FbGVtZW50cztpZihRZyYmIVQpe3ZhciBSZz1RZy5kZWZpbmU7UWcuZGVmaW5lPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1kb2N1bWVudC5jcmVhdGVDb21tZW50KCIgU2hhZHkgRE9NIHN0eWxlcyBmb3IgIithKyIgIiksZT1kb2N1bWVudC5oZWFkO2UuaW5zZXJ0QmVmb3JlKGQsKFBmP1BmLm5leHRTaWJsaW5nOm51bGwpfHxlLmZpcnN0Q2hpbGQpO1BmPWQ7UGdbYV09ZDtSZy5jYWxsKFFnLGEsYixjKX19O2Z1bmN0aW9uIFNnKCl7dGhpcy5jYWNoZT17fX1TZy5wcm90b3R5cGUuc3RvcmU9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcy5jYWNoZVthXXx8W107ZS5wdXNoKHtKOmIsc3R5bGVFbGVtZW50OmMsSDpkfSk7MTAwPGUubGVuZ3RoJiZlLnNoaWZ0KCk7dGhpcy5jYWNoZVthXT1lfTtTZy5wcm90b3R5cGUuZmV0Y2g9ZnVuY3Rpb24oYSxiLGMpe2lmKGE9dGhpcy5jYWNoZVthXSlmb3IodmFyIGQ9YS5sZW5ndGgtMTswPD1kO2QtLSl7dmFyIGU9YVtkXSxmO2E6e2ZvcihmPTA7ZjxjLmxlbmd0aDtmKyspe3ZhciBnPWNbZl07aWYoZS5KW2ddIT09YltnXSl7Zj0hMTticmVhayBhfX1mPSEwfWlmKGYpcmV0dXJuIGV9fTtmdW5jdGlvbiBUZygpe30KZnVuY3Rpb24gVWcoYSl7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspe3ZhciBjPWFbYl07aWYoYy50YXJnZXQhPT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQmJmMudGFyZ2V0IT09ZG9jdW1lbnQuaGVhZClmb3IodmFyIGQ9MDtkPGMuYWRkZWROb2Rlcy5sZW5ndGg7ZCsrKXt2YXIgZT1jLmFkZGVkTm9kZXNbZF07aWYoZS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXt2YXIgZj1lLmdldFJvb3ROb2RlKCk7dmFyIGc9ZTt2YXIgaD1bXTtnLmNsYXNzTGlzdD9oPUFycmF5LmZyb20oZy5jbGFzc0xpc3QpOmcgaW5zdGFuY2VvZiB3aW5kb3cuU1ZHRWxlbWVudCYmZy5oYXNBdHRyaWJ1dGUoImNsYXNzIikmJihoPWcuZ2V0QXR0cmlidXRlKCJjbGFzcyIpLnNwbGl0KC9ccysvKSk7Zz1oO2g9Zy5pbmRleE9mKFZmLmEpO2lmKChnPS0xPGg/Z1toKzFdOiIiKSYmZj09PWUub3duZXJEb2N1bWVudClVZihlLGcsITApO2Vsc2UgaWYoZi5ub2RlVHlwZT09PU5vZGUuRE9DVU1FTlRfRlJBR01FTlRfTk9ERSYmCihmPWYuaG9zdCkpaWYoZj1TZihmKS5pcyxnPT09Zilmb3IoZT13aW5kb3cuU2hhZHlET00ubmF0aXZlTWV0aG9kcy5xdWVyeVNlbGVjdG9yQWxsLmNhbGwoZSwiOm5vdCguIitWZi5hKyIpIiksZj0wO2Y8ZS5sZW5ndGg7ZisrKVhmKGVbZl0sZyk7ZWxzZSBnJiZVZihlLGcsITApLFVmKGUsZil9fX19CmlmKCFUKXt2YXIgVmc9bmV3IE11dGF0aW9uT2JzZXJ2ZXIoVWcpLFdnPWZ1bmN0aW9uKGEpe1ZnLm9ic2VydmUoYSx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KX07aWYod2luZG93LmN1c3RvbUVsZW1lbnRzJiYhd2luZG93LmN1c3RvbUVsZW1lbnRzLnBvbHlmaWxsV3JhcEZsdXNoQ2FsbGJhY2spV2coZG9jdW1lbnQpO2Vsc2V7dmFyIFhnPWZ1bmN0aW9uKCl7V2coZG9jdW1lbnQuYm9keSl9O3dpbmRvdy5IVE1MSW1wb3J0cz93aW5kb3cuSFRNTEltcG9ydHMud2hlblJlYWR5KFhnKTpyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKXtpZigibG9hZGluZyI9PT1kb2N1bWVudC5yZWFkeVN0YXRlKXt2YXIgYT1mdW5jdGlvbigpe1hnKCk7ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigicmVhZHlzdGF0ZWNoYW5nZSIsYSl9O2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInJlYWR5c3RhdGVjaGFuZ2UiLGEpfWVsc2UgWGcoKX0pfVRnPWZ1bmN0aW9uKCl7VWcoVmcudGFrZVJlY29yZHMoKSl9fQp2YXIgWWc9VGc7dmFyIFpnPXt9O3ZhciAkZz1Qcm9taXNlLnJlc29sdmUoKTtmdW5jdGlvbiBhaChhKXtpZihhPVpnW2FdKWEuX2FwcGx5U2hpbUN1cnJlbnRWZXJzaW9uPWEuX2FwcGx5U2hpbUN1cnJlbnRWZXJzaW9ufHwwLGEuX2FwcGx5U2hpbVZhbGlkYXRpbmdWZXJzaW9uPWEuX2FwcGx5U2hpbVZhbGlkYXRpbmdWZXJzaW9ufHwwLGEuX2FwcGx5U2hpbU5leHRWZXJzaW9uPShhLl9hcHBseVNoaW1OZXh0VmVyc2lvbnx8MCkrMX1mdW5jdGlvbiBiaChhKXtyZXR1cm4gYS5fYXBwbHlTaGltQ3VycmVudFZlcnNpb249PT1hLl9hcHBseVNoaW1OZXh0VmVyc2lvbn1mdW5jdGlvbiBjaChhKXthLl9hcHBseVNoaW1WYWxpZGF0aW5nVmVyc2lvbj1hLl9hcHBseVNoaW1OZXh0VmVyc2lvbjthLmJ8fChhLmI9ITAsJGcudGhlbihmdW5jdGlvbigpe2EuX2FwcGx5U2hpbUN1cnJlbnRWZXJzaW9uPWEuX2FwcGx5U2hpbU5leHRWZXJzaW9uO2EuYj0hMX0pKX07dmFyIGRoPW5ldyBTZztmdW5jdGlvbiBXKCl7dGhpcy5BYT17fTt0aGlzLmM9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O3ZhciBhPW5ldyBkZjthLnJ1bGVzPVtdO3RoaXMuRj15Zyh0aGlzLmMsbmV3IHdnKGEpKTt0aGlzLk09ITE7dGhpcy5iPXRoaXMuYT1udWxsfXE9Vy5wcm90b3R5cGU7cS5HYT1mdW5jdGlvbigpe1lnKCl9O3EuVGE9ZnVuY3Rpb24oYSl7cmV0dXJuIExmKGEpfTtxLmFiPWZ1bmN0aW9uKGEpe3JldHVybiBKZihhKX07CnEucHJlcGFyZVRlbXBsYXRlPWZ1bmN0aW9uKGEsYixjKXtpZighYS5GKXthLkY9ITA7YS5uYW1lPWI7YS5leHRlbmRzPWM7WmdbYl09YTt2YXIgZD0oZD1hLmNvbnRlbnQucXVlcnlTZWxlY3Rvcigic3R5bGUiKSk/ZC5nZXRBdHRyaWJ1dGUoImNzcy1idWlsZCIpfHwiIjoiIjt2YXIgZT1bXTtmb3IodmFyIGY9YS5jb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoInN0eWxlIiksZz0wO2c8Zi5sZW5ndGg7ZysrKXt2YXIgaD1mW2ddO2lmKGguaGFzQXR0cmlidXRlKCJzaGFkeS11bnNjb3BlZCIpKXtpZighVCl7dmFyIGs9aC50ZXh0Q29udGVudDtJZi5oYXMoayl8fChJZi5hZGQoayksaz1oLmNsb25lTm9kZSghMCksZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChrKSk7aC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGgpfX1lbHNlIGUucHVzaChoLnRleHRDb250ZW50KSxoLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaCl9ZT1lLmpvaW4oIiIpLnRyaW0oKTtjPXtpczpiLGV4dGVuZHM6YyxoYjpkfTsKVHx8VWYoYS5jb250ZW50LGIpO2VoKHRoaXMpO2Y9RGYudGVzdChlKXx8Q2YudGVzdChlKTtEZi5sYXN0SW5kZXg9MDtDZi5sYXN0SW5kZXg9MDtlPWVmKGUpO2YmJlYmJnRoaXMuYSYmdGhpcy5hLnRyYW5zZm9ybVJ1bGVzKGUsYik7YS5fc3R5bGVBc3Q9ZTthLk09ZDtkPVtdO1Z8fChkPUNnKGEuX3N0eWxlQXN0KSk7aWYoIWQubGVuZ3RofHxWKWU9VD9hLmNvbnRlbnQ6bnVsbCxiPVBnW2JdLGY9WmYoYyxhLl9zdHlsZUFzdCksYj1mLmxlbmd0aD9OZihmLGMuaXMsZSxiKTp2b2lkIDAsYS5hPWI7YS5jPWR9fTsKZnVuY3Rpb24gZmgoYSl7IWEuYiYmd2luZG93LlNoYWR5Q1NTJiZ3aW5kb3cuU2hhZHlDU1MuQ3VzdG9tU3R5bGVJbnRlcmZhY2UmJihhLmI9d2luZG93LlNoYWR5Q1NTLkN1c3RvbVN0eWxlSW50ZXJmYWNlLGEuYi50cmFuc2Zvcm1DYWxsYmFjaz1mdW5jdGlvbihiKXthLkVhKGIpfSxhLmIudmFsaWRhdGVDYWxsYmFjaz1mdW5jdGlvbigpe3JlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpeyhhLmIuZW5xdWV1ZWR8fGEuTSkmJmEuZmx1c2hDdXN0b21TdHlsZXMoKX0pfSl9ZnVuY3Rpb24gZWgoYSl7IWEuYSYmd2luZG93LlNoYWR5Q1NTJiZ3aW5kb3cuU2hhZHlDU1MuQXBwbHlTaGltJiYoYS5hPXdpbmRvdy5TaGFkeUNTUy5BcHBseVNoaW0sYS5hLmludmFsaWRDYWxsYmFjaz1haCk7ZmgoYSl9CnEuZmx1c2hDdXN0b21TdHlsZXM9ZnVuY3Rpb24oKXtlaCh0aGlzKTtpZih0aGlzLmIpe3ZhciBhPXRoaXMuYi5wcm9jZXNzU3R5bGVzKCk7aWYodGhpcy5iLmVucXVldWVkKXtpZihWKWZvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKXt2YXIgYz10aGlzLmIuZ2V0U3R5bGVGb3JDdXN0b21TdHlsZShhW2JdKTtpZihjJiZWJiZ0aGlzLmEpe3ZhciBkPUxmKGMpO2VoKHRoaXMpO3RoaXMuYS50cmFuc2Zvcm1SdWxlcyhkKTtjLnRleHRDb250ZW50PUpmKGQpfX1lbHNlIGZvcihnaCh0aGlzLHRoaXMuYyx0aGlzLkYpLGI9MDtiPGEubGVuZ3RoO2IrKykoYz10aGlzLmIuZ2V0U3R5bGVGb3JDdXN0b21TdHlsZShhW2JdKSkmJk5nKGMsdGhpcy5GLk8pO3RoaXMuYi5lbnF1ZXVlZD0hMTt0aGlzLk0mJiFWJiZ0aGlzLnN0eWxlRG9jdW1lbnQoKX19fTsKcS5zdHlsZUVsZW1lbnQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz1TZihhKS5pcyxkPXhnKGEpO2lmKCFkKXt2YXIgZT1TZihhKTtkPWUuaXM7ZT1lLlg7dmFyIGY9UGdbZF07ZD1aZ1tkXTtpZihkKXt2YXIgZz1kLl9zdHlsZUFzdDt2YXIgaD1kLmN9ZD15ZyhhLG5ldyB3ZyhnLGYsaCxlKSl9YSE9PXRoaXMuYyYmKHRoaXMuTT0hMCk7YiYmKGQuVD1kLlR8fHt9LE9iamVjdC5hc3NpZ24oZC5ULGIpKTtpZihWKXtpZihkLlQpe2I9ZC5UO2Zvcih2YXIgayBpbiBiKW51bGw9PT1rP2Euc3R5bGUucmVtb3ZlUHJvcGVydHkoayk6YS5zdHlsZS5zZXRQcm9wZXJ0eShrLGJba10pfWlmKCgoaz1aZ1tjXSl8fGE9PT10aGlzLmMpJiZrJiZrLmEmJiFiaChrKSl7aWYoYmgoayl8fGsuX2FwcGx5U2hpbVZhbGlkYXRpbmdWZXJzaW9uIT09ay5fYXBwbHlTaGltTmV4dFZlcnNpb24pZWgodGhpcyksdGhpcy5hJiZ0aGlzLmEudHJhbnNmb3JtUnVsZXMoay5fc3R5bGVBc3QsYyksay5hLnRleHRDb250ZW50PQpaZihhLGQuSyksY2goayk7VCYmKGM9YS5zaGFkb3dSb290KSYmKGMucXVlcnlTZWxlY3Rvcigic3R5bGUiKS50ZXh0Q29udGVudD1aZihhLGQuSykpO2QuSz1rLl9zdHlsZUFzdH19ZWxzZSBpZihnaCh0aGlzLGEsZCksZC5zYSYmZC5zYS5sZW5ndGgpe2M9ZDtrPVNmKGEpLmlzO2Q9KGI9ZGguZmV0Y2goayxjLk8sYy5zYSkpP2Iuc3R5bGVFbGVtZW50Om51bGw7Zz1jLkg7KGg9YiYmYi5IKXx8KGg9dGhpcy5BYVtrXT0odGhpcy5BYVtrXXx8MCkrMSxoPWsrIi0iK2gpO2MuSD1oO2g9Yy5IO2U9T2c7ZT1kP2QudGV4dENvbnRlbnR8fCIiOktnKGUsYSxjLk8saCk7Zj14ZyhhKTt2YXIgbT1mLmE7bSYmIVQmJm0hPT1kJiYobS5fdXNlQ291bnQtLSwwPj1tLl91c2VDb3VudCYmbS5wYXJlbnROb2RlJiZtLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobSkpO1Q/Zi5hPyhmLmEudGV4dENvbnRlbnQ9ZSxkPWYuYSk6ZSYmKGQ9TmYoZSxoLGEuc2hhZG93Um9vdCxmLmIpKTpkP2QucGFyZW50Tm9kZXx8CihBZyYmLTE8ZS5pbmRleE9mKCJAbWVkaWEiKSYmKGQudGV4dENvbnRlbnQ9ZSksT2YoZCxudWxsLGYuYikpOmUmJihkPU5mKGUsaCxudWxsLGYuYikpO2QmJihkLl91c2VDb3VudD1kLl91c2VDb3VudHx8MCxmLmEhPWQmJmQuX3VzZUNvdW50KyssZi5hPWQpO2g9ZDtUfHwoZD1jLkgsZj1lPWEuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIixnJiYoZj1lLnJlcGxhY2UobmV3IFJlZ0V4cCgiXFxzKngtc2NvcGVcXHMqIitnKyJcXHMqIiwiZyIpLCIgIikpLGYrPShmPyIgIjoiIikrIngtc2NvcGUgIitkLGUhPT1mJiZSZihhLGYpKTtifHxkaC5zdG9yZShrLGMuTyxoLGMuSCl9fTtmdW5jdGlvbiBoaChhLGIpe3JldHVybihiPWIuZ2V0Um9vdE5vZGUoKS5ob3N0KT94ZyhiKT9iOmhoKGEsYik6YS5jfQpmdW5jdGlvbiBnaChhLGIsYyl7YT1oaChhLGIpO3ZhciBkPXhnKGEpO2E9T2JqZWN0LmNyZWF0ZShkLk98fG51bGwpO3ZhciBlPUpnKGIsYy5LKTtiPUhnKGQuSyxiKS5KO09iamVjdC5hc3NpZ24oYSxlLlZhLGIsZS5ZYSk7Yj1jLlQ7Zm9yKHZhciBmIGluIGIpaWYoKGU9YltmXSl8fDA9PT1lKWFbZl09ZTtmPU9nO2I9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYSk7Zm9yKGU9MDtlPGIubGVuZ3RoO2UrKylkPWJbZV0sYVtkXT1GZyhmLGFbZF0sYSk7Yy5PPWF9cS5zdHlsZURvY3VtZW50PWZ1bmN0aW9uKGEpe3RoaXMuc3R5bGVTdWJ0cmVlKHRoaXMuYyxhKX07CnEuc3R5bGVTdWJ0cmVlPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5zaGFkb3dSb290OyhjfHxhPT09dGhpcy5jKSYmdGhpcy5zdHlsZUVsZW1lbnQoYSxiKTtpZihiPWMmJihjLmNoaWxkcmVufHxjLmNoaWxkTm9kZXMpKWZvcihhPTA7YTxiLmxlbmd0aDthKyspdGhpcy5zdHlsZVN1YnRyZWUoYlthXSk7ZWxzZSBpZihhPWEuY2hpbGRyZW58fGEuY2hpbGROb2Rlcylmb3IoYj0wO2I8YS5sZW5ndGg7YisrKXRoaXMuc3R5bGVTdWJ0cmVlKGFbYl0pfTtxLkVhPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1MZihhKTtLZihjLGZ1bmN0aW9uKGEpe2lmKFQpdGcoYSk7ZWxzZXt2YXIgYz1WZjthLnNlbGVjdG9yPWEucGFyc2VkU2VsZWN0b3I7dGcoYSk7YS5zZWxlY3Rvcj1hLkc9Y2coYyxhLGMuYyx2b2lkIDAsdm9pZCAwKX1WJiYoZWgoYiksYi5hJiZiLmEudHJhbnNmb3JtUnVsZShhKSl9KTtWP2EudGV4dENvbnRlbnQ9SmYoYyk6dGhpcy5GLksucnVsZXMucHVzaChjKX07CnEuZ2V0Q29tcHV0ZWRTdHlsZVZhbHVlPWZ1bmN0aW9uKGEsYil7dmFyIGM7Vnx8KGM9KHhnKGEpfHx4ZyhoaCh0aGlzLGEpKSkuT1tiXSk7cmV0dXJuKGM9Y3x8d2luZG93LmdldENvbXB1dGVkU3R5bGUoYSkuZ2V0UHJvcGVydHlWYWx1ZShiKSk/Yy50cmltKCk6IiJ9O3EuJGE9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmdldFJvb3ROb2RlKCk7Yj1iP2Iuc3BsaXQoL1xzLyk6W107Yz1jLmhvc3QmJmMuaG9zdC5sb2NhbE5hbWU7aWYoIWMpe3ZhciBkPWEuZ2V0QXR0cmlidXRlKCJjbGFzcyIpO2lmKGQpe2Q9ZC5zcGxpdCgvXHMvKTtmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKylpZihkW2VdPT09VmYuYSl7Yz1kW2UrMV07YnJlYWt9fX1jJiZiLnB1c2goVmYuYSxjKTtWfHwoYz14ZyhhKSkmJmMuSCYmYi5wdXNoKE9nLmEsYy5IKTtSZihhLGIuam9pbigiICIpKX07cS5RYT1mdW5jdGlvbihhKXtyZXR1cm4geGcoYSl9O1cucHJvdG90eXBlLmZsdXNoPVcucHJvdG90eXBlLkdhOwpXLnByb3RvdHlwZS5wcmVwYXJlVGVtcGxhdGU9Vy5wcm90b3R5cGUucHJlcGFyZVRlbXBsYXRlO1cucHJvdG90eXBlLnN0eWxlRWxlbWVudD1XLnByb3RvdHlwZS5zdHlsZUVsZW1lbnQ7Vy5wcm90b3R5cGUuc3R5bGVEb2N1bWVudD1XLnByb3RvdHlwZS5zdHlsZURvY3VtZW50O1cucHJvdG90eXBlLnN0eWxlU3VidHJlZT1XLnByb3RvdHlwZS5zdHlsZVN1YnRyZWU7Vy5wcm90b3R5cGUuZ2V0Q29tcHV0ZWRTdHlsZVZhbHVlPVcucHJvdG90eXBlLmdldENvbXB1dGVkU3R5bGVWYWx1ZTtXLnByb3RvdHlwZS5zZXRFbGVtZW50Q2xhc3M9Vy5wcm90b3R5cGUuJGE7Vy5wcm90b3R5cGUuX3N0eWxlSW5mb0Zvck5vZGU9Vy5wcm90b3R5cGUuUWE7Vy5wcm90b3R5cGUudHJhbnNmb3JtQ3VzdG9tU3R5bGVGb3JEb2N1bWVudD1XLnByb3RvdHlwZS5FYTtXLnByb3RvdHlwZS5nZXRTdHlsZUFzdD1XLnByb3RvdHlwZS5UYTtXLnByb3RvdHlwZS5zdHlsZUFzdFRvU3RyaW5nPVcucHJvdG90eXBlLmFiOwpXLnByb3RvdHlwZS5mbHVzaEN1c3RvbVN0eWxlcz1XLnByb3RvdHlwZS5mbHVzaEN1c3RvbVN0eWxlcztPYmplY3QuZGVmaW5lUHJvcGVydGllcyhXLnByb3RvdHlwZSx7bmF0aXZlU2hhZG93OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gVH19LG5hdGl2ZUNzczp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFZ9fX0pO3ZhciBYPW5ldyBXLGloLGpoO3dpbmRvdy5TaGFkeUNTUyYmKGloPXdpbmRvdy5TaGFkeUNTUy5BcHBseVNoaW0samg9d2luZG93LlNoYWR5Q1NTLkN1c3RvbVN0eWxlSW50ZXJmYWNlKTsKd2luZG93LlNoYWR5Q1NTPXtTY29waW5nU2hpbTpYLHByZXBhcmVUZW1wbGF0ZTpmdW5jdGlvbihhLGIsYyl7WC5mbHVzaEN1c3RvbVN0eWxlcygpO1gucHJlcGFyZVRlbXBsYXRlKGEsYixjKX0sc3R5bGVTdWJ0cmVlOmZ1bmN0aW9uKGEsYil7WC5mbHVzaEN1c3RvbVN0eWxlcygpO1guc3R5bGVTdWJ0cmVlKGEsYil9LHN0eWxlRWxlbWVudDpmdW5jdGlvbihhKXtYLmZsdXNoQ3VzdG9tU3R5bGVzKCk7WC5zdHlsZUVsZW1lbnQoYSl9LHN0eWxlRG9jdW1lbnQ6ZnVuY3Rpb24oYSl7WC5mbHVzaEN1c3RvbVN0eWxlcygpO1guc3R5bGVEb2N1bWVudChhKX0sZmx1c2hDdXN0b21TdHlsZXM6ZnVuY3Rpb24oKXtYLmZsdXNoQ3VzdG9tU3R5bGVzKCl9LGdldENvbXB1dGVkU3R5bGVWYWx1ZTpmdW5jdGlvbihhLGIpe3JldHVybiBYLmdldENvbXB1dGVkU3R5bGVWYWx1ZShhLGIpfSxuYXRpdmVDc3M6VixuYXRpdmVTaGFkb3c6VH07aWgmJih3aW5kb3cuU2hhZHlDU1MuQXBwbHlTaGltPWloKTsKamgmJih3aW5kb3cuU2hhZHlDU1MuQ3VzdG9tU3R5bGVJbnRlcmZhY2U9amgpOyhmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpeyIiPT1hJiYoZi5jYWxsKHRoaXMpLHRoaXMuaD0hMCk7cmV0dXJuIGEudG9Mb3dlckNhc2UoKX1mdW5jdGlvbiBjKGEpe3ZhciBiPWEuY2hhckNvZGVBdCgwKTtyZXR1cm4gMzI8YiYmMTI3PmImJi0xPT1bMzQsMzUsNjAsNjIsNjMsOTZdLmluZGV4T2YoYik/YTplbmNvZGVVUklDb21wb25lbnQoYSl9ZnVuY3Rpb24gZChhKXt2YXIgYj1hLmNoYXJDb2RlQXQoMCk7cmV0dXJuIDMyPGImJjEyNz5iJiYtMT09WzM0LDM1LDYwLDYyLDk2XS5pbmRleE9mKGIpP2E6ZW5jb2RlVVJJQ29tcG9uZW50KGEpfWZ1bmN0aW9uIGUoYSxlLGcpe2Z1bmN0aW9uIGgoYSl7a2IucHVzaChhKX12YXIgaz1lfHwic2NoZW1lIHN0YXJ0Iix2PTAscD0iIix4PSExLFU9ITEsa2I9W107YTpmb3IoOyh2b2lkIDAhPWFbdi0xXXx8MD09dikmJiF0aGlzLmg7KXt2YXIgbD1hW3ZdO3N3aXRjaChrKXtjYXNlICJzY2hlbWUgc3RhcnQiOmlmKGwmJnIudGVzdChsKSlwKz0KbC50b0xvd2VyQ2FzZSgpLGs9InNjaGVtZSI7ZWxzZSBpZihlKXtoKCJJbnZhbGlkIHNjaGVtZS4iKTticmVhayBhfWVsc2V7cD0iIjtrPSJubyBzY2hlbWUiO2NvbnRpbnVlfWJyZWFrO2Nhc2UgInNjaGVtZSI6aWYobCYmRy50ZXN0KGwpKXArPWwudG9Mb3dlckNhc2UoKTtlbHNlIGlmKCI6Ij09bCl7dGhpcy5nPXA7cD0iIjtpZihlKWJyZWFrIGE7dm9pZCAwIT09bVt0aGlzLmddJiYodGhpcy5EPSEwKTtrPSJmaWxlIj09dGhpcy5nPyJyZWxhdGl2ZSI6dGhpcy5EJiZnJiZnLmc9PXRoaXMuZz8icmVsYXRpdmUgb3IgYXV0aG9yaXR5Ijp0aGlzLkQ/ImF1dGhvcml0eSBmaXJzdCBzbGFzaCI6InNjaGVtZSBkYXRhIn1lbHNlIGlmKGUpe3ZvaWQgMCE9bCYmaCgiQ29kZSBwb2ludCBub3QgYWxsb3dlZCBpbiBzY2hlbWU6ICIrbCk7YnJlYWsgYX1lbHNle3A9IiI7dj0wO2s9Im5vIHNjaGVtZSI7Y29udGludWV9YnJlYWs7Y2FzZSAic2NoZW1lIGRhdGEiOiI/Ij09bD8odGhpcy51PSI/IiwKaz0icXVlcnkiKToiIyI9PWw/KHRoaXMuQz0iIyIsaz0iZnJhZ21lbnQiKTp2b2lkIDAhPWwmJiJcdCIhPWwmJiJcbiIhPWwmJiJcciIhPWwmJih0aGlzLnFhKz1jKGwpKTticmVhaztjYXNlICJubyBzY2hlbWUiOmlmKGcmJnZvaWQgMCE9PW1bZy5nXSl7az0icmVsYXRpdmUiO2NvbnRpbnVlfWVsc2UgaCgiTWlzc2luZyBzY2hlbWUuIiksZi5jYWxsKHRoaXMpLHRoaXMuaD0hMDticmVhaztjYXNlICJyZWxhdGl2ZSBvciBhdXRob3JpdHkiOmlmKCIvIj09bCYmIi8iPT1hW3YrMV0paz0iYXV0aG9yaXR5IGlnbm9yZSBzbGFzaGVzIjtlbHNle2goIkV4cGVjdGVkIC8sIGdvdDogIitsKTtrPSJyZWxhdGl2ZSI7Y29udGludWV9YnJlYWs7Y2FzZSAicmVsYXRpdmUiOnRoaXMuRD0hMDsiZmlsZSIhPXRoaXMuZyYmKHRoaXMuZz1nLmcpO2lmKHZvaWQgMD09bCl7dGhpcy5pPWcuaTt0aGlzLnM9Zy5zO3RoaXMuaj1nLmouc2xpY2UoKTt0aGlzLnU9Zy51O3RoaXMudj1nLnY7dGhpcy5mPWcuZjsKYnJlYWsgYX1lbHNlIGlmKCIvIj09bHx8IlxcIj09bCkiXFwiPT1sJiZoKCJcXCBpcyBhbiBpbnZhbGlkIGNvZGUgcG9pbnQuIiksaz0icmVsYXRpdmUgc2xhc2giO2Vsc2UgaWYoIj8iPT1sKXRoaXMuaT1nLmksdGhpcy5zPWcucyx0aGlzLmo9Zy5qLnNsaWNlKCksdGhpcy51PSI/Iix0aGlzLnY9Zy52LHRoaXMuZj1nLmYsaz0icXVlcnkiO2Vsc2UgaWYoIiMiPT1sKXRoaXMuaT1nLmksdGhpcy5zPWcucyx0aGlzLmo9Zy5qLnNsaWNlKCksdGhpcy51PWcudSx0aGlzLkM9IiMiLHRoaXMudj1nLnYsdGhpcy5mPWcuZixrPSJmcmFnbWVudCI7ZWxzZXtrPWFbdisxXTt2YXIgRj1hW3YrMl07aWYoImZpbGUiIT10aGlzLmd8fCFyLnRlc3QobCl8fCI6IiE9ayYmInwiIT1rfHx2b2lkIDAhPUYmJiIvIiE9RiYmIlxcIiE9RiYmIj8iIT1GJiYiIyIhPUYpdGhpcy5pPWcuaSx0aGlzLnM9Zy5zLHRoaXMudj1nLnYsdGhpcy5mPWcuZix0aGlzLmo9Zy5qLnNsaWNlKCksdGhpcy5qLnBvcCgpO2s9CiJyZWxhdGl2ZSBwYXRoIjtjb250aW51ZX1icmVhaztjYXNlICJyZWxhdGl2ZSBzbGFzaCI6aWYoIi8iPT1sfHwiXFwiPT1sKSJcXCI9PWwmJmgoIlxcIGlzIGFuIGludmFsaWQgY29kZSBwb2ludC4iKSxrPSJmaWxlIj09dGhpcy5nPyJmaWxlIGhvc3QiOiJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXMiO2Vsc2V7ImZpbGUiIT10aGlzLmcmJih0aGlzLmk9Zy5pLHRoaXMucz1nLnMsdGhpcy52PWcudix0aGlzLmY9Zy5mKTtrPSJyZWxhdGl2ZSBwYXRoIjtjb250aW51ZX1icmVhaztjYXNlICJhdXRob3JpdHkgZmlyc3Qgc2xhc2giOmlmKCIvIj09bClrPSJhdXRob3JpdHkgc2Vjb25kIHNsYXNoIjtlbHNle2goIkV4cGVjdGVkICcvJywgZ290OiAiK2wpO2s9ImF1dGhvcml0eSBpZ25vcmUgc2xhc2hlcyI7Y29udGludWV9YnJlYWs7Y2FzZSAiYXV0aG9yaXR5IHNlY29uZCBzbGFzaCI6az0iYXV0aG9yaXR5IGlnbm9yZSBzbGFzaGVzIjtpZigiLyIhPWwpe2goIkV4cGVjdGVkICcvJywgZ290OiAiKwpsKTtjb250aW51ZX1icmVhaztjYXNlICJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXMiOmlmKCIvIiE9bCYmIlxcIiE9bCl7az0iYXV0aG9yaXR5Ijtjb250aW51ZX1lbHNlIGgoIkV4cGVjdGVkIGF1dGhvcml0eSwgZ290OiAiK2wpO2JyZWFrO2Nhc2UgImF1dGhvcml0eSI6aWYoIkAiPT1sKXt4JiYoaCgiQCBhbHJlYWR5IHNlZW4uIikscCs9IiU0MCIpO3g9ITA7Zm9yKGw9MDtsPHAubGVuZ3RoO2wrKylGPXBbbF0sIlx0Ij09Rnx8IlxuIj09Rnx8IlxyIj09Rj9oKCJJbnZhbGlkIHdoaXRlc3BhY2UgaW4gYXV0aG9yaXR5LiIpOiI6Ij09RiYmbnVsbD09PXRoaXMuZj90aGlzLmY9IiI6KEY9YyhGKSxudWxsIT09dGhpcy5mP3RoaXMuZis9Rjp0aGlzLnYrPUYpO3A9IiJ9ZWxzZSBpZih2b2lkIDA9PWx8fCIvIj09bHx8IlxcIj09bHx8Ij8iPT1sfHwiIyI9PWwpe3YtPXAubGVuZ3RoO3A9IiI7az0iaG9zdCI7Y29udGludWV9ZWxzZSBwKz1sO2JyZWFrO2Nhc2UgImZpbGUgaG9zdCI6aWYodm9pZCAwPT0KbHx8Ii8iPT1sfHwiXFwiPT1sfHwiPyI9PWx8fCIjIj09bCl7MiE9cC5sZW5ndGh8fCFyLnRlc3QocFswXSl8fCI6IiE9cFsxXSYmInwiIT1wWzFdPygwIT1wLmxlbmd0aCYmKHRoaXMuaT1iLmNhbGwodGhpcyxwKSxwPSIiKSxrPSJyZWxhdGl2ZSBwYXRoIHN0YXJ0Iik6az0icmVsYXRpdmUgcGF0aCI7Y29udGludWV9ZWxzZSJcdCI9PWx8fCJcbiI9PWx8fCJcciI9PWw/aCgiSW52YWxpZCB3aGl0ZXNwYWNlIGluIGZpbGUgaG9zdC4iKTpwKz1sO2JyZWFrO2Nhc2UgImhvc3QiOmNhc2UgImhvc3RuYW1lIjppZigiOiIhPWx8fFUpaWYodm9pZCAwPT1sfHwiLyI9PWx8fCJcXCI9PWx8fCI/Ij09bHx8IiMiPT1sKXt0aGlzLmk9Yi5jYWxsKHRoaXMscCk7cD0iIjtrPSJyZWxhdGl2ZSBwYXRoIHN0YXJ0IjtpZihlKWJyZWFrIGE7Y29udGludWV9ZWxzZSJcdCIhPWwmJiJcbiIhPWwmJiJcciIhPWw/KCJbIj09bD9VPSEwOiJdIj09bCYmKFU9ITEpLHArPWwpOmgoIkludmFsaWQgY29kZSBwb2ludCBpbiBob3N0L2hvc3RuYW1lOiAiKwpsKTtlbHNlIGlmKHRoaXMuaT1iLmNhbGwodGhpcyxwKSxwPSIiLGs9InBvcnQiLCJob3N0bmFtZSI9PWUpYnJlYWsgYTticmVhaztjYXNlICJwb3J0IjppZigvWzAtOV0vLnRlc3QobCkpcCs9bDtlbHNlIGlmKHZvaWQgMD09bHx8Ii8iPT1sfHwiXFwiPT1sfHwiPyI9PWx8fCIjIj09bHx8ZSl7IiIhPXAmJihwPXBhcnNlSW50KHAsMTApLHAhPW1bdGhpcy5nXSYmKHRoaXMucz1wKyIiKSxwPSIiKTtpZihlKWJyZWFrIGE7az0icmVsYXRpdmUgcGF0aCBzdGFydCI7Y29udGludWV9ZWxzZSJcdCI9PWx8fCJcbiI9PWx8fCJcciI9PWw/aCgiSW52YWxpZCBjb2RlIHBvaW50IGluIHBvcnQ6ICIrbCk6KGYuY2FsbCh0aGlzKSx0aGlzLmg9ITApO2JyZWFrO2Nhc2UgInJlbGF0aXZlIHBhdGggc3RhcnQiOiJcXCI9PWwmJmgoIidcXCcgbm90IGFsbG93ZWQgaW4gcGF0aC4iKTtrPSJyZWxhdGl2ZSBwYXRoIjtpZigiLyIhPWwmJiJcXCIhPWwpY29udGludWU7YnJlYWs7Y2FzZSAicmVsYXRpdmUgcGF0aCI6aWYodm9pZCAwIT0KbCYmIi8iIT1sJiYiXFwiIT1sJiYoZXx8Ij8iIT1sJiYiIyIhPWwpKSJcdCIhPWwmJiJcbiIhPWwmJiJcciIhPWwmJihwKz1jKGwpKTtlbHNleyJcXCI9PWwmJmgoIlxcIG5vdCBhbGxvd2VkIGluIHJlbGF0aXZlIHBhdGguIik7aWYoRj1uW3AudG9Mb3dlckNhc2UoKV0pcD1GOyIuLiI9PXA/KHRoaXMuai5wb3AoKSwiLyIhPWwmJiJcXCIhPWwmJnRoaXMuai5wdXNoKCIiKSk6Ii4iPT1wJiYiLyIhPWwmJiJcXCIhPWw/dGhpcy5qLnB1c2goIiIpOiIuIiE9cCYmKCJmaWxlIj09dGhpcy5nJiYwPT10aGlzLmoubGVuZ3RoJiYyPT1wLmxlbmd0aCYmci50ZXN0KHBbMF0pJiYifCI9PXBbMV0mJihwPXBbMF0rIjoiKSx0aGlzLmoucHVzaChwKSk7cD0iIjsiPyI9PWw/KHRoaXMudT0iPyIsaz0icXVlcnkiKToiIyI9PWwmJih0aGlzLkM9IiMiLGs9ImZyYWdtZW50Iil9YnJlYWs7Y2FzZSAicXVlcnkiOmV8fCIjIiE9bD92b2lkIDAhPWwmJiJcdCIhPWwmJiJcbiIhPWwmJiJcciIhPWwmJih0aGlzLnUrPQpkKGwpKToodGhpcy5DPSIjIixrPSJmcmFnbWVudCIpO2JyZWFrO2Nhc2UgImZyYWdtZW50Ijp2b2lkIDAhPWwmJiJcdCIhPWwmJiJcbiIhPWwmJiJcciIhPWwmJih0aGlzLkMrPWwpfXYrK319ZnVuY3Rpb24gZigpe3RoaXMudj10aGlzLnFhPXRoaXMuZz0iIjt0aGlzLmY9bnVsbDt0aGlzLnM9dGhpcy5pPSIiO3RoaXMuaj1bXTt0aGlzLkM9dGhpcy51PSIiO3RoaXMuRD10aGlzLmg9ITF9ZnVuY3Rpb24gZyhhLGIpe3ZvaWQgMD09PWJ8fGIgaW5zdGFuY2VvZiBnfHwoYj1uZXcgZyhTdHJpbmcoYikpKTt0aGlzLlJhPWE7Zi5jYWxsKHRoaXMpO2E9YS5yZXBsYWNlKC9eWyBcdFxyXG5cZl0rfFsgXHRcclxuXGZdKyQvZywiIik7ZS5jYWxsKHRoaXMsYSxudWxsLGIpfXZhciBoPSExO2lmKCFhLnFiKXRyeXt2YXIgaz1uZXcgVVJMKCJiIiwiaHR0cDovL2EiKTtrLnBhdGhuYW1lPSJjJTIwZCI7aD0iaHR0cDovL2EvYyUyMGQiPT09ay5ocmVmfWNhdGNoKHYpe31pZighaCl7dmFyIG09T2JqZWN0LmNyZWF0ZShudWxsKTsKbS5mdHA9MjE7bS5maWxlPTA7bS5nb3BoZXI9NzA7bS5odHRwPTgwO20uaHR0cHM9NDQzO20ud3M9ODA7bS53c3M9NDQzO3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7blsiJTJlIl09Ii4iO25bIi4lMmUiXT0iLi4iO25bIiUyZS4iXT0iLi4iO25bIiUyZSUyZSJdPSIuLiI7dmFyIHI9L1thLXpBLVpdLyxHPS9bYS16QS1aMC05XCtcLVwuXS87Zy5wcm90b3R5cGU9e3RvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaHJlZn0sZ2V0IGhyZWYoKXtpZih0aGlzLmgpcmV0dXJuIHRoaXMuUmE7dmFyIGE9IiI7aWYoIiIhPXRoaXMudnx8bnVsbCE9dGhpcy5mKWE9dGhpcy52KyhudWxsIT10aGlzLmY/IjoiK3RoaXMuZjoiIikrIkAiO3JldHVybiB0aGlzLnByb3RvY29sKyh0aGlzLkQ/Ii8vIithK3RoaXMuaG9zdDoiIikrdGhpcy5wYXRobmFtZSt0aGlzLnUrdGhpcy5DfSxzZXQgaHJlZihhKXtmLmNhbGwodGhpcyk7ZS5jYWxsKHRoaXMsYSl9LGdldCBwcm90b2NvbCgpe3JldHVybiB0aGlzLmcrCiI6In0sc2V0IHByb3RvY29sKGEpe3RoaXMuaHx8ZS5jYWxsKHRoaXMsYSsiOiIsInNjaGVtZSBzdGFydCIpfSxnZXQgaG9zdCgpe3JldHVybiB0aGlzLmg/IiI6dGhpcy5zP3RoaXMuaSsiOiIrdGhpcy5zOnRoaXMuaX0sc2V0IGhvc3QoYSl7IXRoaXMuaCYmdGhpcy5EJiZlLmNhbGwodGhpcyxhLCJob3N0Iil9LGdldCBob3N0bmFtZSgpe3JldHVybiB0aGlzLml9LHNldCBob3N0bmFtZShhKXshdGhpcy5oJiZ0aGlzLkQmJmUuY2FsbCh0aGlzLGEsImhvc3RuYW1lIil9LGdldCBwb3J0KCl7cmV0dXJuIHRoaXMuc30sc2V0IHBvcnQoYSl7IXRoaXMuaCYmdGhpcy5EJiZlLmNhbGwodGhpcyxhLCJwb3J0Iil9LGdldCBwYXRobmFtZSgpe3JldHVybiB0aGlzLmg/IiI6dGhpcy5EPyIvIit0aGlzLmouam9pbigiLyIpOnRoaXMucWF9LHNldCBwYXRobmFtZShhKXshdGhpcy5oJiZ0aGlzLkQmJih0aGlzLmo9W10sZS5jYWxsKHRoaXMsYSwicmVsYXRpdmUgcGF0aCBzdGFydCIpKX0sZ2V0IHNlYXJjaCgpe3JldHVybiB0aGlzLmh8fAohdGhpcy51fHwiPyI9PXRoaXMudT8iIjp0aGlzLnV9LHNldCBzZWFyY2goYSl7IXRoaXMuaCYmdGhpcy5EJiYodGhpcy51PSI/IiwiPyI9PWFbMF0mJihhPWEuc2xpY2UoMSkpLGUuY2FsbCh0aGlzLGEsInF1ZXJ5IikpfSxnZXQgaGFzaCgpe3JldHVybiB0aGlzLmh8fCF0aGlzLkN8fCIjIj09dGhpcy5DPyIiOnRoaXMuQ30sc2V0IGhhc2goYSl7dGhpcy5ofHwodGhpcy5DPSIjIiwiIyI9PWFbMF0mJihhPWEuc2xpY2UoMSkpLGUuY2FsbCh0aGlzLGEsImZyYWdtZW50IikpfSxnZXQgb3JpZ2luKCl7dmFyIGE7aWYodGhpcy5ofHwhdGhpcy5nKXJldHVybiIiO3N3aXRjaCh0aGlzLmcpe2Nhc2UgImRhdGEiOmNhc2UgImZpbGUiOmNhc2UgImphdmFzY3JpcHQiOmNhc2UgIm1haWx0byI6cmV0dXJuIm51bGwifXJldHVybihhPXRoaXMuaG9zdCk/dGhpcy5nKyI6Ly8iK2E6IiJ9fTt2YXIgeD1hLlVSTDt4JiYoZy5jcmVhdGVPYmplY3RVUkw9ZnVuY3Rpb24oYSl7cmV0dXJuIHguY3JlYXRlT2JqZWN0VVJMLmFwcGx5KHgsCmFyZ3VtZW50cyl9LGcucmV2b2tlT2JqZWN0VVJMPWZ1bmN0aW9uKGEpe3gucmV2b2tlT2JqZWN0VVJMKGEpfSk7YS5VUkw9Z319KSh3aW5kb3cpO3ZhciBraD17fSxsaD1PYmplY3QuY3JlYXRlLG1oPU9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzLG5oPU9iamVjdC5kZWZpbmVQcm9wZXJ0eTtmdW5jdGlvbiBZKGEsYil7Yj12b2lkIDA9PT1iP3t9OmI7cmV0dXJue3ZhbHVlOmEsY29uZmlndXJhYmxlOiEhYi55YSx3cml0YWJsZTohIWIuY2IsZW51bWVyYWJsZTohIWIuZX19dmFyIG9oPXZvaWQgMDt0cnl7b2g9MT09PW5oKHt9LCJ5Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDF9fSkueX1jYXRjaChhKXtvaD0hMX12YXIgcGg9e307ZnVuY3Rpb24gcWgoYSl7YT1TdHJpbmcoYSk7Zm9yKHZhciBiPSIiLGM9MDtwaFthK2JdOyliPWMrPTE7cGhbYStiXT0xO3ZhciBkPSJTeW1ib2woIithKyIiK2IrIikiO29oJiZuaChPYmplY3QucHJvdG90eXBlLGQse2dldDp2b2lkIDAsc2V0OmZ1bmN0aW9uKGEpe25oKHRoaXMsZCxZKGEse3lhOiEwLGNiOiEwfSkpfSxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMX0pO3JldHVybiBkfQp2YXIgcmg9bGgobnVsbCk7ZnVuY3Rpb24gWihhKXtpZih0aGlzIGluc3RhbmNlb2YgWil0aHJvdyBuZXcgVHlwZUVycm9yKCJTeW1ib2wgaXMgbm90IGEgY29uc3RydWN0b3IiKTthPXZvaWQgMD09PWE/IiI6U3RyaW5nKGEpO3ZhciBiPXFoKGEpO3JldHVybiBvaD9saChyaCx7dWE6WShhKSxLYTpZKGIpfSk6Yn1taChaLHsiZm9yIjpZKGZ1bmN0aW9uKGEpe2E9U3RyaW5nKGEpO2lmKGtoW2FdKXJldHVybiBraFthXTt2YXIgYj1aKGEpO3JldHVybiBraFthXT1ifSksa2V5Rm9yOlkoZnVuY3Rpb24oYSl7aWYob2gmJighYXx8IlN5bWJvbCIhPT1hW1oudG9TdHJpbmdUYWddKSl0aHJvdyBuZXcgVHlwZUVycm9yKCIiK2ErIiBpcyBub3QgYSBzeW1ib2wiKTtmb3IodmFyIGIgaW4ga2gpaWYoa2hbYl09PT1hKXJldHVybiBvaD9raFtiXS51YTpraFtiXS5zdWJzdHIoNyxraFtiXS5sZW5ndGgtOCl9KX0pOwptaChaLHt1YjpZKFooImhhc0luc3RhbmNlIikpLHZiOlkoWigiaXNDb25jYXRTcHJlYWRhYmxlIikpLGl0ZXJhdG9yOlkoWigiaXRlcmF0b3IiKSksbWF0Y2g6WShaKCJtYXRjaCIpKSxyZXBsYWNlOlkoWigicmVwbGFjZSIpKSxzZWFyY2g6WShaKCJzZWFyY2giKSksQWI6WShaKCJzcGVjaWVzIikpLHNwbGl0OlkoWigic3BsaXQiKSksQmI6WShaKCJ0b1ByaW1pdGl2ZSIpKSx0b1N0cmluZ1RhZzpZKFooInRvU3RyaW5nVGFnIikpLHVuc2NvcGFibGVzOlkoWigidW5zY29wYWJsZXMiKSl9KTttaChyaCx7Y29uc3RydWN0b3I6WShaKSx0b1N0cmluZzpZKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuS2F9KSx2YWx1ZU9mOlkoZnVuY3Rpb24oKXtyZXR1cm4iU3ltYm9sKCIrdGhpcy51YSsiKSJ9KX0pO29oJiZuaChyaCxaLnRvU3RyaW5nVGFnLFkoIlN5bWJvbCIse3lhOiEwfSkpO3ZhciBzaD0iZnVuY3Rpb24iPT09dHlwZW9mIFN5bWJvbD9TeW1ib2w6WjsvKgoKQ29weXJpZ2h0IChjKSAyMDE4IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dApUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dApUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHQKQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc28Kc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHQKKi8Kd2luZG93LlN5bWJvbHx8KHdpbmRvdy5TeW1ib2w9c2gsQXJyYXkucHJvdG90eXBlW3NoLml0ZXJhdG9yXT1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxlLGgpe2Zvcig7Oylzd2l0Y2goYil7Y2FzZSAwOmM9MDtjYXNlIDE6aWYoIShjPGQubGVuZ3RoKSl7Yj0zO2JyZWFrfWI9NDtyZXR1cm57dmFsdWU6ZFtjXSxkb25lOiExfTtjYXNlIDQ6aWYoMSE9YSl7Yj01O2JyZWFrfWI9LTE7dGhyb3cgaDtjYXNlIDU6Y2FzZSAyOmMrKztiPTE7YnJlYWs7Y2FzZSAzOmI9LTE7ZGVmYXVsdDpyZXR1cm57dmFsdWU6dm9pZCAwLGRvbmU6ITB9fX12YXIgYj0wLGMsZD10aGlzLGU9e25leHQ6ZnVuY3Rpb24oYil7cmV0dXJuIGEoMCxiLHZvaWQgMCl9LHRocm93OmZ1bmN0aW9uKGIpe3JldHVybiBhKDEsdm9pZCAwLGIpfSxyZXR1cm46ZnVuY3Rpb24oKXt0aHJvdyBFcnJvcigiTm90IHlldCBpbXBsZW1lbnRlZCIpO319O2VhKCk7ZVtTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9OwpyZXR1cm4gZX0sU2V0LnByb3RvdHlwZVtzaC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsZixrKXtmb3IoOzspc3dpdGNoKGIpe2Nhc2UgMDpkPVtdLGUuZm9yRWFjaChmdW5jdGlvbihhKXtkLnB1c2goYSl9KSxjPTA7Y2FzZSAxOmlmKCEoYzxkLmxlbmd0aCkpe2I9MzticmVha31iPTQ7cmV0dXJue3ZhbHVlOmRbY10sZG9uZTohMX07Y2FzZSA0OmlmKDEhPWEpe2I9NTticmVha31iPS0xO3Rocm93IGs7Y2FzZSA1OmNhc2UgMjpjKys7Yj0xO2JyZWFrO2Nhc2UgMzpiPS0xO2RlZmF1bHQ6cmV0dXJue3ZhbHVlOnZvaWQgMCxkb25lOiEwfX19dmFyIGI9MCxjLGQsZT10aGlzLGY9e25leHQ6ZnVuY3Rpb24oYil7cmV0dXJuIGEoMCxiLHZvaWQgMCl9LHRocm93OmZ1bmN0aW9uKGIpe3JldHVybiBhKDEsdm9pZCAwLGIpfSxyZXR1cm46ZnVuY3Rpb24oKXt0aHJvdyBFcnJvcigiTm90IHlldCBpbXBsZW1lbnRlZCIpO319O2VhKCk7ZltTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9OwpyZXR1cm4gZn0sTWFwLnByb3RvdHlwZVtzaC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsZixrKXtmb3IoOzspc3dpdGNoKGIpe2Nhc2UgMDpkPVtdLGUuZm9yRWFjaChmdW5jdGlvbihhLGIpe2QucHVzaChbYixhXSl9KSxjPTA7Y2FzZSAxOmlmKCEoYzxkLmxlbmd0aCkpe2I9MzticmVha31iPTQ7cmV0dXJue3ZhbHVlOmRbY10sZG9uZTohMX07Y2FzZSA0OmlmKDEhPWEpe2I9NTticmVha31iPS0xO3Rocm93IGs7Y2FzZSA1OmNhc2UgMjpjKys7Yj0xO2JyZWFrO2Nhc2UgMzpiPS0xO2RlZmF1bHQ6cmV0dXJue3ZhbHVlOnZvaWQgMCxkb25lOiEwfX19dmFyIGI9MCxjLGQsZT10aGlzLGY9e25leHQ6ZnVuY3Rpb24oYil7cmV0dXJuIGEoMCxiLHZvaWQgMCl9LHRocm93OmZ1bmN0aW9uKGIpe3JldHVybiBhKDEsdm9pZCAwLGIpfSxyZXR1cm46ZnVuY3Rpb24oKXt0aHJvdyBFcnJvcigiTm90IHlldCBpbXBsZW1lbnRlZCIpO319O2VhKCk7ZltTeW1ib2wuaXRlcmF0b3JdPQpmdW5jdGlvbigpe3JldHVybiB0aGlzfTtyZXR1cm4gZn0sU3RyaW5nLnByb3RvdHlwZVtzaC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsZSxoKXtmb3IoOzspc3dpdGNoKGIpe2Nhc2UgMDpjPTA7Y2FzZSAxOmlmKCEoYzxkLmxlbmd0aCkpe2I9MzticmVha31iPTQ7cmV0dXJue3ZhbHVlOmRbY10sZG9uZTohMX07Y2FzZSA0OmlmKDEhPWEpe2I9NTticmVha31iPS0xO3Rocm93IGg7Y2FzZSA1OmNhc2UgMjpjKys7Yj0xO2JyZWFrO2Nhc2UgMzpiPS0xO2RlZmF1bHQ6cmV0dXJue3ZhbHVlOnZvaWQgMCxkb25lOiEwfX19dmFyIGI9MCxjLGQ9dGhpcyxlPXtuZXh0OmZ1bmN0aW9uKGIpe3JldHVybiBhKDAsYix2b2lkIDApfSx0aHJvdzpmdW5jdGlvbihiKXtyZXR1cm4gYSgxLHZvaWQgMCxiKX0scmV0dXJuOmZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IoIk5vdCB5ZXQgaW1wbGVtZW50ZWQiKTt9fTtlYSgpO2VbU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTsKcmV0dXJuIGV9KTt2YXIgdGg9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTt0aC50ZXh0Q29udGVudD0iYm9keSB7dHJhbnNpdGlvbjogb3BhY2l0eSBlYXNlLWluIDAuMnM7IH0gXG5ib2R5W3VucmVzb2x2ZWRdIHtvcGFjaXR5OiAwOyBkaXNwbGF5OiBibG9jazsgb3ZlcmZsb3c6IGhpZGRlbjsgcG9zaXRpb246IHJlbGF0aXZlOyB9IFxuIjt2YXIgdWg9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO3VoLmluc2VydEJlZm9yZSh0aCx1aC5maXJzdENoaWxkKTt2YXIgdmg9d2luZG93LmN1c3RvbUVsZW1lbnRzLHdoPSExLHhoPW51bGw7dmgucG9seWZpbGxXcmFwRmx1c2hDYWxsYmFjayYmdmgucG9seWZpbGxXcmFwRmx1c2hDYWxsYmFjayhmdW5jdGlvbihhKXt4aD1hO3doJiZhKCl9KTtmdW5jdGlvbiB5aCgpe3dpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcCYmd2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQuYm9vdHN0cmFwKHdpbmRvdy5kb2N1bWVudCk7eGgmJnhoKCk7d2g9ITA7d2luZG93LldlYkNvbXBvbmVudHMucmVhZHk9ITA7ZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoIldlYkNvbXBvbmVudHNSZWFkeSIse2J1YmJsZXM6ITB9KSl9CiJjb21wbGV0ZSIhPT1kb2N1bWVudC5yZWFkeVN0YXRlPyh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIseWgpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixmdW5jdGlvbigpe3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIix5aCk7eWgoKX0pKTp5aCgpO30pLmNhbGwodGhpcyk7Cn0K"></script>
<script src="data:application/javascript;base64,SFRNTFdpZGdldHMud2lkZ2V0KHsKICBuYW1lOiAncjJkMycsCiAgdHlwZTogJ291dHB1dCcsCiAgZmFjdG9yeTogZnVuY3Rpb24oZWwsIHdpZHRoLCBoZWlnaHQpIHsKCiAgICB2YXIgcjJkMyA9IG5ldyBSMkQzKGVsLCB3aWR0aCwgaGVpZ2h0KTsKCiAgICByZXR1cm4gewogICAgICByZW5kZXJWYWx1ZTogZnVuY3Rpb24oeCkgewogICAgICAgIHIyZDMud2lkZ2V0UmVuZGVyKHgpOwogICAgICB9LAoKICAgICAgcmVzaXplOiBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KSB7CiAgICAgICAgcjJkMy53aWRnZXRSZXNpemUod2lkdGgsIGhlaWdodCk7CiAgICAgIH0KICAgIH07CiAgfQp9KTsK"></script>
<script src="data:application/javascript;base64,Ly8gaHR0cHM6Ly9kM2pzLm9yZyB2NS45LjIgQ29weXJpZ2h0IDIwMTkgTWlrZSBCb3N0b2NrCiFmdW5jdGlvbih0LG4peyJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmInVuZGVmaW5lZCIhPXR5cGVvZiBtb2R1bGU/bihleHBvcnRzKToiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbImV4cG9ydHMiXSxuKTpuKHQuZDN2NT10LmQzdjV8fHt9KX0odGhpcyxmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gbih0LG4pe3JldHVybiB0PG4/LTE6dD5uPzE6dD49bj8wOk5hTn1mdW5jdGlvbiBlKHQpe3ZhciBlO3JldHVybiAxPT09dC5sZW5ndGgmJihlPXQsdD1mdW5jdGlvbih0LHIpe3JldHVybiBuKGUodCkscil9KSx7bGVmdDpmdW5jdGlvbihuLGUscixpKXtmb3IobnVsbD09ciYmKHI9MCksbnVsbD09aSYmKGk9bi5sZW5ndGgpO3I8aTspe3ZhciBvPXIraT4+PjE7dChuW29dLGUpPDA/cj1vKzE6aT1vfXJldHVybiByfSxyaWdodDpmdW5jdGlvbihuLGUscixpKXtmb3IobnVsbD09ciYmKHI9MCksbnVsbD09aSYmKGk9bi5sZW5ndGgpO3I8aTspe3ZhciBvPXIraT4+PjE7dChuW29dLGUpPjA/aT1vOnI9bysxfXJldHVybiByfX19dmFyIHI9ZShuKSxpPXIucmlnaHQsbz1yLmxlZnQ7ZnVuY3Rpb24gYSh0LG4pe3JldHVyblt0LG5dfWZ1bmN0aW9uIHUodCl7cmV0dXJuIG51bGw9PT10P05hTjordH1mdW5jdGlvbiBjKHQsbil7dmFyIGUscixpPXQubGVuZ3RoLG89MCxhPS0xLGM9MCxmPTA7aWYobnVsbD09bilmb3IoOysrYTxpOylpc05hTihlPXUodFthXSkpfHwoZis9KHI9ZS1jKSooZS0oYys9ci8rK28pKSk7ZWxzZSBmb3IoOysrYTxpOylpc05hTihlPXUobih0W2FdLGEsdCkpKXx8KGYrPShyPWUtYykqKGUtKGMrPXIvKytvKSkpO2lmKG8+MSlyZXR1cm4gZi8oby0xKX1mdW5jdGlvbiBmKHQsbil7dmFyIGU9Yyh0LG4pO3JldHVybiBlP01hdGguc3FydChlKTplfWZ1bmN0aW9uIHModCxuKXt2YXIgZSxyLGksbz10Lmxlbmd0aCxhPS0xO2lmKG51bGw9PW4pe2Zvcig7KythPG87KWlmKG51bGwhPShlPXRbYV0pJiZlPj1lKWZvcihyPWk9ZTsrK2E8bzspbnVsbCE9KGU9dFthXSkmJihyPmUmJihyPWUpLGk8ZSYmKGk9ZSkpfWVsc2UgZm9yKDsrK2E8bzspaWYobnVsbCE9KGU9bih0W2FdLGEsdCkpJiZlPj1lKWZvcihyPWk9ZTsrK2E8bzspbnVsbCE9KGU9bih0W2FdLGEsdCkpJiYocj5lJiYocj1lKSxpPGUmJihpPWUpKTtyZXR1cm5bcixpXX12YXIgbD1BcnJheS5wcm90b3R5cGUsaD1sLnNsaWNlLGQ9bC5tYXA7ZnVuY3Rpb24gcCh0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdH19ZnVuY3Rpb24gdih0KXtyZXR1cm4gdH1mdW5jdGlvbiBnKHQsbixlKXt0PSt0LG49K24sZT0oaT1hcmd1bWVudHMubGVuZ3RoKTwyPyhuPXQsdD0wLDEpOmk8Mz8xOitlO2Zvcih2YXIgcj0tMSxpPTB8TWF0aC5tYXgoMCxNYXRoLmNlaWwoKG4tdCkvZSkpLG89bmV3IEFycmF5KGkpOysrcjxpOylvW3JdPXQrciplO3JldHVybiBvfXZhciB5PU1hdGguc3FydCg1MCksXz1NYXRoLnNxcnQoMTApLGI9TWF0aC5zcXJ0KDIpO2Z1bmN0aW9uIG0odCxuLGUpe3ZhciByLGksbyxhLHU9LTE7aWYoZT0rZSwodD0rdCk9PT0obj0rbikmJmU+MClyZXR1cm5bdF07aWYoKHI9bjx0KSYmKGk9dCx0PW4sbj1pKSwwPT09KGE9eCh0LG4sZSkpfHwhaXNGaW5pdGUoYSkpcmV0dXJuW107aWYoYT4wKWZvcih0PU1hdGguY2VpbCh0L2EpLG49TWF0aC5mbG9vcihuL2EpLG89bmV3IEFycmF5KGk9TWF0aC5jZWlsKG4tdCsxKSk7Kyt1PGk7KW9bdV09KHQrdSkqYTtlbHNlIGZvcih0PU1hdGguZmxvb3IodCphKSxuPU1hdGguY2VpbChuKmEpLG89bmV3IEFycmF5KGk9TWF0aC5jZWlsKHQtbisxKSk7Kyt1PGk7KW9bdV09KHQtdSkvYTtyZXR1cm4gciYmby5yZXZlcnNlKCksb31mdW5jdGlvbiB4KHQsbixlKXt2YXIgcj0obi10KS9NYXRoLm1heCgwLGUpLGk9TWF0aC5mbG9vcihNYXRoLmxvZyhyKS9NYXRoLkxOMTApLG89ci9NYXRoLnBvdygxMCxpKTtyZXR1cm4gaT49MD8obz49eT8xMDpvPj1fPzU6bz49Yj8yOjEpKk1hdGgucG93KDEwLGkpOi1NYXRoLnBvdygxMCwtaSkvKG8+PXk/MTA6bz49Xz81Om8+PWI/MjoxKX1mdW5jdGlvbiB3KHQsbixlKXt2YXIgcj1NYXRoLmFicyhuLXQpL01hdGgubWF4KDAsZSksaT1NYXRoLnBvdygxMCxNYXRoLmZsb29yKE1hdGgubG9nKHIpL01hdGguTE4xMCkpLG89ci9pO3JldHVybiBvPj15P2kqPTEwOm8+PV8/aSo9NTpvPj1iJiYoaSo9Miksbjx0Py1pOml9ZnVuY3Rpb24gTSh0KXtyZXR1cm4gTWF0aC5jZWlsKE1hdGgubG9nKHQubGVuZ3RoKS9NYXRoLkxOMikrMX1mdW5jdGlvbiBOKHQsbixlKXtpZihudWxsPT1lJiYoZT11KSxyPXQubGVuZ3RoKXtpZigobj0rbik8PTB8fHI8MilyZXR1cm4rZSh0WzBdLDAsdCk7aWYobj49MSlyZXR1cm4rZSh0W3ItMV0sci0xLHQpO3ZhciByLGk9KHItMSkqbixvPU1hdGguZmxvb3IoaSksYT0rZSh0W29dLG8sdCk7cmV0dXJuIGErKCtlKHRbbysxXSxvKzEsdCktYSkqKGktbyl9fWZ1bmN0aW9uIEEodCxuKXt2YXIgZSxyLGk9dC5sZW5ndGgsbz0tMTtpZihudWxsPT1uKXtmb3IoOysrbzxpOylpZihudWxsIT0oZT10W29dKSYmZT49ZSlmb3Iocj1lOysrbzxpOyludWxsIT0oZT10W29dKSYmZT5yJiYocj1lKX1lbHNlIGZvcig7KytvPGk7KWlmKG51bGwhPShlPW4odFtvXSxvLHQpKSYmZT49ZSlmb3Iocj1lOysrbzxpOyludWxsIT0oZT1uKHRbb10sbyx0KSkmJmU+ciYmKHI9ZSk7cmV0dXJuIHJ9ZnVuY3Rpb24gVCh0KXtmb3IodmFyIG4sZSxyLGk9dC5sZW5ndGgsbz0tMSxhPTA7KytvPGk7KWErPXRbb10ubGVuZ3RoO2ZvcihlPW5ldyBBcnJheShhKTstLWk+PTA7KWZvcihuPShyPXRbaV0pLmxlbmd0aDstLW4+PTA7KWVbLS1hXT1yW25dO3JldHVybiBlfWZ1bmN0aW9uIFModCxuKXt2YXIgZSxyLGk9dC5sZW5ndGgsbz0tMTtpZihudWxsPT1uKXtmb3IoOysrbzxpOylpZihudWxsIT0oZT10W29dKSYmZT49ZSlmb3Iocj1lOysrbzxpOyludWxsIT0oZT10W29dKSYmcj5lJiYocj1lKX1lbHNlIGZvcig7KytvPGk7KWlmKG51bGwhPShlPW4odFtvXSxvLHQpKSYmZT49ZSlmb3Iocj1lOysrbzxpOyludWxsIT0oZT1uKHRbb10sbyx0KSkmJnI+ZSYmKHI9ZSk7cmV0dXJuIHJ9ZnVuY3Rpb24gayh0KXtpZighKGk9dC5sZW5ndGgpKXJldHVybltdO2Zvcih2YXIgbj0tMSxlPVModCxFKSxyPW5ldyBBcnJheShlKTsrK248ZTspZm9yKHZhciBpLG89LTEsYT1yW25dPW5ldyBBcnJheShpKTsrK288aTspYVtvXT10W29dW25dO3JldHVybiByfWZ1bmN0aW9uIEUodCl7cmV0dXJuIHQubGVuZ3RofXZhciBDPUFycmF5LnByb3RvdHlwZS5zbGljZTtmdW5jdGlvbiBQKHQpe3JldHVybiB0fXZhciB6PTEsUj0yLEQ9MyxxPTQsTD0xZS02O2Z1bmN0aW9uIFUodCl7cmV0dXJuInRyYW5zbGF0ZSgiKyh0Ky41KSsiLDApIn1mdW5jdGlvbiBPKHQpe3JldHVybiJ0cmFuc2xhdGUoMCwiKyh0Ky41KSsiKSJ9ZnVuY3Rpb24gQigpe3JldHVybiF0aGlzLl9fYXhpc31mdW5jdGlvbiBZKHQsbil7dmFyIGU9W10scj1udWxsLGk9bnVsbCxvPTYsYT02LHU9MyxjPXQ9PT16fHx0PT09cT8tMToxLGY9dD09PXF8fHQ9PT1SPyJ4IjoieSIscz10PT09enx8dD09PUQ/VTpPO2Z1bmN0aW9uIGwobCl7dmFyIGg9bnVsbD09cj9uLnRpY2tzP24udGlja3MuYXBwbHkobixlKTpuLmRvbWFpbigpOnIsZD1udWxsPT1pP24udGlja0Zvcm1hdD9uLnRpY2tGb3JtYXQuYXBwbHkobixlKTpQOmkscD1NYXRoLm1heChvLDApK3Usdj1uLnJhbmdlKCksZz0rdlswXSsuNSx5PSt2W3YubGVuZ3RoLTFdKy41LF89KG4uYmFuZHdpZHRoP2Z1bmN0aW9uKHQpe3ZhciBuPU1hdGgubWF4KDAsdC5iYW5kd2lkdGgoKS0xKS8yO3JldHVybiB0LnJvdW5kKCkmJihuPU1hdGgucm91bmQobikpLGZ1bmN0aW9uKGUpe3JldHVybit0KGUpK259fTpmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuK3Qobil9fSkobi5jb3B5KCkpLGI9bC5zZWxlY3Rpb24/bC5zZWxlY3Rpb24oKTpsLG09Yi5zZWxlY3RBbGwoIi5kb21haW4iKS5kYXRhKFtudWxsXSkseD1iLnNlbGVjdEFsbCgiLnRpY2siKS5kYXRhKGgsbikub3JkZXIoKSx3PXguZXhpdCgpLE09eC5lbnRlcigpLmFwcGVuZCgiZyIpLmF0dHIoImNsYXNzIiwidGljayIpLE49eC5zZWxlY3QoImxpbmUiKSxBPXguc2VsZWN0KCJ0ZXh0Iik7bT1tLm1lcmdlKG0uZW50ZXIoKS5pbnNlcnQoInBhdGgiLCIudGljayIpLmF0dHIoImNsYXNzIiwiZG9tYWluIikuYXR0cigic3Ryb2tlIiwiY3VycmVudENvbG9yIikpLHg9eC5tZXJnZShNKSxOPU4ubWVyZ2UoTS5hcHBlbmQoImxpbmUiKS5hdHRyKCJzdHJva2UiLCJjdXJyZW50Q29sb3IiKS5hdHRyKGYrIjIiLGMqbykpLEE9QS5tZXJnZShNLmFwcGVuZCgidGV4dCIpLmF0dHIoImZpbGwiLCJjdXJyZW50Q29sb3IiKS5hdHRyKGYsYypwKS5hdHRyKCJkeSIsdD09PXo/IjBlbSI6dD09PUQ/IjAuNzFlbSI6IjAuMzJlbSIpKSxsIT09YiYmKG09bS50cmFuc2l0aW9uKGwpLHg9eC50cmFuc2l0aW9uKGwpLE49Ti50cmFuc2l0aW9uKGwpLEE9QS50cmFuc2l0aW9uKGwpLHc9dy50cmFuc2l0aW9uKGwpLmF0dHIoIm9wYWNpdHkiLEwpLmF0dHIoInRyYW5zZm9ybSIsZnVuY3Rpb24odCl7cmV0dXJuIGlzRmluaXRlKHQ9Xyh0KSk/cyh0KTp0aGlzLmdldEF0dHJpYnV0ZSgidHJhbnNmb3JtIil9KSxNLmF0dHIoIm9wYWNpdHkiLEwpLmF0dHIoInRyYW5zZm9ybSIsZnVuY3Rpb24odCl7dmFyIG49dGhpcy5wYXJlbnROb2RlLl9fYXhpcztyZXR1cm4gcyhuJiZpc0Zpbml0ZShuPW4odCkpP246Xyh0KSl9KSksdy5yZW1vdmUoKSxtLmF0dHIoImQiLHQ9PT1xfHx0PT1SP2E/Ik0iK2MqYSsiLCIrZysiSDAuNVYiK3krIkgiK2MqYToiTTAuNSwiK2crIlYiK3k6YT8iTSIrZysiLCIrYyphKyJWMC41SCIreSsiViIrYyphOiJNIitnKyIsMC41SCIreSkseC5hdHRyKCJvcGFjaXR5IiwxKS5hdHRyKCJ0cmFuc2Zvcm0iLGZ1bmN0aW9uKHQpe3JldHVybiBzKF8odCkpfSksTi5hdHRyKGYrIjIiLGMqbyksQS5hdHRyKGYsYypwKS50ZXh0KGQpLGIuZmlsdGVyKEIpLmF0dHIoImZpbGwiLCJub25lIikuYXR0cigiZm9udC1zaXplIiwxMCkuYXR0cigiZm9udC1mYW1pbHkiLCJzYW5zLXNlcmlmIikuYXR0cigidGV4dC1hbmNob3IiLHQ9PT1SPyJzdGFydCI6dD09PXE/ImVuZCI6Im1pZGRsZSIpLGIuZWFjaChmdW5jdGlvbigpe3RoaXMuX19heGlzPV99KX1yZXR1cm4gbC5zY2FsZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8obj10LGwpOm59LGwudGlja3M9ZnVuY3Rpb24oKXtyZXR1cm4gZT1DLmNhbGwoYXJndW1lbnRzKSxsfSxsLnRpY2tBcmd1bWVudHM9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGU9bnVsbD09dD9bXTpDLmNhbGwodCksbCk6ZS5zbGljZSgpfSxsLnRpY2tWYWx1ZXM9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHI9bnVsbD09dD9udWxsOkMuY2FsbCh0KSxsKTpyJiZyLnNsaWNlKCl9LGwudGlja0Zvcm1hdD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oaT10LGwpOml9LGwudGlja1NpemU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG89YT0rdCxsKTpvfSxsLnRpY2tTaXplSW5uZXI9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG89K3QsbCk6b30sbC50aWNrU2l6ZU91dGVyPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhhPSt0LGwpOmF9LGwudGlja1BhZGRpbmc9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHU9K3QsbCk6dX0sbH12YXIgRj17dmFsdWU6ZnVuY3Rpb24oKXt9fTtmdW5jdGlvbiBJKCl7Zm9yKHZhciB0LG49MCxlPWFyZ3VtZW50cy5sZW5ndGgscj17fTtuPGU7KytuKXtpZighKHQ9YXJndW1lbnRzW25dKyIiKXx8dCBpbiByKXRocm93IG5ldyBFcnJvcigiaWxsZWdhbCB0eXBlOiAiK3QpO3JbdF09W119cmV0dXJuIG5ldyBqKHIpfWZ1bmN0aW9uIGoodCl7dGhpcy5fPXR9ZnVuY3Rpb24gSCh0LG4pe2Zvcih2YXIgZSxyPTAsaT10Lmxlbmd0aDtyPGk7KytyKWlmKChlPXRbcl0pLm5hbWU9PT1uKXJldHVybiBlLnZhbHVlfWZ1bmN0aW9uIFgodCxuLGUpe2Zvcih2YXIgcj0wLGk9dC5sZW5ndGg7cjxpOysrcilpZih0W3JdLm5hbWU9PT1uKXt0W3JdPUYsdD10LnNsaWNlKDAscikuY29uY2F0KHQuc2xpY2UocisxKSk7YnJlYWt9cmV0dXJuIG51bGwhPWUmJnQucHVzaCh7bmFtZTpuLHZhbHVlOmV9KSx0fWoucHJvdG90eXBlPUkucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpqLG9uOmZ1bmN0aW9uKHQsbil7dmFyIGUscixpPXRoaXMuXyxvPShyPWksKHQrIiIpLnRyaW0oKS5zcGxpdCgvXnxccysvKS5tYXAoZnVuY3Rpb24odCl7dmFyIG49IiIsZT10LmluZGV4T2YoIi4iKTtpZihlPj0wJiYobj10LnNsaWNlKGUrMSksdD10LnNsaWNlKDAsZSkpLHQmJiFyLmhhc093blByb3BlcnR5KHQpKXRocm93IG5ldyBFcnJvcigidW5rbm93biB0eXBlOiAiK3QpO3JldHVybnt0eXBlOnQsbmFtZTpufX0pKSxhPS0xLHU9by5sZW5ndGg7aWYoIShhcmd1bWVudHMubGVuZ3RoPDIpKXtpZihudWxsIT1uJiYiZnVuY3Rpb24iIT10eXBlb2Ygbil0aHJvdyBuZXcgRXJyb3IoImludmFsaWQgY2FsbGJhY2s6ICIrbik7Zm9yKDsrK2E8dTspaWYoZT0odD1vW2FdKS50eXBlKWlbZV09WChpW2VdLHQubmFtZSxuKTtlbHNlIGlmKG51bGw9PW4pZm9yKGUgaW4gaSlpW2VdPVgoaVtlXSx0Lm5hbWUsbnVsbCk7cmV0dXJuIHRoaXN9Zm9yKDsrK2E8dTspaWYoKGU9KHQ9b1thXSkudHlwZSkmJihlPUgoaVtlXSx0Lm5hbWUpKSlyZXR1cm4gZX0sY29weTpmdW5jdGlvbigpe3ZhciB0PXt9LG49dGhpcy5fO2Zvcih2YXIgZSBpbiBuKXRbZV09bltlXS5zbGljZSgpO3JldHVybiBuZXcgaih0KX0sY2FsbDpmdW5jdGlvbih0LG4pe2lmKChlPWFyZ3VtZW50cy5sZW5ndGgtMik+MClmb3IodmFyIGUscixpPW5ldyBBcnJheShlKSxvPTA7bzxlOysrbylpW29dPWFyZ3VtZW50c1tvKzJdO2lmKCF0aGlzLl8uaGFzT3duUHJvcGVydHkodCkpdGhyb3cgbmV3IEVycm9yKCJ1bmtub3duIHR5cGU6ICIrdCk7Zm9yKG89MCxlPShyPXRoaXMuX1t0XSkubGVuZ3RoO288ZTsrK28pcltvXS52YWx1ZS5hcHBseShuLGkpfSxhcHBseTpmdW5jdGlvbih0LG4sZSl7aWYoIXRoaXMuXy5oYXNPd25Qcm9wZXJ0eSh0KSl0aHJvdyBuZXcgRXJyb3IoInVua25vd24gdHlwZTogIit0KTtmb3IodmFyIHI9dGhpcy5fW3RdLGk9MCxvPXIubGVuZ3RoO2k8bzsrK2kpcltpXS52YWx1ZS5hcHBseShuLGUpfX07dmFyIEc9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiLFY9e3N2ZzoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHhodG1sOkcseGxpbms6Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiLHhtbDoiaHR0cDovL3d3dy53My5vcmcvWE1MLzE5OTgvbmFtZXNwYWNlIix4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC94bWxucy8ifTtmdW5jdGlvbiAkKHQpe3ZhciBuPXQrPSIiLGU9bi5pbmRleE9mKCI6Iik7cmV0dXJuIGU+PTAmJiJ4bWxucyIhPT0obj10LnNsaWNlKDAsZSkpJiYodD10LnNsaWNlKGUrMSkpLFYuaGFzT3duUHJvcGVydHkobik/e3NwYWNlOlZbbl0sbG9jYWw6dH06dH1mdW5jdGlvbiBXKHQpe3ZhciBuPSQodCk7cmV0dXJuKG4ubG9jYWw/ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50TlModC5zcGFjZSx0LmxvY2FsKX19OmZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3ZhciBuPXRoaXMub3duZXJEb2N1bWVudCxlPXRoaXMubmFtZXNwYWNlVVJJO3JldHVybiBlPT09RyYmbi5kb2N1bWVudEVsZW1lbnQubmFtZXNwYWNlVVJJPT09Rz9uLmNyZWF0ZUVsZW1lbnQodCk6bi5jcmVhdGVFbGVtZW50TlMoZSx0KX19KShuKX1mdW5jdGlvbiBaKCl7fWZ1bmN0aW9uIFEodCl7cmV0dXJuIG51bGw9PXQ/WjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IodCl9fWZ1bmN0aW9uIEooKXtyZXR1cm5bXX1mdW5jdGlvbiBLKHQpe3JldHVybiBudWxsPT10P0o6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKHQpfX1mdW5jdGlvbiB0dCh0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXRjaGVzKHQpfX1mdW5jdGlvbiBudCh0KXtyZXR1cm4gbmV3IEFycmF5KHQubGVuZ3RoKX1mdW5jdGlvbiBldCh0LG4pe3RoaXMub3duZXJEb2N1bWVudD10Lm93bmVyRG9jdW1lbnQsdGhpcy5uYW1lc3BhY2VVUkk9dC5uYW1lc3BhY2VVUkksdGhpcy5fbmV4dD1udWxsLHRoaXMuX3BhcmVudD10LHRoaXMuX19kYXRhX189bn1ldC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmV0LGFwcGVuZENoaWxkOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9wYXJlbnQuaW5zZXJ0QmVmb3JlKHQsdGhpcy5fbmV4dCl9LGluc2VydEJlZm9yZTpmdW5jdGlvbih0LG4pe3JldHVybiB0aGlzLl9wYXJlbnQuaW5zZXJ0QmVmb3JlKHQsbil9LHF1ZXJ5U2VsZWN0b3I6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3BhcmVudC5xdWVyeVNlbGVjdG9yKHQpfSxxdWVyeVNlbGVjdG9yQWxsOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9wYXJlbnQucXVlcnlTZWxlY3RvckFsbCh0KX19O3ZhciBydD0iJCI7ZnVuY3Rpb24gaXQodCxuLGUscixpLG8pe2Zvcih2YXIgYSx1PTAsYz1uLmxlbmd0aCxmPW8ubGVuZ3RoO3U8ZjsrK3UpKGE9blt1XSk/KGEuX19kYXRhX189b1t1XSxyW3VdPWEpOmVbdV09bmV3IGV0KHQsb1t1XSk7Zm9yKDt1PGM7Kyt1KShhPW5bdV0pJiYoaVt1XT1hKX1mdW5jdGlvbiBvdCh0LG4sZSxyLGksbyxhKXt2YXIgdSxjLGYscz17fSxsPW4ubGVuZ3RoLGg9by5sZW5ndGgsZD1uZXcgQXJyYXkobCk7Zm9yKHU9MDt1PGw7Kyt1KShjPW5bdV0pJiYoZFt1XT1mPXJ0K2EuY2FsbChjLGMuX19kYXRhX18sdSxuKSxmIGluIHM/aVt1XT1jOnNbZl09Yyk7Zm9yKHU9MDt1PGg7Kyt1KShjPXNbZj1ydCthLmNhbGwodCxvW3VdLHUsbyldKT8oclt1XT1jLGMuX19kYXRhX189b1t1XSxzW2ZdPW51bGwpOmVbdV09bmV3IGV0KHQsb1t1XSk7Zm9yKHU9MDt1PGw7Kyt1KShjPW5bdV0pJiZzW2RbdV1dPT09YyYmKGlbdV09Yyl9ZnVuY3Rpb24gYXQodCxuKXtyZXR1cm4gdDxuPy0xOnQ+bj8xOnQ+PW4/MDpOYU59ZnVuY3Rpb24gdXQodCl7cmV0dXJuIHQub3duZXJEb2N1bWVudCYmdC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3fHx0LmRvY3VtZW50JiZ0fHx0LmRlZmF1bHRWaWV3fWZ1bmN0aW9uIGN0KHQsbil7cmV0dXJuIHQuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShuKXx8dXQodCkuZ2V0Q29tcHV0ZWRTdHlsZSh0LG51bGwpLmdldFByb3BlcnR5VmFsdWUobil9ZnVuY3Rpb24gZnQodCl7cmV0dXJuIHQudHJpbSgpLnNwbGl0KC9efFxzKy8pfWZ1bmN0aW9uIHN0KHQpe3JldHVybiB0LmNsYXNzTGlzdHx8bmV3IGx0KHQpfWZ1bmN0aW9uIGx0KHQpe3RoaXMuX25vZGU9dCx0aGlzLl9uYW1lcz1mdCh0LmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpfWZ1bmN0aW9uIGh0KHQsbil7Zm9yKHZhciBlPXN0KHQpLHI9LTEsaT1uLmxlbmd0aDsrK3I8aTspZS5hZGQobltyXSl9ZnVuY3Rpb24gZHQodCxuKXtmb3IodmFyIGU9c3QodCkscj0tMSxpPW4ubGVuZ3RoOysrcjxpOyllLnJlbW92ZShuW3JdKX1mdW5jdGlvbiBwdCgpe3RoaXMudGV4dENvbnRlbnQ9IiJ9ZnVuY3Rpb24gdnQoKXt0aGlzLmlubmVySFRNTD0iIn1mdW5jdGlvbiBndCgpe3RoaXMubmV4dFNpYmxpbmcmJnRoaXMucGFyZW50Tm9kZS5hcHBlbmRDaGlsZCh0aGlzKX1mdW5jdGlvbiB5dCgpe3RoaXMucHJldmlvdXNTaWJsaW5nJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMsdGhpcy5wYXJlbnROb2RlLmZpcnN0Q2hpbGQpfWZ1bmN0aW9uIF90KCl7cmV0dXJuIG51bGx9ZnVuY3Rpb24gYnQoKXt2YXIgdD10aGlzLnBhcmVudE5vZGU7dCYmdC5yZW1vdmVDaGlsZCh0aGlzKX1mdW5jdGlvbiBtdCgpe3JldHVybiB0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuY2xvbmVOb2RlKCExKSx0aGlzLm5leHRTaWJsaW5nKX1mdW5jdGlvbiB4dCgpe3JldHVybiB0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuY2xvbmVOb2RlKCEwKSx0aGlzLm5leHRTaWJsaW5nKX1sdC5wcm90b3R5cGU9e2FkZDpmdW5jdGlvbih0KXt0aGlzLl9uYW1lcy5pbmRleE9mKHQpPDAmJih0aGlzLl9uYW1lcy5wdXNoKHQpLHRoaXMuX25vZGUuc2V0QXR0cmlidXRlKCJjbGFzcyIsdGhpcy5fbmFtZXMuam9pbigiICIpKSl9LHJlbW92ZTpmdW5jdGlvbih0KXt2YXIgbj10aGlzLl9uYW1lcy5pbmRleE9mKHQpO24+PTAmJih0aGlzLl9uYW1lcy5zcGxpY2UobiwxKSx0aGlzLl9ub2RlLnNldEF0dHJpYnV0ZSgiY2xhc3MiLHRoaXMuX25hbWVzLmpvaW4oIiAiKSkpfSxjb250YWluczpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbmFtZXMuaW5kZXhPZih0KT49MH19O3ZhciB3dD17fTsodC5ldmVudD1udWxsLCJ1bmRlZmluZWQiIT10eXBlb2YgZG9jdW1lbnQpJiYoIm9ubW91c2VlbnRlciJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnR8fCh3dD17bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCJ9KSk7ZnVuY3Rpb24gTXQodCxuLGUpe3JldHVybiB0PU50KHQsbixlKSxmdW5jdGlvbihuKXt2YXIgZT1uLnJlbGF0ZWRUYXJnZXQ7ZSYmKGU9PT10aGlzfHw4JmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24odGhpcykpfHx0LmNhbGwodGhpcyxuKX19ZnVuY3Rpb24gTnQobixlLHIpe3JldHVybiBmdW5jdGlvbihpKXt2YXIgbz10LmV2ZW50O3QuZXZlbnQ9aTt0cnl7bi5jYWxsKHRoaXMsdGhpcy5fX2RhdGFfXyxlLHIpfWZpbmFsbHl7dC5ldmVudD1vfX19ZnVuY3Rpb24gQXQodCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG49dGhpcy5fX29uO2lmKG4pe2Zvcih2YXIgZSxyPTAsaT0tMSxvPW4ubGVuZ3RoO3I8bzsrK3IpZT1uW3JdLHQudHlwZSYmZS50eXBlIT09dC50eXBlfHxlLm5hbWUhPT10Lm5hbWU/blsrK2ldPWU6dGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGUudHlwZSxlLmxpc3RlbmVyLGUuY2FwdHVyZSk7KytpP24ubGVuZ3RoPWk6ZGVsZXRlIHRoaXMuX19vbn19fWZ1bmN0aW9uIFR0KHQsbixlKXt2YXIgcj13dC5oYXNPd25Qcm9wZXJ0eSh0LnR5cGUpP010Ok50O3JldHVybiBmdW5jdGlvbihpLG8sYSl7dmFyIHUsYz10aGlzLl9fb24sZj1yKG4sbyxhKTtpZihjKWZvcih2YXIgcz0wLGw9Yy5sZW5ndGg7czxsOysrcylpZigodT1jW3NdKS50eXBlPT09dC50eXBlJiZ1Lm5hbWU9PT10Lm5hbWUpcmV0dXJuIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcih1LnR5cGUsdS5saXN0ZW5lcix1LmNhcHR1cmUpLHRoaXMuYWRkRXZlbnRMaXN0ZW5lcih1LnR5cGUsdS5saXN0ZW5lcj1mLHUuY2FwdHVyZT1lKSx2b2lkKHUudmFsdWU9bik7dGhpcy5hZGRFdmVudExpc3RlbmVyKHQudHlwZSxmLGUpLHU9e3R5cGU6dC50eXBlLG5hbWU6dC5uYW1lLHZhbHVlOm4sbGlzdGVuZXI6ZixjYXB0dXJlOmV9LGM/Yy5wdXNoKHUpOnRoaXMuX19vbj1bdV19fWZ1bmN0aW9uIFN0KG4sZSxyLGkpe3ZhciBvPXQuZXZlbnQ7bi5zb3VyY2VFdmVudD10LmV2ZW50LHQuZXZlbnQ9bjt0cnl7cmV0dXJuIGUuYXBwbHkocixpKX1maW5hbGx5e3QuZXZlbnQ9b319ZnVuY3Rpb24ga3QodCxuLGUpe3ZhciByPXV0KHQpLGk9ci5DdXN0b21FdmVudDsiZnVuY3Rpb24iPT10eXBlb2YgaT9pPW5ldyBpKG4sZSk6KGk9ci5kb2N1bWVudC5jcmVhdGVFdmVudCgiRXZlbnQiKSxlPyhpLmluaXRFdmVudChuLGUuYnViYmxlcyxlLmNhbmNlbGFibGUpLGkuZGV0YWlsPWUuZGV0YWlsKTppLmluaXRFdmVudChuLCExLCExKSksdC5kaXNwYXRjaEV2ZW50KGkpfXZhciBFdD1bbnVsbF07ZnVuY3Rpb24gQ3QodCxuKXt0aGlzLl9ncm91cHM9dCx0aGlzLl9wYXJlbnRzPW59ZnVuY3Rpb24gUHQoKXtyZXR1cm4gbmV3IEN0KFtbZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50XV0sRXQpfWZ1bmN0aW9uIHp0KHQpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdD9uZXcgQ3QoW1tkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHQpXV0sW2RvY3VtZW50LmRvY3VtZW50RWxlbWVudF0pOm5ldyBDdChbW3RdXSxFdCl9Q3QucHJvdG90eXBlPVB0LnByb3RvdHlwZT17Y29uc3RydWN0b3I6Q3Qsc2VsZWN0OmZ1bmN0aW9uKHQpeyJmdW5jdGlvbiIhPXR5cGVvZiB0JiYodD1RKHQpKTtmb3IodmFyIG49dGhpcy5fZ3JvdXBzLGU9bi5sZW5ndGgscj1uZXcgQXJyYXkoZSksaT0wO2k8ZTsrK2kpZm9yKHZhciBvLGEsdT1uW2ldLGM9dS5sZW5ndGgsZj1yW2ldPW5ldyBBcnJheShjKSxzPTA7czxjOysrcykobz11W3NdKSYmKGE9dC5jYWxsKG8sby5fX2RhdGFfXyxzLHUpKSYmKCJfX2RhdGFfXyJpbiBvJiYoYS5fX2RhdGFfXz1vLl9fZGF0YV9fKSxmW3NdPWEpO3JldHVybiBuZXcgQ3Qocix0aGlzLl9wYXJlbnRzKX0sc2VsZWN0QWxsOmZ1bmN0aW9uKHQpeyJmdW5jdGlvbiIhPXR5cGVvZiB0JiYodD1LKHQpKTtmb3IodmFyIG49dGhpcy5fZ3JvdXBzLGU9bi5sZW5ndGgscj1bXSxpPVtdLG89MDtvPGU7KytvKWZvcih2YXIgYSx1PW5bb10sYz11Lmxlbmd0aCxmPTA7ZjxjOysrZikoYT11W2ZdKSYmKHIucHVzaCh0LmNhbGwoYSxhLl9fZGF0YV9fLGYsdSkpLGkucHVzaChhKSk7cmV0dXJuIG5ldyBDdChyLGkpfSxmaWx0ZXI6ZnVuY3Rpb24odCl7ImZ1bmN0aW9uIiE9dHlwZW9mIHQmJih0PXR0KHQpKTtmb3IodmFyIG49dGhpcy5fZ3JvdXBzLGU9bi5sZW5ndGgscj1uZXcgQXJyYXkoZSksaT0wO2k8ZTsrK2kpZm9yKHZhciBvLGE9bltpXSx1PWEubGVuZ3RoLGM9cltpXT1bXSxmPTA7Zjx1OysrZikobz1hW2ZdKSYmdC5jYWxsKG8sby5fX2RhdGFfXyxmLGEpJiZjLnB1c2gobyk7cmV0dXJuIG5ldyBDdChyLHRoaXMuX3BhcmVudHMpfSxkYXRhOmZ1bmN0aW9uKHQsbil7aWYoIXQpcmV0dXJuIHA9bmV3IEFycmF5KHRoaXMuc2l6ZSgpKSxzPS0xLHRoaXMuZWFjaChmdW5jdGlvbih0KXtwWysrc109dH0pLHA7dmFyIGUscj1uP290Oml0LGk9dGhpcy5fcGFyZW50cyxvPXRoaXMuX2dyb3VwczsiZnVuY3Rpb24iIT10eXBlb2YgdCYmKGU9dCx0PWZ1bmN0aW9uKCl7cmV0dXJuIGV9KTtmb3IodmFyIGE9by5sZW5ndGgsdT1uZXcgQXJyYXkoYSksYz1uZXcgQXJyYXkoYSksZj1uZXcgQXJyYXkoYSkscz0wO3M8YTsrK3Mpe3ZhciBsPWlbc10saD1vW3NdLGQ9aC5sZW5ndGgscD10LmNhbGwobCxsJiZsLl9fZGF0YV9fLHMsaSksdj1wLmxlbmd0aCxnPWNbc109bmV3IEFycmF5KHYpLHk9dVtzXT1uZXcgQXJyYXkodik7cihsLGgsZyx5LGZbc109bmV3IEFycmF5KGQpLHAsbik7Zm9yKHZhciBfLGIsbT0wLHg9MDttPHY7KyttKWlmKF89Z1ttXSl7Zm9yKG0+PXgmJih4PW0rMSk7IShiPXlbeF0pJiYrK3g8djspO18uX25leHQ9Ynx8bnVsbH19cmV0dXJuKHU9bmV3IEN0KHUsaSkpLl9lbnRlcj1jLHUuX2V4aXQ9Zix1fSxlbnRlcjpmdW5jdGlvbigpe3JldHVybiBuZXcgQ3QodGhpcy5fZW50ZXJ8fHRoaXMuX2dyb3Vwcy5tYXAobnQpLHRoaXMuX3BhcmVudHMpfSxleGl0OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBDdCh0aGlzLl9leGl0fHx0aGlzLl9ncm91cHMubWFwKG50KSx0aGlzLl9wYXJlbnRzKX0sam9pbjpmdW5jdGlvbih0LG4sZSl7dmFyIHI9dGhpcy5lbnRlcigpLGk9dGhpcyxvPXRoaXMuZXhpdCgpO3JldHVybiByPSJmdW5jdGlvbiI9PXR5cGVvZiB0P3Qocik6ci5hcHBlbmQodCsiIiksbnVsbCE9biYmKGk9bihpKSksbnVsbD09ZT9vLnJlbW92ZSgpOmUobyksciYmaT9yLm1lcmdlKGkpLm9yZGVyKCk6aX0sbWVyZ2U6ZnVuY3Rpb24odCl7Zm9yKHZhciBuPXRoaXMuX2dyb3VwcyxlPXQuX2dyb3VwcyxyPW4ubGVuZ3RoLGk9ZS5sZW5ndGgsbz1NYXRoLm1pbihyLGkpLGE9bmV3IEFycmF5KHIpLHU9MDt1PG87Kyt1KWZvcih2YXIgYyxmPW5bdV0scz1lW3VdLGw9Zi5sZW5ndGgsaD1hW3VdPW5ldyBBcnJheShsKSxkPTA7ZDxsOysrZCkoYz1mW2RdfHxzW2RdKSYmKGhbZF09Yyk7Zm9yKDt1PHI7Kyt1KWFbdV09blt1XTtyZXR1cm4gbmV3IEN0KGEsdGhpcy5fcGFyZW50cyl9LG9yZGVyOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuX2dyb3VwcyxuPS0xLGU9dC5sZW5ndGg7KytuPGU7KWZvcih2YXIgcixpPXRbbl0sbz1pLmxlbmd0aC0xLGE9aVtvXTstLW8+PTA7KShyPWlbb10pJiYoYSYmNF5yLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGEpJiZhLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHIsYSksYT1yKTtyZXR1cm4gdGhpc30sc29ydDpmdW5jdGlvbih0KXtmdW5jdGlvbiBuKG4sZSl7cmV0dXJuIG4mJmU/dChuLl9fZGF0YV9fLGUuX19kYXRhX18pOiFuLSFlfXR8fCh0PWF0KTtmb3IodmFyIGU9dGhpcy5fZ3JvdXBzLHI9ZS5sZW5ndGgsaT1uZXcgQXJyYXkociksbz0wO288cjsrK28pe2Zvcih2YXIgYSx1PWVbb10sYz11Lmxlbmd0aCxmPWlbb109bmV3IEFycmF5KGMpLHM9MDtzPGM7KytzKShhPXVbc10pJiYoZltzXT1hKTtmLnNvcnQobil9cmV0dXJuIG5ldyBDdChpLHRoaXMuX3BhcmVudHMpLm9yZGVyKCl9LGNhbGw6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHNbMF07cmV0dXJuIGFyZ3VtZW50c1swXT10aGlzLHQuYXBwbHkobnVsbCxhcmd1bWVudHMpLHRoaXN9LG5vZGVzOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IEFycmF5KHRoaXMuc2l6ZSgpKSxuPS0xO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt0Wysrbl09dGhpc30pLHR9LG5vZGU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5fZ3JvdXBzLG49MCxlPXQubGVuZ3RoO248ZTsrK24pZm9yKHZhciByPXRbbl0saT0wLG89ci5sZW5ndGg7aTxvOysraSl7dmFyIGE9cltpXTtpZihhKXJldHVybiBhfXJldHVybiBudWxsfSxzaXplOmZ1bmN0aW9uKCl7dmFyIHQ9MDtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Kyt0fSksdH0sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5ub2RlKCl9LGVhY2g6ZnVuY3Rpb24odCl7Zm9yKHZhciBuPXRoaXMuX2dyb3VwcyxlPTAscj1uLmxlbmd0aDtlPHI7KytlKWZvcih2YXIgaSxvPW5bZV0sYT0wLHU9by5sZW5ndGg7YTx1OysrYSkoaT1vW2FdKSYmdC5jYWxsKGksaS5fX2RhdGFfXyxhLG8pO3JldHVybiB0aGlzfSxhdHRyOmZ1bmN0aW9uKHQsbil7dmFyIGU9JCh0KTtpZihhcmd1bWVudHMubGVuZ3RoPDIpe3ZhciByPXRoaXMubm9kZSgpO3JldHVybiBlLmxvY2FsP3IuZ2V0QXR0cmlidXRlTlMoZS5zcGFjZSxlLmxvY2FsKTpyLmdldEF0dHJpYnV0ZShlKX1yZXR1cm4gdGhpcy5lYWNoKChudWxsPT1uP2UubG9jYWw/ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVBdHRyaWJ1dGVOUyh0LnNwYWNlLHQubG9jYWwpfX06ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVBdHRyaWJ1dGUodCl9fToiZnVuY3Rpb24iPT10eXBlb2Ygbj9lLmxvY2FsP2Z1bmN0aW9uKHQsbil7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7bnVsbD09ZT90aGlzLnJlbW92ZUF0dHJpYnV0ZU5TKHQuc3BhY2UsdC5sb2NhbCk6dGhpcy5zZXRBdHRyaWJ1dGVOUyh0LnNwYWNlLHQubG9jYWwsZSl9fTpmdW5jdGlvbih0LG4pe3JldHVybiBmdW5jdGlvbigpe3ZhciBlPW4uYXBwbHkodGhpcyxhcmd1bWVudHMpO251bGw9PWU/dGhpcy5yZW1vdmVBdHRyaWJ1dGUodCk6dGhpcy5zZXRBdHRyaWJ1dGUodCxlKX19OmUubG9jYWw/ZnVuY3Rpb24odCxuKXtyZXR1cm4gZnVuY3Rpb24oKXt0aGlzLnNldEF0dHJpYnV0ZU5TKHQuc3BhY2UsdC5sb2NhbCxuKX19OmZ1bmN0aW9uKHQsbil7cmV0dXJuIGZ1bmN0aW9uKCl7dGhpcy5zZXRBdHRyaWJ1dGUodCxuKX19KShlLG4pKX0sc3R5bGU6ZnVuY3Rpb24odCxuLGUpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjE/dGhpcy5lYWNoKChudWxsPT1uP2Z1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3RoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkodCl9fToiZnVuY3Rpb24iPT10eXBlb2Ygbj9mdW5jdGlvbih0LG4sZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHI9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7bnVsbD09cj90aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KHQpOnRoaXMuc3R5bGUuc2V0UHJvcGVydHkodCxyLGUpfX06ZnVuY3Rpb24odCxuLGUpe3JldHVybiBmdW5jdGlvbigpe3RoaXMuc3R5bGUuc2V0UHJvcGVydHkodCxuLGUpfX0pKHQsbixudWxsPT1lPyIiOmUpKTpjdCh0aGlzLm5vZGUoKSx0KX0scHJvcGVydHk6ZnVuY3Rpb24odCxuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4xP3RoaXMuZWFjaCgobnVsbD09bj9mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtkZWxldGUgdGhpc1t0XX19OiJmdW5jdGlvbiI9PXR5cGVvZiBuP2Z1bmN0aW9uKHQsbil7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7bnVsbD09ZT9kZWxldGUgdGhpc1t0XTp0aGlzW3RdPWV9fTpmdW5jdGlvbih0LG4pe3JldHVybiBmdW5jdGlvbigpe3RoaXNbdF09bn19KSh0LG4pKTp0aGlzLm5vZGUoKVt0XX0sY2xhc3NlZDpmdW5jdGlvbih0LG4pe3ZhciBlPWZ0KHQrIiIpO2lmKGFyZ3VtZW50cy5sZW5ndGg8Mil7Zm9yKHZhciByPXN0KHRoaXMubm9kZSgpKSxpPS0xLG89ZS5sZW5ndGg7KytpPG87KWlmKCFyLmNvbnRhaW5zKGVbaV0pKXJldHVybiExO3JldHVybiEwfXJldHVybiB0aGlzLmVhY2goKCJmdW5jdGlvbiI9PXR5cGVvZiBuP2Z1bmN0aW9uKHQsbil7cmV0dXJuIGZ1bmN0aW9uKCl7KG4uYXBwbHkodGhpcyxhcmd1bWVudHMpP2h0OmR0KSh0aGlzLHQpfX06bj9mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtodCh0aGlzLHQpfX06ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7ZHQodGhpcyx0KX19KShlLG4pKX0sdGV4dDpmdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD90aGlzLmVhY2gobnVsbD09dD9wdDooImZ1bmN0aW9uIj09dHlwZW9mIHQ/ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG49dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy50ZXh0Q29udGVudD1udWxsPT1uPyIiOm59fTpmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXt0aGlzLnRleHRDb250ZW50PXR9fSkodCkpOnRoaXMubm9kZSgpLnRleHRDb250ZW50fSxodG1sOmZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoP3RoaXMuZWFjaChudWxsPT10P3Z0OigiZnVuY3Rpb24iPT10eXBlb2YgdD9mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgbj10LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmlubmVySFRNTD1udWxsPT1uPyIiOm59fTpmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXt0aGlzLmlubmVySFRNTD10fX0pKHQpKTp0aGlzLm5vZGUoKS5pbm5lckhUTUx9LHJhaXNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWFjaChndCl9LGxvd2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWFjaCh5dCl9LGFwcGVuZDpmdW5jdGlvbih0KXt2YXIgbj0iZnVuY3Rpb24iPT10eXBlb2YgdD90OlcodCk7cmV0dXJuIHRoaXMuc2VsZWN0KGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXBwZW5kQ2hpbGQobi5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSl9LGluc2VydDpmdW5jdGlvbih0LG4pe3ZhciBlPSJmdW5jdGlvbiI9PXR5cGVvZiB0P3Q6Vyh0KSxyPW51bGw9PW4/X3Q6ImZ1bmN0aW9uIj09dHlwZW9mIG4/bjpRKG4pO3JldHVybiB0aGlzLnNlbGVjdChmdW5jdGlvbigpe3JldHVybiB0aGlzLmluc2VydEJlZm9yZShlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxyLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8bnVsbCl9KX0scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWFjaChidCl9LGNsb25lOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNlbGVjdCh0P3h0Om10KX0sZGF0dW06ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/dGhpcy5wcm9wZXJ0eSgiX19kYXRhX18iLHQpOnRoaXMubm9kZSgpLl9fZGF0YV9ffSxvbjpmdW5jdGlvbih0LG4sZSl7dmFyIHIsaSxvPWZ1bmN0aW9uKHQpe3JldHVybiB0LnRyaW0oKS5zcGxpdCgvXnxccysvKS5tYXAoZnVuY3Rpb24odCl7dmFyIG49IiIsZT10LmluZGV4T2YoIi4iKTtyZXR1cm4gZT49MCYmKG49dC5zbGljZShlKzEpLHQ9dC5zbGljZSgwLGUpKSx7dHlwZTp0LG5hbWU6bn19KX0odCsiIiksYT1vLmxlbmd0aDtpZighKGFyZ3VtZW50cy5sZW5ndGg8Mikpe2Zvcih1PW4/VHQ6QXQsbnVsbD09ZSYmKGU9ITEpLHI9MDtyPGE7KytyKXRoaXMuZWFjaCh1KG9bcl0sbixlKSk7cmV0dXJuIHRoaXN9dmFyIHU9dGhpcy5ub2RlKCkuX19vbjtpZih1KWZvcih2YXIgYyxmPTAscz11Lmxlbmd0aDtmPHM7KytmKWZvcihyPTAsYz11W2ZdO3I8YTsrK3IpaWYoKGk9b1tyXSkudHlwZT09PWMudHlwZSYmaS5uYW1lPT09Yy5uYW1lKXJldHVybiBjLnZhbHVlfSxkaXNwYXRjaDpmdW5jdGlvbih0LG4pe3JldHVybiB0aGlzLmVhY2goKCJmdW5jdGlvbiI9PXR5cGVvZiBuP2Z1bmN0aW9uKHQsbil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGt0KHRoaXMsdCxuLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9fTpmdW5jdGlvbih0LG4pe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBrdCh0aGlzLHQsbil9fSkodCxuKSl9fTt2YXIgUnQ9MDtmdW5jdGlvbiBEdCgpe3JldHVybiBuZXcgcXR9ZnVuY3Rpb24gcXQoKXt0aGlzLl89IkAiKygrK1J0KS50b1N0cmluZygzNil9ZnVuY3Rpb24gTHQoKXtmb3IodmFyIG4sZT10LmV2ZW50O249ZS5zb3VyY2VFdmVudDspZT1uO3JldHVybiBlfWZ1bmN0aW9uIFV0KHQsbil7dmFyIGU9dC5vd25lclNWR0VsZW1lbnR8fHQ7aWYoZS5jcmVhdGVTVkdQb2ludCl7dmFyIHI9ZS5jcmVhdGVTVkdQb2ludCgpO3JldHVybiByLng9bi5jbGllbnRYLHIueT1uLmNsaWVudFksWyhyPXIubWF0cml4VHJhbnNmb3JtKHQuZ2V0U2NyZWVuQ1RNKCkuaW52ZXJzZSgpKSkueCxyLnldfXZhciBpPXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJuW24uY2xpZW50WC1pLmxlZnQtdC5jbGllbnRMZWZ0LG4uY2xpZW50WS1pLnRvcC10LmNsaWVudFRvcF19ZnVuY3Rpb24gT3QodCl7dmFyIG49THQoKTtyZXR1cm4gbi5jaGFuZ2VkVG91Y2hlcyYmKG49bi5jaGFuZ2VkVG91Y2hlc1swXSksVXQodCxuKX1mdW5jdGlvbiBCdCh0LG4sZSl7YXJndW1lbnRzLmxlbmd0aDwzJiYoZT1uLG49THQoKS5jaGFuZ2VkVG91Y2hlcyk7Zm9yKHZhciByLGk9MCxvPW4/bi5sZW5ndGg6MDtpPG87KytpKWlmKChyPW5baV0pLmlkZW50aWZpZXI9PT1lKXJldHVybiBVdCh0LHIpO3JldHVybiBudWxsfWZ1bmN0aW9uIFl0KCl7dC5ldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKX1mdW5jdGlvbiBGdCgpe3QuZXZlbnQucHJldmVudERlZmF1bHQoKSx0LmV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpfWZ1bmN0aW9uIEl0KHQpe3ZhciBuPXQuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LGU9enQodCkub24oImRyYWdzdGFydC5kcmFnIixGdCwhMCk7Im9uc2VsZWN0c3RhcnQiaW4gbj9lLm9uKCJzZWxlY3RzdGFydC5kcmFnIixGdCwhMCk6KG4uX19ub3NlbGVjdD1uLnN0eWxlLk1velVzZXJTZWxlY3Qsbi5zdHlsZS5Nb3pVc2VyU2VsZWN0PSJub25lIil9ZnVuY3Rpb24ganQodCxuKXt2YXIgZT10LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxyPXp0KHQpLm9uKCJkcmFnc3RhcnQuZHJhZyIsbnVsbCk7biYmKHIub24oImNsaWNrLmRyYWciLEZ0LCEwKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ci5vbigiY2xpY2suZHJhZyIsbnVsbCl9LDApKSwib25zZWxlY3RzdGFydCJpbiBlP3Iub24oInNlbGVjdHN0YXJ0LmRyYWciLG51bGwpOihlLnN0eWxlLk1velVzZXJTZWxlY3Q9ZS5fX25vc2VsZWN0LGRlbGV0ZSBlLl9fbm9zZWxlY3QpfWZ1bmN0aW9uIEh0KHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0fX1mdW5jdGlvbiBYdCh0LG4sZSxyLGksbyxhLHUsYyxmKXt0aGlzLnRhcmdldD10LHRoaXMudHlwZT1uLHRoaXMuc3ViamVjdD1lLHRoaXMuaWRlbnRpZmllcj1yLHRoaXMuYWN0aXZlPWksdGhpcy54PW8sdGhpcy55PWEsdGhpcy5keD11LHRoaXMuZHk9Yyx0aGlzLl89Zn1mdW5jdGlvbiBHdCgpe3JldHVybiF0LmV2ZW50LmJ1dHRvbn1mdW5jdGlvbiBWdCgpe3JldHVybiB0aGlzLnBhcmVudE5vZGV9ZnVuY3Rpb24gJHQobil7cmV0dXJuIG51bGw9PW4/e3g6dC5ldmVudC54LHk6dC5ldmVudC55fTpufWZ1bmN0aW9uIFd0KCl7cmV0dXJuIm9udG91Y2hzdGFydCJpbiB0aGlzfWZ1bmN0aW9uIFp0KHQsbixlKXt0LnByb3RvdHlwZT1uLnByb3RvdHlwZT1lLGUuY29uc3RydWN0b3I9dH1mdW5jdGlvbiBRdCh0LG4pe3ZhciBlPU9iamVjdC5jcmVhdGUodC5wcm90b3R5cGUpO2Zvcih2YXIgciBpbiBuKWVbcl09bltyXTtyZXR1cm4gZX1mdW5jdGlvbiBKdCgpe31xdC5wcm90b3R5cGU9RHQucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpxdCxnZXQ6ZnVuY3Rpb24odCl7Zm9yKHZhciBuPXRoaXMuXzshKG4gaW4gdCk7KWlmKCEodD10LnBhcmVudE5vZGUpKXJldHVybjtyZXR1cm4gdFtuXX0sc2V0OmZ1bmN0aW9uKHQsbil7cmV0dXJuIHRbdGhpcy5fXT1ufSxyZW1vdmU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuXyBpbiB0JiZkZWxldGUgdFt0aGlzLl9dfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLl99fSxYdC5wcm90b3R5cGUub249ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl8ub24uYXBwbHkodGhpcy5fLGFyZ3VtZW50cyk7cmV0dXJuIHQ9PT10aGlzLl8/dGhpczp0fTt2YXIgS3Q9IlxccyooWystXT9cXGQrKVxccyoiLHRuPSJcXHMqKFsrLV0/XFxkKlxcLj9cXGQrKD86W2VFXVsrLV0/XFxkKyk/KVxccyoiLG5uPSJcXHMqKFsrLV0/XFxkKlxcLj9cXGQrKD86W2VFXVsrLV0/XFxkKyk/KSVcXHMqIixlbj0vXiMoWzAtOWEtZl17M30pJC8scm49L14jKFswLTlhLWZdezZ9KSQvLG9uPW5ldyBSZWdFeHAoIl5yZ2JcXCgiK1tLdCxLdCxLdF0rIlxcKSQiKSxhbj1uZXcgUmVnRXhwKCJecmdiXFwoIitbbm4sbm4sbm5dKyJcXCkkIiksdW49bmV3IFJlZ0V4cCgiXnJnYmFcXCgiK1tLdCxLdCxLdCx0bl0rIlxcKSQiKSxjbj1uZXcgUmVnRXhwKCJecmdiYVxcKCIrW25uLG5uLG5uLHRuXSsiXFwpJCIpLGZuPW5ldyBSZWdFeHAoIl5oc2xcXCgiK1t0bixubixubl0rIlxcKSQiKSxzbj1uZXcgUmVnRXhwKCJeaHNsYVxcKCIrW3RuLG5uLG5uLHRuXSsiXFwpJCIpLGxuPXthbGljZWJsdWU6MTU3OTIzODMsYW50aXF1ZXdoaXRlOjE2NDQ0Mzc1LGFxdWE6NjU1MzUsYXF1YW1hcmluZTo4Mzg4NTY0LGF6dXJlOjE1Nzk0MTc1LGJlaWdlOjE2MTE5MjYwLGJpc3F1ZToxNjc3MDI0NCxibGFjazowLGJsYW5jaGVkYWxtb25kOjE2NzcyMDQ1LGJsdWU6MjU1LGJsdWV2aW9sZXQ6OTA1NTIwMixicm93bjoxMDgyNDIzNCxidXJseXdvb2Q6MTQ1OTYyMzEsY2FkZXRibHVlOjYyNjY1MjgsY2hhcnRyZXVzZTo4Mzg4MzUyLGNob2NvbGF0ZToxMzc4OTQ3MCxjb3JhbDoxNjc0NDI3Mixjb3JuZmxvd2VyYmx1ZTo2NTkxOTgxLGNvcm5zaWxrOjE2Nzc1Mzg4LGNyaW1zb246MTQ0MjMxMDAsY3lhbjo2NTUzNSxkYXJrYmx1ZToxMzksZGFya2N5YW46MzU3MjMsZGFya2dvbGRlbnJvZDoxMjA5MjkzOSxkYXJrZ3JheToxMTExOTAxNyxkYXJrZ3JlZW46MjU2MDAsZGFya2dyZXk6MTExMTkwMTcsZGFya2toYWtpOjEyNDMzMjU5LGRhcmttYWdlbnRhOjkxMDk2NDMsZGFya29saXZlZ3JlZW46NTU5Nzk5OSxkYXJrb3JhbmdlOjE2NzQ3NTIwLGRhcmtvcmNoaWQ6MTAwNDAwMTIsZGFya3JlZDo5MTA5NTA0LGRhcmtzYWxtb246MTUzMDg0MTAsZGFya3NlYWdyZWVuOjk0MTk5MTksZGFya3NsYXRlYmx1ZTo0NzM0MzQ3LGRhcmtzbGF0ZWdyYXk6MzEwMDQ5NSxkYXJrc2xhdGVncmV5OjMxMDA0OTUsZGFya3R1cnF1b2lzZTo1Mjk0NSxkYXJrdmlvbGV0Ojk2OTk1MzksZGVlcHBpbms6MTY3MTY5NDcsZGVlcHNreWJsdWU6NDkxNTEsZGltZ3JheTo2OTA4MjY1LGRpbWdyZXk6NjkwODI2NSxkb2RnZXJibHVlOjIwMDMxOTksZmlyZWJyaWNrOjExNjc0MTQ2LGZsb3JhbHdoaXRlOjE2Nzc1OTIwLGZvcmVzdGdyZWVuOjIyNjM4NDIsZnVjaHNpYToxNjcxMTkzNSxnYWluc2Jvcm86MTQ0NzQ0NjAsZ2hvc3R3aGl0ZToxNjMxNjY3MSxnb2xkOjE2NzY2NzIwLGdvbGRlbnJvZDoxNDMyOTEyMCxncmF5Ojg0MjE1MDQsZ3JlZW46MzI3NjgsZ3JlZW55ZWxsb3c6MTE0MDMwNTUsZ3JleTo4NDIxNTA0LGhvbmV5ZGV3OjE1Nzk0MTYwLGhvdHBpbms6MTY3Mzg3NDAsaW5kaWFucmVkOjEzNDU4NTI0LGluZGlnbzo0OTE1MzMwLGl2b3J5OjE2Nzc3MjAwLGtoYWtpOjE1Nzg3NjYwLGxhdmVuZGVyOjE1MTMyNDEwLGxhdmVuZGVyYmx1c2g6MTY3NzMzNjUsbGF3bmdyZWVuOjgxOTA5NzYsbGVtb25jaGlmZm9uOjE2Nzc1ODg1LGxpZ2h0Ymx1ZToxMTM5MzI1NCxsaWdodGNvcmFsOjE1NzYxNTM2LGxpZ2h0Y3lhbjoxNDc0NTU5OSxsaWdodGdvbGRlbnJvZHllbGxvdzoxNjQ0ODIxMCxsaWdodGdyYXk6MTM4ODIzMjMsbGlnaHRncmVlbjo5NDk4MjU2LGxpZ2h0Z3JleToxMzg4MjMyMyxsaWdodHBpbms6MTY3NTg0NjUsbGlnaHRzYWxtb246MTY3NTI3NjIsbGlnaHRzZWFncmVlbjoyMTQyODkwLGxpZ2h0c2t5Ymx1ZTo4OTAwMzQ2LGxpZ2h0c2xhdGVncmF5Ojc4MzM3NTMsbGlnaHRzbGF0ZWdyZXk6NzgzMzc1MyxsaWdodHN0ZWVsYmx1ZToxMTU4NDczNCxsaWdodHllbGxvdzoxNjc3NzE4NCxsaW1lOjY1MjgwLGxpbWVncmVlbjozMzI5MzMwLGxpbmVuOjE2NDQ1NjcwLG1hZ2VudGE6MTY3MTE5MzUsbWFyb29uOjgzODg2MDgsbWVkaXVtYXF1YW1hcmluZTo2NzM3MzIyLG1lZGl1bWJsdWU6MjA1LG1lZGl1bW9yY2hpZDoxMjIxMTY2NyxtZWRpdW1wdXJwbGU6OTY2MjY4MyxtZWRpdW1zZWFncmVlbjozOTc4MDk3LG1lZGl1bXNsYXRlYmx1ZTo4MDg3NzkwLG1lZGl1bXNwcmluZ2dyZWVuOjY0MTU0LG1lZGl1bXR1cnF1b2lzZTo0NzcyMzAwLG1lZGl1bXZpb2xldHJlZDoxMzA0NzE3MyxtaWRuaWdodGJsdWU6MTY0NDkxMixtaW50Y3JlYW06MTYxMjE4NTAsbWlzdHlyb3NlOjE2NzcwMjczLG1vY2Nhc2luOjE2NzcwMjI5LG5hdmFqb3doaXRlOjE2NzY4Njg1LG5hdnk6MTI4LG9sZGxhY2U6MTY2NDM1NTgsb2xpdmU6ODQyMTM3NixvbGl2ZWRyYWI6NzA0ODczOSxvcmFuZ2U6MTY3NTM5MjAsb3JhbmdlcmVkOjE2NzI5MzQ0LG9yY2hpZDoxNDMxNTczNCxwYWxlZ29sZGVucm9kOjE1NjU3MTMwLHBhbGVncmVlbjoxMDAyNTg4MCxwYWxldHVycXVvaXNlOjExNTI5OTY2LHBhbGV2aW9sZXRyZWQ6MTQzODEyMDMscGFwYXlhd2hpcDoxNjc3MzA3NyxwZWFjaHB1ZmY6MTY3Njc2NzMscGVydToxMzQ2ODk5MSxwaW5rOjE2NzYxMDM1LHBsdW06MTQ1MjQ2MzcscG93ZGVyYmx1ZToxMTU5MTkxMCxwdXJwbGU6ODM4ODczNixyZWJlY2NhcHVycGxlOjY2OTc4ODEscmVkOjE2NzExNjgwLHJvc3licm93bjoxMjM1NzUxOSxyb3lhbGJsdWU6NDI4Njk0NSxzYWRkbGVicm93bjo5MTI3MTg3LHNhbG1vbjoxNjQxNjg4MixzYW5keWJyb3duOjE2MDMyODY0LHNlYWdyZWVuOjMwNTAzMjcsc2Vhc2hlbGw6MTY3NzQ2Mzgsc2llbm5hOjEwNTA2Nzk3LHNpbHZlcjoxMjYzMjI1Nixza3libHVlOjg5MDAzMzEsc2xhdGVibHVlOjY5NzAwNjEsc2xhdGVncmF5OjczNzI5NDQsc2xhdGVncmV5OjczNzI5NDQsc25vdzoxNjc3NTkzMCxzcHJpbmdncmVlbjo2NTQwNyxzdGVlbGJsdWU6NDYyMDk4MCx0YW46MTM4MDg3ODAsdGVhbDozMjg5Nix0aGlzdGxlOjE0MjA0ODg4LHRvbWF0bzoxNjczNzA5NSx0dXJxdW9pc2U6NDI1MTg1Nix2aW9sZXQ6MTU2MzEwODYsd2hlYXQ6MTYxMTMzMzEsd2hpdGU6MTY3NzcyMTUsd2hpdGVzbW9rZToxNjExOTI4NSx5ZWxsb3c6MTY3NzY5NjAseWVsbG93Z3JlZW46MTAxNDUwNzR9O2Z1bmN0aW9uIGhuKHQpe3ZhciBuO3JldHVybiB0PSh0KyIiKS50cmltKCkudG9Mb3dlckNhc2UoKSwobj1lbi5leGVjKHQpKT9uZXcgeW4oKG49cGFyc2VJbnQoblsxXSwxNikpPj44JjE1fG4+PjQmMjQwLG4+PjQmMTV8MjQwJm4sKDE1Jm4pPDw0fDE1Jm4sMSk6KG49cm4uZXhlYyh0KSk/ZG4ocGFyc2VJbnQoblsxXSwxNikpOihuPW9uLmV4ZWModCkpP25ldyB5bihuWzFdLG5bMl0sblszXSwxKToobj1hbi5leGVjKHQpKT9uZXcgeW4oMjU1Km5bMV0vMTAwLDI1NSpuWzJdLzEwMCwyNTUqblszXS8xMDAsMSk6KG49dW4uZXhlYyh0KSk/cG4oblsxXSxuWzJdLG5bM10sbls0XSk6KG49Y24uZXhlYyh0KSk/cG4oMjU1Km5bMV0vMTAwLDI1NSpuWzJdLzEwMCwyNTUqblszXS8xMDAsbls0XSk6KG49Zm4uZXhlYyh0KSk/Ym4oblsxXSxuWzJdLzEwMCxuWzNdLzEwMCwxKToobj1zbi5leGVjKHQpKT9ibihuWzFdLG5bMl0vMTAwLG5bM10vMTAwLG5bNF0pOmxuLmhhc093blByb3BlcnR5KHQpP2RuKGxuW3RdKToidHJhbnNwYXJlbnQiPT09dD9uZXcgeW4oTmFOLE5hTixOYU4sMCk6bnVsbH1mdW5jdGlvbiBkbih0KXtyZXR1cm4gbmV3IHluKHQ+PjE2JjI1NSx0Pj44JjI1NSwyNTUmdCwxKX1mdW5jdGlvbiBwbih0LG4sZSxyKXtyZXR1cm4gcjw9MCYmKHQ9bj1lPU5hTiksbmV3IHluKHQsbixlLHIpfWZ1bmN0aW9uIHZuKHQpe3JldHVybiB0IGluc3RhbmNlb2YgSnR8fCh0PWhuKHQpKSx0P25ldyB5bigodD10LnJnYigpKS5yLHQuZyx0LmIsdC5vcGFjaXR5KTpuZXcgeW59ZnVuY3Rpb24gZ24odCxuLGUscil7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3ZuKHQpOm5ldyB5bih0LG4sZSxudWxsPT1yPzE6cil9ZnVuY3Rpb24geW4odCxuLGUscil7dGhpcy5yPSt0LHRoaXMuZz0rbix0aGlzLmI9K2UsdGhpcy5vcGFjaXR5PStyfWZ1bmN0aW9uIF9uKHQpe3JldHVybigodD1NYXRoLm1heCgwLE1hdGgubWluKDI1NSxNYXRoLnJvdW5kKHQpfHwwKSkpPDE2PyIwIjoiIikrdC50b1N0cmluZygxNil9ZnVuY3Rpb24gYm4odCxuLGUscil7cmV0dXJuIHI8PTA/dD1uPWU9TmFOOmU8PTB8fGU+PTE/dD1uPU5hTjpuPD0wJiYodD1OYU4pLG5ldyB4bih0LG4sZSxyKX1mdW5jdGlvbiBtbih0LG4sZSxyKXtyZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIHhuKXJldHVybiBuZXcgeG4odC5oLHQucyx0LmwsdC5vcGFjaXR5KTtpZih0IGluc3RhbmNlb2YgSnR8fCh0PWhuKHQpKSwhdClyZXR1cm4gbmV3IHhuO2lmKHQgaW5zdGFuY2VvZiB4bilyZXR1cm4gdDt2YXIgbj0odD10LnJnYigpKS5yLzI1NSxlPXQuZy8yNTUscj10LmIvMjU1LGk9TWF0aC5taW4obixlLHIpLG89TWF0aC5tYXgobixlLHIpLGE9TmFOLHU9by1pLGM9KG8raSkvMjtyZXR1cm4gdT8oYT1uPT09bz8oZS1yKS91KzYqKGU8cik6ZT09PW8/KHItbikvdSsyOihuLWUpL3UrNCx1Lz1jPC41P28raToyLW8taSxhKj02MCk6dT1jPjAmJmM8MT8wOmEsbmV3IHhuKGEsdSxjLHQub3BhY2l0eSl9KHQpOm5ldyB4bih0LG4sZSxudWxsPT1yPzE6cil9ZnVuY3Rpb24geG4odCxuLGUscil7dGhpcy5oPSt0LHRoaXMucz0rbix0aGlzLmw9K2UsdGhpcy5vcGFjaXR5PStyfWZ1bmN0aW9uIHduKHQsbixlKXtyZXR1cm4gMjU1Kih0PDYwP24rKGUtbikqdC82MDp0PDE4MD9lOnQ8MjQwP24rKGUtbikqKDI0MC10KS82MDpuKX1adChKdCxobix7ZGlzcGxheWFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZ2IoKS5kaXNwbGF5YWJsZSgpfSxoZXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZ2IoKS5oZXgoKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZ2IoKSsiIn19KSxadCh5bixnbixRdChKdCx7YnJpZ2h0ZXI6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9bnVsbD09dD8xLy43Ok1hdGgucG93KDEvLjcsdCksbmV3IHluKHRoaXMucip0LHRoaXMuZyp0LHRoaXMuYip0LHRoaXMub3BhY2l0eSl9LGRhcmtlcjpmdW5jdGlvbih0KXtyZXR1cm4gdD1udWxsPT10Py43Ok1hdGgucG93KC43LHQpLG5ldyB5bih0aGlzLnIqdCx0aGlzLmcqdCx0aGlzLmIqdCx0aGlzLm9wYWNpdHkpfSxyZ2I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sZGlzcGxheWFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gMDw9dGhpcy5yJiZ0aGlzLnI8PTI1NSYmMDw9dGhpcy5nJiZ0aGlzLmc8PTI1NSYmMDw9dGhpcy5iJiZ0aGlzLmI8PTI1NSYmMDw9dGhpcy5vcGFjaXR5JiZ0aGlzLm9wYWNpdHk8PTF9LGhleDpmdW5jdGlvbigpe3JldHVybiIjIitfbih0aGlzLnIpK19uKHRoaXMuZykrX24odGhpcy5iKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wYWNpdHk7cmV0dXJuKDE9PT0odD1pc05hTih0KT8xOk1hdGgubWF4KDAsTWF0aC5taW4oMSx0KSkpPyJyZ2IoIjoicmdiYSgiKStNYXRoLm1heCgwLE1hdGgubWluKDI1NSxNYXRoLnJvdW5kKHRoaXMucil8fDApKSsiLCAiK01hdGgubWF4KDAsTWF0aC5taW4oMjU1LE1hdGgucm91bmQodGhpcy5nKXx8MCkpKyIsICIrTWF0aC5tYXgoMCxNYXRoLm1pbigyNTUsTWF0aC5yb3VuZCh0aGlzLmIpfHwwKSkrKDE9PT10PyIpIjoiLCAiK3QrIikiKX19KSksWnQoeG4sbW4sUXQoSnQse2JyaWdodGVyOmZ1bmN0aW9uKHQpe3JldHVybiB0PW51bGw9PXQ/MS8uNzpNYXRoLnBvdygxLy43LHQpLG5ldyB4bih0aGlzLmgsdGhpcy5zLHRoaXMubCp0LHRoaXMub3BhY2l0eSl9LGRhcmtlcjpmdW5jdGlvbih0KXtyZXR1cm4gdD1udWxsPT10Py43Ok1hdGgucG93KC43LHQpLG5ldyB4bih0aGlzLmgsdGhpcy5zLHRoaXMubCp0LHRoaXMub3BhY2l0eSl9LHJnYjpmdW5jdGlvbigpe3ZhciB0PXRoaXMuaCUzNjArMzYwKih0aGlzLmg8MCksbj1pc05hTih0KXx8aXNOYU4odGhpcy5zKT8wOnRoaXMucyxlPXRoaXMubCxyPWUrKGU8LjU/ZToxLWUpKm4saT0yKmUtcjtyZXR1cm4gbmV3IHluKHduKHQ+PTI0MD90LTI0MDp0KzEyMCxpLHIpLHduKHQsaSxyKSx3bih0PDEyMD90KzI0MDp0LTEyMCxpLHIpLHRoaXMub3BhY2l0eSl9LGRpc3BsYXlhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuKDA8PXRoaXMucyYmdGhpcy5zPD0xfHxpc05hTih0aGlzLnMpKSYmMDw9dGhpcy5sJiZ0aGlzLmw8PTEmJjA8PXRoaXMub3BhY2l0eSYmdGhpcy5vcGFjaXR5PD0xfX0pKTt2YXIgTW49TWF0aC5QSS8xODAsTm49MTgwL01hdGguUEksQW49Ljk2NDIyLFRuPTEsU249LjgyNTIxLGtuPTQvMjksRW49Ni8yOSxDbj0zKkVuKkVuLFBuPUVuKkVuKkVuO2Z1bmN0aW9uIHpuKHQpe2lmKHQgaW5zdGFuY2VvZiBEbilyZXR1cm4gbmV3IERuKHQubCx0LmEsdC5iLHQub3BhY2l0eSk7aWYodCBpbnN0YW5jZW9mIEZuKXtpZihpc05hTih0LmgpKXJldHVybiBuZXcgRG4odC5sLDAsMCx0Lm9wYWNpdHkpO3ZhciBuPXQuaCpNbjtyZXR1cm4gbmV3IERuKHQubCxNYXRoLmNvcyhuKSp0LmMsTWF0aC5zaW4obikqdC5jLHQub3BhY2l0eSl9dCBpbnN0YW5jZW9mIHlufHwodD12bih0KSk7dmFyIGUscixpPU9uKHQuciksbz1Pbih0LmcpLGE9T24odC5iKSx1PXFuKCguMjIyNTA0NSppKy43MTY4Nzg2Km8rLjA2MDYxNjkqYSkvVG4pO3JldHVybiBpPT09byYmbz09PWE/ZT1yPXU6KGU9cW4oKC40MzYwNzQ3KmkrLjM4NTA2NDkqbysuMTQzMDgwNCphKS9Bbikscj1xbigoLjAxMzkzMjIqaSsuMDk3MTA0NSpvKy43MTQxNzMzKmEpL1NuKSksbmV3IERuKDExNip1LTE2LDUwMCooZS11KSwyMDAqKHUtciksdC5vcGFjaXR5KX1mdW5jdGlvbiBSbih0LG4sZSxyKXtyZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/em4odCk6bmV3IERuKHQsbixlLG51bGw9PXI/MTpyKX1mdW5jdGlvbiBEbih0LG4sZSxyKXt0aGlzLmw9K3QsdGhpcy5hPStuLHRoaXMuYj0rZSx0aGlzLm9wYWNpdHk9K3J9ZnVuY3Rpb24gcW4odCl7cmV0dXJuIHQ+UG4/TWF0aC5wb3codCwxLzMpOnQvQ24ra259ZnVuY3Rpb24gTG4odCl7cmV0dXJuIHQ+RW4/dCp0KnQ6Q24qKHQta24pfWZ1bmN0aW9uIFVuKHQpe3JldHVybiAyNTUqKHQ8PS4wMDMxMzA4PzEyLjkyKnQ6MS4wNTUqTWF0aC5wb3codCwxLzIuNCktLjA1NSl9ZnVuY3Rpb24gT24odCl7cmV0dXJuKHQvPTI1NSk8PS4wNDA0NT90LzEyLjkyOk1hdGgucG93KCh0Ky4wNTUpLzEuMDU1LDIuNCl9ZnVuY3Rpb24gQm4odCl7aWYodCBpbnN0YW5jZW9mIEZuKXJldHVybiBuZXcgRm4odC5oLHQuYyx0LmwsdC5vcGFjaXR5KTtpZih0IGluc3RhbmNlb2YgRG58fCh0PXpuKHQpKSwwPT09dC5hJiYwPT09dC5iKXJldHVybiBuZXcgRm4oTmFOLDAsdC5sLHQub3BhY2l0eSk7dmFyIG49TWF0aC5hdGFuMih0LmIsdC5hKSpObjtyZXR1cm4gbmV3IEZuKG48MD9uKzM2MDpuLE1hdGguc3FydCh0LmEqdC5hK3QuYip0LmIpLHQubCx0Lm9wYWNpdHkpfWZ1bmN0aW9uIFluKHQsbixlLHIpe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD9Cbih0KTpuZXcgRm4odCxuLGUsbnVsbD09cj8xOnIpfWZ1bmN0aW9uIEZuKHQsbixlLHIpe3RoaXMuaD0rdCx0aGlzLmM9K24sdGhpcy5sPStlLHRoaXMub3BhY2l0eT0rcn1adChEbixSbixRdChKdCx7YnJpZ2h0ZXI6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBEbih0aGlzLmwrMTgqKG51bGw9PXQ/MTp0KSx0aGlzLmEsdGhpcy5iLHRoaXMub3BhY2l0eSl9LGRhcmtlcjpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IERuKHRoaXMubC0xOCoobnVsbD09dD8xOnQpLHRoaXMuYSx0aGlzLmIsdGhpcy5vcGFjaXR5KX0scmdiOmZ1bmN0aW9uKCl7dmFyIHQ9KHRoaXMubCsxNikvMTE2LG49aXNOYU4odGhpcy5hKT90OnQrdGhpcy5hLzUwMCxlPWlzTmFOKHRoaXMuYik/dDp0LXRoaXMuYi8yMDA7cmV0dXJuIG5ldyB5bihVbigzLjEzMzg1NjEqKG49QW4qTG4obikpLTEuNjE2ODY2NyoodD1UbipMbih0KSktLjQ5MDYxNDYqKGU9U24qTG4oZSkpKSxVbigtLjk3ODc2ODQqbisxLjkxNjE0MTUqdCsuMDMzNDU0KmUpLFVuKC4wNzE5NDUzKm4tLjIyODk5MTQqdCsxLjQwNTI0MjcqZSksdGhpcy5vcGFjaXR5KX19KSksWnQoRm4sWW4sUXQoSnQse2JyaWdodGVyOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgRm4odGhpcy5oLHRoaXMuYyx0aGlzLmwrMTgqKG51bGw9PXQ/MTp0KSx0aGlzLm9wYWNpdHkpfSxkYXJrZXI6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBGbih0aGlzLmgsdGhpcy5jLHRoaXMubC0xOCoobnVsbD09dD8xOnQpLHRoaXMub3BhY2l0eSl9LHJnYjpmdW5jdGlvbigpe3JldHVybiB6bih0aGlzKS5yZ2IoKX19KSk7dmFyIEluPS0uMTQ4NjEsam49MS43ODI3NyxIbj0tLjI5MjI3LFhuPS0uOTA2NDksR249MS45NzI5NCxWbj1HbipYbiwkbj1HbipqbixXbj1qbipIbi1YbipJbjtmdW5jdGlvbiBabih0LG4sZSxyKXtyZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIFFuKXJldHVybiBuZXcgUW4odC5oLHQucyx0LmwsdC5vcGFjaXR5KTt0IGluc3RhbmNlb2YgeW58fCh0PXZuKHQpKTt2YXIgbj10LnIvMjU1LGU9dC5nLzI1NSxyPXQuYi8yNTUsaT0oV24qcitWbipuLSRuKmUpLyhXbitWbi0kbiksbz1yLWksYT0oR24qKGUtaSktSG4qbykvWG4sdT1NYXRoLnNxcnQoYSphK28qbykvKEduKmkqKDEtaSkpLGM9dT9NYXRoLmF0YW4yKGEsbykqTm4tMTIwOk5hTjtyZXR1cm4gbmV3IFFuKGM8MD9jKzM2MDpjLHUsaSx0Lm9wYWNpdHkpfSh0KTpuZXcgUW4odCxuLGUsbnVsbD09cj8xOnIpfWZ1bmN0aW9uIFFuKHQsbixlLHIpe3RoaXMuaD0rdCx0aGlzLnM9K24sdGhpcy5sPStlLHRoaXMub3BhY2l0eT0rcn1mdW5jdGlvbiBKbih0LG4sZSxyLGkpe3ZhciBvPXQqdCxhPW8qdDtyZXR1cm4oKDEtMyp0KzMqby1hKSpuKyg0LTYqbyszKmEpKmUrKDErMyp0KzMqby0zKmEpKnIrYSppKS82fWZ1bmN0aW9uIEtuKHQpe3ZhciBuPXQubGVuZ3RoLTE7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciByPWU8PTA/ZT0wOmU+PTE/KGU9MSxuLTEpOk1hdGguZmxvb3IoZSpuKSxpPXRbcl0sbz10W3IrMV0sYT1yPjA/dFtyLTFdOjIqaS1vLHU9cjxuLTE/dFtyKzJdOjIqby1pO3JldHVybiBKbigoZS1yL24pKm4sYSxpLG8sdSl9fWZ1bmN0aW9uIHRlKHQpe3ZhciBuPXQubGVuZ3RoO3JldHVybiBmdW5jdGlvbihlKXt2YXIgcj1NYXRoLmZsb29yKCgoZSU9MSk8MD8rK2U6ZSkqbiksaT10WyhyK24tMSklbl0sbz10W3Ilbl0sYT10WyhyKzEpJW5dLHU9dFsocisyKSVuXTtyZXR1cm4gSm4oKGUtci9uKSpuLGksbyxhLHUpfX1mdW5jdGlvbiBuZSh0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdH19ZnVuY3Rpb24gZWUodCxuKXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIHQrZSpufX1mdW5jdGlvbiByZSh0LG4pe3ZhciBlPW4tdDtyZXR1cm4gZT9lZSh0LGU+MTgwfHxlPC0xODA/ZS0zNjAqTWF0aC5yb3VuZChlLzM2MCk6ZSk6bmUoaXNOYU4odCk/bjp0KX1mdW5jdGlvbiBpZSh0KXtyZXR1cm4gMT09KHQ9K3QpP29lOmZ1bmN0aW9uKG4sZSl7cmV0dXJuIGUtbj9mdW5jdGlvbih0LG4sZSl7cmV0dXJuIHQ9TWF0aC5wb3codCxlKSxuPU1hdGgucG93KG4sZSktdCxlPTEvZSxmdW5jdGlvbihyKXtyZXR1cm4gTWF0aC5wb3codCtyKm4sZSl9fShuLGUsdCk6bmUoaXNOYU4obik/ZTpuKX19ZnVuY3Rpb24gb2UodCxuKXt2YXIgZT1uLXQ7cmV0dXJuIGU/ZWUodCxlKTpuZShpc05hTih0KT9uOnQpfVp0KFFuLFpuLFF0KEp0LHticmlnaHRlcjpmdW5jdGlvbih0KXtyZXR1cm4gdD1udWxsPT10PzEvLjc6TWF0aC5wb3coMS8uNyx0KSxuZXcgUW4odGhpcy5oLHRoaXMucyx0aGlzLmwqdCx0aGlzLm9wYWNpdHkpfSxkYXJrZXI6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9bnVsbD09dD8uNzpNYXRoLnBvdyguNyx0KSxuZXcgUW4odGhpcy5oLHRoaXMucyx0aGlzLmwqdCx0aGlzLm9wYWNpdHkpfSxyZ2I6ZnVuY3Rpb24oKXt2YXIgdD1pc05hTih0aGlzLmgpPzA6KHRoaXMuaCsxMjApKk1uLG49K3RoaXMubCxlPWlzTmFOKHRoaXMucyk/MDp0aGlzLnMqbiooMS1uKSxyPU1hdGguY29zKHQpLGk9TWF0aC5zaW4odCk7cmV0dXJuIG5ldyB5bigyNTUqKG4rZSooSW4qcitqbippKSksMjU1KihuK2UqKEhuKnIrWG4qaSkpLDI1NSoobitlKihHbipyKSksdGhpcy5vcGFjaXR5KX19KSk7dmFyIGFlPWZ1bmN0aW9uIHQobil7dmFyIGU9aWUobik7ZnVuY3Rpb24gcih0LG4pe3ZhciByPWUoKHQ9Z24odCkpLnIsKG49Z24obikpLnIpLGk9ZSh0Lmcsbi5nKSxvPWUodC5iLG4uYiksYT1vZSh0Lm9wYWNpdHksbi5vcGFjaXR5KTtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHQucj1yKG4pLHQuZz1pKG4pLHQuYj1vKG4pLHQub3BhY2l0eT1hKG4pLHQrIiJ9fXJldHVybiByLmdhbW1hPXQscn0oMSk7ZnVuY3Rpb24gdWUodCl7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciBlLHIsaT1uLmxlbmd0aCxvPW5ldyBBcnJheShpKSxhPW5ldyBBcnJheShpKSx1PW5ldyBBcnJheShpKTtmb3IoZT0wO2U8aTsrK2Upcj1nbihuW2VdKSxvW2VdPXIucnx8MCxhW2VdPXIuZ3x8MCx1W2VdPXIuYnx8MDtyZXR1cm4gbz10KG8pLGE9dChhKSx1PXQodSksci5vcGFjaXR5PTEsZnVuY3Rpb24odCl7cmV0dXJuIHIucj1vKHQpLHIuZz1hKHQpLHIuYj11KHQpLHIrIiJ9fX12YXIgY2U9dWUoS24pLGZlPXVlKHRlKTtmdW5jdGlvbiBzZSh0LG4pe3ZhciBlLHI9bj9uLmxlbmd0aDowLGk9dD9NYXRoLm1pbihyLHQubGVuZ3RoKTowLG89bmV3IEFycmF5KGkpLGE9bmV3IEFycmF5KHIpO2ZvcihlPTA7ZTxpOysrZSlvW2VdPXllKHRbZV0sbltlXSk7Zm9yKDtlPHI7KytlKWFbZV09bltlXTtyZXR1cm4gZnVuY3Rpb24odCl7Zm9yKGU9MDtlPGk7KytlKWFbZV09b1tlXSh0KTtyZXR1cm4gYX19ZnVuY3Rpb24gbGUodCxuKXt2YXIgZT1uZXcgRGF0ZTtyZXR1cm4gbi09dD0rdCxmdW5jdGlvbihyKXtyZXR1cm4gZS5zZXRUaW1lKHQrbipyKSxlfX1mdW5jdGlvbiBoZSh0LG4pe3JldHVybiBuLT10PSt0LGZ1bmN0aW9uKGUpe3JldHVybiB0K24qZX19ZnVuY3Rpb24gZGUodCxuKXt2YXIgZSxyPXt9LGk9e307Zm9yKGUgaW4gbnVsbCE9PXQmJiJvYmplY3QiPT10eXBlb2YgdHx8KHQ9e30pLG51bGwhPT1uJiYib2JqZWN0Ij09dHlwZW9mIG58fChuPXt9KSxuKWUgaW4gdD9yW2VdPXllKHRbZV0sbltlXSk6aVtlXT1uW2VdO3JldHVybiBmdW5jdGlvbih0KXtmb3IoZSBpbiByKWlbZV09cltlXSh0KTtyZXR1cm4gaX19dmFyIHBlPS9bLStdPyg/OlxkK1wuP1xkKnxcLj9cZCspKD86W2VFXVstK10/XGQrKT8vZyx2ZT1uZXcgUmVnRXhwKHBlLnNvdXJjZSwiZyIpO2Z1bmN0aW9uIGdlKHQsbil7dmFyIGUscixpLG89cGUubGFzdEluZGV4PXZlLmxhc3RJbmRleD0wLGE9LTEsdT1bXSxjPVtdO2Zvcih0Kz0iIixuKz0iIjsoZT1wZS5leGVjKHQpKSYmKHI9dmUuZXhlYyhuKSk7KShpPXIuaW5kZXgpPm8mJihpPW4uc2xpY2UobyxpKSx1W2FdP3VbYV0rPWk6dVsrK2FdPWkpLChlPWVbMF0pPT09KHI9clswXSk/dVthXT91W2FdKz1yOnVbKythXT1yOih1WysrYV09bnVsbCxjLnB1c2goe2k6YSx4OmhlKGUscil9KSksbz12ZS5sYXN0SW5kZXg7cmV0dXJuIG88bi5sZW5ndGgmJihpPW4uc2xpY2UobyksdVthXT91W2FdKz1pOnVbKythXT1pKSx1Lmxlbmd0aDwyP2NbMF0/ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiB0KG4pKyIifX0oY1swXS54KTpmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdH19KG4pOihuPWMubGVuZ3RoLGZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxyPTA7cjxuOysrcil1WyhlPWNbcl0pLmldPWUueCh0KTtyZXR1cm4gdS5qb2luKCIiKX0pfWZ1bmN0aW9uIHllKHQsbil7dmFyIGUscj10eXBlb2YgbjtyZXR1cm4gbnVsbD09bnx8ImJvb2xlYW4iPT09cj9uZShuKTooIm51bWJlciI9PT1yP2hlOiJzdHJpbmciPT09cj8oZT1obihuKSk/KG49ZSxhZSk6Z2U6biBpbnN0YW5jZW9mIGhuP2FlOm4gaW5zdGFuY2VvZiBEYXRlP2xlOkFycmF5LmlzQXJyYXkobik/c2U6ImZ1bmN0aW9uIiE9dHlwZW9mIG4udmFsdWVPZiYmImZ1bmN0aW9uIiE9dHlwZW9mIG4udG9TdHJpbmd8fGlzTmFOKG4pP2RlOmhlKSh0LG4pfWZ1bmN0aW9uIF9lKHQsbil7cmV0dXJuIG4tPXQ9K3QsZnVuY3Rpb24oZSl7cmV0dXJuIE1hdGgucm91bmQodCtuKmUpfX12YXIgYmUsbWUseGUsd2UsTWU9MTgwL01hdGguUEksTmU9e3RyYW5zbGF0ZVg6MCx0cmFuc2xhdGVZOjAscm90YXRlOjAsc2tld1g6MCxzY2FsZVg6MSxzY2FsZVk6MX07ZnVuY3Rpb24gQWUodCxuLGUscixpLG8pe3ZhciBhLHUsYztyZXR1cm4oYT1NYXRoLnNxcnQodCp0K24qbikpJiYodC89YSxuLz1hKSwoYz10KmUrbipyKSYmKGUtPXQqYyxyLT1uKmMpLCh1PU1hdGguc3FydChlKmUrcipyKSkmJihlLz11LHIvPXUsYy89dSksdCpyPG4qZSYmKHQ9LXQsbj0tbixjPS1jLGE9LWEpLHt0cmFuc2xhdGVYOmksdHJhbnNsYXRlWTpvLHJvdGF0ZTpNYXRoLmF0YW4yKG4sdCkqTWUsc2tld1g6TWF0aC5hdGFuKGMpKk1lLHNjYWxlWDphLHNjYWxlWTp1fX1mdW5jdGlvbiBUZSh0LG4sZSxyKXtmdW5jdGlvbiBpKHQpe3JldHVybiB0Lmxlbmd0aD90LnBvcCgpKyIgIjoiIn1yZXR1cm4gZnVuY3Rpb24obyxhKXt2YXIgdT1bXSxjPVtdO3JldHVybiBvPXQobyksYT10KGEpLGZ1bmN0aW9uKHQscixpLG8sYSx1KXtpZih0IT09aXx8ciE9PW8pe3ZhciBjPWEucHVzaCgidHJhbnNsYXRlKCIsbnVsbCxuLG51bGwsZSk7dS5wdXNoKHtpOmMtNCx4OmhlKHQsaSl9LHtpOmMtMix4OmhlKHIsbyl9KX1lbHNlKGl8fG8pJiZhLnB1c2goInRyYW5zbGF0ZSgiK2krbitvK2UpfShvLnRyYW5zbGF0ZVgsby50cmFuc2xhdGVZLGEudHJhbnNsYXRlWCxhLnRyYW5zbGF0ZVksdSxjKSxmdW5jdGlvbih0LG4sZSxvKXt0IT09bj8odC1uPjE4MD9uKz0zNjA6bi10PjE4MCYmKHQrPTM2MCksby5wdXNoKHtpOmUucHVzaChpKGUpKyJyb3RhdGUoIixudWxsLHIpLTIseDpoZSh0LG4pfSkpOm4mJmUucHVzaChpKGUpKyJyb3RhdGUoIituK3IpfShvLnJvdGF0ZSxhLnJvdGF0ZSx1LGMpLGZ1bmN0aW9uKHQsbixlLG8pe3QhPT1uP28ucHVzaCh7aTplLnB1c2goaShlKSsic2tld1goIixudWxsLHIpLTIseDpoZSh0LG4pfSk6biYmZS5wdXNoKGkoZSkrInNrZXdYKCIrbityKX0oby5za2V3WCxhLnNrZXdYLHUsYyksZnVuY3Rpb24odCxuLGUscixvLGEpe2lmKHQhPT1lfHxuIT09cil7dmFyIHU9by5wdXNoKGkobykrInNjYWxlKCIsbnVsbCwiLCIsbnVsbCwiKSIpO2EucHVzaCh7aTp1LTQseDpoZSh0LGUpfSx7aTp1LTIseDpoZShuLHIpfSl9ZWxzZSAxPT09ZSYmMT09PXJ8fG8ucHVzaChpKG8pKyJzY2FsZSgiK2UrIiwiK3IrIikiKX0oby5zY2FsZVgsby5zY2FsZVksYS5zY2FsZVgsYS5zY2FsZVksdSxjKSxvPWE9bnVsbCxmdW5jdGlvbih0KXtmb3IodmFyIG4sZT0tMSxyPWMubGVuZ3RoOysrZTxyOyl1WyhuPWNbZV0pLmldPW4ueCh0KTtyZXR1cm4gdS5qb2luKCIiKX19fXZhciBTZT1UZShmdW5jdGlvbih0KXtyZXR1cm4ibm9uZSI9PT10P05lOihiZXx8KGJlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIkRJViIpLG1lPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudCx4ZT1kb2N1bWVudC5kZWZhdWx0VmlldyksYmUuc3R5bGUudHJhbnNmb3JtPXQsdD14ZS5nZXRDb21wdXRlZFN0eWxlKG1lLmFwcGVuZENoaWxkKGJlKSxudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKCJ0cmFuc2Zvcm0iKSxtZS5yZW1vdmVDaGlsZChiZSksQWUoKyh0PXQuc2xpY2UoNywtMSkuc3BsaXQoIiwiKSlbMF0sK3RbMV0sK3RbMl0sK3RbM10sK3RbNF0sK3RbNV0pKX0sInB4LCAiLCJweCkiLCJkZWcpIiksa2U9VGUoZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/TmU6KHdlfHwod2U9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsImciKSksd2Uuc2V0QXR0cmlidXRlKCJ0cmFuc2Zvcm0iLHQpLCh0PXdlLnRyYW5zZm9ybS5iYXNlVmFsLmNvbnNvbGlkYXRlKCkpP0FlKCh0PXQubWF0cml4KS5hLHQuYix0LmMsdC5kLHQuZSx0LmYpOk5lKX0sIiwgIiwiKSIsIikiKSxFZT1NYXRoLlNRUlQyLENlPTIsUGU9NCx6ZT0xZS0xMjtmdW5jdGlvbiBSZSh0KXtyZXR1cm4oKHQ9TWF0aC5leHAodCkpKzEvdCkvMn1mdW5jdGlvbiBEZSh0LG4pe3ZhciBlLHIsaT10WzBdLG89dFsxXSxhPXRbMl0sdT1uWzBdLGM9blsxXSxmPW5bMl0scz11LWksbD1jLW8saD1zKnMrbCpsO2lmKGg8emUpcj1NYXRoLmxvZyhmL2EpL0VlLGU9ZnVuY3Rpb24odCl7cmV0dXJuW2krdCpzLG8rdCpsLGEqTWF0aC5leHAoRWUqdCpyKV19O2Vsc2V7dmFyIGQ9TWF0aC5zcXJ0KGgpLHA9KGYqZi1hKmErUGUqaCkvKDIqYSpDZSpkKSx2PShmKmYtYSphLVBlKmgpLygyKmYqQ2UqZCksZz1NYXRoLmxvZyhNYXRoLnNxcnQocCpwKzEpLXApLHk9TWF0aC5sb2coTWF0aC5zcXJ0KHYqdisxKS12KTtyPSh5LWcpL0VlLGU9ZnVuY3Rpb24odCl7dmFyIG4sZT10KnIsdT1SZShnKSxjPWEvKENlKmQpKih1KihuPUVlKmUrZywoKG49TWF0aC5leHAoMipuKSktMSkvKG4rMSkpLWZ1bmN0aW9uKHQpe3JldHVybigodD1NYXRoLmV4cCh0KSktMS90KS8yfShnKSk7cmV0dXJuW2krYypzLG8rYypsLGEqdS9SZShFZSplK2cpXX19cmV0dXJuIGUuZHVyYXRpb249MWUzKnIsZX1mdW5jdGlvbiBxZSh0KXtyZXR1cm4gZnVuY3Rpb24obixlKXt2YXIgcj10KChuPW1uKG4pKS5oLChlPW1uKGUpKS5oKSxpPW9lKG4ucyxlLnMpLG89b2Uobi5sLGUubCksYT1vZShuLm9wYWNpdHksZS5vcGFjaXR5KTtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIG4uaD1yKHQpLG4ucz1pKHQpLG4ubD1vKHQpLG4ub3BhY2l0eT1hKHQpLG4rIiJ9fX12YXIgTGU9cWUocmUpLFVlPXFlKG9lKTtmdW5jdGlvbiBPZSh0KXtyZXR1cm4gZnVuY3Rpb24obixlKXt2YXIgcj10KChuPVluKG4pKS5oLChlPVluKGUpKS5oKSxpPW9lKG4uYyxlLmMpLG89b2Uobi5sLGUubCksYT1vZShuLm9wYWNpdHksZS5vcGFjaXR5KTtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIG4uaD1yKHQpLG4uYz1pKHQpLG4ubD1vKHQpLG4ub3BhY2l0eT1hKHQpLG4rIiJ9fX12YXIgQmU9T2UocmUpLFllPU9lKG9lKTtmdW5jdGlvbiBGZSh0KXtyZXR1cm4gZnVuY3Rpb24gbihlKXtmdW5jdGlvbiByKG4scil7dmFyIGk9dCgobj1abihuKSkuaCwocj1abihyKSkuaCksbz1vZShuLnMsci5zKSxhPW9lKG4ubCxyLmwpLHU9b2Uobi5vcGFjaXR5LHIub3BhY2l0eSk7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBuLmg9aSh0KSxuLnM9byh0KSxuLmw9YShNYXRoLnBvdyh0LGUpKSxuLm9wYWNpdHk9dSh0KSxuKyIifX1yZXR1cm4gZT0rZSxyLmdhbW1hPW4scn0oMSl9dmFyIEllPUZlKHJlKSxqZT1GZShvZSk7dmFyIEhlLFhlLEdlPTAsVmU9MCwkZT0wLFdlPTFlMyxaZT0wLFFlPTAsSmU9MCxLZT0ib2JqZWN0Ij09dHlwZW9mIHBlcmZvcm1hbmNlJiZwZXJmb3JtYW5jZS5ub3c/cGVyZm9ybWFuY2U6RGF0ZSx0cj0ib2JqZWN0Ij09dHlwZW9mIHdpbmRvdyYmd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZT93aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lLmJpbmQod2luZG93KTpmdW5jdGlvbih0KXtzZXRUaW1lb3V0KHQsMTcpfTtmdW5jdGlvbiBucigpe3JldHVybiBRZXx8KHRyKGVyKSxRZT1LZS5ub3coKStKZSl9ZnVuY3Rpb24gZXIoKXtRZT0wfWZ1bmN0aW9uIHJyKCl7dGhpcy5fY2FsbD10aGlzLl90aW1lPXRoaXMuX25leHQ9bnVsbH1mdW5jdGlvbiBpcih0LG4sZSl7dmFyIHI9bmV3IHJyO3JldHVybiByLnJlc3RhcnQodCxuLGUpLHJ9ZnVuY3Rpb24gb3IoKXtucigpLCsrR2U7Zm9yKHZhciB0LG49SGU7bjspKHQ9UWUtbi5fdGltZSk+PTAmJm4uX2NhbGwuY2FsbChudWxsLHQpLG49bi5fbmV4dDstLUdlfWZ1bmN0aW9uIGFyKCl7UWU9KFplPUtlLm5vdygpKStKZSxHZT1WZT0wO3RyeXtvcigpfWZpbmFsbHl7R2U9MCxmdW5jdGlvbigpe3ZhciB0LG4sZT1IZSxyPTEvMDtmb3IoO2U7KWUuX2NhbGw/KHI+ZS5fdGltZSYmKHI9ZS5fdGltZSksdD1lLGU9ZS5fbmV4dCk6KG49ZS5fbmV4dCxlLl9uZXh0PW51bGwsZT10P3QuX25leHQ9bjpIZT1uKTtYZT10LGNyKHIpfSgpLFFlPTB9fWZ1bmN0aW9uIHVyKCl7dmFyIHQ9S2Uubm93KCksbj10LVplO24+V2UmJihKZS09bixaZT10KX1mdW5jdGlvbiBjcih0KXtHZXx8KFZlJiYoVmU9Y2xlYXJUaW1lb3V0KFZlKSksdC1RZT4yND8odDwxLzAmJihWZT1zZXRUaW1lb3V0KGFyLHQtS2Uubm93KCktSmUpKSwkZSYmKCRlPWNsZWFySW50ZXJ2YWwoJGUpKSk6KCRlfHwoWmU9S2Uubm93KCksJGU9c2V0SW50ZXJ2YWwodXIsV2UpKSxHZT0xLHRyKGFyKSkpfWZ1bmN0aW9uIGZyKHQsbixlKXt2YXIgcj1uZXcgcnI7cmV0dXJuIG49bnVsbD09bj8wOituLHIucmVzdGFydChmdW5jdGlvbihlKXtyLnN0b3AoKSx0KGUrbil9LG4sZSkscn1yci5wcm90b3R5cGU9aXIucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpycixyZXN0YXJ0OmZ1bmN0aW9uKHQsbixlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKCJjYWxsYmFjayBpcyBub3QgYSBmdW5jdGlvbiIpO2U9KG51bGw9PWU/bnIoKTorZSkrKG51bGw9PW4/MDorbiksdGhpcy5fbmV4dHx8WGU9PT10aGlzfHwoWGU/WGUuX25leHQ9dGhpczpIZT10aGlzLFhlPXRoaXMpLHRoaXMuX2NhbGw9dCx0aGlzLl90aW1lPWUsY3IoKX0sc3RvcDpmdW5jdGlvbigpe3RoaXMuX2NhbGwmJih0aGlzLl9jYWxsPW51bGwsdGhpcy5fdGltZT0xLzAsY3IoKSl9fTt2YXIgc3I9SSgic3RhcnQiLCJlbmQiLCJjYW5jZWwiLCJpbnRlcnJ1cHQiKSxscj1bXSxocj0wLGRyPTEscHI9Mix2cj0zLGdyPTQseXI9NSxfcj02O2Z1bmN0aW9uIGJyKHQsbixlLHIsaSxvKXt2YXIgYT10Ll9fdHJhbnNpdGlvbjtpZihhKXtpZihlIGluIGEpcmV0dXJufWVsc2UgdC5fX3RyYW5zaXRpb249e307IWZ1bmN0aW9uKHQsbixlKXt2YXIgcixpPXQuX190cmFuc2l0aW9uO2Z1bmN0aW9uIG8oYyl7dmFyIGYscyxsLGg7aWYoZS5zdGF0ZSE9PWRyKXJldHVybiB1KCk7Zm9yKGYgaW4gaSlpZigoaD1pW2ZdKS5uYW1lPT09ZS5uYW1lKXtpZihoLnN0YXRlPT09dnIpcmV0dXJuIGZyKG8pO2guc3RhdGU9PT1ncj8oaC5zdGF0ZT1fcixoLnRpbWVyLnN0b3AoKSxoLm9uLmNhbGwoImludGVycnVwdCIsdCx0Ll9fZGF0YV9fLGguaW5kZXgsaC5ncm91cCksZGVsZXRlIGlbZl0pOitmPG4mJihoLnN0YXRlPV9yLGgudGltZXIuc3RvcCgpLGgub24uY2FsbCgiY2FuY2VsIix0LHQuX19kYXRhX18saC5pbmRleCxoLmdyb3VwKSxkZWxldGUgaVtmXSl9aWYoZnIoZnVuY3Rpb24oKXtlLnN0YXRlPT09dnImJihlLnN0YXRlPWdyLGUudGltZXIucmVzdGFydChhLGUuZGVsYXksZS50aW1lKSxhKGMpKX0pLGUuc3RhdGU9cHIsZS5vbi5jYWxsKCJzdGFydCIsdCx0Ll9fZGF0YV9fLGUuaW5kZXgsZS5ncm91cCksZS5zdGF0ZT09PXByKXtmb3IoZS5zdGF0ZT12cixyPW5ldyBBcnJheShsPWUudHdlZW4ubGVuZ3RoKSxmPTAscz0tMTtmPGw7KytmKShoPWUudHdlZW5bZl0udmFsdWUuY2FsbCh0LHQuX19kYXRhX18sZS5pbmRleCxlLmdyb3VwKSkmJihyWysrc109aCk7ci5sZW5ndGg9cysxfX1mdW5jdGlvbiBhKG4pe2Zvcih2YXIgaT1uPGUuZHVyYXRpb24/ZS5lYXNlLmNhbGwobnVsbCxuL2UuZHVyYXRpb24pOihlLnRpbWVyLnJlc3RhcnQodSksZS5zdGF0ZT15ciwxKSxvPS0xLGE9ci5sZW5ndGg7KytvPGE7KXJbb10uY2FsbCh0LGkpO2Uuc3RhdGU9PT15ciYmKGUub24uY2FsbCgiZW5kIix0LHQuX19kYXRhX18sZS5pbmRleCxlLmdyb3VwKSx1KCkpfWZ1bmN0aW9uIHUoKXtmb3IodmFyIHIgaW4gZS5zdGF0ZT1fcixlLnRpbWVyLnN0b3AoKSxkZWxldGUgaVtuXSxpKXJldHVybjtkZWxldGUgdC5fX3RyYW5zaXRpb259aVtuXT1lLGUudGltZXI9aXIoZnVuY3Rpb24odCl7ZS5zdGF0ZT1kcixlLnRpbWVyLnJlc3RhcnQobyxlLmRlbGF5LGUudGltZSksZS5kZWxheTw9dCYmbyh0LWUuZGVsYXkpfSwwLGUudGltZSl9KHQsZSx7bmFtZTpuLGluZGV4OnIsZ3JvdXA6aSxvbjpzcix0d2Vlbjpscix0aW1lOm8udGltZSxkZWxheTpvLmRlbGF5LGR1cmF0aW9uOm8uZHVyYXRpb24sZWFzZTpvLmVhc2UsdGltZXI6bnVsbCxzdGF0ZTpocn0pfWZ1bmN0aW9uIG1yKHQsbil7dmFyIGU9d3IodCxuKTtpZihlLnN0YXRlPmhyKXRocm93IG5ldyBFcnJvcigidG9vIGxhdGU7IGFscmVhZHkgc2NoZWR1bGVkIik7cmV0dXJuIGV9ZnVuY3Rpb24geHIodCxuKXt2YXIgZT13cih0LG4pO2lmKGUuc3RhdGU+dnIpdGhyb3cgbmV3IEVycm9yKCJ0b28gbGF0ZTsgYWxyZWFkeSBydW5uaW5nIik7cmV0dXJuIGV9ZnVuY3Rpb24gd3IodCxuKXt2YXIgZT10Ll9fdHJhbnNpdGlvbjtpZighZXx8IShlPWVbbl0pKXRocm93IG5ldyBFcnJvcigidHJhbnNpdGlvbiBub3QgZm91bmQiKTtyZXR1cm4gZX1mdW5jdGlvbiBNcih0LG4pe3ZhciBlLHIsaSxvPXQuX190cmFuc2l0aW9uLGE9ITA7aWYobyl7Zm9yKGkgaW4gbj1udWxsPT1uP251bGw6bisiIixvKShlPW9baV0pLm5hbWU9PT1uPyhyPWUuc3RhdGU+cHImJmUuc3RhdGU8eXIsZS5zdGF0ZT1fcixlLnRpbWVyLnN0b3AoKSxlLm9uLmNhbGwocj8iaW50ZXJydXB0IjoiY2FuY2VsIix0LHQuX19kYXRhX18sZS5pbmRleCxlLmdyb3VwKSxkZWxldGUgb1tpXSk6YT0hMTthJiZkZWxldGUgdC5fX3RyYW5zaXRpb259fWZ1bmN0aW9uIE5yKHQsbixlKXt2YXIgcj10Ll9pZDtyZXR1cm4gdC5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9eHIodGhpcyxyKTsodC52YWx1ZXx8KHQudmFsdWU9e30pKVtuXT1lLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pLGZ1bmN0aW9uKHQpe3JldHVybiB3cih0LHIpLnZhbHVlW25dfX1mdW5jdGlvbiBBcih0LG4pe3ZhciBlO3JldHVybigibnVtYmVyIj09dHlwZW9mIG4/aGU6biBpbnN0YW5jZW9mIGhuP2FlOihlPWhuKG4pKT8obj1lLGFlKTpnZSkodCxuKX12YXIgVHI9UHQucHJvdG90eXBlLmNvbnN0cnVjdG9yO2Z1bmN0aW9uIFNyKHQpe3JldHVybiBmdW5jdGlvbigpe3RoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkodCl9fXZhciBrcj0wO2Z1bmN0aW9uIEVyKHQsbixlLHIpe3RoaXMuX2dyb3Vwcz10LHRoaXMuX3BhcmVudHM9bix0aGlzLl9uYW1lPWUsdGhpcy5faWQ9cn1mdW5jdGlvbiBDcih0KXtyZXR1cm4gUHQoKS50cmFuc2l0aW9uKHQpfWZ1bmN0aW9uIFByKCl7cmV0dXJuKytrcn12YXIgenI9UHQucHJvdG90eXBlO2Z1bmN0aW9uIFJyKHQpe3JldHVybigodCo9Mik8PTE/dCp0Oi0tdCooMi10KSsxKS8yfWZ1bmN0aW9uIERyKHQpe3JldHVybigodCo9Mik8PTE/dCp0KnQ6KHQtPTIpKnQqdCsyKS8yfUVyLnByb3RvdHlwZT1Dci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOkVyLHNlbGVjdDpmdW5jdGlvbih0KXt2YXIgbj10aGlzLl9uYW1lLGU9dGhpcy5faWQ7ImZ1bmN0aW9uIiE9dHlwZW9mIHQmJih0PVEodCkpO2Zvcih2YXIgcj10aGlzLl9ncm91cHMsaT1yLmxlbmd0aCxvPW5ldyBBcnJheShpKSxhPTA7YTxpOysrYSlmb3IodmFyIHUsYyxmPXJbYV0scz1mLmxlbmd0aCxsPW9bYV09bmV3IEFycmF5KHMpLGg9MDtoPHM7KytoKSh1PWZbaF0pJiYoYz10LmNhbGwodSx1Ll9fZGF0YV9fLGgsZikpJiYoIl9fZGF0YV9fImluIHUmJihjLl9fZGF0YV9fPXUuX19kYXRhX18pLGxbaF09YyxicihsW2hdLG4sZSxoLGwsd3IodSxlKSkpO3JldHVybiBuZXcgRXIobyx0aGlzLl9wYXJlbnRzLG4sZSl9LHNlbGVjdEFsbDpmdW5jdGlvbih0KXt2YXIgbj10aGlzLl9uYW1lLGU9dGhpcy5faWQ7ImZ1bmN0aW9uIiE9dHlwZW9mIHQmJih0PUsodCkpO2Zvcih2YXIgcj10aGlzLl9ncm91cHMsaT1yLmxlbmd0aCxvPVtdLGE9W10sdT0wO3U8aTsrK3UpZm9yKHZhciBjLGY9clt1XSxzPWYubGVuZ3RoLGw9MDtsPHM7KytsKWlmKGM9ZltsXSl7Zm9yKHZhciBoLGQ9dC5jYWxsKGMsYy5fX2RhdGFfXyxsLGYpLHA9d3IoYyxlKSx2PTAsZz1kLmxlbmd0aDt2PGc7Kyt2KShoPWRbdl0pJiZicihoLG4sZSx2LGQscCk7by5wdXNoKGQpLGEucHVzaChjKX1yZXR1cm4gbmV3IEVyKG8sYSxuLGUpfSxmaWx0ZXI6ZnVuY3Rpb24odCl7ImZ1bmN0aW9uIiE9dHlwZW9mIHQmJih0PXR0KHQpKTtmb3IodmFyIG49dGhpcy5fZ3JvdXBzLGU9bi5sZW5ndGgscj1uZXcgQXJyYXkoZSksaT0wO2k8ZTsrK2kpZm9yKHZhciBvLGE9bltpXSx1PWEubGVuZ3RoLGM9cltpXT1bXSxmPTA7Zjx1OysrZikobz1hW2ZdKSYmdC5jYWxsKG8sby5fX2RhdGFfXyxmLGEpJiZjLnB1c2gobyk7cmV0dXJuIG5ldyBFcihyLHRoaXMuX3BhcmVudHMsdGhpcy5fbmFtZSx0aGlzLl9pZCl9LG1lcmdlOmZ1bmN0aW9uKHQpe2lmKHQuX2lkIT09dGhpcy5faWQpdGhyb3cgbmV3IEVycm9yO2Zvcih2YXIgbj10aGlzLl9ncm91cHMsZT10Ll9ncm91cHMscj1uLmxlbmd0aCxpPWUubGVuZ3RoLG89TWF0aC5taW4ocixpKSxhPW5ldyBBcnJheShyKSx1PTA7dTxvOysrdSlmb3IodmFyIGMsZj1uW3VdLHM9ZVt1XSxsPWYubGVuZ3RoLGg9YVt1XT1uZXcgQXJyYXkobCksZD0wO2Q8bDsrK2QpKGM9ZltkXXx8c1tkXSkmJihoW2RdPWMpO2Zvcig7dTxyOysrdSlhW3VdPW5bdV07cmV0dXJuIG5ldyBFcihhLHRoaXMuX3BhcmVudHMsdGhpcy5fbmFtZSx0aGlzLl9pZCl9LHNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiBuZXcgVHIodGhpcy5fZ3JvdXBzLHRoaXMuX3BhcmVudHMpfSx0cmFuc2l0aW9uOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuX25hbWUsbj10aGlzLl9pZCxlPVByKCkscj10aGlzLl9ncm91cHMsaT1yLmxlbmd0aCxvPTA7bzxpOysrbylmb3IodmFyIGEsdT1yW29dLGM9dS5sZW5ndGgsZj0wO2Y8YzsrK2YpaWYoYT11W2ZdKXt2YXIgcz13cihhLG4pO2JyKGEsdCxlLGYsdSx7dGltZTpzLnRpbWUrcy5kZWxheStzLmR1cmF0aW9uLGRlbGF5OjAsZHVyYXRpb246cy5kdXJhdGlvbixlYXNlOnMuZWFzZX0pfXJldHVybiBuZXcgRXIocix0aGlzLl9wYXJlbnRzLHQsZSl9LGNhbGw6enIuY2FsbCxub2Rlczp6ci5ub2Rlcyxub2RlOnpyLm5vZGUsc2l6ZTp6ci5zaXplLGVtcHR5OnpyLmVtcHR5LGVhY2g6enIuZWFjaCxvbjpmdW5jdGlvbih0LG4pe3ZhciBlPXRoaXMuX2lkO3JldHVybiBhcmd1bWVudHMubGVuZ3RoPDI/d3IodGhpcy5ub2RlKCksZSkub24ub24odCk6dGhpcy5lYWNoKGZ1bmN0aW9uKHQsbixlKXt2YXIgcixpLG89ZnVuY3Rpb24odCl7cmV0dXJuKHQrIiIpLnRyaW0oKS5zcGxpdCgvXnxccysvKS5ldmVyeShmdW5jdGlvbih0KXt2YXIgbj10LmluZGV4T2YoIi4iKTtyZXR1cm4gbj49MCYmKHQ9dC5zbGljZSgwLG4pKSwhdHx8InN0YXJ0Ij09PXR9KX0obik/bXI6eHI7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGE9byh0aGlzLHQpLHU9YS5vbjt1IT09ciYmKGk9KHI9dSkuY29weSgpKS5vbihuLGUpLGEub249aX19KGUsdCxuKSl9LGF0dHI6ZnVuY3Rpb24odCxuKXt2YXIgZT0kKHQpLHI9InRyYW5zZm9ybSI9PT1lP2tlOkFyO3JldHVybiB0aGlzLmF0dHJUd2Vlbih0LCJmdW5jdGlvbiI9PXR5cGVvZiBuPyhlLmxvY2FsP2Z1bmN0aW9uKHQsbixlKXt2YXIgcixpLG87cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGEsdSxjPWUodGhpcyk7aWYobnVsbCE9YylyZXR1cm4oYT10aGlzLmdldEF0dHJpYnV0ZU5TKHQuc3BhY2UsdC5sb2NhbCkpPT09KHU9YysiIik/bnVsbDphPT09ciYmdT09PWk/bzooaT11LG89bihyPWEsYykpO3RoaXMucmVtb3ZlQXR0cmlidXRlTlModC5zcGFjZSx0LmxvY2FsKX19OmZ1bmN0aW9uKHQsbixlKXt2YXIgcixpLG87cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGEsdSxjPWUodGhpcyk7aWYobnVsbCE9YylyZXR1cm4oYT10aGlzLmdldEF0dHJpYnV0ZSh0KSk9PT0odT1jKyIiKT9udWxsOmE9PT1yJiZ1PT09aT9vOihpPXUsbz1uKHI9YSxjKSk7dGhpcy5yZW1vdmVBdHRyaWJ1dGUodCl9fSkoZSxyLE5yKHRoaXMsImF0dHIuIit0LG4pKTpudWxsPT1uPyhlLmxvY2FsP2Z1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3RoaXMucmVtb3ZlQXR0cmlidXRlTlModC5zcGFjZSx0LmxvY2FsKX19OmZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3RoaXMucmVtb3ZlQXR0cmlidXRlKHQpfX0pKGUpOihlLmxvY2FsP2Z1bmN0aW9uKHQsbixlKXt2YXIgcixpLG89ZSsiIjtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEF0dHJpYnV0ZU5TKHQuc3BhY2UsdC5sb2NhbCk7cmV0dXJuIGE9PT1vP251bGw6YT09PXI/aTppPW4ocj1hLGUpfX06ZnVuY3Rpb24odCxuLGUpe3ZhciByLGksbz1lKyIiO3JldHVybiBmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0QXR0cmlidXRlKHQpO3JldHVybiBhPT09bz9udWxsOmE9PT1yP2k6aT1uKHI9YSxlKX19KShlLHIsbikpfSxhdHRyVHdlZW46ZnVuY3Rpb24odCxuKXt2YXIgZT0iYXR0ci4iK3Q7aWYoYXJndW1lbnRzLmxlbmd0aDwyKXJldHVybihlPXRoaXMudHdlZW4oZSkpJiZlLl92YWx1ZTtpZihudWxsPT1uKXJldHVybiB0aGlzLnR3ZWVuKGUsbnVsbCk7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIG4pdGhyb3cgbmV3IEVycm9yO3ZhciByPSQodCk7cmV0dXJuIHRoaXMudHdlZW4oZSwoci5sb2NhbD9mdW5jdGlvbih0LG4pe3ZhciBlLHI7ZnVuY3Rpb24gaSgpe3ZhciBpPW4uYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBpIT09ciYmKGU9KHI9aSkmJmZ1bmN0aW9uKHQsbil7cmV0dXJuIGZ1bmN0aW9uKGUpe3RoaXMuc2V0QXR0cmlidXRlTlModC5zcGFjZSx0LmxvY2FsLG4oZSkpfX0odCxpKSksZX1yZXR1cm4gaS5fdmFsdWU9bixpfTpmdW5jdGlvbih0LG4pe3ZhciBlLHI7ZnVuY3Rpb24gaSgpe3ZhciBpPW4uYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBpIT09ciYmKGU9KHI9aSkmJmZ1bmN0aW9uKHQsbil7cmV0dXJuIGZ1bmN0aW9uKGUpe3RoaXMuc2V0QXR0cmlidXRlKHQsbihlKSl9fSh0LGkpKSxlfXJldHVybiBpLl92YWx1ZT1uLGl9KShyLG4pKX0sc3R5bGU6ZnVuY3Rpb24odCxuLGUpe3ZhciByPSJ0cmFuc2Zvcm0iPT0odCs9IiIpP1NlOkFyO3JldHVybiBudWxsPT1uP3RoaXMuc3R5bGVUd2Vlbih0LGZ1bmN0aW9uKHQsbil7dmFyIGUscixpO3JldHVybiBmdW5jdGlvbigpe3ZhciBvPWN0KHRoaXMsdCksYT0odGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eSh0KSxjdCh0aGlzLHQpKTtyZXR1cm4gbz09PWE/bnVsbDpvPT09ZSYmYT09PXI/aTppPW4oZT1vLHI9YSl9fSh0LHIpKS5vbigiZW5kLnN0eWxlLiIrdCxTcih0KSk6ImZ1bmN0aW9uIj09dHlwZW9mIG4/dGhpcy5zdHlsZVR3ZWVuKHQsZnVuY3Rpb24odCxuLGUpe3ZhciByLGksbztyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYT1jdCh0aGlzLHQpLHU9ZSh0aGlzKSxjPXUrIiI7cmV0dXJuIG51bGw9PXUmJih0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KHQpLGM9dT1jdCh0aGlzLHQpKSxhPT09Yz9udWxsOmE9PT1yJiZjPT09aT9vOihpPWMsbz1uKHI9YSx1KSl9fSh0LHIsTnIodGhpcywic3R5bGUuIit0LG4pKSkuZWFjaChmdW5jdGlvbih0LG4pe3ZhciBlLHIsaSxvLGE9InN0eWxlLiIrbix1PSJlbmQuIithO3JldHVybiBmdW5jdGlvbigpe3ZhciBjPXhyKHRoaXMsdCksZj1jLm9uLHM9bnVsbD09Yy52YWx1ZVthXT9vfHwobz1TcihuKSk6dm9pZCAwO2Y9PT1lJiZpPT09c3x8KHI9KGU9ZikuY29weSgpKS5vbih1LGk9cyksYy5vbj1yfX0odGhpcy5faWQsdCkpOnRoaXMuc3R5bGVUd2Vlbih0LGZ1bmN0aW9uKHQsbixlKXt2YXIgcixpLG89ZSsiIjtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYT1jdCh0aGlzLHQpO3JldHVybiBhPT09bz9udWxsOmE9PT1yP2k6aT1uKHI9YSxlKX19KHQscixuKSxlKS5vbigiZW5kLnN0eWxlLiIrdCxudWxsKX0sc3R5bGVUd2VlbjpmdW5jdGlvbih0LG4sZSl7dmFyIHI9InN0eWxlLiIrKHQrPSIiKTtpZihhcmd1bWVudHMubGVuZ3RoPDIpcmV0dXJuKHI9dGhpcy50d2VlbihyKSkmJnIuX3ZhbHVlO2lmKG51bGw9PW4pcmV0dXJuIHRoaXMudHdlZW4ocixudWxsKTtpZigiZnVuY3Rpb24iIT10eXBlb2Ygbil0aHJvdyBuZXcgRXJyb3I7cmV0dXJuIHRoaXMudHdlZW4ocixmdW5jdGlvbih0LG4sZSl7dmFyIHIsaTtmdW5jdGlvbiBvKCl7dmFyIG89bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIG8hPT1pJiYocj0oaT1vKSYmZnVuY3Rpb24odCxuLGUpe3JldHVybiBmdW5jdGlvbihyKXt0aGlzLnN0eWxlLnNldFByb3BlcnR5KHQsbihyKSxlKX19KHQsbyxlKSkscn1yZXR1cm4gby5fdmFsdWU9bixvfSh0LG4sbnVsbD09ZT8iIjplKSl9LHRleHQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudHdlZW4oInRleHQiLCJmdW5jdGlvbiI9PXR5cGVvZiB0P2Z1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3ZhciBuPXQodGhpcyk7dGhpcy50ZXh0Q29udGVudD1udWxsPT1uPyIiOm59fShOcih0aGlzLCJ0ZXh0Iix0KSk6ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7dGhpcy50ZXh0Q29udGVudD10fX0obnVsbD09dD8iIjp0KyIiKSl9LHJlbW92ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9uKCJlbmQucmVtb3ZlIiwodD10aGlzLl9pZCxmdW5jdGlvbigpe3ZhciBuPXRoaXMucGFyZW50Tm9kZTtmb3IodmFyIGUgaW4gdGhpcy5fX3RyYW5zaXRpb24paWYoK2UhPT10KXJldHVybjtuJiZuLnJlbW92ZUNoaWxkKHRoaXMpfSkpO3ZhciB0fSx0d2VlbjpmdW5jdGlvbih0LG4pe3ZhciBlPXRoaXMuX2lkO2lmKHQrPSIiLGFyZ3VtZW50cy5sZW5ndGg8Mil7Zm9yKHZhciByLGk9d3IodGhpcy5ub2RlKCksZSkudHdlZW4sbz0wLGE9aS5sZW5ndGg7bzxhOysrbylpZigocj1pW29dKS5uYW1lPT09dClyZXR1cm4gci52YWx1ZTtyZXR1cm4gbnVsbH1yZXR1cm4gdGhpcy5lYWNoKChudWxsPT1uP2Z1bmN0aW9uKHQsbil7dmFyIGUscjtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgaT14cih0aGlzLHQpLG89aS50d2VlbjtpZihvIT09ZSlmb3IodmFyIGE9MCx1PShyPWU9bykubGVuZ3RoO2E8dTsrK2EpaWYoclthXS5uYW1lPT09bil7KHI9ci5zbGljZSgpKS5zcGxpY2UoYSwxKTticmVha31pLnR3ZWVuPXJ9fTpmdW5jdGlvbih0LG4sZSl7dmFyIHIsaTtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgRXJyb3I7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG89eHIodGhpcyx0KSxhPW8udHdlZW47aWYoYSE9PXIpe2k9KHI9YSkuc2xpY2UoKTtmb3IodmFyIHU9e25hbWU6bix2YWx1ZTplfSxjPTAsZj1pLmxlbmd0aDtjPGY7KytjKWlmKGlbY10ubmFtZT09PW4pe2lbY109dTticmVha31jPT09ZiYmaS5wdXNoKHUpfW8udHdlZW49aX19KShlLHQsbikpfSxkZWxheTpmdW5jdGlvbih0KXt2YXIgbj10aGlzLl9pZDtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD90aGlzLmVhY2goKCJmdW5jdGlvbiI9PXR5cGVvZiB0P2Z1bmN0aW9uKHQsbil7cmV0dXJuIGZ1bmN0aW9uKCl7bXIodGhpcyx0KS5kZWxheT0rbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fTpmdW5jdGlvbih0LG4pe3JldHVybiBuPStuLGZ1bmN0aW9uKCl7bXIodGhpcyx0KS5kZWxheT1ufX0pKG4sdCkpOndyKHRoaXMubm9kZSgpLG4pLmRlbGF5fSxkdXJhdGlvbjpmdW5jdGlvbih0KXt2YXIgbj10aGlzLl9pZDtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD90aGlzLmVhY2goKCJmdW5jdGlvbiI9PXR5cGVvZiB0P2Z1bmN0aW9uKHQsbil7cmV0dXJuIGZ1bmN0aW9uKCl7eHIodGhpcyx0KS5kdXJhdGlvbj0rbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fTpmdW5jdGlvbih0LG4pe3JldHVybiBuPStuLGZ1bmN0aW9uKCl7eHIodGhpcyx0KS5kdXJhdGlvbj1ufX0pKG4sdCkpOndyKHRoaXMubm9kZSgpLG4pLmR1cmF0aW9ufSxlYXNlOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMuX2lkO3JldHVybiBhcmd1bWVudHMubGVuZ3RoP3RoaXMuZWFjaChmdW5jdGlvbih0LG4pe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBuKXRocm93IG5ldyBFcnJvcjtyZXR1cm4gZnVuY3Rpb24oKXt4cih0aGlzLHQpLmVhc2U9bn19KG4sdCkpOndyKHRoaXMubm9kZSgpLG4pLmVhc2V9LGVuZDpmdW5jdGlvbigpe3ZhciB0LG4sZT10aGlzLHI9ZS5faWQsaT1lLnNpemUoKTtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24obyxhKXt2YXIgdT17dmFsdWU6YX0sYz17dmFsdWU6ZnVuY3Rpb24oKXswPT0tLWkmJm8oKX19O2UuZWFjaChmdW5jdGlvbigpe3ZhciBlPXhyKHRoaXMsciksaT1lLm9uO2khPT10JiYoKG49KHQ9aSkuY29weSgpKS5fLmNhbmNlbC5wdXNoKHUpLG4uXy5pbnRlcnJ1cHQucHVzaCh1KSxuLl8uZW5kLnB1c2goYykpLGUub249bn0pfSl9fTt2YXIgcXI9ZnVuY3Rpb24gdChuKXtmdW5jdGlvbiBlKHQpe3JldHVybiBNYXRoLnBvdyh0LG4pfXJldHVybiBuPStuLGUuZXhwb25lbnQ9dCxlfSgzKSxMcj1mdW5jdGlvbiB0KG4pe2Z1bmN0aW9uIGUodCl7cmV0dXJuIDEtTWF0aC5wb3coMS10LG4pfXJldHVybiBuPStuLGUuZXhwb25lbnQ9dCxlfSgzKSxVcj1mdW5jdGlvbiB0KG4pe2Z1bmN0aW9uIGUodCl7cmV0dXJuKCh0Kj0yKTw9MT9NYXRoLnBvdyh0LG4pOjItTWF0aC5wb3coMi10LG4pKS8yfXJldHVybiBuPStuLGUuZXhwb25lbnQ9dCxlfSgzKSxPcj1NYXRoLlBJLEJyPU9yLzI7ZnVuY3Rpb24gWXIodCl7cmV0dXJuKDEtTWF0aC5jb3MoT3IqdCkpLzJ9ZnVuY3Rpb24gRnIodCl7cmV0dXJuKCh0Kj0yKTw9MT9NYXRoLnBvdygyLDEwKnQtMTApOjItTWF0aC5wb3coMiwxMC0xMCp0KSkvMn1mdW5jdGlvbiBJcih0KXtyZXR1cm4oKHQqPTIpPD0xPzEtTWF0aC5zcXJ0KDEtdCp0KTpNYXRoLnNxcnQoMS0odC09MikqdCkrMSkvMn12YXIganI9NC8xMSxIcj02LzExLFhyPTgvMTEsR3I9Ljc1LFZyPTkvMTEsJHI9MTAvMTEsV3I9LjkzNzUsWnI9MjEvMjIsUXI9NjMvNjQsSnI9MS9qci9qcjtmdW5jdGlvbiBLcih0KXtyZXR1cm4odD0rdCk8anI/SnIqdCp0OnQ8WHI/SnIqKHQtPUhyKSp0K0dyOnQ8JHI/SnIqKHQtPVZyKSp0K1dyOkpyKih0LT1acikqdCtRcn12YXIgdGk9ZnVuY3Rpb24gdChuKXtmdW5jdGlvbiBlKHQpe3JldHVybiB0KnQqKChuKzEpKnQtbil9cmV0dXJuIG49K24sZS5vdmVyc2hvb3Q9dCxlfSgxLjcwMTU4KSxuaT1mdW5jdGlvbiB0KG4pe2Z1bmN0aW9uIGUodCl7cmV0dXJuLS10KnQqKChuKzEpKnQrbikrMX1yZXR1cm4gbj0rbixlLm92ZXJzaG9vdD10LGV9KDEuNzAxNTgpLGVpPWZ1bmN0aW9uIHQobil7ZnVuY3Rpb24gZSh0KXtyZXR1cm4oKHQqPTIpPDE/dCp0KigobisxKSp0LW4pOih0LT0yKSp0KigobisxKSp0K24pKzIpLzJ9cmV0dXJuIG49K24sZS5vdmVyc2hvb3Q9dCxlfSgxLjcwMTU4KSxyaT0yKk1hdGguUEksaWk9ZnVuY3Rpb24gdChuLGUpe3ZhciByPU1hdGguYXNpbigxLyhuPU1hdGgubWF4KDEsbikpKSooZS89cmkpO2Z1bmN0aW9uIGkodCl7cmV0dXJuIG4qTWF0aC5wb3coMiwxMCotLXQpKk1hdGguc2luKChyLXQpL2UpfXJldHVybiBpLmFtcGxpdHVkZT1mdW5jdGlvbihuKXtyZXR1cm4gdChuLGUqcmkpfSxpLnBlcmlvZD1mdW5jdGlvbihlKXtyZXR1cm4gdChuLGUpfSxpfSgxLC4zKSxvaT1mdW5jdGlvbiB0KG4sZSl7dmFyIHI9TWF0aC5hc2luKDEvKG49TWF0aC5tYXgoMSxuKSkpKihlLz1yaSk7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gMS1uKk1hdGgucG93KDIsLTEwKih0PSt0KSkqTWF0aC5zaW4oKHQrcikvZSl9cmV0dXJuIGkuYW1wbGl0dWRlPWZ1bmN0aW9uKG4pe3JldHVybiB0KG4sZSpyaSl9LGkucGVyaW9kPWZ1bmN0aW9uKGUpe3JldHVybiB0KG4sZSl9LGl9KDEsLjMpLGFpPWZ1bmN0aW9uIHQobixlKXt2YXIgcj1NYXRoLmFzaW4oMS8obj1NYXRoLm1heCgxLG4pKSkqKGUvPXJpKTtmdW5jdGlvbiBpKHQpe3JldHVybigodD0yKnQtMSk8MD9uKk1hdGgucG93KDIsMTAqdCkqTWF0aC5zaW4oKHItdCkvZSk6Mi1uKk1hdGgucG93KDIsLTEwKnQpKk1hdGguc2luKChyK3QpL2UpKS8yfXJldHVybiBpLmFtcGxpdHVkZT1mdW5jdGlvbihuKXtyZXR1cm4gdChuLGUqcmkpfSxpLnBlcmlvZD1mdW5jdGlvbihlKXtyZXR1cm4gdChuLGUpfSxpfSgxLC4zKSx1aT17dGltZTpudWxsLGRlbGF5OjAsZHVyYXRpb246MjUwLGVhc2U6RHJ9O2Z1bmN0aW9uIGNpKHQsbil7Zm9yKHZhciBlOyEoZT10Ll9fdHJhbnNpdGlvbil8fCEoZT1lW25dKTspaWYoISh0PXQucGFyZW50Tm9kZSkpcmV0dXJuIHVpLnRpbWU9bnIoKSx1aTtyZXR1cm4gZX1QdC5wcm90b3R5cGUuaW50ZXJydXB0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtNcih0aGlzLHQpfSl9LFB0LnByb3RvdHlwZS50cmFuc2l0aW9uPWZ1bmN0aW9uKHQpe3ZhciBuLGU7dCBpbnN0YW5jZW9mIEVyPyhuPXQuX2lkLHQ9dC5fbmFtZSk6KG49UHIoKSwoZT11aSkudGltZT1ucigpLHQ9bnVsbD09dD9udWxsOnQrIiIpO2Zvcih2YXIgcj10aGlzLl9ncm91cHMsaT1yLmxlbmd0aCxvPTA7bzxpOysrbylmb3IodmFyIGEsdT1yW29dLGM9dS5sZW5ndGgsZj0wO2Y8YzsrK2YpKGE9dVtmXSkmJmJyKGEsdCxuLGYsdSxlfHxjaShhLG4pKTtyZXR1cm4gbmV3IEVyKHIsdGhpcy5fcGFyZW50cyx0LG4pfTt2YXIgZmk9W251bGxdO2Z1bmN0aW9uIHNpKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0fX1mdW5jdGlvbiBsaSh0LG4sZSl7dGhpcy50YXJnZXQ9dCx0aGlzLnR5cGU9bix0aGlzLnNlbGVjdGlvbj1lfWZ1bmN0aW9uIGhpKCl7dC5ldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKX1mdW5jdGlvbiBkaSgpe3QuZXZlbnQucHJldmVudERlZmF1bHQoKSx0LmV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpfXZhciBwaT17bmFtZToiZHJhZyJ9LHZpPXtuYW1lOiJzcGFjZSJ9LGdpPXtuYW1lOiJoYW5kbGUifSx5aT17bmFtZToiY2VudGVyIn0sX2k9e25hbWU6IngiLGhhbmRsZXM6WyJlIiwidyJdLm1hcChUaSksaW5wdXQ6ZnVuY3Rpb24odCxuKXtyZXR1cm4gdCYmW1t0WzBdLG5bMF1bMV1dLFt0WzFdLG5bMV1bMV1dXX0sb3V0cHV0OmZ1bmN0aW9uKHQpe3JldHVybiB0JiZbdFswXVswXSx0WzFdWzBdXX19LGJpPXtuYW1lOiJ5IixoYW5kbGVzOlsibiIsInMiXS5tYXAoVGkpLGlucHV0OmZ1bmN0aW9uKHQsbil7cmV0dXJuIHQmJltbblswXVswXSx0WzBdXSxbblsxXVswXSx0WzFdXV19LG91dHB1dDpmdW5jdGlvbih0KXtyZXR1cm4gdCYmW3RbMF1bMV0sdFsxXVsxXV19fSxtaT17bmFtZToieHkiLGhhbmRsZXM6WyJuIiwiZSIsInMiLCJ3IiwibnciLCJuZSIsInNlIiwic3ciXS5tYXAoVGkpLGlucHV0OmZ1bmN0aW9uKHQpe3JldHVybiB0fSxvdXRwdXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHR9fSx4aT17b3ZlcmxheToiY3Jvc3NoYWlyIixzZWxlY3Rpb246Im1vdmUiLG46Im5zLXJlc2l6ZSIsZToiZXctcmVzaXplIixzOiJucy1yZXNpemUiLHc6ImV3LXJlc2l6ZSIsbnc6Im53c2UtcmVzaXplIixuZToibmVzdy1yZXNpemUiLHNlOiJud3NlLXJlc2l6ZSIsc3c6Im5lc3ctcmVzaXplIn0sd2k9e2U6InciLHc6ImUiLG53OiJuZSIsbmU6Im53IixzZToic3ciLHN3OiJzZSJ9LE1pPXtuOiJzIixzOiJuIixudzoic3ciLG5lOiJzZSIsc2U6Im5lIixzdzoibncifSxOaT17b3ZlcmxheToxLHNlbGVjdGlvbjoxLG46bnVsbCxlOjEsczpudWxsLHc6LTEsbnc6LTEsbmU6MSxzZToxLHN3Oi0xfSxBaT17b3ZlcmxheToxLHNlbGVjdGlvbjoxLG46LTEsZTpudWxsLHM6MSx3Om51bGwsbnc6LTEsbmU6LTEsc2U6MSxzdzoxfTtmdW5jdGlvbiBUaSh0KXtyZXR1cm57dHlwZTp0fX1mdW5jdGlvbiBTaSgpe3JldHVybiF0LmV2ZW50LmJ1dHRvbn1mdW5jdGlvbiBraSgpe3ZhciB0PXRoaXMub3duZXJTVkdFbGVtZW50fHx0aGlzO3JldHVybltbMCwwXSxbdC53aWR0aC5iYXNlVmFsLnZhbHVlLHQuaGVpZ2h0LmJhc2VWYWwudmFsdWVdXX1mdW5jdGlvbiBFaSh0KXtmb3IoOyF0Ll9fYnJ1c2g7KWlmKCEodD10LnBhcmVudE5vZGUpKXJldHVybjtyZXR1cm4gdC5fX2JydXNofWZ1bmN0aW9uIENpKHQpe3JldHVybiB0WzBdWzBdPT09dFsxXVswXXx8dFswXVsxXT09PXRbMV1bMV19ZnVuY3Rpb24gUGkobil7dmFyIGUscj1raSxpPVNpLG89SSh1LCJzdGFydCIsImJydXNoIiwiZW5kIiksYT02O2Z1bmN0aW9uIHUodCl7dmFyIGU9dC5wcm9wZXJ0eSgiX19icnVzaCIsaCkuc2VsZWN0QWxsKCIub3ZlcmxheSIpLmRhdGEoW1RpKCJvdmVybGF5IildKTtlLmVudGVyKCkuYXBwZW5kKCJyZWN0IikuYXR0cigiY2xhc3MiLCJvdmVybGF5IikuYXR0cigicG9pbnRlci1ldmVudHMiLCJhbGwiKS5hdHRyKCJjdXJzb3IiLHhpLm92ZXJsYXkpLm1lcmdlKGUpLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1FaSh0aGlzKS5leHRlbnQ7enQodGhpcykuYXR0cigieCIsdFswXVswXSkuYXR0cigieSIsdFswXVsxXSkuYXR0cigid2lkdGgiLHRbMV1bMF0tdFswXVswXSkuYXR0cigiaGVpZ2h0Iix0WzFdWzFdLXRbMF1bMV0pfSksdC5zZWxlY3RBbGwoIi5zZWxlY3Rpb24iKS5kYXRhKFtUaSgic2VsZWN0aW9uIildKS5lbnRlcigpLmFwcGVuZCgicmVjdCIpLmF0dHIoImNsYXNzIiwic2VsZWN0aW9uIikuYXR0cigiY3Vyc29yIix4aS5zZWxlY3Rpb24pLmF0dHIoImZpbGwiLCIjNzc3IikuYXR0cigiZmlsbC1vcGFjaXR5IiwuMykuYXR0cigic3Ryb2tlIiwiI2ZmZiIpLmF0dHIoInNoYXBlLXJlbmRlcmluZyIsImNyaXNwRWRnZXMiKTt2YXIgcj10LnNlbGVjdEFsbCgiLmhhbmRsZSIpLmRhdGEobi5oYW5kbGVzLGZ1bmN0aW9uKHQpe3JldHVybiB0LnR5cGV9KTtyLmV4aXQoKS5yZW1vdmUoKSxyLmVudGVyKCkuYXBwZW5kKCJyZWN0IikuYXR0cigiY2xhc3MiLGZ1bmN0aW9uKHQpe3JldHVybiJoYW5kbGUgaGFuZGxlLS0iK3QudHlwZX0pLmF0dHIoImN1cnNvciIsZnVuY3Rpb24odCl7cmV0dXJuIHhpW3QudHlwZV19KSx0LmVhY2goYykuYXR0cigiZmlsbCIsIm5vbmUiKS5hdHRyKCJwb2ludGVyLWV2ZW50cyIsImFsbCIpLnN0eWxlKCItd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3IiLCJyZ2JhKDAsMCwwLDApIikub24oIm1vdXNlZG93bi5icnVzaCB0b3VjaHN0YXJ0LmJydXNoIixsKX1mdW5jdGlvbiBjKCl7dmFyIHQ9enQodGhpcyksbj1FaSh0aGlzKS5zZWxlY3Rpb247bj8odC5zZWxlY3RBbGwoIi5zZWxlY3Rpb24iKS5zdHlsZSgiZGlzcGxheSIsbnVsbCkuYXR0cigieCIsblswXVswXSkuYXR0cigieSIsblswXVsxXSkuYXR0cigid2lkdGgiLG5bMV1bMF0tblswXVswXSkuYXR0cigiaGVpZ2h0IixuWzFdWzFdLW5bMF1bMV0pLHQuc2VsZWN0QWxsKCIuaGFuZGxlIikuc3R5bGUoImRpc3BsYXkiLG51bGwpLmF0dHIoIngiLGZ1bmN0aW9uKHQpe3JldHVybiJlIj09PXQudHlwZVt0LnR5cGUubGVuZ3RoLTFdP25bMV1bMF0tYS8yOm5bMF1bMF0tYS8yfSkuYXR0cigieSIsZnVuY3Rpb24odCl7cmV0dXJuInMiPT09dC50eXBlWzBdP25bMV1bMV0tYS8yOm5bMF1bMV0tYS8yfSkuYXR0cigid2lkdGgiLGZ1bmN0aW9uKHQpe3JldHVybiJuIj09PXQudHlwZXx8InMiPT09dC50eXBlP25bMV1bMF0tblswXVswXSthOmF9KS5hdHRyKCJoZWlnaHQiLGZ1bmN0aW9uKHQpe3JldHVybiJlIj09PXQudHlwZXx8InciPT09dC50eXBlP25bMV1bMV0tblswXVsxXSthOmF9KSk6dC5zZWxlY3RBbGwoIi5zZWxlY3Rpb24sLmhhbmRsZSIpLnN0eWxlKCJkaXNwbGF5Iiwibm9uZSIpLmF0dHIoIngiLG51bGwpLmF0dHIoInkiLG51bGwpLmF0dHIoIndpZHRoIixudWxsKS5hdHRyKCJoZWlnaHQiLG51bGwpfWZ1bmN0aW9uIGYodCxuKXtyZXR1cm4gdC5fX2JydXNoLmVtaXR0ZXJ8fG5ldyBzKHQsbil9ZnVuY3Rpb24gcyh0LG4pe3RoaXMudGhhdD10LHRoaXMuYXJncz1uLHRoaXMuc3RhdGU9dC5fX2JydXNoLHRoaXMuYWN0aXZlPTB9ZnVuY3Rpb24gbCgpe2lmKHQuZXZlbnQudG91Y2hlcyl7aWYodC5ldmVudC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg8dC5ldmVudC50b3VjaGVzLmxlbmd0aClyZXR1cm4gZGkoKX1lbHNlIGlmKGUpcmV0dXJuO2lmKGkuYXBwbHkodGhpcyxhcmd1bWVudHMpKXt2YXIgcixvLGEsdSxzLGwsaCxkLHAsdixnLHksXyxiPXRoaXMsbT10LmV2ZW50LnRhcmdldC5fX2RhdGFfXy50eXBlLHg9InNlbGVjdGlvbiI9PT0odC5ldmVudC5tZXRhS2V5P209Im92ZXJsYXkiOm0pP3BpOnQuZXZlbnQuYWx0S2V5P3lpOmdpLHc9bj09PWJpP251bGw6TmlbbV0sTT1uPT09X2k/bnVsbDpBaVttXSxOPUVpKGIpLEE9Ti5leHRlbnQsVD1OLnNlbGVjdGlvbixTPUFbMF1bMF0saz1BWzBdWzFdLEU9QVsxXVswXSxDPUFbMV1bMV0sUD13JiZNJiZ0LmV2ZW50LnNoaWZ0S2V5LHo9T3QoYiksUj16LEQ9ZihiLGFyZ3VtZW50cykuYmVmb3Jlc3RhcnQoKTsib3ZlcmxheSI9PT1tP04uc2VsZWN0aW9uPVQ9W1tyPW49PT1iaT9TOnpbMF0sYT1uPT09X2k/azp6WzFdXSxbcz1uPT09Ymk/RTpyLGg9bj09PV9pP0M6YV1dOihyPVRbMF1bMF0sYT1UWzBdWzFdLHM9VFsxXVswXSxoPVRbMV1bMV0pLG89cix1PWEsbD1zLGQ9aDt2YXIgcT16dChiKS5hdHRyKCJwb2ludGVyLWV2ZW50cyIsIm5vbmUiKSxMPXEuc2VsZWN0QWxsKCIub3ZlcmxheSIpLmF0dHIoImN1cnNvciIseGlbbV0pO2lmKHQuZXZlbnQudG91Y2hlcylxLm9uKCJ0b3VjaG1vdmUuYnJ1c2giLE8sITApLm9uKCJ0b3VjaGVuZC5icnVzaCB0b3VjaGNhbmNlbC5icnVzaCIsWSwhMCk7ZWxzZXt2YXIgVT16dCh0LmV2ZW50LnZpZXcpLm9uKCJrZXlkb3duLmJydXNoIixmdW5jdGlvbigpe3N3aXRjaCh0LmV2ZW50LmtleUNvZGUpe2Nhc2UgMTY6UD13JiZNO2JyZWFrO2Nhc2UgMTg6eD09PWdpJiYodyYmKHM9bC1wKncscj1vK3AqdyksTSYmKGg9ZC12Kk0sYT11K3YqTSkseD15aSxCKCkpO2JyZWFrO2Nhc2UgMzI6eCE9PWdpJiZ4IT09eWl8fCh3PDA/cz1sLXA6dz4wJiYocj1vLXApLE08MD9oPWQtdjpNPjAmJihhPXUtdikseD12aSxMLmF0dHIoImN1cnNvciIseGkuc2VsZWN0aW9uKSxCKCkpO2JyZWFrO2RlZmF1bHQ6cmV0dXJufWRpKCl9LCEwKS5vbigia2V5dXAuYnJ1c2giLGZ1bmN0aW9uKCl7c3dpdGNoKHQuZXZlbnQua2V5Q29kZSl7Y2FzZSAxNjpQJiYoeT1fPVA9ITEsQigpKTticmVhaztjYXNlIDE4Ong9PT15aSYmKHc8MD9zPWw6dz4wJiYocj1vKSxNPDA/aD1kOk0+MCYmKGE9dSkseD1naSxCKCkpO2JyZWFrO2Nhc2UgMzI6eD09PXZpJiYodC5ldmVudC5hbHRLZXk/KHcmJihzPWwtcCp3LHI9bytwKncpLE0mJihoPWQtdipNLGE9dSt2Kk0pLHg9eWkpOih3PDA/cz1sOnc+MCYmKHI9byksTTwwP2g9ZDpNPjAmJihhPXUpLHg9Z2kpLEwuYXR0cigiY3Vyc29yIix4aVttXSksQigpKTticmVhaztkZWZhdWx0OnJldHVybn1kaSgpfSwhMCkub24oIm1vdXNlbW92ZS5icnVzaCIsTywhMCkub24oIm1vdXNldXAuYnJ1c2giLFksITApO0l0KHQuZXZlbnQudmlldyl9aGkoKSxNcihiKSxjLmNhbGwoYiksRC5zdGFydCgpfWZ1bmN0aW9uIE8oKXt2YXIgdD1PdChiKTshUHx8eXx8X3x8KE1hdGguYWJzKHRbMF0tUlswXSk+TWF0aC5hYnModFsxXS1SWzFdKT9fPSEwOnk9ITApLFI9dCxnPSEwLGRpKCksQigpfWZ1bmN0aW9uIEIoKXt2YXIgdDtzd2l0Y2gocD1SWzBdLXpbMF0sdj1SWzFdLXpbMV0seCl7Y2FzZSB2aTpjYXNlIHBpOncmJihwPU1hdGgubWF4KFMtcixNYXRoLm1pbihFLXMscCkpLG89citwLGw9cytwKSxNJiYodj1NYXRoLm1heChrLWEsTWF0aC5taW4oQy1oLHYpKSx1PWErdixkPWgrdik7YnJlYWs7Y2FzZSBnaTp3PDA/KHA9TWF0aC5tYXgoUy1yLE1hdGgubWluKEUtcixwKSksbz1yK3AsbD1zKTp3PjAmJihwPU1hdGgubWF4KFMtcyxNYXRoLm1pbihFLXMscCkpLG89cixsPXMrcCksTTwwPyh2PU1hdGgubWF4KGstYSxNYXRoLm1pbihDLWEsdikpLHU9YSt2LGQ9aCk6TT4wJiYodj1NYXRoLm1heChrLWgsTWF0aC5taW4oQy1oLHYpKSx1PWEsZD1oK3YpO2JyZWFrO2Nhc2UgeWk6dyYmKG89TWF0aC5tYXgoUyxNYXRoLm1pbihFLHItcCp3KSksbD1NYXRoLm1heChTLE1hdGgubWluKEUscytwKncpKSksTSYmKHU9TWF0aC5tYXgoayxNYXRoLm1pbihDLGEtdipNKSksZD1NYXRoLm1heChrLE1hdGgubWluKEMsaCt2Kk0pKSl9bDxvJiYodyo9LTEsdD1yLHI9cyxzPXQsdD1vLG89bCxsPXQsbSBpbiB3aSYmTC5hdHRyKCJjdXJzb3IiLHhpW209d2lbbV1dKSksZDx1JiYoTSo9LTEsdD1hLGE9aCxoPXQsdD11LHU9ZCxkPXQsbSBpbiBNaSYmTC5hdHRyKCJjdXJzb3IiLHhpW209TWlbbV1dKSksTi5zZWxlY3Rpb24mJihUPU4uc2VsZWN0aW9uKSx5JiYobz1UWzBdWzBdLGw9VFsxXVswXSksXyYmKHU9VFswXVsxXSxkPVRbMV1bMV0pLFRbMF1bMF09PT1vJiZUWzBdWzFdPT09dSYmVFsxXVswXT09PWwmJlRbMV1bMV09PT1kfHwoTi5zZWxlY3Rpb249W1tvLHVdLFtsLGRdXSxjLmNhbGwoYiksRC5icnVzaCgpKX1mdW5jdGlvbiBZKCl7aWYoaGkoKSx0LmV2ZW50LnRvdWNoZXMpe2lmKHQuZXZlbnQudG91Y2hlcy5sZW5ndGgpcmV0dXJuO2UmJmNsZWFyVGltZW91dChlKSxlPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtlPW51bGx9LDUwMCkscS5vbigidG91Y2htb3ZlLmJydXNoIHRvdWNoZW5kLmJydXNoIHRvdWNoY2FuY2VsLmJydXNoIixudWxsKX1lbHNlIGp0KHQuZXZlbnQudmlldyxnKSxVLm9uKCJrZXlkb3duLmJydXNoIGtleXVwLmJydXNoIG1vdXNlbW92ZS5icnVzaCBtb3VzZXVwLmJydXNoIixudWxsKTtxLmF0dHIoInBvaW50ZXItZXZlbnRzIiwiYWxsIiksTC5hdHRyKCJjdXJzb3IiLHhpLm92ZXJsYXkpLE4uc2VsZWN0aW9uJiYoVD1OLnNlbGVjdGlvbiksQ2koVCkmJihOLnNlbGVjdGlvbj1udWxsLGMuY2FsbChiKSksRC5lbmQoKX19ZnVuY3Rpb24gaCgpe3ZhciB0PXRoaXMuX19icnVzaHx8e3NlbGVjdGlvbjpudWxsfTtyZXR1cm4gdC5leHRlbnQ9ci5hcHBseSh0aGlzLGFyZ3VtZW50cyksdC5kaW09bix0fXJldHVybiB1Lm1vdmU9ZnVuY3Rpb24odCxlKXt0LnNlbGVjdGlvbj90Lm9uKCJzdGFydC5icnVzaCIsZnVuY3Rpb24oKXtmKHRoaXMsYXJndW1lbnRzKS5iZWZvcmVzdGFydCgpLnN0YXJ0KCl9KS5vbigiaW50ZXJydXB0LmJydXNoIGVuZC5icnVzaCIsZnVuY3Rpb24oKXtmKHRoaXMsYXJndW1lbnRzKS5lbmQoKX0pLnR3ZWVuKCJicnVzaCIsZnVuY3Rpb24oKXt2YXIgdD10aGlzLHI9dC5fX2JydXNoLGk9Zih0LGFyZ3VtZW50cyksbz1yLnNlbGVjdGlvbixhPW4uaW5wdXQoImZ1bmN0aW9uIj09dHlwZW9mIGU/ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk6ZSxyLmV4dGVudCksdT15ZShvLGEpO2Z1bmN0aW9uIHMobil7ci5zZWxlY3Rpb249MT09PW4mJkNpKGEpP251bGw6dShuKSxjLmNhbGwodCksaS5icnVzaCgpfXJldHVybiBvJiZhP3M6cygxKX0pOnQuZWFjaChmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cyxyPXRoaXMuX19icnVzaCxpPW4uaW5wdXQoImZ1bmN0aW9uIj09dHlwZW9mIGU/ZS5hcHBseSh0aGlzLHQpOmUsci5leHRlbnQpLG89Zih0aGlzLHQpLmJlZm9yZXN0YXJ0KCk7TXIodGhpcyksci5zZWxlY3Rpb249bnVsbD09aXx8Q2koaSk/bnVsbDppLGMuY2FsbCh0aGlzKSxvLnN0YXJ0KCkuYnJ1c2goKS5lbmQoKX0pfSxzLnByb3RvdHlwZT17YmVmb3Jlc3RhcnQ6ZnVuY3Rpb24oKXtyZXR1cm4gMT09Kyt0aGlzLmFjdGl2ZSYmKHRoaXMuc3RhdGUuZW1pdHRlcj10aGlzLHRoaXMuc3RhcnRpbmc9ITApLHRoaXN9LHN0YXJ0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhcnRpbmcmJih0aGlzLnN0YXJ0aW5nPSExLHRoaXMuZW1pdCgic3RhcnQiKSksdGhpc30sYnJ1c2g6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbWl0KCJicnVzaCIpLHRoaXN9LGVuZDpmdW5jdGlvbigpe3JldHVybiAwPT0tLXRoaXMuYWN0aXZlJiYoZGVsZXRlIHRoaXMuc3RhdGUuZW1pdHRlcix0aGlzLmVtaXQoImVuZCIpKSx0aGlzfSxlbWl0OmZ1bmN0aW9uKHQpe1N0KG5ldyBsaSh1LHQsbi5vdXRwdXQodGhpcy5zdGF0ZS5zZWxlY3Rpb24pKSxvLmFwcGx5LG8sW3QsdGhpcy50aGF0LHRoaXMuYXJnc10pfX0sdS5leHRlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHI9ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDpzaShbWyt0WzBdWzBdLCt0WzBdWzFdXSxbK3RbMV1bMF0sK3RbMV1bMV1dXSksdSk6cn0sdS5maWx0ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGk9ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDpzaSghIXQpLHUpOml9LHUuaGFuZGxlU2l6ZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oYT0rdCx1KTphfSx1Lm9uPWZ1bmN0aW9uKCl7dmFyIHQ9by5vbi5hcHBseShvLGFyZ3VtZW50cyk7cmV0dXJuIHQ9PT1vP3U6dH0sdX12YXIgemk9TWF0aC5jb3MsUmk9TWF0aC5zaW4sRGk9TWF0aC5QSSxxaT1EaS8yLExpPTIqRGksVWk9TWF0aC5tYXg7dmFyIE9pPUFycmF5LnByb3RvdHlwZS5zbGljZTtmdW5jdGlvbiBCaSh0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdH19dmFyIFlpPU1hdGguUEksRmk9MipZaSxJaT1GaS0xZS02O2Z1bmN0aW9uIGppKCl7dGhpcy5feDA9dGhpcy5feTA9dGhpcy5feDE9dGhpcy5feTE9bnVsbCx0aGlzLl89IiJ9ZnVuY3Rpb24gSGkoKXtyZXR1cm4gbmV3IGppfWZ1bmN0aW9uIFhpKHQpe3JldHVybiB0LnNvdXJjZX1mdW5jdGlvbiBHaSh0KXtyZXR1cm4gdC50YXJnZXR9ZnVuY3Rpb24gVmkodCl7cmV0dXJuIHQucmFkaXVzfWZ1bmN0aW9uICRpKHQpe3JldHVybiB0LnN0YXJ0QW5nbGV9ZnVuY3Rpb24gV2kodCl7cmV0dXJuIHQuZW5kQW5nbGV9amkucHJvdG90eXBlPUhpLnByb3RvdHlwZT17Y29uc3RydWN0b3I6amksbW92ZVRvOmZ1bmN0aW9uKHQsbil7dGhpcy5fKz0iTSIrKHRoaXMuX3gwPXRoaXMuX3gxPSt0KSsiLCIrKHRoaXMuX3kwPXRoaXMuX3kxPStuKX0sY2xvc2VQYXRoOmZ1bmN0aW9uKCl7bnVsbCE9PXRoaXMuX3gxJiYodGhpcy5feDE9dGhpcy5feDAsdGhpcy5feTE9dGhpcy5feTAsdGhpcy5fKz0iWiIpfSxsaW5lVG86ZnVuY3Rpb24odCxuKXt0aGlzLl8rPSJMIisodGhpcy5feDE9K3QpKyIsIisodGhpcy5feTE9K24pfSxxdWFkcmF0aWNDdXJ2ZVRvOmZ1bmN0aW9uKHQsbixlLHIpe3RoaXMuXys9IlEiKyArdCsiLCIrICtuKyIsIisodGhpcy5feDE9K2UpKyIsIisodGhpcy5feTE9K3IpfSxiZXppZXJDdXJ2ZVRvOmZ1bmN0aW9uKHQsbixlLHIsaSxvKXt0aGlzLl8rPSJDIisgK3QrIiwiKyArbisiLCIrICtlKyIsIisgK3IrIiwiKyh0aGlzLl94MT0raSkrIiwiKyh0aGlzLl95MT0rbyl9LGFyY1RvOmZ1bmN0aW9uKHQsbixlLHIsaSl7dD0rdCxuPStuLGU9K2Uscj0rcixpPStpO3ZhciBvPXRoaXMuX3gxLGE9dGhpcy5feTEsdT1lLXQsYz1yLW4sZj1vLXQscz1hLW4sbD1mKmYrcypzO2lmKGk8MCl0aHJvdyBuZXcgRXJyb3IoIm5lZ2F0aXZlIHJhZGl1czogIitpKTtpZihudWxsPT09dGhpcy5feDEpdGhpcy5fKz0iTSIrKHRoaXMuX3gxPXQpKyIsIisodGhpcy5feTE9bik7ZWxzZSBpZihsPjFlLTYpaWYoTWF0aC5hYnMocyp1LWMqZik+MWUtNiYmaSl7dmFyIGg9ZS1vLGQ9ci1hLHA9dSp1K2MqYyx2PWgqaCtkKmQsZz1NYXRoLnNxcnQocCkseT1NYXRoLnNxcnQobCksXz1pKk1hdGgudGFuKChZaS1NYXRoLmFjb3MoKHArbC12KS8oMipnKnkpKSkvMiksYj1fL3ksbT1fL2c7TWF0aC5hYnMoYi0xKT4xZS02JiYodGhpcy5fKz0iTCIrKHQrYipmKSsiLCIrKG4rYipzKSksdGhpcy5fKz0iQSIraSsiLCIraSsiLDAsMCwiKyArKHMqaD5mKmQpKyIsIisodGhpcy5feDE9dCttKnUpKyIsIisodGhpcy5feTE9bittKmMpfWVsc2UgdGhpcy5fKz0iTCIrKHRoaXMuX3gxPXQpKyIsIisodGhpcy5feTE9bik7ZWxzZTt9LGFyYzpmdW5jdGlvbih0LG4sZSxyLGksbyl7dD0rdCxuPStuO3ZhciBhPShlPStlKSpNYXRoLmNvcyhyKSx1PWUqTWF0aC5zaW4ociksYz10K2EsZj1uK3Uscz0xXm8sbD1vP3ItaTppLXI7aWYoZTwwKXRocm93IG5ldyBFcnJvcigibmVnYXRpdmUgcmFkaXVzOiAiK2UpO251bGw9PT10aGlzLl94MT90aGlzLl8rPSJNIitjKyIsIitmOihNYXRoLmFicyh0aGlzLl94MS1jKT4xZS02fHxNYXRoLmFicyh0aGlzLl95MS1mKT4xZS02KSYmKHRoaXMuXys9IkwiK2MrIiwiK2YpLGUmJihsPDAmJihsPWwlRmkrRmkpLGw+SWk/dGhpcy5fKz0iQSIrZSsiLCIrZSsiLDAsMSwiK3MrIiwiKyh0LWEpKyIsIisobi11KSsiQSIrZSsiLCIrZSsiLDAsMSwiK3MrIiwiKyh0aGlzLl94MT1jKSsiLCIrKHRoaXMuX3kxPWYpOmw+MWUtNiYmKHRoaXMuXys9IkEiK2UrIiwiK2UrIiwwLCIrICsobD49WWkpKyIsIitzKyIsIisodGhpcy5feDE9dCtlKk1hdGguY29zKGkpKSsiLCIrKHRoaXMuX3kxPW4rZSpNYXRoLnNpbihpKSkpKX0scmVjdDpmdW5jdGlvbih0LG4sZSxyKXt0aGlzLl8rPSJNIisodGhpcy5feDA9dGhpcy5feDE9K3QpKyIsIisodGhpcy5feTA9dGhpcy5feTE9K24pKyJoIisgK2UrInYiKyArcisiaCIrLWUrIloifSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLl99fTtmdW5jdGlvbiBaaSgpe31mdW5jdGlvbiBRaSh0LG4pe3ZhciBlPW5ldyBaaTtpZih0IGluc3RhbmNlb2YgWmkpdC5lYWNoKGZ1bmN0aW9uKHQsbil7ZS5zZXQobix0KX0pO2Vsc2UgaWYoQXJyYXkuaXNBcnJheSh0KSl7dmFyIHIsaT0tMSxvPXQubGVuZ3RoO2lmKG51bGw9PW4pZm9yKDsrK2k8bzspZS5zZXQoaSx0W2ldKTtlbHNlIGZvcig7KytpPG87KWUuc2V0KG4ocj10W2ldLGksdCkscil9ZWxzZSBpZih0KWZvcih2YXIgYSBpbiB0KWUuc2V0KGEsdFthXSk7cmV0dXJuIGV9ZnVuY3Rpb24gSmkoKXtyZXR1cm57fX1mdW5jdGlvbiBLaSh0LG4sZSl7dFtuXT1lfWZ1bmN0aW9uIHRvKCl7cmV0dXJuIFFpKCl9ZnVuY3Rpb24gbm8odCxuLGUpe3Quc2V0KG4sZSl9ZnVuY3Rpb24gZW8oKXt9WmkucHJvdG90eXBlPVFpLnByb3RvdHlwZT17Y29uc3RydWN0b3I6WmksaGFzOmZ1bmN0aW9uKHQpe3JldHVybiIkIit0IGluIHRoaXN9LGdldDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpc1siJCIrdF19LHNldDpmdW5jdGlvbih0LG4pe3JldHVybiB0aGlzWyIkIit0XT1uLHRoaXN9LHJlbW92ZTpmdW5jdGlvbih0KXt2YXIgbj0iJCIrdDtyZXR1cm4gbiBpbiB0aGlzJiZkZWxldGUgdGhpc1tuXX0sY2xlYXI6ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcykiJCI9PT10WzBdJiZkZWxldGUgdGhpc1t0XX0sa2V5czpmdW5jdGlvbigpe3ZhciB0PVtdO2Zvcih2YXIgbiBpbiB0aGlzKSIkIj09PW5bMF0mJnQucHVzaChuLnNsaWNlKDEpKTtyZXR1cm4gdH0sdmFsdWVzOmZ1bmN0aW9uKCl7dmFyIHQ9W107Zm9yKHZhciBuIGluIHRoaXMpIiQiPT09blswXSYmdC5wdXNoKHRoaXNbbl0pO3JldHVybiB0fSxlbnRyaWVzOmZ1bmN0aW9uKCl7dmFyIHQ9W107Zm9yKHZhciBuIGluIHRoaXMpIiQiPT09blswXSYmdC5wdXNoKHtrZXk6bi5zbGljZSgxKSx2YWx1ZTp0aGlzW25dfSk7cmV0dXJuIHR9LHNpemU6ZnVuY3Rpb24oKXt2YXIgdD0wO2Zvcih2YXIgbiBpbiB0aGlzKSIkIj09PW5bMF0mJisrdDtyZXR1cm4gdH0sZW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcylpZigiJCI9PT10WzBdKXJldHVybiExO3JldHVybiEwfSxlYWNoOmZ1bmN0aW9uKHQpe2Zvcih2YXIgbiBpbiB0aGlzKSIkIj09PW5bMF0mJnQodGhpc1tuXSxuLnNsaWNlKDEpLHRoaXMpfX07dmFyIHJvPVFpLnByb3RvdHlwZTtmdW5jdGlvbiBpbyh0LG4pe3ZhciBlPW5ldyBlbztpZih0IGluc3RhbmNlb2YgZW8pdC5lYWNoKGZ1bmN0aW9uKHQpe2UuYWRkKHQpfSk7ZWxzZSBpZih0KXt2YXIgcj0tMSxpPXQubGVuZ3RoO2lmKG51bGw9PW4pZm9yKDsrK3I8aTspZS5hZGQodFtyXSk7ZWxzZSBmb3IoOysrcjxpOyllLmFkZChuKHRbcl0scix0KSl9cmV0dXJuIGV9ZW8ucHJvdG90eXBlPWlvLnByb3RvdHlwZT17Y29uc3RydWN0b3I6ZW8saGFzOnJvLmhhcyxhZGQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXNbIiQiKyh0Kz0iIildPXQsdGhpc30scmVtb3ZlOnJvLnJlbW92ZSxjbGVhcjpyby5jbGVhcix2YWx1ZXM6cm8ua2V5cyxzaXplOnJvLnNpemUsZW1wdHk6cm8uZW1wdHksZWFjaDpyby5lYWNofTt2YXIgb289QXJyYXkucHJvdG90eXBlLnNsaWNlO2Z1bmN0aW9uIGFvKHQsbil7cmV0dXJuIHQtbn1mdW5jdGlvbiB1byh0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdH19ZnVuY3Rpb24gY28odCxuKXtmb3IodmFyIGUscj0tMSxpPW4ubGVuZ3RoOysrcjxpOylpZihlPWZvKHQsbltyXSkpcmV0dXJuIGU7cmV0dXJuIDB9ZnVuY3Rpb24gZm8odCxuKXtmb3IodmFyIGU9blswXSxyPW5bMV0saT0tMSxvPTAsYT10Lmxlbmd0aCx1PWEtMTtvPGE7dT1vKyspe3ZhciBjPXRbb10sZj1jWzBdLHM9Y1sxXSxsPXRbdV0saD1sWzBdLGQ9bFsxXTtpZihzbyhjLGwsbikpcmV0dXJuIDA7cz5yIT1kPnImJmU8KGgtZikqKHItcykvKGQtcykrZiYmKGk9LWkpfXJldHVybiBpfWZ1bmN0aW9uIHNvKHQsbixlKXt2YXIgcixpLG8sYTtyZXR1cm4gZnVuY3Rpb24odCxuLGUpe3JldHVybihuWzBdLXRbMF0pKihlWzFdLXRbMV0pPT0oZVswXS10WzBdKSooblsxXS10WzFdKX0odCxuLGUpJiYoaT10W3I9Kyh0WzBdPT09blswXSldLG89ZVtyXSxhPW5bcl0saTw9byYmbzw9YXx8YTw9byYmbzw9aSl9ZnVuY3Rpb24gbG8oKXt9dmFyIGhvPVtbXSxbW1sxLDEuNV0sWy41LDFdXV0sW1tbMS41LDFdLFsxLDEuNV1dXSxbW1sxLjUsMV0sWy41LDFdXV0sW1tbMSwuNV0sWzEuNSwxXV1dLFtbWzEsMS41XSxbLjUsMV1dLFtbMSwuNV0sWzEuNSwxXV1dLFtbWzEsLjVdLFsxLDEuNV1dXSxbW1sxLC41XSxbLjUsMV1dXSxbW1suNSwxXSxbMSwuNV1dXSxbW1sxLDEuNV0sWzEsLjVdXV0sW1tbLjUsMV0sWzEsLjVdXSxbWzEuNSwxXSxbMSwxLjVdXV0sW1tbMS41LDFdLFsxLC41XV1dLFtbWy41LDFdLFsxLjUsMV1dXSxbW1sxLDEuNV0sWzEuNSwxXV1dLFtbWy41LDFdLFsxLDEuNV1dXSxbXV07ZnVuY3Rpb24gcG8oKXt2YXIgdD0xLG49MSxlPU0scj11O2Z1bmN0aW9uIGkodCl7dmFyIG49ZSh0KTtpZihBcnJheS5pc0FycmF5KG4pKW49bi5zbGljZSgpLnNvcnQoYW8pO2Vsc2V7dmFyIHI9cyh0KSxpPXJbMF0sYT1yWzFdO249dyhpLGEsbiksbj1nKE1hdGguZmxvb3IoaS9uKSpuLE1hdGguZmxvb3IoYS9uKSpuLG4pfXJldHVybiBuLm1hcChmdW5jdGlvbihuKXtyZXR1cm4gbyh0LG4pfSl9ZnVuY3Rpb24gbyhlLGkpe3ZhciBvPVtdLHU9W107cmV0dXJuIGZ1bmN0aW9uKGUscixpKXt2YXIgbyx1LGMsZixzLGwsaD1uZXcgQXJyYXksZD1uZXcgQXJyYXk7bz11PS0xLGY9ZVswXT49cixob1tmPDwxXS5mb3JFYWNoKHApO2Zvcig7KytvPHQtMTspYz1mLGY9ZVtvKzFdPj1yLGhvW2N8Zjw8MV0uZm9yRWFjaChwKTtob1tmPDwwXS5mb3JFYWNoKHApO2Zvcig7Kyt1PG4tMTspe2ZvcihvPS0xLGY9ZVt1KnQrdF0+PXIscz1lW3UqdF0+PXIsaG9bZjw8MXxzPDwyXS5mb3JFYWNoKHApOysrbzx0LTE7KWM9ZixmPWVbdSp0K3QrbysxXT49cixsPXMscz1lW3UqdCtvKzFdPj1yLGhvW2N8Zjw8MXxzPDwyfGw8PDNdLmZvckVhY2gocCk7aG9bZnxzPDwzXS5mb3JFYWNoKHApfW89LTEscz1lW3UqdF0+PXIsaG9bczw8Ml0uZm9yRWFjaChwKTtmb3IoOysrbzx0LTE7KWw9cyxzPWVbdSp0K28rMV0+PXIsaG9bczw8MnxsPDwzXS5mb3JFYWNoKHApO2Z1bmN0aW9uIHAodCl7dmFyIG4sZSxyPVt0WzBdWzBdK28sdFswXVsxXSt1XSxjPVt0WzFdWzBdK28sdFsxXVsxXSt1XSxmPWEocikscz1hKGMpOyhuPWRbZl0pPyhlPWhbc10pPyhkZWxldGUgZFtuLmVuZF0sZGVsZXRlIGhbZS5zdGFydF0sbj09PWU/KG4ucmluZy5wdXNoKGMpLGkobi5yaW5nKSk6aFtuLnN0YXJ0XT1kW2UuZW5kXT17c3RhcnQ6bi5zdGFydCxlbmQ6ZS5lbmQscmluZzpuLnJpbmcuY29uY2F0KGUucmluZyl9KTooZGVsZXRlIGRbbi5lbmRdLG4ucmluZy5wdXNoKGMpLGRbbi5lbmQ9c109bik6KG49aFtzXSk/KGU9ZFtmXSk/KGRlbGV0ZSBoW24uc3RhcnRdLGRlbGV0ZSBkW2UuZW5kXSxuPT09ZT8obi5yaW5nLnB1c2goYyksaShuLnJpbmcpKTpoW2Uuc3RhcnRdPWRbbi5lbmRdPXtzdGFydDplLnN0YXJ0LGVuZDpuLmVuZCxyaW5nOmUucmluZy5jb25jYXQobi5yaW5nKX0pOihkZWxldGUgaFtuLnN0YXJ0XSxuLnJpbmcudW5zaGlmdChyKSxoW24uc3RhcnQ9Zl09bik6aFtmXT1kW3NdPXtzdGFydDpmLGVuZDpzLHJpbmc6W3IsY119fWhvW3M8PDNdLmZvckVhY2gocCl9KGUsaSxmdW5jdGlvbih0KXtyKHQsZSxpKSxmdW5jdGlvbih0KXtmb3IodmFyIG49MCxlPXQubGVuZ3RoLHI9dFtlLTFdWzFdKnRbMF1bMF0tdFtlLTFdWzBdKnRbMF1bMV07KytuPGU7KXIrPXRbbi0xXVsxXSp0W25dWzBdLXRbbi0xXVswXSp0W25dWzFdO3JldHVybiByfSh0KT4wP28ucHVzaChbdF0pOnUucHVzaCh0KX0pLHUuZm9yRWFjaChmdW5jdGlvbih0KXtmb3IodmFyIG4sZT0wLHI9by5sZW5ndGg7ZTxyOysrZSlpZigtMSE9PWNvKChuPW9bZV0pWzBdLHQpKXJldHVybiB2b2lkIG4ucHVzaCh0KX0pLHt0eXBlOiJNdWx0aVBvbHlnb24iLHZhbHVlOmksY29vcmRpbmF0ZXM6b319ZnVuY3Rpb24gYShuKXtyZXR1cm4gMipuWzBdK25bMV0qKHQrMSkqNH1mdW5jdGlvbiB1KGUscixpKXtlLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG8sYT1lWzBdLHU9ZVsxXSxjPTB8YSxmPTB8dSxzPXJbZip0K2NdO2E+MCYmYTx0JiZjPT09YSYmKG89cltmKnQrYy0xXSxlWzBdPWErKGktbykvKHMtbyktLjUpLHU+MCYmdTxuJiZmPT09dSYmKG89clsoZi0xKSp0K2NdLGVbMV09dSsoaS1vKS8ocy1vKS0uNSl9KX1yZXR1cm4gaS5jb250b3VyPW8saS5zaXplPWZ1bmN0aW9uKGUpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVyblt0LG5dO3ZhciByPU1hdGguY2VpbChlWzBdKSxvPU1hdGguY2VpbChlWzFdKTtpZighKHI+MCYmbz4wKSl0aHJvdyBuZXcgRXJyb3IoImludmFsaWQgc2l6ZSIpO3JldHVybiB0PXIsbj1vLGl9LGkudGhyZXNob2xkcz1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZT0iZnVuY3Rpb24iPT10eXBlb2YgdD90OkFycmF5LmlzQXJyYXkodCk/dW8ob28uY2FsbCh0KSk6dW8odCksaSk6ZX0saS5zbW9vdGg9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHI9dD91OmxvLGkpOnI9PT11fSxpfWZ1bmN0aW9uIHZvKHQsbixlKXtmb3IodmFyIHI9dC53aWR0aCxpPXQuaGVpZ2h0LG89MSsoZTw8MSksYT0wO2E8aTsrK2EpZm9yKHZhciB1PTAsYz0wO3U8citlOysrdSl1PHImJihjKz10LmRhdGFbdSthKnJdKSx1Pj1lJiYodT49byYmKGMtPXQuZGF0YVt1LW8rYSpyXSksbi5kYXRhW3UtZSthKnJdPWMvTWF0aC5taW4odSsxLHItMStvLXUsbykpfWZ1bmN0aW9uIGdvKHQsbixlKXtmb3IodmFyIHI9dC53aWR0aCxpPXQuaGVpZ2h0LG89MSsoZTw8MSksYT0wO2E8cjsrK2EpZm9yKHZhciB1PTAsYz0wO3U8aStlOysrdSl1PGkmJihjKz10LmRhdGFbYSt1KnJdKSx1Pj1lJiYodT49byYmKGMtPXQuZGF0YVthKyh1LW8pKnJdKSxuLmRhdGFbYSsodS1lKSpyXT1jL01hdGgubWluKHUrMSxpLTErby11LG8pKX1mdW5jdGlvbiB5byh0KXtyZXR1cm4gdFswXX1mdW5jdGlvbiBfbyh0KXtyZXR1cm4gdFsxXX1mdW5jdGlvbiBibygpe3JldHVybiAxfXZhciBtbz17fSx4bz17fSx3bz0zNCxNbz0xMCxObz0xMztmdW5jdGlvbiBBbyh0KXtyZXR1cm4gbmV3IEZ1bmN0aW9uKCJkIiwicmV0dXJuIHsiK3QubWFwKGZ1bmN0aW9uKHQsbil7cmV0dXJuIEpTT04uc3RyaW5naWZ5KHQpKyI6IGRbIituKyJdIn0pLmpvaW4oIiwiKSsifSIpfWZ1bmN0aW9uIFRvKHQpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCksZT1bXTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe2Zvcih2YXIgciBpbiB0KXIgaW4gbnx8ZS5wdXNoKG5bcl09cil9KSxlfWZ1bmN0aW9uIFNvKHQsbil7dmFyIGU9dCsiIixyPWUubGVuZ3RoO3JldHVybiByPG4/bmV3IEFycmF5KG4tcisxKS5qb2luKDApK2U6ZX1mdW5jdGlvbiBrbyh0KXt2YXIgbixlPXQuZ2V0VVRDSG91cnMoKSxyPXQuZ2V0VVRDTWludXRlcygpLGk9dC5nZXRVVENTZWNvbmRzKCksbz10LmdldFVUQ01pbGxpc2Vjb25kcygpO3JldHVybiBpc05hTih0KT8iSW52YWxpZCBEYXRlIjooKG49dC5nZXRVVENGdWxsWWVhcigpKTwwPyItIitTbygtbiw2KTpuPjk5OTk/IisiK1NvKG4sNik6U28obiw0KSkrIi0iK1NvKHQuZ2V0VVRDTW9udGgoKSsxLDIpKyItIitTbyh0LmdldFVUQ0RhdGUoKSwyKSsobz8iVCIrU28oZSwyKSsiOiIrU28ociwyKSsiOiIrU28oaSwyKSsiLiIrU28obywzKSsiWiI6aT8iVCIrU28oZSwyKSsiOiIrU28ociwyKSsiOiIrU28oaSwyKSsiWiI6cnx8ZT8iVCIrU28oZSwyKSsiOiIrU28ociwyKSsiWiI6IiIpfWZ1bmN0aW9uIEVvKHQpe3ZhciBuPW5ldyBSZWdFeHAoJ1siJyt0KyJcblxyXSIpLGU9dC5jaGFyQ29kZUF0KDApO2Z1bmN0aW9uIHIodCxuKXt2YXIgcixpPVtdLG89dC5sZW5ndGgsYT0wLHU9MCxjPW88PTAsZj0hMTtmdW5jdGlvbiBzKCl7aWYoYylyZXR1cm4geG87aWYoZilyZXR1cm4gZj0hMSxtbzt2YXIgbixyLGk9YTtpZih0LmNoYXJDb2RlQXQoaSk9PT13byl7Zm9yKDthKys8byYmdC5jaGFyQ29kZUF0KGEpIT09d298fHQuY2hhckNvZGVBdCgrK2EpPT09d287KTtyZXR1cm4obj1hKT49bz9jPSEwOihyPXQuY2hhckNvZGVBdChhKyspKT09PU1vP2Y9ITA6cj09PU5vJiYoZj0hMCx0LmNoYXJDb2RlQXQoYSk9PT1NbyYmKythKSx0LnNsaWNlKGkrMSxuLTEpLnJlcGxhY2UoLyIiL2csJyInKX1mb3IoO2E8bzspe2lmKChyPXQuY2hhckNvZGVBdChuPWErKykpPT09TW8pZj0hMDtlbHNlIGlmKHI9PT1ObylmPSEwLHQuY2hhckNvZGVBdChhKT09PU1vJiYrK2E7ZWxzZSBpZihyIT09ZSljb250aW51ZTtyZXR1cm4gdC5zbGljZShpLG4pfXJldHVybiBjPSEwLHQuc2xpY2UoaSxvKX1mb3IodC5jaGFyQ29kZUF0KG8tMSk9PT1NbyYmLS1vLHQuY2hhckNvZGVBdChvLTEpPT09Tm8mJi0tbzsocj1zKCkpIT09eG87KXtmb3IodmFyIGw9W107ciE9PW1vJiZyIT09eG87KWwucHVzaChyKSxyPXMoKTtuJiZudWxsPT0obD1uKGwsdSsrKSl8fGkucHVzaChsKX1yZXR1cm4gaX1mdW5jdGlvbiBpKG4sZSl7cmV0dXJuIG4ubWFwKGZ1bmN0aW9uKG4pe3JldHVybiBlLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gYShuW3RdKX0pLmpvaW4odCl9KX1mdW5jdGlvbiBvKG4pe3JldHVybiBuLm1hcChhKS5qb2luKHQpfWZ1bmN0aW9uIGEodCl7cmV0dXJuIG51bGw9PXQ/IiI6dCBpbnN0YW5jZW9mIERhdGU/a28odCk6bi50ZXN0KHQrPSIiKT8nIicrdC5yZXBsYWNlKC8iL2csJyIiJykrJyInOnR9cmV0dXJue3BhcnNlOmZ1bmN0aW9uKHQsbil7dmFyIGUsaSxvPXIodCxmdW5jdGlvbih0LHIpe2lmKGUpcmV0dXJuIGUodCxyLTEpO2k9dCxlPW4/ZnVuY3Rpb24odCxuKXt2YXIgZT1Bbyh0KTtyZXR1cm4gZnVuY3Rpb24ocixpKXtyZXR1cm4gbihlKHIpLGksdCl9fSh0LG4pOkFvKHQpfSk7cmV0dXJuIG8uY29sdW1ucz1pfHxbXSxvfSxwYXJzZVJvd3M6cixmb3JtYXQ6ZnVuY3Rpb24obixlKXtyZXR1cm4gbnVsbD09ZSYmKGU9VG8obikpLFtlLm1hcChhKS5qb2luKHQpXS5jb25jYXQoaShuLGUpKS5qb2luKCJcbiIpfSxmb3JtYXRCb2R5OmZ1bmN0aW9uKHQsbil7cmV0dXJuIG51bGw9PW4mJihuPVRvKHQpKSxpKHQsbikuam9pbigiXG4iKX0sZm9ybWF0Um93czpmdW5jdGlvbih0KXtyZXR1cm4gdC5tYXAobykuam9pbigiXG4iKX19fXZhciBDbz1FbygiLCIpLFBvPUNvLnBhcnNlLHpvPUNvLnBhcnNlUm93cyxSbz1Dby5mb3JtYXQsRG89Q28uZm9ybWF0Qm9keSxxbz1Dby5mb3JtYXRSb3dzLExvPUVvKCJcdCIpLFVvPUxvLnBhcnNlLE9vPUxvLnBhcnNlUm93cyxCbz1Mby5mb3JtYXQsWW89TG8uZm9ybWF0Qm9keSxGbz1Mby5mb3JtYXRSb3dzO2Z1bmN0aW9uIElvKHQpe2lmKCF0Lm9rKXRocm93IG5ldyBFcnJvcih0LnN0YXR1cysiICIrdC5zdGF0dXNUZXh0KTtyZXR1cm4gdC5ibG9iKCl9ZnVuY3Rpb24gam8odCl7aWYoIXQub2spdGhyb3cgbmV3IEVycm9yKHQuc3RhdHVzKyIgIit0LnN0YXR1c1RleHQpO3JldHVybiB0LmFycmF5QnVmZmVyKCl9ZnVuY3Rpb24gSG8odCl7aWYoIXQub2spdGhyb3cgbmV3IEVycm9yKHQuc3RhdHVzKyIgIit0LnN0YXR1c1RleHQpO3JldHVybiB0LnRleHQoKX1mdW5jdGlvbiBYbyh0LG4pe3JldHVybiBmZXRjaCh0LG4pLnRoZW4oSG8pfWZ1bmN0aW9uIEdvKHQpe3JldHVybiBmdW5jdGlvbihuLGUscil7cmV0dXJuIDI9PT1hcmd1bWVudHMubGVuZ3RoJiYiZnVuY3Rpb24iPT10eXBlb2YgZSYmKHI9ZSxlPXZvaWQgMCksWG8obixlKS50aGVuKGZ1bmN0aW9uKG4pe3JldHVybiB0KG4scil9KX19dmFyIFZvPUdvKFBvKSwkbz1HbyhVbyk7ZnVuY3Rpb24gV28odCl7aWYoIXQub2spdGhyb3cgbmV3IEVycm9yKHQuc3RhdHVzKyIgIit0LnN0YXR1c1RleHQpO3JldHVybiB0Lmpzb24oKX1mdW5jdGlvbiBabyh0KXtyZXR1cm4gZnVuY3Rpb24obixlKXtyZXR1cm4gWG8obixlKS50aGVuKGZ1bmN0aW9uKG4pe3JldHVybihuZXcgRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcobix0KX0pfX12YXIgUW89Wm8oImFwcGxpY2F0aW9uL3htbCIpLEpvPVpvKCJ0ZXh0L2h0bWwiKSxLbz1abygiaW1hZ2Uvc3ZnK3htbCIpO2Z1bmN0aW9uIHRhKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0fX1mdW5jdGlvbiBuYSgpe3JldHVybiAxZS02KihNYXRoLnJhbmRvbSgpLS41KX1mdW5jdGlvbiBlYSh0LG4sZSxyKXtpZihpc05hTihuKXx8aXNOYU4oZSkpcmV0dXJuIHQ7dmFyIGksbyxhLHUsYyxmLHMsbCxoLGQ9dC5fcm9vdCxwPXtkYXRhOnJ9LHY9dC5feDAsZz10Ll95MCx5PXQuX3gxLF89dC5feTE7aWYoIWQpcmV0dXJuIHQuX3Jvb3Q9cCx0O2Zvcig7ZC5sZW5ndGg7KWlmKChmPW4+PShvPSh2K3kpLzIpKT92PW86eT1vLChzPWU+PShhPShnK18pLzIpKT9nPWE6Xz1hLGk9ZCwhKGQ9ZFtsPXM8PDF8Zl0pKXJldHVybiBpW2xdPXAsdDtpZih1PSt0Ll94LmNhbGwobnVsbCxkLmRhdGEpLGM9K3QuX3kuY2FsbChudWxsLGQuZGF0YSksbj09PXUmJmU9PT1jKXJldHVybiBwLm5leHQ9ZCxpP2lbbF09cDp0Ll9yb290PXAsdDtkb3tpPWk/aVtsXT1uZXcgQXJyYXkoNCk6dC5fcm9vdD1uZXcgQXJyYXkoNCksKGY9bj49KG89KHYreSkvMikpP3Y9bzp5PW8sKHM9ZT49KGE9KGcrXykvMikpP2c9YTpfPWF9d2hpbGUoKGw9czw8MXxmKT09KGg9KGM+PWEpPDwxfHU+PW8pKTtyZXR1cm4gaVtoXT1kLGlbbF09cCx0fWZ1bmN0aW9uIHJhKHQsbixlLHIsaSl7dGhpcy5ub2RlPXQsdGhpcy54MD1uLHRoaXMueTA9ZSx0aGlzLngxPXIsdGhpcy55MT1pfWZ1bmN0aW9uIGlhKHQpe3JldHVybiB0WzBdfWZ1bmN0aW9uIG9hKHQpe3JldHVybiB0WzFdfWZ1bmN0aW9uIGFhKHQsbixlKXt2YXIgcj1uZXcgdWEobnVsbD09bj9pYTpuLG51bGw9PWU/b2E6ZSxOYU4sTmFOLE5hTixOYU4pO3JldHVybiBudWxsPT10P3I6ci5hZGRBbGwodCl9ZnVuY3Rpb24gdWEodCxuLGUscixpLG8pe3RoaXMuX3g9dCx0aGlzLl95PW4sdGhpcy5feDA9ZSx0aGlzLl95MD1yLHRoaXMuX3gxPWksdGhpcy5feTE9byx0aGlzLl9yb290PXZvaWQgMH1mdW5jdGlvbiBjYSh0KXtmb3IodmFyIG49e2RhdGE6dC5kYXRhfSxlPW47dD10Lm5leHQ7KWU9ZS5uZXh0PXtkYXRhOnQuZGF0YX07cmV0dXJuIG59dmFyIGZhPWFhLnByb3RvdHlwZT11YS5wcm90b3R5cGU7ZnVuY3Rpb24gc2EodCl7cmV0dXJuIHQueCt0LnZ4fWZ1bmN0aW9uIGxhKHQpe3JldHVybiB0LnkrdC52eX1mdW5jdGlvbiBoYSh0KXtyZXR1cm4gdC5pbmRleH1mdW5jdGlvbiBkYSh0LG4pe3ZhciBlPXQuZ2V0KG4pO2lmKCFlKXRocm93IG5ldyBFcnJvcigibWlzc2luZzogIituKTtyZXR1cm4gZX1mdW5jdGlvbiBwYSh0KXtyZXR1cm4gdC54fWZ1bmN0aW9uIHZhKHQpe3JldHVybiB0Lnl9ZmEuY29weT1mdW5jdGlvbigpe3ZhciB0LG4sZT1uZXcgdWEodGhpcy5feCx0aGlzLl95LHRoaXMuX3gwLHRoaXMuX3kwLHRoaXMuX3gxLHRoaXMuX3kxKSxyPXRoaXMuX3Jvb3Q7aWYoIXIpcmV0dXJuIGU7aWYoIXIubGVuZ3RoKXJldHVybiBlLl9yb290PWNhKHIpLGU7Zm9yKHQ9W3tzb3VyY2U6cix0YXJnZXQ6ZS5fcm9vdD1uZXcgQXJyYXkoNCl9XTtyPXQucG9wKCk7KWZvcih2YXIgaT0wO2k8NDsrK2kpKG49ci5zb3VyY2VbaV0pJiYobi5sZW5ndGg/dC5wdXNoKHtzb3VyY2U6bix0YXJnZXQ6ci50YXJnZXRbaV09bmV3IEFycmF5KDQpfSk6ci50YXJnZXRbaV09Y2EobikpO3JldHVybiBlfSxmYS5hZGQ9ZnVuY3Rpb24odCl7dmFyIG49K3RoaXMuX3guY2FsbChudWxsLHQpLGU9K3RoaXMuX3kuY2FsbChudWxsLHQpO3JldHVybiBlYSh0aGlzLmNvdmVyKG4sZSksbixlLHQpfSxmYS5hZGRBbGw9ZnVuY3Rpb24odCl7dmFyIG4sZSxyLGksbz10Lmxlbmd0aCxhPW5ldyBBcnJheShvKSx1PW5ldyBBcnJheShvKSxjPTEvMCxmPTEvMCxzPS0xLzAsbD0tMS8wO2ZvcihlPTA7ZTxvOysrZSlpc05hTihyPSt0aGlzLl94LmNhbGwobnVsbCxuPXRbZV0pKXx8aXNOYU4oaT0rdGhpcy5feS5jYWxsKG51bGwsbikpfHwoYVtlXT1yLHVbZV09aSxyPGMmJihjPXIpLHI+cyYmKHM9ciksaTxmJiYoZj1pKSxpPmwmJihsPWkpKTtpZihjPnN8fGY+bClyZXR1cm4gdGhpcztmb3IodGhpcy5jb3ZlcihjLGYpLmNvdmVyKHMsbCksZT0wO2U8bzsrK2UpZWEodGhpcyxhW2VdLHVbZV0sdFtlXSk7cmV0dXJuIHRoaXN9LGZhLmNvdmVyPWZ1bmN0aW9uKHQsbil7aWYoaXNOYU4odD0rdCl8fGlzTmFOKG49K24pKXJldHVybiB0aGlzO3ZhciBlPXRoaXMuX3gwLHI9dGhpcy5feTAsaT10aGlzLl94MSxvPXRoaXMuX3kxO2lmKGlzTmFOKGUpKWk9KGU9TWF0aC5mbG9vcih0KSkrMSxvPShyPU1hdGguZmxvb3IobikpKzE7ZWxzZXtmb3IodmFyIGEsdSxjPWktZSxmPXRoaXMuX3Jvb3Q7ZT50fHx0Pj1pfHxyPm58fG4+PW87KXN3aXRjaCh1PShuPHIpPDwxfHQ8ZSwoYT1uZXcgQXJyYXkoNCkpW3VdPWYsZj1hLGMqPTIsdSl7Y2FzZSAwOmk9ZStjLG89citjO2JyZWFrO2Nhc2UgMTplPWktYyxvPXIrYzticmVhaztjYXNlIDI6aT1lK2Mscj1vLWM7YnJlYWs7Y2FzZSAzOmU9aS1jLHI9by1jfXRoaXMuX3Jvb3QmJnRoaXMuX3Jvb3QubGVuZ3RoJiYodGhpcy5fcm9vdD1mKX1yZXR1cm4gdGhpcy5feDA9ZSx0aGlzLl95MD1yLHRoaXMuX3gxPWksdGhpcy5feTE9byx0aGlzfSxmYS5kYXRhPWZ1bmN0aW9uKCl7dmFyIHQ9W107cmV0dXJuIHRoaXMudmlzaXQoZnVuY3Rpb24obil7aWYoIW4ubGVuZ3RoKWRve3QucHVzaChuLmRhdGEpfXdoaWxlKG49bi5uZXh0KX0pLHR9LGZhLmV4dGVudD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD90aGlzLmNvdmVyKCt0WzBdWzBdLCt0WzBdWzFdKS5jb3ZlcigrdFsxXVswXSwrdFsxXVsxXSk6aXNOYU4odGhpcy5feDApP3ZvaWQgMDpbW3RoaXMuX3gwLHRoaXMuX3kwXSxbdGhpcy5feDEsdGhpcy5feTFdXX0sZmEuZmluZD1mdW5jdGlvbih0LG4sZSl7dmFyIHIsaSxvLGEsdSxjLGYscz10aGlzLl94MCxsPXRoaXMuX3kwLGg9dGhpcy5feDEsZD10aGlzLl95MSxwPVtdLHY9dGhpcy5fcm9vdDtmb3IodiYmcC5wdXNoKG5ldyByYSh2LHMsbCxoLGQpKSxudWxsPT1lP2U9MS8wOihzPXQtZSxsPW4tZSxoPXQrZSxkPW4rZSxlKj1lKTtjPXAucG9wKCk7KWlmKCEoISh2PWMubm9kZSl8fChpPWMueDApPmh8fChvPWMueTApPmR8fChhPWMueDEpPHN8fCh1PWMueTEpPGwpKWlmKHYubGVuZ3RoKXt2YXIgZz0oaSthKS8yLHk9KG8rdSkvMjtwLnB1c2gobmV3IHJhKHZbM10sZyx5LGEsdSksbmV3IHJhKHZbMl0saSx5LGcsdSksbmV3IHJhKHZbMV0sZyxvLGEseSksbmV3IHJhKHZbMF0saSxvLGcseSkpLChmPShuPj15KTw8MXx0Pj1nKSYmKGM9cFtwLmxlbmd0aC0xXSxwW3AubGVuZ3RoLTFdPXBbcC5sZW5ndGgtMS1mXSxwW3AubGVuZ3RoLTEtZl09Yyl9ZWxzZXt2YXIgXz10LSt0aGlzLl94LmNhbGwobnVsbCx2LmRhdGEpLGI9bi0rdGhpcy5feS5jYWxsKG51bGwsdi5kYXRhKSxtPV8qXytiKmI7aWYobTxlKXt2YXIgeD1NYXRoLnNxcnQoZT1tKTtzPXQteCxsPW4teCxoPXQreCxkPW4reCxyPXYuZGF0YX19cmV0dXJuIHJ9LGZhLnJlbW92ZT1mdW5jdGlvbih0KXtpZihpc05hTihvPSt0aGlzLl94LmNhbGwobnVsbCx0KSl8fGlzTmFOKGE9K3RoaXMuX3kuY2FsbChudWxsLHQpKSlyZXR1cm4gdGhpczt2YXIgbixlLHIsaSxvLGEsdSxjLGYscyxsLGgsZD10aGlzLl9yb290LHA9dGhpcy5feDAsdj10aGlzLl95MCxnPXRoaXMuX3gxLHk9dGhpcy5feTE7aWYoIWQpcmV0dXJuIHRoaXM7aWYoZC5sZW5ndGgpZm9yKDs7KXtpZigoZj1vPj0odT0ocCtnKS8yKSk/cD11Omc9dSwocz1hPj0oYz0odit5KS8yKSk/dj1jOnk9YyxuPWQsIShkPWRbbD1zPDwxfGZdKSlyZXR1cm4gdGhpcztpZighZC5sZW5ndGgpYnJlYWs7KG5bbCsxJjNdfHxuW2wrMiYzXXx8bltsKzMmM10pJiYoZT1uLGg9bCl9Zm9yKDtkLmRhdGEhPT10OylpZihyPWQsIShkPWQubmV4dCkpcmV0dXJuIHRoaXM7cmV0dXJuKGk9ZC5uZXh0KSYmZGVsZXRlIGQubmV4dCxyPyhpP3IubmV4dD1pOmRlbGV0ZSByLm5leHQsdGhpcyk6bj8oaT9uW2xdPWk6ZGVsZXRlIG5bbF0sKGQ9blswXXx8blsxXXx8blsyXXx8blszXSkmJmQ9PT0oblszXXx8blsyXXx8blsxXXx8blswXSkmJiFkLmxlbmd0aCYmKGU/ZVtoXT1kOnRoaXMuX3Jvb3Q9ZCksdGhpcyk6KHRoaXMuX3Jvb3Q9aSx0aGlzKX0sZmEucmVtb3ZlQWxsPWZ1bmN0aW9uKHQpe2Zvcih2YXIgbj0wLGU9dC5sZW5ndGg7bjxlOysrbil0aGlzLnJlbW92ZSh0W25dKTtyZXR1cm4gdGhpc30sZmEucm9vdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9yb290fSxmYS5zaXplPWZ1bmN0aW9uKCl7dmFyIHQ9MDtyZXR1cm4gdGhpcy52aXNpdChmdW5jdGlvbihuKXtpZighbi5sZW5ndGgpZG97Kyt0fXdoaWxlKG49bi5uZXh0KX0pLHR9LGZhLnZpc2l0PWZ1bmN0aW9uKHQpe3ZhciBuLGUscixpLG8sYSx1PVtdLGM9dGhpcy5fcm9vdDtmb3IoYyYmdS5wdXNoKG5ldyByYShjLHRoaXMuX3gwLHRoaXMuX3kwLHRoaXMuX3gxLHRoaXMuX3kxKSk7bj11LnBvcCgpOylpZighdChjPW4ubm9kZSxyPW4ueDAsaT1uLnkwLG89bi54MSxhPW4ueTEpJiZjLmxlbmd0aCl7dmFyIGY9KHIrbykvMixzPShpK2EpLzI7KGU9Y1szXSkmJnUucHVzaChuZXcgcmEoZSxmLHMsbyxhKSksKGU9Y1syXSkmJnUucHVzaChuZXcgcmEoZSxyLHMsZixhKSksKGU9Y1sxXSkmJnUucHVzaChuZXcgcmEoZSxmLGksbyxzKSksKGU9Y1swXSkmJnUucHVzaChuZXcgcmEoZSxyLGksZixzKSl9cmV0dXJuIHRoaXN9LGZhLnZpc2l0QWZ0ZXI9ZnVuY3Rpb24odCl7dmFyIG4sZT1bXSxyPVtdO2Zvcih0aGlzLl9yb290JiZlLnB1c2gobmV3IHJhKHRoaXMuX3Jvb3QsdGhpcy5feDAsdGhpcy5feTAsdGhpcy5feDEsdGhpcy5feTEpKTtuPWUucG9wKCk7KXt2YXIgaT1uLm5vZGU7aWYoaS5sZW5ndGgpe3ZhciBvLGE9bi54MCx1PW4ueTAsYz1uLngxLGY9bi55MSxzPShhK2MpLzIsbD0odStmKS8yOyhvPWlbMF0pJiZlLnB1c2gobmV3IHJhKG8sYSx1LHMsbCkpLChvPWlbMV0pJiZlLnB1c2gobmV3IHJhKG8scyx1LGMsbCkpLChvPWlbMl0pJiZlLnB1c2gobmV3IHJhKG8sYSxsLHMsZikpLChvPWlbM10pJiZlLnB1c2gobmV3IHJhKG8scyxsLGMsZikpfXIucHVzaChuKX1mb3IoO249ci5wb3AoKTspdChuLm5vZGUsbi54MCxuLnkwLG4ueDEsbi55MSk7cmV0dXJuIHRoaXN9LGZhLng9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHRoaXMuX3g9dCx0aGlzKTp0aGlzLl94fSxmYS55PWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0aGlzLl95PXQsdGhpcyk6dGhpcy5feX07dmFyIGdhPTEwLHlhPU1hdGguUEkqKDMtTWF0aC5zcXJ0KDUpKTtmdW5jdGlvbiBfYSh0LG4pe2lmKChlPSh0PW4/dC50b0V4cG9uZW50aWFsKG4tMSk6dC50b0V4cG9uZW50aWFsKCkpLmluZGV4T2YoImUiKSk8MClyZXR1cm4gbnVsbDt2YXIgZSxyPXQuc2xpY2UoMCxlKTtyZXR1cm5bci5sZW5ndGg+MT9yWzBdK3Iuc2xpY2UoMik6ciwrdC5zbGljZShlKzEpXX1mdW5jdGlvbiBiYSh0KXtyZXR1cm4odD1fYShNYXRoLmFicyh0KSkpP3RbMV06TmFOfXZhciBtYSx4YT0vXig/OiguKT8oWzw+PV5dKSk/KFsrXC0oIF0pPyhbJCNdKT8oMCk/KFxkKyk/KCwpPyhcLlxkKyk/KH4pPyhbYS16JV0pPyQvaTtmdW5jdGlvbiB3YSh0KXtyZXR1cm4gbmV3IE1hKHQpfWZ1bmN0aW9uIE1hKHQpe2lmKCEobj14YS5leGVjKHQpKSl0aHJvdyBuZXcgRXJyb3IoImludmFsaWQgZm9ybWF0OiAiK3QpO3ZhciBuO3RoaXMuZmlsbD1uWzFdfHwiICIsdGhpcy5hbGlnbj1uWzJdfHwiPiIsdGhpcy5zaWduPW5bM118fCItIix0aGlzLnN5bWJvbD1uWzRdfHwiIix0aGlzLnplcm89ISFuWzVdLHRoaXMud2lkdGg9bls2XSYmK25bNl0sdGhpcy5jb21tYT0hIW5bN10sdGhpcy5wcmVjaXNpb249bls4XSYmK25bOF0uc2xpY2UoMSksdGhpcy50cmltPSEhbls5XSx0aGlzLnR5cGU9blsxMF18fCIifWZ1bmN0aW9uIE5hKHQsbil7dmFyIGU9X2EodCxuKTtpZighZSlyZXR1cm4gdCsiIjt2YXIgcj1lWzBdLGk9ZVsxXTtyZXR1cm4gaTwwPyIwLiIrbmV3IEFycmF5KC1pKS5qb2luKCIwIikrcjpyLmxlbmd0aD5pKzE/ci5zbGljZSgwLGkrMSkrIi4iK3Iuc2xpY2UoaSsxKTpyK25ldyBBcnJheShpLXIubGVuZ3RoKzIpLmpvaW4oIjAiKX13YS5wcm90b3R5cGU9TWEucHJvdG90eXBlLE1hLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmZpbGwrdGhpcy5hbGlnbit0aGlzLnNpZ24rdGhpcy5zeW1ib2wrKHRoaXMuemVybz8iMCI6IiIpKyhudWxsPT10aGlzLndpZHRoPyIiOk1hdGgubWF4KDEsMHx0aGlzLndpZHRoKSkrKHRoaXMuY29tbWE/IiwiOiIiKSsobnVsbD09dGhpcy5wcmVjaXNpb24/IiI6Ii4iK01hdGgubWF4KDAsMHx0aGlzLnByZWNpc2lvbikpKyh0aGlzLnRyaW0/In4iOiIiKSt0aGlzLnR5cGV9O3ZhciBBYT17IiUiOmZ1bmN0aW9uKHQsbil7cmV0dXJuKDEwMCp0KS50b0ZpeGVkKG4pfSxiOmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLnJvdW5kKHQpLnRvU3RyaW5nKDIpfSxjOmZ1bmN0aW9uKHQpe3JldHVybiB0KyIifSxkOmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLnJvdW5kKHQpLnRvU3RyaW5nKDEwKX0sZTpmdW5jdGlvbih0LG4pe3JldHVybiB0LnRvRXhwb25lbnRpYWwobil9LGY6ZnVuY3Rpb24odCxuKXtyZXR1cm4gdC50b0ZpeGVkKG4pfSxnOmZ1bmN0aW9uKHQsbil7cmV0dXJuIHQudG9QcmVjaXNpb24obil9LG86ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgucm91bmQodCkudG9TdHJpbmcoOCl9LHA6ZnVuY3Rpb24odCxuKXtyZXR1cm4gTmEoMTAwKnQsbil9LHI6TmEsczpmdW5jdGlvbih0LG4pe3ZhciBlPV9hKHQsbik7aWYoIWUpcmV0dXJuIHQrIiI7dmFyIHI9ZVswXSxpPWVbMV0sbz1pLShtYT0zKk1hdGgubWF4KC04LE1hdGgubWluKDgsTWF0aC5mbG9vcihpLzMpKSkpKzEsYT1yLmxlbmd0aDtyZXR1cm4gbz09PWE/cjpvPmE/cituZXcgQXJyYXkoby1hKzEpLmpvaW4oIjAiKTpvPjA/ci5zbGljZSgwLG8pKyIuIityLnNsaWNlKG8pOiIwLiIrbmV3IEFycmF5KDEtbykuam9pbigiMCIpK19hKHQsTWF0aC5tYXgoMCxuK28tMSkpWzBdfSxYOmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLnJvdW5kKHQpLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpfSx4OmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLnJvdW5kKHQpLnRvU3RyaW5nKDE2KX19O2Z1bmN0aW9uIFRhKHQpe3JldHVybiB0fXZhciBTYSxrYT1bInkiLCJ6IiwiYSIsImYiLCJwIiwibiIsIsK1IiwibSIsIiIsImsiLCJNIiwiRyIsIlQiLCJQIiwiRSIsIloiLCJZIl07ZnVuY3Rpb24gRWEodCl7dmFyIG4sZSxyPXQuZ3JvdXBpbmcmJnQudGhvdXNhbmRzPyhuPXQuZ3JvdXBpbmcsZT10LnRob3VzYW5kcyxmdW5jdGlvbih0LHIpe2Zvcih2YXIgaT10Lmxlbmd0aCxvPVtdLGE9MCx1PW5bMF0sYz0wO2k+MCYmdT4wJiYoYyt1KzE+ciYmKHU9TWF0aC5tYXgoMSxyLWMpKSxvLnB1c2godC5zdWJzdHJpbmcoaS09dSxpK3UpKSwhKChjKz11KzEpPnIpKTspdT1uW2E9KGErMSklbi5sZW5ndGhdO3JldHVybiBvLnJldmVyc2UoKS5qb2luKGUpfSk6VGEsaT10LmN1cnJlbmN5LG89dC5kZWNpbWFsLGE9dC5udW1lcmFscz9mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIG4ucmVwbGFjZSgvWzAtOV0vZyxmdW5jdGlvbihuKXtyZXR1cm4gdFsrbl19KX19KHQubnVtZXJhbHMpOlRhLHU9dC5wZXJjZW50fHwiJSI7ZnVuY3Rpb24gYyh0KXt2YXIgbj0odD13YSh0KSkuZmlsbCxlPXQuYWxpZ24sYz10LnNpZ24sZj10LnN5bWJvbCxzPXQuemVybyxsPXQud2lkdGgsaD10LmNvbW1hLGQ9dC5wcmVjaXNpb24scD10LnRyaW0sdj10LnR5cGU7Im4iPT09dj8oaD0hMCx2PSJnIik6QWFbdl18fChudWxsPT1kJiYoZD0xMikscD0hMCx2PSJnIiksKHN8fCIwIj09PW4mJiI9Ij09PWUpJiYocz0hMCxuPSIwIixlPSI9Iik7dmFyIGc9IiQiPT09Zj9pWzBdOiIjIj09PWYmJi9bYm94WF0vLnRlc3Qodik/IjAiK3YudG9Mb3dlckNhc2UoKToiIix5PSIkIj09PWY/aVsxXTovWyVwXS8udGVzdCh2KT91OiIiLF89QWFbdl0sYj0vW2RlZmdwcnMlXS8udGVzdCh2KTtmdW5jdGlvbiBtKHQpe3ZhciBpLHUsZixtPWcseD15O2lmKCJjIj09PXYpeD1fKHQpK3gsdD0iIjtlbHNle3ZhciB3PSh0PSt0KTwwO2lmKHQ9XyhNYXRoLmFicyh0KSxkKSxwJiYodD1mdW5jdGlvbih0KXt0OmZvcih2YXIgbixlPXQubGVuZ3RoLHI9MSxpPS0xO3I8ZTsrK3Ipc3dpdGNoKHRbcl0pe2Nhc2UiLiI6aT1uPXI7YnJlYWs7Y2FzZSIwIjowPT09aSYmKGk9ciksbj1yO2JyZWFrO2RlZmF1bHQ6aWYoaT4wKXtpZighK3Rbcl0pYnJlYWsgdDtpPTB9fXJldHVybiBpPjA/dC5zbGljZSgwLGkpK3Quc2xpY2UobisxKTp0fSh0KSksdyYmMD09K3QmJih3PSExKSxtPSh3PyIoIj09PWM/YzoiLSI6Ii0iPT09Y3x8IigiPT09Yz8iIjpjKSttLHg9KCJzIj09PXY/a2FbOCttYS8zXToiIikreCsodyYmIigiPT09Yz8iKSI6IiIpLGIpZm9yKGk9LTEsdT10Lmxlbmd0aDsrK2k8dTspaWYoNDg+KGY9dC5jaGFyQ29kZUF0KGkpKXx8Zj41Nyl7eD0oNDY9PT1mP28rdC5zbGljZShpKzEpOnQuc2xpY2UoaSkpK3gsdD10LnNsaWNlKDAsaSk7YnJlYWt9fWgmJiFzJiYodD1yKHQsMS8wKSk7dmFyIE09bS5sZW5ndGgrdC5sZW5ndGgreC5sZW5ndGgsTj1NPGw/bmV3IEFycmF5KGwtTSsxKS5qb2luKG4pOiIiO3N3aXRjaChoJiZzJiYodD1yKE4rdCxOLmxlbmd0aD9sLXgubGVuZ3RoOjEvMCksTj0iIiksZSl7Y2FzZSI8Ijp0PW0rdCt4K047YnJlYWs7Y2FzZSI9Ijp0PW0rTit0K3g7YnJlYWs7Y2FzZSJeIjp0PU4uc2xpY2UoMCxNPU4ubGVuZ3RoPj4xKSttK3QreCtOLnNsaWNlKE0pO2JyZWFrO2RlZmF1bHQ6dD1OK20rdCt4fXJldHVybiBhKHQpfXJldHVybiBkPW51bGw9PWQ/NjovW2dwcnNdLy50ZXN0KHYpP01hdGgubWF4KDEsTWF0aC5taW4oMjEsZCkpOk1hdGgubWF4KDAsTWF0aC5taW4oMjAsZCkpLG0udG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdCsiIn0sbX1yZXR1cm57Zm9ybWF0OmMsZm9ybWF0UHJlZml4OmZ1bmN0aW9uKHQsbil7dmFyIGU9YygoKHQ9d2EodCkpLnR5cGU9ImYiLHQpKSxyPTMqTWF0aC5tYXgoLTgsTWF0aC5taW4oOCxNYXRoLmZsb29yKGJhKG4pLzMpKSksaT1NYXRoLnBvdygxMCwtciksbz1rYVs4K3IvM107cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlKGkqdCkrb319fX1mdW5jdGlvbiBDYShuKXtyZXR1cm4gU2E9RWEobiksdC5mb3JtYXQ9U2EuZm9ybWF0LHQuZm9ybWF0UHJlZml4PVNhLmZvcm1hdFByZWZpeCxTYX1mdW5jdGlvbiBQYSh0KXtyZXR1cm4gTWF0aC5tYXgoMCwtYmEoTWF0aC5hYnModCkpKX1mdW5jdGlvbiB6YSh0LG4pe3JldHVybiBNYXRoLm1heCgwLDMqTWF0aC5tYXgoLTgsTWF0aC5taW4oOCxNYXRoLmZsb29yKGJhKG4pLzMpKSktYmEoTWF0aC5hYnModCkpKX1mdW5jdGlvbiBSYSh0LG4pe3JldHVybiB0PU1hdGguYWJzKHQpLG49TWF0aC5hYnMobiktdCxNYXRoLm1heCgwLGJhKG4pLWJhKHQpKSsxfWZ1bmN0aW9uIERhKCl7cmV0dXJuIG5ldyBxYX1mdW5jdGlvbiBxYSgpe3RoaXMucmVzZXQoKX1DYSh7ZGVjaW1hbDoiLiIsdGhvdXNhbmRzOiIsIixncm91cGluZzpbM10sY3VycmVuY3k6WyIkIiwiIl19KSxxYS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOnFhLHJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5zPXRoaXMudD0wfSxhZGQ6ZnVuY3Rpb24odCl7VWEoTGEsdCx0aGlzLnQpLFVhKHRoaXMsTGEucyx0aGlzLnMpLHRoaXMucz90aGlzLnQrPUxhLnQ6dGhpcy5zPUxhLnR9LHZhbHVlT2Y6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zfX07dmFyIExhPW5ldyBxYTtmdW5jdGlvbiBVYSh0LG4sZSl7dmFyIHI9dC5zPW4rZSxpPXItbixvPXItaTt0LnQ9bi1vKyhlLWkpfXZhciBPYT0xZS02LEJhPTFlLTEyLFlhPU1hdGguUEksRmE9WWEvMixJYT1ZYS80LGphPTIqWWEsSGE9MTgwL1lhLFhhPVlhLzE4MCxHYT1NYXRoLmFicyxWYT1NYXRoLmF0YW4sJGE9TWF0aC5hdGFuMixXYT1NYXRoLmNvcyxaYT1NYXRoLmNlaWwsUWE9TWF0aC5leHAsSmE9TWF0aC5sb2csS2E9TWF0aC5wb3csdHU9TWF0aC5zaW4sbnU9TWF0aC5zaWdufHxmdW5jdGlvbih0KXtyZXR1cm4gdD4wPzE6dDwwPy0xOjB9LGV1PU1hdGguc3FydCxydT1NYXRoLnRhbjtmdW5jdGlvbiBpdSh0KXtyZXR1cm4gdD4xPzA6dDwtMT9ZYTpNYXRoLmFjb3ModCl9ZnVuY3Rpb24gb3UodCl7cmV0dXJuIHQ+MT9GYTp0PC0xPy1GYTpNYXRoLmFzaW4odCl9ZnVuY3Rpb24gYXUodCl7cmV0dXJuKHQ9dHUodC8yKSkqdH1mdW5jdGlvbiB1dSgpe31mdW5jdGlvbiBjdSh0LG4pe3QmJnN1Lmhhc093blByb3BlcnR5KHQudHlwZSkmJnN1W3QudHlwZV0odCxuKX12YXIgZnU9e0ZlYXR1cmU6ZnVuY3Rpb24odCxuKXtjdSh0Lmdlb21ldHJ5LG4pfSxGZWF0dXJlQ29sbGVjdGlvbjpmdW5jdGlvbih0LG4pe2Zvcih2YXIgZT10LmZlYXR1cmVzLHI9LTEsaT1lLmxlbmd0aDsrK3I8aTspY3UoZVtyXS5nZW9tZXRyeSxuKX19LHN1PXtTcGhlcmU6ZnVuY3Rpb24odCxuKXtuLnNwaGVyZSgpfSxQb2ludDpmdW5jdGlvbih0LG4pe3Q9dC5jb29yZGluYXRlcyxuLnBvaW50KHRbMF0sdFsxXSx0WzJdKX0sTXVsdGlQb2ludDpmdW5jdGlvbih0LG4pe2Zvcih2YXIgZT10LmNvb3JkaW5hdGVzLHI9LTEsaT1lLmxlbmd0aDsrK3I8aTspdD1lW3JdLG4ucG9pbnQodFswXSx0WzFdLHRbMl0pfSxMaW5lU3RyaW5nOmZ1bmN0aW9uKHQsbil7bHUodC5jb29yZGluYXRlcyxuLDApfSxNdWx0aUxpbmVTdHJpbmc6ZnVuY3Rpb24odCxuKXtmb3IodmFyIGU9dC5jb29yZGluYXRlcyxyPS0xLGk9ZS5sZW5ndGg7KytyPGk7KWx1KGVbcl0sbiwwKX0sUG9seWdvbjpmdW5jdGlvbih0LG4pe2h1KHQuY29vcmRpbmF0ZXMsbil9LE11bHRpUG9seWdvbjpmdW5jdGlvbih0LG4pe2Zvcih2YXIgZT10LmNvb3JkaW5hdGVzLHI9LTEsaT1lLmxlbmd0aDsrK3I8aTspaHUoZVtyXSxuKX0sR2VvbWV0cnlDb2xsZWN0aW9uOmZ1bmN0aW9uKHQsbil7Zm9yKHZhciBlPXQuZ2VvbWV0cmllcyxyPS0xLGk9ZS5sZW5ndGg7KytyPGk7KWN1KGVbcl0sbil9fTtmdW5jdGlvbiBsdSh0LG4sZSl7dmFyIHIsaT0tMSxvPXQubGVuZ3RoLWU7Zm9yKG4ubGluZVN0YXJ0KCk7KytpPG87KXI9dFtpXSxuLnBvaW50KHJbMF0sclsxXSxyWzJdKTtuLmxpbmVFbmQoKX1mdW5jdGlvbiBodSh0LG4pe3ZhciBlPS0xLHI9dC5sZW5ndGg7Zm9yKG4ucG9seWdvblN0YXJ0KCk7KytlPHI7KWx1KHRbZV0sbiwxKTtuLnBvbHlnb25FbmQoKX1mdW5jdGlvbiBkdSh0LG4pe3QmJmZ1Lmhhc093blByb3BlcnR5KHQudHlwZSk/ZnVbdC50eXBlXSh0LG4pOmN1KHQsbil9dmFyIHB1LHZ1LGd1LHl1LF91LGJ1PURhKCksbXU9RGEoKSx4dT17cG9pbnQ6dXUsbGluZVN0YXJ0OnV1LGxpbmVFbmQ6dXUscG9seWdvblN0YXJ0OmZ1bmN0aW9uKCl7YnUucmVzZXQoKSx4dS5saW5lU3RhcnQ9d3UseHUubGluZUVuZD1NdX0scG9seWdvbkVuZDpmdW5jdGlvbigpe3ZhciB0PStidTttdS5hZGQodDwwP2phK3Q6dCksdGhpcy5saW5lU3RhcnQ9dGhpcy5saW5lRW5kPXRoaXMucG9pbnQ9dXV9LHNwaGVyZTpmdW5jdGlvbigpe211LmFkZChqYSl9fTtmdW5jdGlvbiB3dSgpe3h1LnBvaW50PU51fWZ1bmN0aW9uIE11KCl7QXUocHUsdnUpfWZ1bmN0aW9uIE51KHQsbil7eHUucG9pbnQ9QXUscHU9dCx2dT1uLGd1PXQqPVhhLHl1PVdhKG49KG4qPVhhKS8yK0lhKSxfdT10dShuKX1mdW5jdGlvbiBBdSh0LG4pe3ZhciBlPSh0Kj1YYSktZ3Uscj1lPj0wPzE6LTEsaT1yKmUsbz1XYShuPShuKj1YYSkvMitJYSksYT10dShuKSx1PV91KmEsYz15dSpvK3UqV2EoaSksZj11KnIqdHUoaSk7YnUuYWRkKCRhKGYsYykpLGd1PXQseXU9byxfdT1hfWZ1bmN0aW9uIFR1KHQpe3JldHVyblskYSh0WzFdLHRbMF0pLG91KHRbMl0pXX1mdW5jdGlvbiBTdSh0KXt2YXIgbj10WzBdLGU9dFsxXSxyPVdhKGUpO3JldHVybltyKldhKG4pLHIqdHUobiksdHUoZSldfWZ1bmN0aW9uIGt1KHQsbil7cmV0dXJuIHRbMF0qblswXSt0WzFdKm5bMV0rdFsyXSpuWzJdfWZ1bmN0aW9uIEV1KHQsbil7cmV0dXJuW3RbMV0qblsyXS10WzJdKm5bMV0sdFsyXSpuWzBdLXRbMF0qblsyXSx0WzBdKm5bMV0tdFsxXSpuWzBdXX1mdW5jdGlvbiBDdSh0LG4pe3RbMF0rPW5bMF0sdFsxXSs9blsxXSx0WzJdKz1uWzJdfWZ1bmN0aW9uIFB1KHQsbil7cmV0dXJuW3RbMF0qbix0WzFdKm4sdFsyXSpuXX1mdW5jdGlvbiB6dSh0KXt2YXIgbj1ldSh0WzBdKnRbMF0rdFsxXSp0WzFdK3RbMl0qdFsyXSk7dFswXS89bix0WzFdLz1uLHRbMl0vPW59dmFyIFJ1LER1LHF1LEx1LFV1LE91LEJ1LFl1LEZ1LEl1LGp1LEh1LFh1LEd1LFZ1LCR1LFd1LFp1LFF1LEp1LEt1LHRjLG5jLGVjLHJjLGljLG9jPURhKCksYWM9e3BvaW50OnVjLGxpbmVTdGFydDpmYyxsaW5lRW5kOnNjLHBvbHlnb25TdGFydDpmdW5jdGlvbigpe2FjLnBvaW50PWxjLGFjLmxpbmVTdGFydD1oYyxhYy5saW5lRW5kPWRjLG9jLnJlc2V0KCkseHUucG9seWdvblN0YXJ0KCl9LHBvbHlnb25FbmQ6ZnVuY3Rpb24oKXt4dS5wb2x5Z29uRW5kKCksYWMucG9pbnQ9dWMsYWMubGluZVN0YXJ0PWZjLGFjLmxpbmVFbmQ9c2MsYnU8MD8oUnU9LShxdT0xODApLER1PS0oTHU9OTApKTpvYz5PYT9MdT05MDpvYzwtT2EmJihEdT0tOTApLEl1WzBdPVJ1LEl1WzFdPXF1fX07ZnVuY3Rpb24gdWModCxuKXtGdS5wdXNoKEl1PVtSdT10LHF1PXRdKSxuPER1JiYoRHU9biksbj5MdSYmKEx1PW4pfWZ1bmN0aW9uIGNjKHQsbil7dmFyIGU9U3UoW3QqWGEsbipYYV0pO2lmKFl1KXt2YXIgcj1FdShZdSxlKSxpPUV1KFtyWzFdLC1yWzBdLDBdLHIpO3p1KGkpLGk9VHUoaSk7dmFyIG8sYT10LVV1LHU9YT4wPzE6LTEsYz1pWzBdKkhhKnUsZj1HYShhKT4xODA7Zl4odSpVdTxjJiZjPHUqdCk/KG89aVsxXSpIYSk+THUmJihMdT1vKTpmXih1KlV1PChjPShjKzM2MCklMzYwLTE4MCkmJmM8dSp0KT8obz0taVsxXSpIYSk8RHUmJihEdT1vKToobjxEdSYmKER1PW4pLG4+THUmJihMdT1uKSksZj90PFV1P3BjKFJ1LHQpPnBjKFJ1LHF1KSYmKHF1PXQpOnBjKHQscXUpPnBjKFJ1LHF1KSYmKFJ1PXQpOnF1Pj1SdT8odDxSdSYmKFJ1PXQpLHQ+cXUmJihxdT10KSk6dD5VdT9wYyhSdSx0KT5wYyhSdSxxdSkmJihxdT10KTpwYyh0LHF1KT5wYyhSdSxxdSkmJihSdT10KX1lbHNlIEZ1LnB1c2goSXU9W1J1PXQscXU9dF0pO248RHUmJihEdT1uKSxuPkx1JiYoTHU9biksWXU9ZSxVdT10fWZ1bmN0aW9uIGZjKCl7YWMucG9pbnQ9Y2N9ZnVuY3Rpb24gc2MoKXtJdVswXT1SdSxJdVsxXT1xdSxhYy5wb2ludD11YyxZdT1udWxsfWZ1bmN0aW9uIGxjKHQsbil7aWYoWXUpe3ZhciBlPXQtVXU7b2MuYWRkKEdhKGUpPjE4MD9lKyhlPjA/MzYwOi0zNjApOmUpfWVsc2UgT3U9dCxCdT1uO3h1LnBvaW50KHQsbiksY2ModCxuKX1mdW5jdGlvbiBoYygpe3h1LmxpbmVTdGFydCgpfWZ1bmN0aW9uIGRjKCl7bGMoT3UsQnUpLHh1LmxpbmVFbmQoKSxHYShvYyk+T2EmJihSdT0tKHF1PTE4MCkpLEl1WzBdPVJ1LEl1WzFdPXF1LFl1PW51bGx9ZnVuY3Rpb24gcGModCxuKXtyZXR1cm4obi09dCk8MD9uKzM2MDpufWZ1bmN0aW9uIHZjKHQsbil7cmV0dXJuIHRbMF0tblswXX1mdW5jdGlvbiBnYyh0LG4pe3JldHVybiB0WzBdPD10WzFdP3RbMF08PW4mJm48PXRbMV06bjx0WzBdfHx0WzFdPG59dmFyIHljPXtzcGhlcmU6dXUscG9pbnQ6X2MsbGluZVN0YXJ0Om1jLGxpbmVFbmQ6TWMscG9seWdvblN0YXJ0OmZ1bmN0aW9uKCl7eWMubGluZVN0YXJ0PU5jLHljLmxpbmVFbmQ9QWN9LHBvbHlnb25FbmQ6ZnVuY3Rpb24oKXt5Yy5saW5lU3RhcnQ9bWMseWMubGluZUVuZD1NY319O2Z1bmN0aW9uIF9jKHQsbil7dCo9WGE7dmFyIGU9V2Eobio9WGEpO2JjKGUqV2EodCksZSp0dSh0KSx0dShuKSl9ZnVuY3Rpb24gYmModCxuLGUpe1h1Kz0odC1YdSkvKytqdSxHdSs9KG4tR3UpL2p1LFZ1Kz0oZS1WdSkvanV9ZnVuY3Rpb24gbWMoKXt5Yy5wb2ludD14Y31mdW5jdGlvbiB4Yyh0LG4pe3QqPVhhO3ZhciBlPVdhKG4qPVhhKTtlYz1lKldhKHQpLHJjPWUqdHUodCksaWM9dHUobikseWMucG9pbnQ9d2MsYmMoZWMscmMsaWMpfWZ1bmN0aW9uIHdjKHQsbil7dCo9WGE7dmFyIGU9V2Eobio9WGEpLHI9ZSpXYSh0KSxpPWUqdHUodCksbz10dShuKSxhPSRhKGV1KChhPXJjKm8taWMqaSkqYSsoYT1pYypyLWVjKm8pKmErKGE9ZWMqaS1yYypyKSphKSxlYypyK3JjKmkraWMqbyk7SHUrPWEsJHUrPWEqKGVjKyhlYz1yKSksV3UrPWEqKHJjKyhyYz1pKSksWnUrPWEqKGljKyhpYz1vKSksYmMoZWMscmMsaWMpfWZ1bmN0aW9uIE1jKCl7eWMucG9pbnQ9X2N9ZnVuY3Rpb24gTmMoKXt5Yy5wb2ludD1UY31mdW5jdGlvbiBBYygpe1NjKHRjLG5jKSx5Yy5wb2ludD1fY31mdW5jdGlvbiBUYyh0LG4pe3RjPXQsbmM9bix0Kj1YYSxuKj1YYSx5Yy5wb2ludD1TYzt2YXIgZT1XYShuKTtlYz1lKldhKHQpLHJjPWUqdHUodCksaWM9dHUobiksYmMoZWMscmMsaWMpfWZ1bmN0aW9uIFNjKHQsbil7dCo9WGE7dmFyIGU9V2Eobio9WGEpLHI9ZSpXYSh0KSxpPWUqdHUodCksbz10dShuKSxhPXJjKm8taWMqaSx1PWljKnItZWMqbyxjPWVjKmktcmMqcixmPWV1KGEqYSt1KnUrYypjKSxzPW91KGYpLGw9ZiYmLXMvZjtRdSs9bCphLEp1Kz1sKnUsS3UrPWwqYyxIdSs9cywkdSs9cyooZWMrKGVjPXIpKSxXdSs9cyoocmMrKHJjPWkpKSxadSs9cyooaWMrKGljPW8pKSxiYyhlYyxyYyxpYyl9ZnVuY3Rpb24ga2ModCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHR9fWZ1bmN0aW9uIEVjKHQsbil7ZnVuY3Rpb24gZShlLHIpe3JldHVybiBlPXQoZSxyKSxuKGVbMF0sZVsxXSl9cmV0dXJuIHQuaW52ZXJ0JiZuLmludmVydCYmKGUuaW52ZXJ0PWZ1bmN0aW9uKGUscil7cmV0dXJuKGU9bi5pbnZlcnQoZSxyKSkmJnQuaW52ZXJ0KGVbMF0sZVsxXSl9KSxlfWZ1bmN0aW9uIENjKHQsbil7cmV0dXJuW0dhKHQpPllhP3QrTWF0aC5yb3VuZCgtdC9qYSkqamE6dCxuXX1mdW5jdGlvbiBQYyh0LG4sZSl7cmV0dXJuKHQlPWphKT9ufHxlP0VjKFJjKHQpLERjKG4sZSkpOlJjKHQpOm58fGU/RGMobixlKTpDY31mdW5jdGlvbiB6Yyh0KXtyZXR1cm4gZnVuY3Rpb24obixlKXtyZXR1cm5bKG4rPXQpPllhP24tamE6bjwtWWE/bitqYTpuLGVdfX1mdW5jdGlvbiBSYyh0KXt2YXIgbj16Yyh0KTtyZXR1cm4gbi5pbnZlcnQ9emMoLXQpLG59ZnVuY3Rpb24gRGModCxuKXt2YXIgZT1XYSh0KSxyPXR1KHQpLGk9V2Eobiksbz10dShuKTtmdW5jdGlvbiBhKHQsbil7dmFyIGE9V2EobiksdT1XYSh0KSphLGM9dHUodCkqYSxmPXR1KG4pLHM9ZiplK3UqcjtyZXR1cm5bJGEoYyppLXMqbyx1KmUtZipyKSxvdShzKmkrYypvKV19cmV0dXJuIGEuaW52ZXJ0PWZ1bmN0aW9uKHQsbil7dmFyIGE9V2EobiksdT1XYSh0KSphLGM9dHUodCkqYSxmPXR1KG4pLHM9ZippLWMqbztyZXR1cm5bJGEoYyppK2Yqbyx1KmUrcypyKSxvdShzKmUtdSpyKV19LGF9ZnVuY3Rpb24gcWModCl7ZnVuY3Rpb24gbihuKXtyZXR1cm4obj10KG5bMF0qWGEsblsxXSpYYSkpWzBdKj1IYSxuWzFdKj1IYSxufXJldHVybiB0PVBjKHRbMF0qWGEsdFsxXSpYYSx0Lmxlbmd0aD4yP3RbMl0qWGE6MCksbi5pbnZlcnQ9ZnVuY3Rpb24obil7cmV0dXJuKG49dC5pbnZlcnQoblswXSpYYSxuWzFdKlhhKSlbMF0qPUhhLG5bMV0qPUhhLG59LG59ZnVuY3Rpb24gTGModCxuLGUscixpLG8pe2lmKGUpe3ZhciBhPVdhKG4pLHU9dHUobiksYz1yKmU7bnVsbD09aT8oaT1uK3IqamEsbz1uLWMvMik6KGk9VWMoYSxpKSxvPVVjKGEsbyksKHI+MD9pPG86aT5vKSYmKGkrPXIqamEpKTtmb3IodmFyIGYscz1pO3I+MD9zPm86czxvO3MtPWMpZj1UdShbYSwtdSpXYShzKSwtdSp0dShzKV0pLHQucG9pbnQoZlswXSxmWzFdKX19ZnVuY3Rpb24gVWModCxuKXsobj1TdShuKSlbMF0tPXQsenUobik7dmFyIGU9aXUoLW5bMV0pO3JldHVybigoLW5bMl08MD8tZTplKStqYS1PYSklamF9ZnVuY3Rpb24gT2MoKXt2YXIgdCxuPVtdO3JldHVybntwb2ludDpmdW5jdGlvbihuLGUpe3QucHVzaChbbixlXSl9LGxpbmVTdGFydDpmdW5jdGlvbigpe24ucHVzaCh0PVtdKX0sbGluZUVuZDp1dSxyZWpvaW46ZnVuY3Rpb24oKXtuLmxlbmd0aD4xJiZuLnB1c2gobi5wb3AoKS5jb25jYXQobi5zaGlmdCgpKSl9LHJlc3VsdDpmdW5jdGlvbigpe3ZhciBlPW47cmV0dXJuIG49W10sdD1udWxsLGV9fX1mdW5jdGlvbiBCYyh0LG4pe3JldHVybiBHYSh0WzBdLW5bMF0pPE9hJiZHYSh0WzFdLW5bMV0pPE9hfWZ1bmN0aW9uIFljKHQsbixlLHIpe3RoaXMueD10LHRoaXMuej1uLHRoaXMubz1lLHRoaXMuZT1yLHRoaXMudj0hMSx0aGlzLm49dGhpcy5wPW51bGx9ZnVuY3Rpb24gRmModCxuLGUscixpKXt2YXIgbyxhLHU9W10sYz1bXTtpZih0LmZvckVhY2goZnVuY3Rpb24odCl7aWYoISgobj10Lmxlbmd0aC0xKTw9MCkpe3ZhciBuLGUscj10WzBdLGE9dFtuXTtpZihCYyhyLGEpKXtmb3IoaS5saW5lU3RhcnQoKSxvPTA7bzxuOysrbylpLnBvaW50KChyPXRbb10pWzBdLHJbMV0pO2kubGluZUVuZCgpfWVsc2UgdS5wdXNoKGU9bmV3IFljKHIsdCxudWxsLCEwKSksYy5wdXNoKGUubz1uZXcgWWMocixudWxsLGUsITEpKSx1LnB1c2goZT1uZXcgWWMoYSx0LG51bGwsITEpKSxjLnB1c2goZS5vPW5ldyBZYyhhLG51bGwsZSwhMCkpfX0pLHUubGVuZ3RoKXtmb3IoYy5zb3J0KG4pLEljKHUpLEljKGMpLG89MCxhPWMubGVuZ3RoO288YTsrK28pY1tvXS5lPWU9IWU7Zm9yKHZhciBmLHMsbD11WzBdOzspe2Zvcih2YXIgaD1sLGQ9ITA7aC52OylpZigoaD1oLm4pPT09bClyZXR1cm47Zj1oLnosaS5saW5lU3RhcnQoKTtkb3tpZihoLnY9aC5vLnY9ITAsaC5lKXtpZihkKWZvcihvPTAsYT1mLmxlbmd0aDtvPGE7KytvKWkucG9pbnQoKHM9ZltvXSlbMF0sc1sxXSk7ZWxzZSByKGgueCxoLm4ueCwxLGkpO2g9aC5ufWVsc2V7aWYoZClmb3IoZj1oLnAueixvPWYubGVuZ3RoLTE7bz49MDstLW8paS5wb2ludCgocz1mW29dKVswXSxzWzFdKTtlbHNlIHIoaC54LGgucC54LC0xLGkpO2g9aC5wfWY9KGg9aC5vKS56LGQ9IWR9d2hpbGUoIWgudik7aS5saW5lRW5kKCl9fX1mdW5jdGlvbiBJYyh0KXtpZihuPXQubGVuZ3RoKXtmb3IodmFyIG4sZSxyPTAsaT10WzBdOysrcjxuOylpLm49ZT10W3JdLGUucD1pLGk9ZTtpLm49ZT10WzBdLGUucD1pfX1DYy5pbnZlcnQ9Q2M7dmFyIGpjPURhKCk7ZnVuY3Rpb24gSGModCxuKXt2YXIgZT1uWzBdLHI9blsxXSxpPXR1KHIpLG89W3R1KGUpLC1XYShlKSwwXSxhPTAsdT0wO2pjLnJlc2V0KCksMT09PWk/cj1GYStPYTotMT09PWkmJihyPS1GYS1PYSk7Zm9yKHZhciBjPTAsZj10Lmxlbmd0aDtjPGY7KytjKWlmKGw9KHM9dFtjXSkubGVuZ3RoKWZvcih2YXIgcyxsLGg9c1tsLTFdLGQ9aFswXSxwPWhbMV0vMitJYSx2PXR1KHApLGc9V2EocCkseT0wO3k8bDsrK3ksZD1iLHY9eCxnPXcsaD1fKXt2YXIgXz1zW3ldLGI9X1swXSxtPV9bMV0vMitJYSx4PXR1KG0pLHc9V2EobSksTT1iLWQsTj1NPj0wPzE6LTEsQT1OKk0sVD1BPllhLFM9dip4O2lmKGpjLmFkZCgkYShTKk4qdHUoQSksZyp3K1MqV2EoQSkpKSxhKz1UP00rTipqYTpNLFReZD49ZV5iPj1lKXt2YXIgaz1FdShTdShoKSxTdShfKSk7enUoayk7dmFyIEU9RXUobyxrKTt6dShFKTt2YXIgQz0oVF5NPj0wPy0xOjEpKm91KEVbMl0pOyhyPkN8fHI9PT1DJiYoa1swXXx8a1sxXSkpJiYodSs9VF5NPj0wPzE6LTEpfX1yZXR1cm4oYTwtT2F8fGE8T2EmJmpjPC1PYSleMSZ1fWZ1bmN0aW9uIFhjKHQsbixlLHIpe3JldHVybiBmdW5jdGlvbihpKXt2YXIgbyxhLHUsYz1uKGkpLGY9T2MoKSxzPW4oZiksbD0hMSxoPXtwb2ludDpkLGxpbmVTdGFydDp2LGxpbmVFbmQ6Zyxwb2x5Z29uU3RhcnQ6ZnVuY3Rpb24oKXtoLnBvaW50PXksaC5saW5lU3RhcnQ9XyxoLmxpbmVFbmQ9YixhPVtdLG89W119LHBvbHlnb25FbmQ6ZnVuY3Rpb24oKXtoLnBvaW50PWQsaC5saW5lU3RhcnQ9dixoLmxpbmVFbmQ9ZyxhPVQoYSk7dmFyIHQ9SGMobyxyKTthLmxlbmd0aD8obHx8KGkucG9seWdvblN0YXJ0KCksbD0hMCksRmMoYSxWYyx0LGUsaSkpOnQmJihsfHwoaS5wb2x5Z29uU3RhcnQoKSxsPSEwKSxpLmxpbmVTdGFydCgpLGUobnVsbCxudWxsLDEsaSksaS5saW5lRW5kKCkpLGwmJihpLnBvbHlnb25FbmQoKSxsPSExKSxhPW89bnVsbH0sc3BoZXJlOmZ1bmN0aW9uKCl7aS5wb2x5Z29uU3RhcnQoKSxpLmxpbmVTdGFydCgpLGUobnVsbCxudWxsLDEsaSksaS5saW5lRW5kKCksaS5wb2x5Z29uRW5kKCl9fTtmdW5jdGlvbiBkKG4sZSl7dChuLGUpJiZpLnBvaW50KG4sZSl9ZnVuY3Rpb24gcCh0LG4pe2MucG9pbnQodCxuKX1mdW5jdGlvbiB2KCl7aC5wb2ludD1wLGMubGluZVN0YXJ0KCl9ZnVuY3Rpb24gZygpe2gucG9pbnQ9ZCxjLmxpbmVFbmQoKX1mdW5jdGlvbiB5KHQsbil7dS5wdXNoKFt0LG5dKSxzLnBvaW50KHQsbil9ZnVuY3Rpb24gXygpe3MubGluZVN0YXJ0KCksdT1bXX1mdW5jdGlvbiBiKCl7eSh1WzBdWzBdLHVbMF1bMV0pLHMubGluZUVuZCgpO3ZhciB0LG4sZSxyLGM9cy5jbGVhbigpLGg9Zi5yZXN1bHQoKSxkPWgubGVuZ3RoO2lmKHUucG9wKCksby5wdXNoKHUpLHU9bnVsbCxkKWlmKDEmYyl7aWYoKG49KGU9aFswXSkubGVuZ3RoLTEpPjApe2ZvcihsfHwoaS5wb2x5Z29uU3RhcnQoKSxsPSEwKSxpLmxpbmVTdGFydCgpLHQ9MDt0PG47Kyt0KWkucG9pbnQoKHI9ZVt0XSlbMF0sclsxXSk7aS5saW5lRW5kKCl9fWVsc2UgZD4xJiYyJmMmJmgucHVzaChoLnBvcCgpLmNvbmNhdChoLnNoaWZ0KCkpKSxhLnB1c2goaC5maWx0ZXIoR2MpKX1yZXR1cm4gaH19ZnVuY3Rpb24gR2ModCl7cmV0dXJuIHQubGVuZ3RoPjF9ZnVuY3Rpb24gVmModCxuKXtyZXR1cm4oKHQ9dC54KVswXTwwP3RbMV0tRmEtT2E6RmEtdFsxXSktKChuPW4ueClbMF08MD9uWzFdLUZhLU9hOkZhLW5bMV0pfXZhciAkYz1YYyhmdW5jdGlvbigpe3JldHVybiEwfSxmdW5jdGlvbih0KXt2YXIgbixlPU5hTixyPU5hTixpPU5hTjtyZXR1cm57bGluZVN0YXJ0OmZ1bmN0aW9uKCl7dC5saW5lU3RhcnQoKSxuPTF9LHBvaW50OmZ1bmN0aW9uKG8sYSl7dmFyIHU9bz4wP1lhOi1ZYSxjPUdhKG8tZSk7R2EoYy1ZYSk8T2E/KHQucG9pbnQoZSxyPShyK2EpLzI+MD9GYTotRmEpLHQucG9pbnQoaSxyKSx0LmxpbmVFbmQoKSx0LmxpbmVTdGFydCgpLHQucG9pbnQodSxyKSx0LnBvaW50KG8sciksbj0wKTppIT09dSYmYz49WWEmJihHYShlLWkpPE9hJiYoZS09aSpPYSksR2Eoby11KTxPYSYmKG8tPXUqT2EpLHI9ZnVuY3Rpb24odCxuLGUscil7dmFyIGksbyxhPXR1KHQtZSk7cmV0dXJuIEdhKGEpPk9hP1ZhKCh0dShuKSoobz1XYShyKSkqdHUoZSktdHUocikqKGk9V2EobikpKnR1KHQpKS8oaSpvKmEpKToobityKS8yfShlLHIsbyxhKSx0LnBvaW50KGksciksdC5saW5lRW5kKCksdC5saW5lU3RhcnQoKSx0LnBvaW50KHUsciksbj0wKSx0LnBvaW50KGU9byxyPWEpLGk9dX0sbGluZUVuZDpmdW5jdGlvbigpe3QubGluZUVuZCgpLGU9cj1OYU59LGNsZWFuOmZ1bmN0aW9uKCl7cmV0dXJuIDItbn19fSxmdW5jdGlvbih0LG4sZSxyKXt2YXIgaTtpZihudWxsPT10KWk9ZSpGYSxyLnBvaW50KC1ZYSxpKSxyLnBvaW50KDAsaSksci5wb2ludChZYSxpKSxyLnBvaW50KFlhLDApLHIucG9pbnQoWWEsLWkpLHIucG9pbnQoMCwtaSksci5wb2ludCgtWWEsLWkpLHIucG9pbnQoLVlhLDApLHIucG9pbnQoLVlhLGkpO2Vsc2UgaWYoR2EodFswXS1uWzBdKT5PYSl7dmFyIG89dFswXTxuWzBdP1lhOi1ZYTtpPWUqby8yLHIucG9pbnQoLW8saSksci5wb2ludCgwLGkpLHIucG9pbnQobyxpKX1lbHNlIHIucG9pbnQoblswXSxuWzFdKX0sWy1ZYSwtRmFdKTtmdW5jdGlvbiBXYyh0KXt2YXIgbj1XYSh0KSxlPTYqWGEscj1uPjAsaT1HYShuKT5PYTtmdW5jdGlvbiBvKHQsZSl7cmV0dXJuIFdhKHQpKldhKGUpPm59ZnVuY3Rpb24gYSh0LGUscil7dmFyIGk9WzEsMCwwXSxvPUV1KFN1KHQpLFN1KGUpKSxhPWt1KG8sbyksdT1vWzBdLGM9YS11KnU7aWYoIWMpcmV0dXJuIXImJnQ7dmFyIGY9biphL2Mscz0tbip1L2MsbD1FdShpLG8pLGg9UHUoaSxmKTtDdShoLFB1KG8scykpO3ZhciBkPWwscD1rdShoLGQpLHY9a3UoZCxkKSxnPXAqcC12KihrdShoLGgpLTEpO2lmKCEoZzwwKSl7dmFyIHk9ZXUoZyksXz1QdShkLCgtcC15KS92KTtpZihDdShfLGgpLF89VHUoXyksIXIpcmV0dXJuIF87dmFyIGIsbT10WzBdLHg9ZVswXSx3PXRbMV0sTT1lWzFdO3g8bSYmKGI9bSxtPXgseD1iKTt2YXIgTj14LW0sQT1HYShOLVlhKTxPYTtpZighQSYmTTx3JiYoYj13LHc9TSxNPWIpLEF8fE48T2E/QT93K00+MF5fWzFdPChHYShfWzBdLW0pPE9hP3c6TSk6dzw9X1sxXSYmX1sxXTw9TTpOPllhXihtPD1fWzBdJiZfWzBdPD14KSl7dmFyIFQ9UHUoZCwoLXAreSkvdik7cmV0dXJuIEN1KFQsaCksW18sVHUoVCldfX19ZnVuY3Rpb24gdShuLGUpe3ZhciBpPXI/dDpZYS10LG89MDtyZXR1cm4gbjwtaT9vfD0xOm4+aSYmKG98PTIpLGU8LWk/b3w9NDplPmkmJihvfD04KSxvfXJldHVybiBYYyhvLGZ1bmN0aW9uKHQpe3ZhciBuLGUsYyxmLHM7cmV0dXJue2xpbmVTdGFydDpmdW5jdGlvbigpe2Y9Yz0hMSxzPTF9LHBvaW50OmZ1bmN0aW9uKGwsaCl7dmFyIGQscD1bbCxoXSx2PW8obCxoKSxnPXI/dj8wOnUobCxoKTp2P3UobCsobDwwP1lhOi1ZYSksaCk6MDtpZighbiYmKGY9Yz12KSYmdC5saW5lU3RhcnQoKSx2IT09YyYmKCEoZD1hKG4scCkpfHxCYyhuLGQpfHxCYyhwLGQpKSYmKHBbMF0rPU9hLHBbMV0rPU9hLHY9byhwWzBdLHBbMV0pKSx2IT09YylzPTAsdj8odC5saW5lU3RhcnQoKSxkPWEocCxuKSx0LnBvaW50KGRbMF0sZFsxXSkpOihkPWEobixwKSx0LnBvaW50KGRbMF0sZFsxXSksdC5saW5lRW5kKCkpLG49ZDtlbHNlIGlmKGkmJm4mJnJedil7dmFyIHk7ZyZlfHwhKHk9YShwLG4sITApKXx8KHM9MCxyPyh0LmxpbmVTdGFydCgpLHQucG9pbnQoeVswXVswXSx5WzBdWzFdKSx0LnBvaW50KHlbMV1bMF0seVsxXVsxXSksdC5saW5lRW5kKCkpOih0LnBvaW50KHlbMV1bMF0seVsxXVsxXSksdC5saW5lRW5kKCksdC5saW5lU3RhcnQoKSx0LnBvaW50KHlbMF1bMF0seVswXVsxXSkpKX0hdnx8biYmQmMobixwKXx8dC5wb2ludChwWzBdLHBbMV0pLG49cCxjPXYsZT1nfSxsaW5lRW5kOmZ1bmN0aW9uKCl7YyYmdC5saW5lRW5kKCksbj1udWxsfSxjbGVhbjpmdW5jdGlvbigpe3JldHVybiBzfChmJiZjKTw8MX19fSxmdW5jdGlvbihuLHIsaSxvKXtMYyhvLHQsZSxpLG4scil9LHI/WzAsLXRdOlstWWEsdC1ZYV0pfXZhciBaYz0xZTksUWM9LVpjO2Z1bmN0aW9uIEpjKHQsbixlLHIpe2Z1bmN0aW9uIGkoaSxvKXtyZXR1cm4gdDw9aSYmaTw9ZSYmbjw9byYmbzw9cn1mdW5jdGlvbiBvKGksbyx1LGYpe3ZhciBzPTAsbD0wO2lmKG51bGw9PWl8fChzPWEoaSx1KSkhPT0obD1hKG8sdSkpfHxjKGksbyk8MF51PjApZG97Zi5wb2ludCgwPT09c3x8Mz09PXM/dDplLHM+MT9yOm4pfXdoaWxlKChzPShzK3UrNCklNCkhPT1sKTtlbHNlIGYucG9pbnQob1swXSxvWzFdKX1mdW5jdGlvbiBhKHIsaSl7cmV0dXJuIEdhKHJbMF0tdCk8T2E/aT4wPzA6MzpHYShyWzBdLWUpPE9hP2k+MD8yOjE6R2EoclsxXS1uKTxPYT9pPjA/MTowOmk+MD8zOjJ9ZnVuY3Rpb24gdSh0LG4pe3JldHVybiBjKHQueCxuLngpfWZ1bmN0aW9uIGModCxuKXt2YXIgZT1hKHQsMSkscj1hKG4sMSk7cmV0dXJuIGUhPT1yP2UtcjowPT09ZT9uWzFdLXRbMV06MT09PWU/dFswXS1uWzBdOjI9PT1lP3RbMV0tblsxXTpuWzBdLXRbMF19cmV0dXJuIGZ1bmN0aW9uKGEpe3ZhciBjLGYscyxsLGgsZCxwLHYsZyx5LF8sYj1hLG09T2MoKSx4PXtwb2ludDp3LGxpbmVTdGFydDpmdW5jdGlvbigpe3gucG9pbnQ9TSxmJiZmLnB1c2gocz1bXSk7eT0hMCxnPSExLHA9dj1OYU59LGxpbmVFbmQ6ZnVuY3Rpb24oKXtjJiYoTShsLGgpLGQmJmcmJm0ucmVqb2luKCksYy5wdXNoKG0ucmVzdWx0KCkpKTt4LnBvaW50PXcsZyYmYi5saW5lRW5kKCl9LHBvbHlnb25TdGFydDpmdW5jdGlvbigpe2I9bSxjPVtdLGY9W10sXz0hMH0scG9seWdvbkVuZDpmdW5jdGlvbigpe3ZhciBuPWZ1bmN0aW9uKCl7Zm9yKHZhciBuPTAsZT0wLGk9Zi5sZW5ndGg7ZTxpOysrZSlmb3IodmFyIG8sYSx1PWZbZV0sYz0xLHM9dS5sZW5ndGgsbD11WzBdLGg9bFswXSxkPWxbMV07YzxzOysrYylvPWgsYT1kLGw9dVtjXSxoPWxbMF0sZD1sWzFdLGE8PXI/ZD5yJiYoaC1vKSooci1hKT4oZC1hKSoodC1vKSYmKytuOmQ8PXImJihoLW8pKihyLWEpPChkLWEpKih0LW8pJiYtLW47cmV0dXJuIG59KCksZT1fJiZuLGk9KGM9VChjKSkubGVuZ3RoOyhlfHxpKSYmKGEucG9seWdvblN0YXJ0KCksZSYmKGEubGluZVN0YXJ0KCksbyhudWxsLG51bGwsMSxhKSxhLmxpbmVFbmQoKSksaSYmRmMoYyx1LG4sbyxhKSxhLnBvbHlnb25FbmQoKSk7Yj1hLGM9Zj1zPW51bGx9fTtmdW5jdGlvbiB3KHQsbil7aSh0LG4pJiZiLnBvaW50KHQsbil9ZnVuY3Rpb24gTShvLGEpe3ZhciB1PWkobyxhKTtpZihmJiZzLnB1c2goW28sYV0pLHkpbD1vLGg9YSxkPXUseT0hMSx1JiYoYi5saW5lU3RhcnQoKSxiLnBvaW50KG8sYSkpO2Vsc2UgaWYodSYmZyliLnBvaW50KG8sYSk7ZWxzZXt2YXIgYz1bcD1NYXRoLm1heChRYyxNYXRoLm1pbihaYyxwKSksdj1NYXRoLm1heChRYyxNYXRoLm1pbihaYyx2KSldLG09W289TWF0aC5tYXgoUWMsTWF0aC5taW4oWmMsbykpLGE9TWF0aC5tYXgoUWMsTWF0aC5taW4oWmMsYSkpXTshZnVuY3Rpb24odCxuLGUscixpLG8pe3ZhciBhLHU9dFswXSxjPXRbMV0sZj0wLHM9MSxsPW5bMF0tdSxoPW5bMV0tYztpZihhPWUtdSxsfHwhKGE+MCkpe2lmKGEvPWwsbDwwKXtpZihhPGYpcmV0dXJuO2E8cyYmKHM9YSl9ZWxzZSBpZihsPjApe2lmKGE+cylyZXR1cm47YT5mJiYoZj1hKX1pZihhPWktdSxsfHwhKGE8MCkpe2lmKGEvPWwsbDwwKXtpZihhPnMpcmV0dXJuO2E+ZiYmKGY9YSl9ZWxzZSBpZihsPjApe2lmKGE8ZilyZXR1cm47YTxzJiYocz1hKX1pZihhPXItYyxofHwhKGE+MCkpe2lmKGEvPWgsaDwwKXtpZihhPGYpcmV0dXJuO2E8cyYmKHM9YSl9ZWxzZSBpZihoPjApe2lmKGE+cylyZXR1cm47YT5mJiYoZj1hKX1pZihhPW8tYyxofHwhKGE8MCkpe2lmKGEvPWgsaDwwKXtpZihhPnMpcmV0dXJuO2E+ZiYmKGY9YSl9ZWxzZSBpZihoPjApe2lmKGE8ZilyZXR1cm47YTxzJiYocz1hKX1yZXR1cm4gZj4wJiYodFswXT11K2YqbCx0WzFdPWMrZipoKSxzPDEmJihuWzBdPXUrcypsLG5bMV09YytzKmgpLCEwfX19fX0oYyxtLHQsbixlLHIpP3UmJihiLmxpbmVTdGFydCgpLGIucG9pbnQobyxhKSxfPSExKTooZ3x8KGIubGluZVN0YXJ0KCksYi5wb2ludChjWzBdLGNbMV0pKSxiLnBvaW50KG1bMF0sbVsxXSksdXx8Yi5saW5lRW5kKCksXz0hMSl9cD1vLHY9YSxnPXV9cmV0dXJuIHh9fXZhciBLYyx0ZixuZixlZj1EYSgpLHJmPXtzcGhlcmU6dXUscG9pbnQ6dXUsbGluZVN0YXJ0OmZ1bmN0aW9uKCl7cmYucG9pbnQ9YWYscmYubGluZUVuZD1vZn0sbGluZUVuZDp1dSxwb2x5Z29uU3RhcnQ6dXUscG9seWdvbkVuZDp1dX07ZnVuY3Rpb24gb2YoKXtyZi5wb2ludD1yZi5saW5lRW5kPXV1fWZ1bmN0aW9uIGFmKHQsbil7S2M9dCo9WGEsdGY9dHUobio9WGEpLG5mPVdhKG4pLHJmLnBvaW50PXVmfWZ1bmN0aW9uIHVmKHQsbil7dCo9WGE7dmFyIGU9dHUobio9WGEpLHI9V2EobiksaT1HYSh0LUtjKSxvPVdhKGkpLGE9cip0dShpKSx1PW5mKmUtdGYqcipvLGM9dGYqZStuZipyKm87ZWYuYWRkKCRhKGV1KGEqYSt1KnUpLGMpKSxLYz10LHRmPWUsbmY9cn1mdW5jdGlvbiBjZih0KXtyZXR1cm4gZWYucmVzZXQoKSxkdSh0LHJmKSwrZWZ9dmFyIGZmPVtudWxsLG51bGxdLHNmPXt0eXBlOiJMaW5lU3RyaW5nIixjb29yZGluYXRlczpmZn07ZnVuY3Rpb24gbGYodCxuKXtyZXR1cm4gZmZbMF09dCxmZlsxXT1uLGNmKHNmKX12YXIgaGY9e0ZlYXR1cmU6ZnVuY3Rpb24odCxuKXtyZXR1cm4gcGYodC5nZW9tZXRyeSxuKX0sRmVhdHVyZUNvbGxlY3Rpb246ZnVuY3Rpb24odCxuKXtmb3IodmFyIGU9dC5mZWF0dXJlcyxyPS0xLGk9ZS5sZW5ndGg7KytyPGk7KWlmKHBmKGVbcl0uZ2VvbWV0cnksbikpcmV0dXJuITA7cmV0dXJuITF9fSxkZj17U3BoZXJlOmZ1bmN0aW9uKCl7cmV0dXJuITB9LFBvaW50OmZ1bmN0aW9uKHQsbil7cmV0dXJuIHZmKHQuY29vcmRpbmF0ZXMsbil9LE11bHRpUG9pbnQ6ZnVuY3Rpb24odCxuKXtmb3IodmFyIGU9dC5jb29yZGluYXRlcyxyPS0xLGk9ZS5sZW5ndGg7KytyPGk7KWlmKHZmKGVbcl0sbikpcmV0dXJuITA7cmV0dXJuITF9LExpbmVTdHJpbmc6ZnVuY3Rpb24odCxuKXtyZXR1cm4gZ2YodC5jb29yZGluYXRlcyxuKX0sTXVsdGlMaW5lU3RyaW5nOmZ1bmN0aW9uKHQsbil7Zm9yKHZhciBlPXQuY29vcmRpbmF0ZXMscj0tMSxpPWUubGVuZ3RoOysrcjxpOylpZihnZihlW3JdLG4pKXJldHVybiEwO3JldHVybiExfSxQb2x5Z29uOmZ1bmN0aW9uKHQsbil7cmV0dXJuIHlmKHQuY29vcmRpbmF0ZXMsbil9LE11bHRpUG9seWdvbjpmdW5jdGlvbih0LG4pe2Zvcih2YXIgZT10LmNvb3JkaW5hdGVzLHI9LTEsaT1lLmxlbmd0aDsrK3I8aTspaWYoeWYoZVtyXSxuKSlyZXR1cm4hMDtyZXR1cm4hMX0sR2VvbWV0cnlDb2xsZWN0aW9uOmZ1bmN0aW9uKHQsbil7Zm9yKHZhciBlPXQuZ2VvbWV0cmllcyxyPS0xLGk9ZS5sZW5ndGg7KytyPGk7KWlmKHBmKGVbcl0sbikpcmV0dXJuITA7cmV0dXJuITF9fTtmdW5jdGlvbiBwZih0LG4pe3JldHVybiEoIXR8fCFkZi5oYXNPd25Qcm9wZXJ0eSh0LnR5cGUpKSYmZGZbdC50eXBlXSh0LG4pfWZ1bmN0aW9uIHZmKHQsbil7cmV0dXJuIDA9PT1sZih0LG4pfWZ1bmN0aW9uIGdmKHQsbil7dmFyIGU9bGYodFswXSx0WzFdKTtyZXR1cm4gbGYodFswXSxuKStsZihuLHRbMV0pPD1lK09hfWZ1bmN0aW9uIHlmKHQsbil7cmV0dXJuISFIYyh0Lm1hcChfZiksYmYobikpfWZ1bmN0aW9uIF9mKHQpe3JldHVybih0PXQubWFwKGJmKSkucG9wKCksdH1mdW5jdGlvbiBiZih0KXtyZXR1cm5bdFswXSpYYSx0WzFdKlhhXX1mdW5jdGlvbiBtZih0LG4sZSl7dmFyIHI9Zyh0LG4tT2EsZSkuY29uY2F0KG4pO3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gci5tYXAoZnVuY3Rpb24obil7cmV0dXJuW3Qsbl19KX19ZnVuY3Rpb24geGYodCxuLGUpe3ZhciByPWcodCxuLU9hLGUpLmNvbmNhdChuKTtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIHIubWFwKGZ1bmN0aW9uKG4pe3JldHVybltuLHRdfSl9fWZ1bmN0aW9uIHdmKCl7dmFyIHQsbixlLHIsaSxvLGEsdSxjLGYscyxsLGg9MTAsZD1oLHA9OTAsdj0zNjAseT0yLjU7ZnVuY3Rpb24gXygpe3JldHVybnt0eXBlOiJNdWx0aUxpbmVTdHJpbmciLGNvb3JkaW5hdGVzOmIoKX19ZnVuY3Rpb24gYigpe3JldHVybiBnKFphKHIvcCkqcCxlLHApLm1hcChzKS5jb25jYXQoZyhaYSh1L3YpKnYsYSx2KS5tYXAobCkpLmNvbmNhdChnKFphKG4vaCkqaCx0LGgpLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gR2EodCVwKT5PYX0pLm1hcChjKSkuY29uY2F0KGcoWmEoby9kKSpkLGksZCkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiBHYSh0JXYpPk9hfSkubWFwKGYpKX1yZXR1cm4gXy5saW5lcz1mdW5jdGlvbigpe3JldHVybiBiKCkubWFwKGZ1bmN0aW9uKHQpe3JldHVybnt0eXBlOiJMaW5lU3RyaW5nIixjb29yZGluYXRlczp0fX0pfSxfLm91dGxpbmU9ZnVuY3Rpb24oKXtyZXR1cm57dHlwZToiUG9seWdvbiIsY29vcmRpbmF0ZXM6W3MocikuY29uY2F0KGwoYSkuc2xpY2UoMSkscyhlKS5yZXZlcnNlKCkuc2xpY2UoMSksbCh1KS5yZXZlcnNlKCkuc2xpY2UoMSkpXX19LF8uZXh0ZW50PWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoP18uZXh0ZW50TWFqb3IodCkuZXh0ZW50TWlub3IodCk6Xy5leHRlbnRNaW5vcigpfSxfLmV4dGVudE1ham9yPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhyPSt0WzBdWzBdLGU9K3RbMV1bMF0sdT0rdFswXVsxXSxhPSt0WzFdWzFdLHI+ZSYmKHQ9cixyPWUsZT10KSx1PmEmJih0PXUsdT1hLGE9dCksXy5wcmVjaXNpb24oeSkpOltbcix1XSxbZSxhXV19LF8uZXh0ZW50TWlub3I9ZnVuY3Rpb24oZSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG49K2VbMF1bMF0sdD0rZVsxXVswXSxvPStlWzBdWzFdLGk9K2VbMV1bMV0sbj50JiYoZT1uLG49dCx0PWUpLG8+aSYmKGU9byxvPWksaT1lKSxfLnByZWNpc2lvbih5KSk6W1tuLG9dLFt0LGldXX0sXy5zdGVwPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoP18uc3RlcE1ham9yKHQpLnN0ZXBNaW5vcih0KTpfLnN0ZXBNaW5vcigpfSxfLnN0ZXBNYWpvcj1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocD0rdFswXSx2PSt0WzFdLF8pOltwLHZdfSxfLnN0ZXBNaW5vcj1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oaD0rdFswXSxkPSt0WzFdLF8pOltoLGRdfSxfLnByZWNpc2lvbj1mdW5jdGlvbihoKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oeT0raCxjPW1mKG8saSw5MCksZj14ZihuLHQseSkscz1tZih1LGEsOTApLGw9eGYocixlLHkpLF8pOnl9LF8uZXh0ZW50TWFqb3IoW1stMTgwLC05MCtPYV0sWzE4MCw5MC1PYV1dKS5leHRlbnRNaW5vcihbWy0xODAsLTgwLU9hXSxbMTgwLDgwK09hXV0pfWZ1bmN0aW9uIE1mKHQpe3JldHVybiB0fXZhciBOZixBZixUZixTZixrZj1EYSgpLEVmPURhKCksQ2Y9e3BvaW50OnV1LGxpbmVTdGFydDp1dSxsaW5lRW5kOnV1LHBvbHlnb25TdGFydDpmdW5jdGlvbigpe0NmLmxpbmVTdGFydD1QZixDZi5saW5lRW5kPURmfSxwb2x5Z29uRW5kOmZ1bmN0aW9uKCl7Q2YubGluZVN0YXJ0PUNmLmxpbmVFbmQ9Q2YucG9pbnQ9dXUsa2YuYWRkKEdhKEVmKSksRWYucmVzZXQoKX0scmVzdWx0OmZ1bmN0aW9uKCl7dmFyIHQ9a2YvMjtyZXR1cm4ga2YucmVzZXQoKSx0fX07ZnVuY3Rpb24gUGYoKXtDZi5wb2ludD16Zn1mdW5jdGlvbiB6Zih0LG4pe0NmLnBvaW50PVJmLE5mPVRmPXQsQWY9U2Y9bn1mdW5jdGlvbiBSZih0LG4pe0VmLmFkZChTZip0LVRmKm4pLFRmPXQsU2Y9bn1mdW5jdGlvbiBEZigpe1JmKE5mLEFmKX12YXIgcWY9MS8wLExmPXFmLFVmPS1xZixPZj1VZixCZj17cG9pbnQ6ZnVuY3Rpb24odCxuKXt0PHFmJiYocWY9dCk7dD5VZiYmKFVmPXQpO248TGYmJihMZj1uKTtuPk9mJiYoT2Y9bil9LGxpbmVTdGFydDp1dSxsaW5lRW5kOnV1LHBvbHlnb25TdGFydDp1dSxwb2x5Z29uRW5kOnV1LHJlc3VsdDpmdW5jdGlvbigpe3ZhciB0PVtbcWYsTGZdLFtVZixPZl1dO3JldHVybiBVZj1PZj0tKExmPXFmPTEvMCksdH19O3ZhciBZZixGZixJZixqZixIZj0wLFhmPTAsR2Y9MCxWZj0wLCRmPTAsV2Y9MCxaZj0wLFFmPTAsSmY9MCxLZj17cG9pbnQ6dHMsbGluZVN0YXJ0Om5zLGxpbmVFbmQ6aXMscG9seWdvblN0YXJ0OmZ1bmN0aW9uKCl7S2YubGluZVN0YXJ0PW9zLEtmLmxpbmVFbmQ9YXN9LHBvbHlnb25FbmQ6ZnVuY3Rpb24oKXtLZi5wb2ludD10cyxLZi5saW5lU3RhcnQ9bnMsS2YubGluZUVuZD1pc30scmVzdWx0OmZ1bmN0aW9uKCl7dmFyIHQ9SmY/W1pmL0pmLFFmL0pmXTpXZj9bVmYvV2YsJGYvV2ZdOkdmP1tIZi9HZixYZi9HZl06W05hTixOYU5dO3JldHVybiBIZj1YZj1HZj1WZj0kZj1XZj1aZj1RZj1KZj0wLHR9fTtmdW5jdGlvbiB0cyh0LG4pe0hmKz10LFhmKz1uLCsrR2Z9ZnVuY3Rpb24gbnMoKXtLZi5wb2ludD1lc31mdW5jdGlvbiBlcyh0LG4pe0tmLnBvaW50PXJzLHRzKElmPXQsamY9bil9ZnVuY3Rpb24gcnModCxuKXt2YXIgZT10LUlmLHI9bi1qZixpPWV1KGUqZStyKnIpO1ZmKz1pKihJZit0KS8yLCRmKz1pKihqZituKS8yLFdmKz1pLHRzKElmPXQsamY9bil9ZnVuY3Rpb24gaXMoKXtLZi5wb2ludD10c31mdW5jdGlvbiBvcygpe0tmLnBvaW50PXVzfWZ1bmN0aW9uIGFzKCl7Y3MoWWYsRmYpfWZ1bmN0aW9uIHVzKHQsbil7S2YucG9pbnQ9Y3MsdHMoWWY9SWY9dCxGZj1qZj1uKX1mdW5jdGlvbiBjcyh0LG4pe3ZhciBlPXQtSWYscj1uLWpmLGk9ZXUoZSplK3Iqcik7VmYrPWkqKElmK3QpLzIsJGYrPWkqKGpmK24pLzIsV2YrPWksWmYrPShpPWpmKnQtSWYqbikqKElmK3QpLFFmKz1pKihqZituKSxKZis9MyppLHRzKElmPXQsamY9bil9ZnVuY3Rpb24gZnModCl7dGhpcy5fY29udGV4dD10fWZzLnByb3RvdHlwZT17X3JhZGl1czo0LjUscG9pbnRSYWRpdXM6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3JhZGl1cz10LHRoaXN9LHBvbHlnb25TdGFydDpmdW5jdGlvbigpe3RoaXMuX2xpbmU9MH0scG9seWdvbkVuZDpmdW5jdGlvbigpe3RoaXMuX2xpbmU9TmFOfSxsaW5lU3RhcnQ6ZnVuY3Rpb24oKXt0aGlzLl9wb2ludD0wfSxsaW5lRW5kOmZ1bmN0aW9uKCl7MD09PXRoaXMuX2xpbmUmJnRoaXMuX2NvbnRleHQuY2xvc2VQYXRoKCksdGhpcy5fcG9pbnQ9TmFOfSxwb2ludDpmdW5jdGlvbih0LG4pe3N3aXRjaCh0aGlzLl9wb2ludCl7Y2FzZSAwOnRoaXMuX2NvbnRleHQubW92ZVRvKHQsbiksdGhpcy5fcG9pbnQ9MTticmVhaztjYXNlIDE6dGhpcy5fY29udGV4dC5saW5lVG8odCxuKTticmVhaztkZWZhdWx0OnRoaXMuX2NvbnRleHQubW92ZVRvKHQrdGhpcy5fcmFkaXVzLG4pLHRoaXMuX2NvbnRleHQuYXJjKHQsbix0aGlzLl9yYWRpdXMsMCxqYSl9fSxyZXN1bHQ6dXV9O3ZhciBzcyxscyxocyxkcyxwcyx2cz1EYSgpLGdzPXtwb2ludDp1dSxsaW5lU3RhcnQ6ZnVuY3Rpb24oKXtncy5wb2ludD15c30sbGluZUVuZDpmdW5jdGlvbigpe3NzJiZfcyhscyxocyksZ3MucG9pbnQ9dXV9LHBvbHlnb25TdGFydDpmdW5jdGlvbigpe3NzPSEwfSxwb2x5Z29uRW5kOmZ1bmN0aW9uKCl7c3M9bnVsbH0scmVzdWx0OmZ1bmN0aW9uKCl7dmFyIHQ9K3ZzO3JldHVybiB2cy5yZXNldCgpLHR9fTtmdW5jdGlvbiB5cyh0LG4pe2dzLnBvaW50PV9zLGxzPWRzPXQsaHM9cHM9bn1mdW5jdGlvbiBfcyh0LG4pe2RzLT10LHBzLT1uLHZzLmFkZChldShkcypkcytwcypwcykpLGRzPXQscHM9bn1mdW5jdGlvbiBicygpe3RoaXMuX3N0cmluZz1bXX1mdW5jdGlvbiBtcyh0KXtyZXR1cm4ibTAsIit0KyJhIit0KyIsIit0KyIgMCAxLDEgMCwiKy0yKnQrImEiK3QrIiwiK3QrIiAwIDEsMSAwLCIrMip0KyJ6In1mdW5jdGlvbiB4cyh0KXtyZXR1cm4gZnVuY3Rpb24obil7dmFyIGU9bmV3IHdzO2Zvcih2YXIgciBpbiB0KWVbcl09dFtyXTtyZXR1cm4gZS5zdHJlYW09bixlfX1mdW5jdGlvbiB3cygpe31mdW5jdGlvbiBNcyh0LG4sZSl7dmFyIHI9dC5jbGlwRXh0ZW50JiZ0LmNsaXBFeHRlbnQoKTtyZXR1cm4gdC5zY2FsZSgxNTApLnRyYW5zbGF0ZShbMCwwXSksbnVsbCE9ciYmdC5jbGlwRXh0ZW50KG51bGwpLGR1KGUsdC5zdHJlYW0oQmYpKSxuKEJmLnJlc3VsdCgpKSxudWxsIT1yJiZ0LmNsaXBFeHRlbnQociksdH1mdW5jdGlvbiBOcyh0LG4sZSl7cmV0dXJuIE1zKHQsZnVuY3Rpb24oZSl7dmFyIHI9blsxXVswXS1uWzBdWzBdLGk9blsxXVsxXS1uWzBdWzFdLG89TWF0aC5taW4oci8oZVsxXVswXS1lWzBdWzBdKSxpLyhlWzFdWzFdLWVbMF1bMV0pKSxhPStuWzBdWzBdKyhyLW8qKGVbMV1bMF0rZVswXVswXSkpLzIsdT0rblswXVsxXSsoaS1vKihlWzFdWzFdK2VbMF1bMV0pKS8yO3Quc2NhbGUoMTUwKm8pLnRyYW5zbGF0ZShbYSx1XSl9LGUpfWZ1bmN0aW9uIEFzKHQsbixlKXtyZXR1cm4gTnModCxbWzAsMF0sbl0sZSl9ZnVuY3Rpb24gVHModCxuLGUpe3JldHVybiBNcyh0LGZ1bmN0aW9uKGUpe3ZhciByPStuLGk9ci8oZVsxXVswXS1lWzBdWzBdKSxvPShyLWkqKGVbMV1bMF0rZVswXVswXSkpLzIsYT0taSplWzBdWzFdO3Quc2NhbGUoMTUwKmkpLnRyYW5zbGF0ZShbbyxhXSl9LGUpfWZ1bmN0aW9uIFNzKHQsbixlKXtyZXR1cm4gTXModCxmdW5jdGlvbihlKXt2YXIgcj0rbixpPXIvKGVbMV1bMV0tZVswXVsxXSksbz0taSplWzBdWzBdLGE9KHItaSooZVsxXVsxXStlWzBdWzFdKSkvMjt0LnNjYWxlKDE1MCppKS50cmFuc2xhdGUoW28sYV0pfSxlKX1icy5wcm90b3R5cGU9e19yYWRpdXM6NC41LF9jaXJjbGU6bXMoNC41KSxwb2ludFJhZGl1czpmdW5jdGlvbih0KXtyZXR1cm4odD0rdCkhPT10aGlzLl9yYWRpdXMmJih0aGlzLl9yYWRpdXM9dCx0aGlzLl9jaXJjbGU9bnVsbCksdGhpc30scG9seWdvblN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5fbGluZT0wfSxwb2x5Z29uRW5kOmZ1bmN0aW9uKCl7dGhpcy5fbGluZT1OYU59LGxpbmVTdGFydDpmdW5jdGlvbigpe3RoaXMuX3BvaW50PTB9LGxpbmVFbmQ6ZnVuY3Rpb24oKXswPT09dGhpcy5fbGluZSYmdGhpcy5fc3RyaW5nLnB1c2goIloiKSx0aGlzLl9wb2ludD1OYU59LHBvaW50OmZ1bmN0aW9uKHQsbil7c3dpdGNoKHRoaXMuX3BvaW50KXtjYXNlIDA6dGhpcy5fc3RyaW5nLnB1c2goIk0iLHQsIiwiLG4pLHRoaXMuX3BvaW50PTE7YnJlYWs7Y2FzZSAxOnRoaXMuX3N0cmluZy5wdXNoKCJMIix0LCIsIixuKTticmVhaztkZWZhdWx0Om51bGw9PXRoaXMuX2NpcmNsZSYmKHRoaXMuX2NpcmNsZT1tcyh0aGlzLl9yYWRpdXMpKSx0aGlzLl9zdHJpbmcucHVzaCgiTSIsdCwiLCIsbix0aGlzLl9jaXJjbGUpfX0scmVzdWx0OmZ1bmN0aW9uKCl7aWYodGhpcy5fc3RyaW5nLmxlbmd0aCl7dmFyIHQ9dGhpcy5fc3RyaW5nLmpvaW4oIiIpO3JldHVybiB0aGlzLl9zdHJpbmc9W10sdH1yZXR1cm4gbnVsbH19LHdzLnByb3RvdHlwZT17Y29uc3RydWN0b3I6d3MscG9pbnQ6ZnVuY3Rpb24odCxuKXt0aGlzLnN0cmVhbS5wb2ludCh0LG4pfSxzcGhlcmU6ZnVuY3Rpb24oKXt0aGlzLnN0cmVhbS5zcGhlcmUoKX0sbGluZVN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5zdHJlYW0ubGluZVN0YXJ0KCl9LGxpbmVFbmQ6ZnVuY3Rpb24oKXt0aGlzLnN0cmVhbS5saW5lRW5kKCl9LHBvbHlnb25TdGFydDpmdW5jdGlvbigpe3RoaXMuc3RyZWFtLnBvbHlnb25TdGFydCgpfSxwb2x5Z29uRW5kOmZ1bmN0aW9uKCl7dGhpcy5zdHJlYW0ucG9seWdvbkVuZCgpfX07dmFyIGtzPTE2LEVzPVdhKDMwKlhhKTtmdW5jdGlvbiBDcyh0LG4pe3JldHVybituP2Z1bmN0aW9uKHQsbil7ZnVuY3Rpb24gZShyLGksbyxhLHUsYyxmLHMsbCxoLGQscCx2LGcpe3ZhciB5PWYtcixfPXMtaSxiPXkqeStfKl87aWYoYj40Km4mJnYtLSl7dmFyIG09YStoLHg9dStkLHc9YytwLE09ZXUobSptK3gqeCt3KncpLE49b3Uody89TSksQT1HYShHYSh3KS0xKTxPYXx8R2Eoby1sKTxPYT8obytsKS8yOiRhKHgsbSksVD10KEEsTiksUz1UWzBdLGs9VFsxXSxFPVMtcixDPWstaSxQPV8qRS15KkM7KFAqUC9iPm58fEdhKCh5KkUrXypDKS9iLS41KT4uM3x8YSpoK3UqZCtjKnA8RXMpJiYoZShyLGksbyxhLHUsYyxTLGssQSxtLz1NLHgvPU0sdyx2LGcpLGcucG9pbnQoUyxrKSxlKFMsayxBLG0seCx3LGYscyxsLGgsZCxwLHYsZykpfX1yZXR1cm4gZnVuY3Rpb24obil7dmFyIHIsaSxvLGEsdSxjLGYscyxsLGgsZCxwLHY9e3BvaW50OmcsbGluZVN0YXJ0OnksbGluZUVuZDpiLHBvbHlnb25TdGFydDpmdW5jdGlvbigpe24ucG9seWdvblN0YXJ0KCksdi5saW5lU3RhcnQ9bX0scG9seWdvbkVuZDpmdW5jdGlvbigpe24ucG9seWdvbkVuZCgpLHYubGluZVN0YXJ0PXl9fTtmdW5jdGlvbiBnKGUscil7ZT10KGUsciksbi5wb2ludChlWzBdLGVbMV0pfWZ1bmN0aW9uIHkoKXtzPU5hTix2LnBvaW50PV8sbi5saW5lU3RhcnQoKX1mdW5jdGlvbiBfKHIsaSl7dmFyIG89U3UoW3IsaV0pLGE9dChyLGkpO2UocyxsLGYsaCxkLHAscz1hWzBdLGw9YVsxXSxmPXIsaD1vWzBdLGQ9b1sxXSxwPW9bMl0sa3Msbiksbi5wb2ludChzLGwpfWZ1bmN0aW9uIGIoKXt2LnBvaW50PWcsbi5saW5lRW5kKCl9ZnVuY3Rpb24gbSgpe3koKSx2LnBvaW50PXgsdi5saW5lRW5kPXd9ZnVuY3Rpb24geCh0LG4pe18ocj10LG4pLGk9cyxvPWwsYT1oLHU9ZCxjPXAsdi5wb2ludD1ffWZ1bmN0aW9uIHcoKXtlKHMsbCxmLGgsZCxwLGksbyxyLGEsdSxjLGtzLG4pLHYubGluZUVuZD1iLGIoKX1yZXR1cm4gdn19KHQsbik6ZnVuY3Rpb24odCl7cmV0dXJuIHhzKHtwb2ludDpmdW5jdGlvbihuLGUpe249dChuLGUpLHRoaXMuc3RyZWFtLnBvaW50KG5bMF0sblsxXSl9fSl9KHQpfXZhciBQcz14cyh7cG9pbnQ6ZnVuY3Rpb24odCxuKXt0aGlzLnN0cmVhbS5wb2ludCh0KlhhLG4qWGEpfX0pO2Z1bmN0aW9uIHpzKHQsbixlLHIpe3ZhciBpPVdhKHIpLG89dHUociksYT1pKnQsdT1vKnQsYz1pL3QsZj1vL3Qscz0obyplLWkqbikvdCxsPShvKm4raSplKS90O2Z1bmN0aW9uIGgodCxyKXtyZXR1cm5bYSp0LXUqcituLGUtdSp0LWEqcl19cmV0dXJuIGguaW52ZXJ0PWZ1bmN0aW9uKHQsbil7cmV0dXJuW2MqdC1mKm4rcyxsLWYqdC1jKm5dfSxofWZ1bmN0aW9uIFJzKHQpe3JldHVybiBEcyhmdW5jdGlvbigpe3JldHVybiB0fSkoKX1mdW5jdGlvbiBEcyh0KXt2YXIgbixlLHIsaSxvLGEsdSxjLGYscyxsPTE1MCxoPTQ4MCxkPTI1MCxwPTAsdj0wLGc9MCx5PTAsXz0wLGI9MCxtPW51bGwseD0kYyx3PW51bGwsTT1NZixOPS41O2Z1bmN0aW9uIEEodCl7cmV0dXJuIGModFswXSpYYSx0WzFdKlhhKX1mdW5jdGlvbiBUKHQpe3JldHVybih0PWMuaW52ZXJ0KHRbMF0sdFsxXSkpJiZbdFswXSpIYSx0WzFdKkhhXX1mdW5jdGlvbiBTKCl7dmFyIHQ9enMobCwwLDAsYikuYXBwbHkobnVsbCxuKHAsdikpLHI9KGI/enM6ZnVuY3Rpb24odCxuLGUpe2Z1bmN0aW9uIHIocixpKXtyZXR1cm5bbit0KnIsZS10KmldfXJldHVybiByLmludmVydD1mdW5jdGlvbihyLGkpe3JldHVyblsoci1uKS90LChlLWkpL3RdfSxyfSkobCxoLXRbMF0sZC10WzFdLGIpO3JldHVybiBlPVBjKGcseSxfKSx1PUVjKG4sciksYz1FYyhlLHUpLGE9Q3ModSxOKSxrKCl9ZnVuY3Rpb24gaygpe3JldHVybiBmPXM9bnVsbCxBfXJldHVybiBBLnN0cmVhbT1mdW5jdGlvbih0KXtyZXR1cm4gZiYmcz09PXQ/ZjpmPVBzKGZ1bmN0aW9uKHQpe3JldHVybiB4cyh7cG9pbnQ6ZnVuY3Rpb24obixlKXt2YXIgcj10KG4sZSk7cmV0dXJuIHRoaXMuc3RyZWFtLnBvaW50KHJbMF0sclsxXSl9fSl9KGUpKHgoYShNKHM9dCkpKSkpfSxBLnByZWNsaXA9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHg9dCxtPXZvaWQgMCxrKCkpOnh9LEEucG9zdGNsaXA9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KE09dCx3PXI9aT1vPW51bGwsaygpKTpNfSxBLmNsaXBBbmdsZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oeD0rdD9XYyhtPXQqWGEpOihtPW51bGwsJGMpLGsoKSk6bSpIYX0sQS5jbGlwRXh0ZW50PWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhNPW51bGw9PXQ/KHc9cj1pPW89bnVsbCxNZik6SmModz0rdFswXVswXSxyPSt0WzBdWzFdLGk9K3RbMV1bMF0sbz0rdFsxXVsxXSksaygpKTpudWxsPT13P251bGw6W1t3LHJdLFtpLG9dXX0sQS5zY2FsZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8obD0rdCxTKCkpOmx9LEEudHJhbnNsYXRlPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhoPSt0WzBdLGQ9K3RbMV0sUygpKTpbaCxkXX0sQS5jZW50ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHA9dFswXSUzNjAqWGEsdj10WzFdJTM2MCpYYSxTKCkpOltwKkhhLHYqSGFdfSxBLnJvdGF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZz10WzBdJTM2MCpYYSx5PXRbMV0lMzYwKlhhLF89dC5sZW5ndGg+Mj90WzJdJTM2MCpYYTowLFMoKSk6W2cqSGEseSpIYSxfKkhhXX0sQS5hbmdsZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oYj10JTM2MCpYYSxTKCkpOmIqSGF9LEEucHJlY2lzaW9uPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhhPUNzKHUsTj10KnQpLGsoKSk6ZXUoTil9LEEuZml0RXh0ZW50PWZ1bmN0aW9uKHQsbil7cmV0dXJuIE5zKEEsdCxuKX0sQS5maXRTaXplPWZ1bmN0aW9uKHQsbil7cmV0dXJuIEFzKEEsdCxuKX0sQS5maXRXaWR0aD1mdW5jdGlvbih0LG4pe3JldHVybiBUcyhBLHQsbil9LEEuZml0SGVpZ2h0PWZ1bmN0aW9uKHQsbil7cmV0dXJuIFNzKEEsdCxuKX0sZnVuY3Rpb24oKXtyZXR1cm4gbj10LmFwcGx5KHRoaXMsYXJndW1lbnRzKSxBLmludmVydD1uLmludmVydCYmVCxTKCl9fWZ1bmN0aW9uIHFzKHQpe3ZhciBuPTAsZT1ZYS8zLHI9RHModCksaT1yKG4sZSk7cmV0dXJuIGkucGFyYWxsZWxzPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoP3Iobj10WzBdKlhhLGU9dFsxXSpYYSk6W24qSGEsZSpIYV19LGl9ZnVuY3Rpb24gTHModCxuKXt2YXIgZT10dSh0KSxyPShlK3R1KG4pKS8yO2lmKEdhKHIpPE9hKXJldHVybiBmdW5jdGlvbih0KXt2YXIgbj1XYSh0KTtmdW5jdGlvbiBlKHQsZSl7cmV0dXJuW3Qqbix0dShlKS9uXX1yZXR1cm4gZS5pbnZlcnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm5bdC9uLG91KGUqbildfSxlfSh0KTt2YXIgaT0xK2UqKDIqci1lKSxvPWV1KGkpL3I7ZnVuY3Rpb24gYSh0LG4pe3ZhciBlPWV1KGktMipyKnR1KG4pKS9yO3JldHVybltlKnR1KHQqPXIpLG8tZSpXYSh0KV19cmV0dXJuIGEuaW52ZXJ0PWZ1bmN0aW9uKHQsbil7dmFyIGU9by1uO3JldHVyblskYSh0LEdhKGUpKS9yKm51KGUpLG91KChpLSh0KnQrZSplKSpyKnIpLygyKnIpKV19LGF9ZnVuY3Rpb24gVXMoKXtyZXR1cm4gcXMoTHMpLnNjYWxlKDE1NS40MjQpLmNlbnRlcihbMCwzMy42NDQyXSl9ZnVuY3Rpb24gT3MoKXtyZXR1cm4gVXMoKS5wYXJhbGxlbHMoWzI5LjUsNDUuNV0pLnNjYWxlKDEwNzApLnRyYW5zbGF0ZShbNDgwLDI1MF0pLnJvdGF0ZShbOTYsMF0pLmNlbnRlcihbLS42LDM4LjddKX1mdW5jdGlvbiBCcyh0KXtyZXR1cm4gZnVuY3Rpb24obixlKXt2YXIgcj1XYShuKSxpPVdhKGUpLG89dChyKmkpO3JldHVybltvKmkqdHUobiksbyp0dShlKV19fWZ1bmN0aW9uIFlzKHQpe3JldHVybiBmdW5jdGlvbihuLGUpe3ZhciByPWV1KG4qbitlKmUpLGk9dChyKSxvPXR1KGkpLGE9V2EoaSk7cmV0dXJuWyRhKG4qbyxyKmEpLG91KHImJmUqby9yKV19fXZhciBGcz1CcyhmdW5jdGlvbih0KXtyZXR1cm4gZXUoMi8oMSt0KSl9KTtGcy5pbnZlcnQ9WXMoZnVuY3Rpb24odCl7cmV0dXJuIDIqb3UodC8yKX0pO3ZhciBJcz1CcyhmdW5jdGlvbih0KXtyZXR1cm4odD1pdSh0KSkmJnQvdHUodCl9KTtmdW5jdGlvbiBqcyh0LG4pe3JldHVyblt0LEphKHJ1KChGYStuKS8yKSldfWZ1bmN0aW9uIEhzKHQpe3ZhciBuLGUscixpPVJzKHQpLG89aS5jZW50ZXIsYT1pLnNjYWxlLHU9aS50cmFuc2xhdGUsYz1pLmNsaXBFeHRlbnQsZj1udWxsO2Z1bmN0aW9uIHMoKXt2YXIgbz1ZYSphKCksdT1pKHFjKGkucm90YXRlKCkpLmludmVydChbMCwwXSkpO3JldHVybiBjKG51bGw9PWY/W1t1WzBdLW8sdVsxXS1vXSxbdVswXStvLHVbMV0rb11dOnQ9PT1qcz9bW01hdGgubWF4KHVbMF0tbyxmKSxuXSxbTWF0aC5taW4odVswXStvLGUpLHJdXTpbW2YsTWF0aC5tYXgodVsxXS1vLG4pXSxbZSxNYXRoLm1pbih1WzFdK28scildXSl9cmV0dXJuIGkuc2NhbGU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGEodCkscygpKTphKCl9LGkudHJhbnNsYXRlPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh1KHQpLHMoKSk6dSgpfSxpLmNlbnRlcj1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8obyh0KSxzKCkpOm8oKX0saS5jbGlwRXh0ZW50PWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhudWxsPT10P2Y9bj1lPXI9bnVsbDooZj0rdFswXVswXSxuPSt0WzBdWzFdLGU9K3RbMV1bMF0scj0rdFsxXVsxXSkscygpKTpudWxsPT1mP251bGw6W1tmLG5dLFtlLHJdXX0scygpfWZ1bmN0aW9uIFhzKHQpe3JldHVybiBydSgoRmErdCkvMil9ZnVuY3Rpb24gR3ModCxuKXt2YXIgZT1XYSh0KSxyPXQ9PT1uP3R1KHQpOkphKGUvV2EobikpL0phKFhzKG4pL1hzKHQpKSxpPWUqS2EoWHModCkscikvcjtpZighcilyZXR1cm4ganM7ZnVuY3Rpb24gbyh0LG4pe2k+MD9uPC1GYStPYSYmKG49LUZhK09hKTpuPkZhLU9hJiYobj1GYS1PYSk7dmFyIGU9aS9LYShYcyhuKSxyKTtyZXR1cm5bZSp0dShyKnQpLGktZSpXYShyKnQpXX1yZXR1cm4gby5pbnZlcnQ9ZnVuY3Rpb24odCxuKXt2YXIgZT1pLW4sbz1udShyKSpldSh0KnQrZSplKTtyZXR1cm5bJGEodCxHYShlKSkvcipudShlKSwyKlZhKEthKGkvbywxL3IpKS1GYV19LG99ZnVuY3Rpb24gVnModCxuKXtyZXR1cm5bdCxuXX1mdW5jdGlvbiAkcyh0LG4pe3ZhciBlPVdhKHQpLHI9dD09PW4/dHUodCk6KGUtV2EobikpLyhuLXQpLGk9ZS9yK3Q7aWYoR2Eocik8T2EpcmV0dXJuIFZzO2Z1bmN0aW9uIG8odCxuKXt2YXIgZT1pLW4sbz1yKnQ7cmV0dXJuW2UqdHUobyksaS1lKldhKG8pXX1yZXR1cm4gby5pbnZlcnQ9ZnVuY3Rpb24odCxuKXt2YXIgZT1pLW47cmV0dXJuWyRhKHQsR2EoZSkpL3IqbnUoZSksaS1udShyKSpldSh0KnQrZSplKV19LG99SXMuaW52ZXJ0PVlzKGZ1bmN0aW9uKHQpe3JldHVybiB0fSksanMuaW52ZXJ0PWZ1bmN0aW9uKHQsbil7cmV0dXJuW3QsMipWYShRYShuKSktRmFdfSxWcy5pbnZlcnQ9VnM7dmFyIFdzPTEuMzQwMjY0LFpzPS0uMDgxMTA2LFFzPTg5M2UtNixKcz0uMDAzNzk2LEtzPWV1KDMpLzI7ZnVuY3Rpb24gdGwodCxuKXt2YXIgZT1vdShLcyp0dShuKSkscj1lKmUsaT1yKnIqcjtyZXR1cm5bdCpXYShlKS8oS3MqKFdzKzMqWnMqcitpKig3KlFzKzkqSnMqcikpKSxlKihXcytacypyK2kqKFFzK0pzKnIpKV19ZnVuY3Rpb24gbmwodCxuKXt2YXIgZT1XYShuKSxyPVdhKHQpKmU7cmV0dXJuW2UqdHUodCkvcix0dShuKS9yXX1mdW5jdGlvbiBlbCh0LG4sZSxyKXtyZXR1cm4gMT09PXQmJjE9PT1uJiYwPT09ZSYmMD09PXI/TWY6eHMoe3BvaW50OmZ1bmN0aW9uKGksbyl7dGhpcy5zdHJlYW0ucG9pbnQoaSp0K2UsbypuK3IpfX0pfWZ1bmN0aW9uIHJsKHQsbil7dmFyIGU9bipuLHI9ZSplO3JldHVyblt0KiguODcwNy0uMTMxOTc5KmUrcioociooLjAwMzk3MSplLS4wMDE1MjkqciktLjAxMzc5MSkpLG4qKDEuMDA3MjI2K2UqKC4wMTUwODUrciooLjAyODg3NCplLS4wNDQ0NzUtLjAwNTkxNipyKSkpXX1mdW5jdGlvbiBpbCh0LG4pe3JldHVybltXYShuKSp0dSh0KSx0dShuKV19ZnVuY3Rpb24gb2wodCxuKXt2YXIgZT1XYShuKSxyPTErV2EodCkqZTtyZXR1cm5bZSp0dSh0KS9yLHR1KG4pL3JdfWZ1bmN0aW9uIGFsKHQsbil7cmV0dXJuW0phKHJ1KChGYStuKS8yKSksLXRdfWZ1bmN0aW9uIHVsKHQsbil7cmV0dXJuIHQucGFyZW50PT09bi5wYXJlbnQ/MToyfWZ1bmN0aW9uIGNsKHQsbil7cmV0dXJuIHQrbi54fWZ1bmN0aW9uIGZsKHQsbil7cmV0dXJuIE1hdGgubWF4KHQsbi55KX1mdW5jdGlvbiBzbCh0KXt2YXIgbj0wLGU9dC5jaGlsZHJlbixyPWUmJmUubGVuZ3RoO2lmKHIpZm9yKDstLXI+PTA7KW4rPWVbcl0udmFsdWU7ZWxzZSBuPTE7dC52YWx1ZT1ufWZ1bmN0aW9uIGxsKHQsbil7dmFyIGUscixpLG8sYSx1PW5ldyB2bCh0KSxjPSt0LnZhbHVlJiYodS52YWx1ZT10LnZhbHVlKSxmPVt1XTtmb3IobnVsbD09biYmKG49aGwpO2U9Zi5wb3AoKTspaWYoYyYmKGUudmFsdWU9K2UuZGF0YS52YWx1ZSksKGk9bihlLmRhdGEpKSYmKGE9aS5sZW5ndGgpKWZvcihlLmNoaWxkcmVuPW5ldyBBcnJheShhKSxvPWEtMTtvPj0wOy0tbylmLnB1c2gocj1lLmNoaWxkcmVuW29dPW5ldyB2bChpW29dKSksci5wYXJlbnQ9ZSxyLmRlcHRoPWUuZGVwdGgrMTtyZXR1cm4gdS5lYWNoQmVmb3JlKHBsKX1mdW5jdGlvbiBobCh0KXtyZXR1cm4gdC5jaGlsZHJlbn1mdW5jdGlvbiBkbCh0KXt0LmRhdGE9dC5kYXRhLmRhdGF9ZnVuY3Rpb24gcGwodCl7dmFyIG49MDtkb3t0LmhlaWdodD1ufXdoaWxlKCh0PXQucGFyZW50KSYmdC5oZWlnaHQ8KytuKX1mdW5jdGlvbiB2bCh0KXt0aGlzLmRhdGE9dCx0aGlzLmRlcHRoPXRoaXMuaGVpZ2h0PTAsdGhpcy5wYXJlbnQ9bnVsbH10bC5pbnZlcnQ9ZnVuY3Rpb24odCxuKXtmb3IodmFyIGUscj1uLGk9cipyLG89aSppKmksYT0wO2E8MTImJihvPShpPShyLT1lPShyKihXcytacyppK28qKFFzK0pzKmkpKS1uKS8oV3MrMypacyppK28qKDcqUXMrOSpKcyppKSkpKnIpKmkqaSwhKEdhKGUpPEJhKSk7KythKTtyZXR1cm5bS3MqdCooV3MrMypacyppK28qKDcqUXMrOSpKcyppKSkvV2Eociksb3UodHUocikvS3MpXX0sbmwuaW52ZXJ0PVlzKFZhKSxybC5pbnZlcnQ9ZnVuY3Rpb24odCxuKXt2YXIgZSxyPW4saT0yNTtkb3t2YXIgbz1yKnIsYT1vKm87ci09ZT0ociooMS4wMDcyMjYrbyooLjAxNTA4NSthKiguMDI4ODc0Km8tLjA0NDQ3NS0uMDA1OTE2KmEpKSktbikvKDEuMDA3MjI2K28qKC4wNDUyNTUrYSooLjI1OTg2NipvLS4zMTEzMjUtLjAwNTkxNioxMSphKSkpfXdoaWxlKEdhKGUpPk9hJiYtLWk+MCk7cmV0dXJuW3QvKC44NzA3KyhvPXIqcikqKG8qKG8qbypvKiguMDAzOTcxLS4wMDE1MjkqbyktLjAxMzc5MSktLjEzMTk3OSkpLHJdfSxpbC5pbnZlcnQ9WXMob3UpLG9sLmludmVydD1ZcyhmdW5jdGlvbih0KXtyZXR1cm4gMipWYSh0KX0pLGFsLmludmVydD1mdW5jdGlvbih0LG4pe3JldHVyblstbiwyKlZhKFFhKHQpKS1GYV19LHZsLnByb3RvdHlwZT1sbC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOnZsLGNvdW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWFjaEFmdGVyKHNsKX0sZWFjaDpmdW5jdGlvbih0KXt2YXIgbixlLHIsaSxvPXRoaXMsYT1bb107ZG97Zm9yKG49YS5yZXZlcnNlKCksYT1bXTtvPW4ucG9wKCk7KWlmKHQobyksZT1vLmNoaWxkcmVuKWZvcihyPTAsaT1lLmxlbmd0aDtyPGk7KytyKWEucHVzaChlW3JdKX13aGlsZShhLmxlbmd0aCk7cmV0dXJuIHRoaXN9LGVhY2hBZnRlcjpmdW5jdGlvbih0KXtmb3IodmFyIG4sZSxyLGk9dGhpcyxvPVtpXSxhPVtdO2k9by5wb3AoKTspaWYoYS5wdXNoKGkpLG49aS5jaGlsZHJlbilmb3IoZT0wLHI9bi5sZW5ndGg7ZTxyOysrZSlvLnB1c2gobltlXSk7Zm9yKDtpPWEucG9wKCk7KXQoaSk7cmV0dXJuIHRoaXN9LGVhY2hCZWZvcmU6ZnVuY3Rpb24odCl7Zm9yKHZhciBuLGUscj10aGlzLGk9W3JdO3I9aS5wb3AoKTspaWYodChyKSxuPXIuY2hpbGRyZW4pZm9yKGU9bi5sZW5ndGgtMTtlPj0wOy0tZSlpLnB1c2gobltlXSk7cmV0dXJuIHRoaXN9LHN1bTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5lYWNoQWZ0ZXIoZnVuY3Rpb24obil7Zm9yKHZhciBlPSt0KG4uZGF0YSl8fDAscj1uLmNoaWxkcmVuLGk9ciYmci5sZW5ndGg7LS1pPj0wOyllKz1yW2ldLnZhbHVlO24udmFsdWU9ZX0pfSxzb3J0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVhY2hCZWZvcmUoZnVuY3Rpb24obil7bi5jaGlsZHJlbiYmbi5jaGlsZHJlbi5zb3J0KHQpfSl9LHBhdGg6ZnVuY3Rpb24odCl7Zm9yKHZhciBuPXRoaXMsZT1mdW5jdGlvbih0LG4pe2lmKHQ9PT1uKXJldHVybiB0O3ZhciBlPXQuYW5jZXN0b3JzKCkscj1uLmFuY2VzdG9ycygpLGk9bnVsbDtmb3IodD1lLnBvcCgpLG49ci5wb3AoKTt0PT09bjspaT10LHQ9ZS5wb3AoKSxuPXIucG9wKCk7cmV0dXJuIGl9KG4sdCkscj1bbl07biE9PWU7KW49bi5wYXJlbnQsci5wdXNoKG4pO2Zvcih2YXIgaT1yLmxlbmd0aDt0IT09ZTspci5zcGxpY2UoaSwwLHQpLHQ9dC5wYXJlbnQ7cmV0dXJuIHJ9LGFuY2VzdG9yczpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLG49W3RdO3Q9dC5wYXJlbnQ7KW4ucHVzaCh0KTtyZXR1cm4gbn0sZGVzY2VuZGFudHM6ZnVuY3Rpb24oKXt2YXIgdD1bXTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKG4pe3QucHVzaChuKX0pLHR9LGxlYXZlczpmdW5jdGlvbigpe3ZhciB0PVtdO3JldHVybiB0aGlzLmVhY2hCZWZvcmUoZnVuY3Rpb24obil7bi5jaGlsZHJlbnx8dC5wdXNoKG4pfSksdH0sbGlua3M6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLG49W107cmV0dXJuIHQuZWFjaChmdW5jdGlvbihlKXtlIT09dCYmbi5wdXNoKHtzb3VyY2U6ZS5wYXJlbnQsdGFyZ2V0OmV9KX0pLG59LGNvcHk6ZnVuY3Rpb24oKXtyZXR1cm4gbGwodGhpcykuZWFjaEJlZm9yZShkbCl9fTt2YXIgZ2w9QXJyYXkucHJvdG90eXBlLnNsaWNlO2Z1bmN0aW9uIHlsKHQpe2Zvcih2YXIgbixlLHI9MCxpPSh0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgbixlLHI9dC5sZW5ndGg7cjspZT1NYXRoLnJhbmRvbSgpKnItLXwwLG49dFtyXSx0W3JdPXRbZV0sdFtlXT1uO3JldHVybiB0fShnbC5jYWxsKHQpKSkubGVuZ3RoLG89W107cjxpOyluPXRbcl0sZSYmbWwoZSxuKT8rK3I6KGU9d2wobz1fbChvLG4pKSxyPTApO3JldHVybiBlfWZ1bmN0aW9uIF9sKHQsbil7dmFyIGUscjtpZih4bChuLHQpKXJldHVybltuXTtmb3IoZT0wO2U8dC5sZW5ndGg7KytlKWlmKGJsKG4sdFtlXSkmJnhsKE1sKHRbZV0sbiksdCkpcmV0dXJuW3RbZV0sbl07Zm9yKGU9MDtlPHQubGVuZ3RoLTE7KytlKWZvcihyPWUrMTtyPHQubGVuZ3RoOysrcilpZihibChNbCh0W2VdLHRbcl0pLG4pJiZibChNbCh0W2VdLG4pLHRbcl0pJiZibChNbCh0W3JdLG4pLHRbZV0pJiZ4bChObCh0W2VdLHRbcl0sbiksdCkpcmV0dXJuW3RbZV0sdFtyXSxuXTt0aHJvdyBuZXcgRXJyb3J9ZnVuY3Rpb24gYmwodCxuKXt2YXIgZT10LnItbi5yLHI9bi54LXQueCxpPW4ueS10Lnk7cmV0dXJuIGU8MHx8ZSplPHIqcitpKml9ZnVuY3Rpb24gbWwodCxuKXt2YXIgZT10LnItbi5yKzFlLTYscj1uLngtdC54LGk9bi55LXQueTtyZXR1cm4gZT4wJiZlKmU+cipyK2kqaX1mdW5jdGlvbiB4bCh0LG4pe2Zvcih2YXIgZT0wO2U8bi5sZW5ndGg7KytlKWlmKCFtbCh0LG5bZV0pKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIHdsKHQpe3N3aXRjaCh0Lmxlbmd0aCl7Y2FzZSAxOnJldHVybnt4OihuPXRbMF0pLngseTpuLnkscjpuLnJ9O2Nhc2UgMjpyZXR1cm4gTWwodFswXSx0WzFdKTtjYXNlIDM6cmV0dXJuIE5sKHRbMF0sdFsxXSx0WzJdKX12YXIgbn1mdW5jdGlvbiBNbCh0LG4pe3ZhciBlPXQueCxyPXQueSxpPXQucixvPW4ueCxhPW4ueSx1PW4ucixjPW8tZSxmPWEtcixzPXUtaSxsPU1hdGguc3FydChjKmMrZipmKTtyZXR1cm57eDooZStvK2MvbCpzKS8yLHk6KHIrYStmL2wqcykvMixyOihsK2krdSkvMn19ZnVuY3Rpb24gTmwodCxuLGUpe3ZhciByPXQueCxpPXQueSxvPXQucixhPW4ueCx1PW4ueSxjPW4ucixmPWUueCxzPWUueSxsPWUucixoPXItYSxkPXItZixwPWktdSx2PWktcyxnPWMtbyx5PWwtbyxfPXIqcitpKmktbypvLGI9Xy1hKmEtdSp1K2MqYyxtPV8tZipmLXMqcytsKmwseD1kKnAtaCp2LHc9KHAqbS12KmIpLygyKngpLXIsTT0odipnLXAqeSkveCxOPShkKmItaCptKS8oMip4KS1pLEE9KGgqeS1kKmcpL3gsVD1NKk0rQSpBLTEsUz0yKihvK3cqTStOKkEpLGs9dyp3K04qTi1vKm8sRT0tKFQ/KFMrTWF0aC5zcXJ0KFMqUy00KlQqaykpLygyKlQpOmsvUyk7cmV0dXJue3g6cit3K00qRSx5OmkrTitBKkUscjpFfX1mdW5jdGlvbiBBbCh0LG4sZSl7dmFyIHIsaSxvLGEsdT10Lngtbi54LGM9dC55LW4ueSxmPXUqdStjKmM7Zj8oaT1uLnIrZS5yLGkqPWksYT10LnIrZS5yLGk+KGEqPWEpPyhyPShmK2EtaSkvKDIqZiksbz1NYXRoLnNxcnQoTWF0aC5tYXgoMCxhL2YtcipyKSksZS54PXQueC1yKnUtbypjLGUueT10LnktcipjK28qdSk6KHI9KGYraS1hKS8oMipmKSxvPU1hdGguc3FydChNYXRoLm1heCgwLGkvZi1yKnIpKSxlLng9bi54K3IqdS1vKmMsZS55PW4ueStyKmMrbyp1KSk6KGUueD1uLngrZS5yLGUueT1uLnkpfWZ1bmN0aW9uIFRsKHQsbil7dmFyIGU9dC5yK24uci0xZS02LHI9bi54LXQueCxpPW4ueS10Lnk7cmV0dXJuIGU+MCYmZSplPnIqcitpKml9ZnVuY3Rpb24gU2wodCl7dmFyIG49dC5fLGU9dC5uZXh0Ll8scj1uLnIrZS5yLGk9KG4ueCplLnIrZS54Km4ucikvcixvPShuLnkqZS5yK2UueSpuLnIpL3I7cmV0dXJuIGkqaStvKm99ZnVuY3Rpb24ga2wodCl7dGhpcy5fPXQsdGhpcy5uZXh0PW51bGwsdGhpcy5wcmV2aW91cz1udWxsfWZ1bmN0aW9uIEVsKHQpe2lmKCEoaT10Lmxlbmd0aCkpcmV0dXJuIDA7dmFyIG4sZSxyLGksbyxhLHUsYyxmLHMsbDtpZigobj10WzBdKS54PTAsbi55PTAsIShpPjEpKXJldHVybiBuLnI7aWYoZT10WzFdLG4ueD0tZS5yLGUueD1uLnIsZS55PTAsIShpPjIpKXJldHVybiBuLnIrZS5yO0FsKGUsbixyPXRbMl0pLG49bmV3IGtsKG4pLGU9bmV3IGtsKGUpLHI9bmV3IGtsKHIpLG4ubmV4dD1yLnByZXZpb3VzPWUsZS5uZXh0PW4ucHJldmlvdXM9cixyLm5leHQ9ZS5wcmV2aW91cz1uO3Q6Zm9yKHU9Mzt1PGk7Kyt1KXtBbChuLl8sZS5fLHI9dFt1XSkscj1uZXcga2wociksYz1lLm5leHQsZj1uLnByZXZpb3VzLHM9ZS5fLnIsbD1uLl8ucjtkb3tpZihzPD1sKXtpZihUbChjLl8sci5fKSl7ZT1jLG4ubmV4dD1lLGUucHJldmlvdXM9biwtLXU7Y29udGludWUgdH1zKz1jLl8ucixjPWMubmV4dH1lbHNle2lmKFRsKGYuXyxyLl8pKXsobj1mKS5uZXh0PWUsZS5wcmV2aW91cz1uLC0tdTtjb250aW51ZSB0fWwrPWYuXy5yLGY9Zi5wcmV2aW91c319d2hpbGUoYyE9PWYubmV4dCk7Zm9yKHIucHJldmlvdXM9bixyLm5leHQ9ZSxuLm5leHQ9ZS5wcmV2aW91cz1lPXIsbz1TbChuKTsocj1yLm5leHQpIT09ZTspKGE9U2wocikpPG8mJihuPXIsbz1hKTtlPW4ubmV4dH1mb3Iobj1bZS5fXSxyPWU7KHI9ci5uZXh0KSE9PWU7KW4ucHVzaChyLl8pO2ZvcihyPXlsKG4pLHU9MDt1PGk7Kyt1KShuPXRbdV0pLngtPXIueCxuLnktPXIueTtyZXR1cm4gci5yfWZ1bmN0aW9uIENsKHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0KXRocm93IG5ldyBFcnJvcjtyZXR1cm4gdH1mdW5jdGlvbiBQbCgpe3JldHVybiAwfWZ1bmN0aW9uIHpsKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0fX1mdW5jdGlvbiBSbCh0KXtyZXR1cm4gTWF0aC5zcXJ0KHQudmFsdWUpfWZ1bmN0aW9uIERsKHQpe3JldHVybiBmdW5jdGlvbihuKXtuLmNoaWxkcmVufHwobi5yPU1hdGgubWF4KDAsK3Qobil8fDApKX19ZnVuY3Rpb24gcWwodCxuKXtyZXR1cm4gZnVuY3Rpb24oZSl7aWYocj1lLmNoaWxkcmVuKXt2YXIgcixpLG8sYT1yLmxlbmd0aCx1PXQoZSkqbnx8MDtpZih1KWZvcihpPTA7aTxhOysraSlyW2ldLnIrPXU7aWYobz1FbChyKSx1KWZvcihpPTA7aTxhOysraSlyW2ldLnItPXU7ZS5yPW8rdX19fWZ1bmN0aW9uIExsKHQpe3JldHVybiBmdW5jdGlvbihuKXt2YXIgZT1uLnBhcmVudDtuLnIqPXQsZSYmKG4ueD1lLngrdCpuLngsbi55PWUueSt0Km4ueSl9fWZ1bmN0aW9uIFVsKHQpe3QueDA9TWF0aC5yb3VuZCh0LngwKSx0LnkwPU1hdGgucm91bmQodC55MCksdC54MT1NYXRoLnJvdW5kKHQueDEpLHQueTE9TWF0aC5yb3VuZCh0LnkxKX1mdW5jdGlvbiBPbCh0LG4sZSxyLGkpe2Zvcih2YXIgbyxhPXQuY2hpbGRyZW4sdT0tMSxjPWEubGVuZ3RoLGY9dC52YWx1ZSYmKHItbikvdC52YWx1ZTsrK3U8YzspKG89YVt1XSkueTA9ZSxvLnkxPWksby54MD1uLG8ueDE9bis9by52YWx1ZSpmfXZhciBCbD0iJCIsWWw9e2RlcHRoOi0xfSxGbD17fTtmdW5jdGlvbiBJbCh0KXtyZXR1cm4gdC5pZH1mdW5jdGlvbiBqbCh0KXtyZXR1cm4gdC5wYXJlbnRJZH1mdW5jdGlvbiBIbCh0LG4pe3JldHVybiB0LnBhcmVudD09PW4ucGFyZW50PzE6Mn1mdW5jdGlvbiBYbCh0KXt2YXIgbj10LmNoaWxkcmVuO3JldHVybiBuP25bMF06dC50fWZ1bmN0aW9uIEdsKHQpe3ZhciBuPXQuY2hpbGRyZW47cmV0dXJuIG4/bltuLmxlbmd0aC0xXTp0LnR9ZnVuY3Rpb24gVmwodCxuLGUpe3ZhciByPWUvKG4uaS10LmkpO24uYy09cixuLnMrPWUsdC5jKz1yLG4ueis9ZSxuLm0rPWV9ZnVuY3Rpb24gJGwodCxuLGUpe3JldHVybiB0LmEucGFyZW50PT09bi5wYXJlbnQ/dC5hOmV9ZnVuY3Rpb24gV2wodCxuKXt0aGlzLl89dCx0aGlzLnBhcmVudD1udWxsLHRoaXMuY2hpbGRyZW49bnVsbCx0aGlzLkE9bnVsbCx0aGlzLmE9dGhpcyx0aGlzLno9MCx0aGlzLm09MCx0aGlzLmM9MCx0aGlzLnM9MCx0aGlzLnQ9bnVsbCx0aGlzLmk9bn1mdW5jdGlvbiBabCh0LG4sZSxyLGkpe2Zvcih2YXIgbyxhPXQuY2hpbGRyZW4sdT0tMSxjPWEubGVuZ3RoLGY9dC52YWx1ZSYmKGktZSkvdC52YWx1ZTsrK3U8YzspKG89YVt1XSkueDA9bixvLngxPXIsby55MD1lLG8ueTE9ZSs9by52YWx1ZSpmfVdsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHZsLnByb3RvdHlwZSk7dmFyIFFsPSgxK01hdGguc3FydCg1KSkvMjtmdW5jdGlvbiBKbCh0LG4sZSxyLGksbyl7Zm9yKHZhciBhLHUsYyxmLHMsbCxoLGQscCx2LGcseT1bXSxfPW4uY2hpbGRyZW4sYj0wLG09MCx4PV8ubGVuZ3RoLHc9bi52YWx1ZTtiPHg7KXtjPWktZSxmPW8tcjtkb3tzPV9bbSsrXS52YWx1ZX13aGlsZSghcyYmbTx4KTtmb3IobD1oPXMsZz1zKnMqKHY9TWF0aC5tYXgoZi9jLGMvZikvKHcqdCkpLHA9TWF0aC5tYXgoaC9nLGcvbCk7bTx4OysrbSl7aWYocys9dT1fW21dLnZhbHVlLHU8bCYmKGw9dSksdT5oJiYoaD11KSxnPXMqcyp2LChkPU1hdGgubWF4KGgvZyxnL2wpKT5wKXtzLT11O2JyZWFrfXA9ZH15LnB1c2goYT17dmFsdWU6cyxkaWNlOmM8ZixjaGlsZHJlbjpfLnNsaWNlKGIsbSl9KSxhLmRpY2U/T2woYSxlLHIsaSx3P3IrPWYqcy93Om8pOlpsKGEsZSxyLHc/ZSs9YypzL3c6aSxvKSx3LT1zLGI9bX1yZXR1cm4geX12YXIgS2w9ZnVuY3Rpb24gdChuKXtmdW5jdGlvbiBlKHQsZSxyLGksbyl7Smwobix0LGUscixpLG8pfXJldHVybiBlLnJhdGlvPWZ1bmN0aW9uKG4pe3JldHVybiB0KChuPStuKT4xP246MSl9LGV9KFFsKTt2YXIgdGg9ZnVuY3Rpb24gdChuKXtmdW5jdGlvbiBlKHQsZSxyLGksbyl7aWYoKGE9dC5fc3F1YXJpZnkpJiZhLnJhdGlvPT09bilmb3IodmFyIGEsdSxjLGYscyxsPS0xLGg9YS5sZW5ndGgsZD10LnZhbHVlOysrbDxoOyl7Zm9yKGM9KHU9YVtsXSkuY2hpbGRyZW4sZj11LnZhbHVlPTAscz1jLmxlbmd0aDtmPHM7KytmKXUudmFsdWUrPWNbZl0udmFsdWU7dS5kaWNlP09sKHUsZSxyLGkscis9KG8tcikqdS52YWx1ZS9kKTpabCh1LGUscixlKz0oaS1lKSp1LnZhbHVlL2QsbyksZC09dS52YWx1ZX1lbHNlIHQuX3NxdWFyaWZ5PWE9Smwobix0LGUscixpLG8pLGEucmF0aW89bn1yZXR1cm4gZS5yYXRpbz1mdW5jdGlvbihuKXtyZXR1cm4gdCgobj0rbik+MT9uOjEpfSxlfShRbCk7ZnVuY3Rpb24gbmgodCxuKXtyZXR1cm4gdFswXS1uWzBdfHx0WzFdLW5bMV19ZnVuY3Rpb24gZWgodCl7Zm9yKHZhciBuLGUscixpPXQubGVuZ3RoLG89WzAsMV0sYT0yLHU9Mjt1PGk7Kyt1KXtmb3IoO2E+MSYmKG49dFtvW2EtMl1dLGU9dFtvW2EtMV1dLHI9dFt1XSwoZVswXS1uWzBdKSooclsxXS1uWzFdKS0oZVsxXS1uWzFdKSooclswXS1uWzBdKTw9MCk7KS0tYTtvW2ErK109dX1yZXR1cm4gby5zbGljZSgwLGEpfWZ1bmN0aW9uIHJoKCl7cmV0dXJuIE1hdGgucmFuZG9tKCl9dmFyIGloPWZ1bmN0aW9uIHQobil7ZnVuY3Rpb24gZSh0LGUpe3JldHVybiB0PW51bGw9PXQ/MDordCxlPW51bGw9PWU/MTorZSwxPT09YXJndW1lbnRzLmxlbmd0aD8oZT10LHQ9MCk6ZS09dCxmdW5jdGlvbigpe3JldHVybiBuKCkqZSt0fX1yZXR1cm4gZS5zb3VyY2U9dCxlfShyaCksb2g9ZnVuY3Rpb24gdChuKXtmdW5jdGlvbiBlKHQsZSl7dmFyIHIsaTtyZXR1cm4gdD1udWxsPT10PzA6K3QsZT1udWxsPT1lPzE6K2UsZnVuY3Rpb24oKXt2YXIgbztpZihudWxsIT1yKW89cixyPW51bGw7ZWxzZSBkb3tyPTIqbigpLTEsbz0yKm4oKS0xLGk9cipyK28qb313aGlsZSghaXx8aT4xKTtyZXR1cm4gdCtlKm8qTWF0aC5zcXJ0KC0yKk1hdGgubG9nKGkpL2kpfX1yZXR1cm4gZS5zb3VyY2U9dCxlfShyaCksYWg9ZnVuY3Rpb24gdChuKXtmdW5jdGlvbiBlKCl7dmFyIHQ9b2guc291cmNlKG4pLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5leHAodCgpKX19cmV0dXJuIGUuc291cmNlPXQsZX0ocmgpLHVoPWZ1bmN0aW9uIHQobil7ZnVuY3Rpb24gZSh0KXtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIGU9MCxyPTA7cjx0OysrcillKz1uKCk7cmV0dXJuIGV9fXJldHVybiBlLnNvdXJjZT10LGV9KHJoKSxjaD1mdW5jdGlvbiB0KG4pe2Z1bmN0aW9uIGUodCl7dmFyIGU9dWguc291cmNlKG4pKHQpO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlKCkvdH19cmV0dXJuIGUuc291cmNlPXQsZX0ocmgpLGZoPWZ1bmN0aW9uIHQobil7ZnVuY3Rpb24gZSh0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4tTWF0aC5sb2coMS1uKCkpL3R9fXJldHVybiBlLnNvdXJjZT10LGV9KHJoKTtmdW5jdGlvbiBzaCh0LG4pe3N3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDA6YnJlYWs7Y2FzZSAxOnRoaXMucmFuZ2UodCk7YnJlYWs7ZGVmYXVsdDp0aGlzLnJhbmdlKG4pLmRvbWFpbih0KX1yZXR1cm4gdGhpc31mdW5jdGlvbiBsaCh0LG4pe3N3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDA6YnJlYWs7Y2FzZSAxOnRoaXMuaW50ZXJwb2xhdG9yKHQpO2JyZWFrO2RlZmF1bHQ6dGhpcy5pbnRlcnBvbGF0b3IobikuZG9tYWluKHQpfXJldHVybiB0aGlzfXZhciBoaD1BcnJheS5wcm90b3R5cGUsZGg9aGgubWFwLHBoPWhoLnNsaWNlLHZoPXtuYW1lOiJpbXBsaWNpdCJ9O2Z1bmN0aW9uIGdoKCl7dmFyIHQ9UWkoKSxuPVtdLGU9W10scj12aDtmdW5jdGlvbiBpKGkpe3ZhciBvPWkrIiIsYT10LmdldChvKTtpZighYSl7aWYociE9PXZoKXJldHVybiByO3Quc2V0KG8sYT1uLnB1c2goaSkpfXJldHVybiBlWyhhLTEpJWUubGVuZ3RoXX1yZXR1cm4gaS5kb21haW49ZnVuY3Rpb24oZSl7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIG4uc2xpY2UoKTtuPVtdLHQ9UWkoKTtmb3IodmFyIHIsbyxhPS0xLHU9ZS5sZW5ndGg7KythPHU7KXQuaGFzKG89KHI9ZVthXSkrIiIpfHx0LnNldChvLG4ucHVzaChyKSk7cmV0dXJuIGl9LGkucmFuZ2U9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGU9cGguY2FsbCh0KSxpKTplLnNsaWNlKCl9LGkudW5rbm93bj1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocj10LGkpOnJ9LGkuY29weT1mdW5jdGlvbigpe3JldHVybiBnaChuLGUpLnVua25vd24ocil9LHNoLmFwcGx5KGksYXJndW1lbnRzKSxpfWZ1bmN0aW9uIHloKCl7dmFyIHQsbixlPWdoKCkudW5rbm93bih2b2lkIDApLHI9ZS5kb21haW4saT1lLnJhbmdlLG89WzAsMV0sYT0hMSx1PTAsYz0wLGY9LjU7ZnVuY3Rpb24gcygpe3ZhciBlPXIoKS5sZW5ndGgscz1vWzFdPG9bMF0sbD1vW3MtMF0saD1vWzEtc107dD0oaC1sKS9NYXRoLm1heCgxLGUtdSsyKmMpLGEmJih0PU1hdGguZmxvb3IodCkpLGwrPShoLWwtdCooZS11KSkqZixuPXQqKDEtdSksYSYmKGw9TWF0aC5yb3VuZChsKSxuPU1hdGgucm91bmQobikpO3ZhciBkPWcoZSkubWFwKGZ1bmN0aW9uKG4pe3JldHVybiBsK3Qqbn0pO3JldHVybiBpKHM/ZC5yZXZlcnNlKCk6ZCl9cmV0dXJuIGRlbGV0ZSBlLnVua25vd24sZS5kb21haW49ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHIodCkscygpKTpyKCl9LGUucmFuZ2U9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG89Wyt0WzBdLCt0WzFdXSxzKCkpOm8uc2xpY2UoKX0sZS5yYW5nZVJvdW5kPWZ1bmN0aW9uKHQpe3JldHVybiBvPVsrdFswXSwrdFsxXV0sYT0hMCxzKCl9LGUuYmFuZHdpZHRoPWZ1bmN0aW9uKCl7cmV0dXJuIG59LGUuc3RlcD1mdW5jdGlvbigpe3JldHVybiB0fSxlLnJvdW5kPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhhPSEhdCxzKCkpOmF9LGUucGFkZGluZz1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odT1NYXRoLm1pbigxLGM9K3QpLHMoKSk6dX0sZS5wYWRkaW5nSW5uZXI9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHU9TWF0aC5taW4oMSx0KSxzKCkpOnV9LGUucGFkZGluZ091dGVyPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhjPSt0LHMoKSk6Y30sZS5hbGlnbj1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZj1NYXRoLm1heCgwLE1hdGgubWluKDEsdCkpLHMoKSk6Zn0sZS5jb3B5PWZ1bmN0aW9uKCl7cmV0dXJuIHloKHIoKSxvKS5yb3VuZChhKS5wYWRkaW5nSW5uZXIodSkucGFkZGluZ091dGVyKGMpLmFsaWduKGYpfSxzaC5hcHBseShzKCksYXJndW1lbnRzKX1mdW5jdGlvbiBfaCh0KXtyZXR1cm4rdH12YXIgYmg9WzAsMV07ZnVuY3Rpb24gbWgodCl7cmV0dXJuIHR9ZnVuY3Rpb24geGgodCxuKXtyZXR1cm4obi09dD0rdCk/ZnVuY3Rpb24oZSl7cmV0dXJuKGUtdCkvbn06KGU9aXNOYU4obik/TmFOOi41LGZ1bmN0aW9uKCl7cmV0dXJuIGV9KTt2YXIgZX1mdW5jdGlvbiB3aCh0KXt2YXIgbixlPXRbMF0scj10W3QubGVuZ3RoLTFdO3JldHVybiBlPnImJihuPWUsZT1yLHI9biksZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgubWF4KGUsTWF0aC5taW4ocix0KSl9fWZ1bmN0aW9uIE1oKHQsbixlKXt2YXIgcj10WzBdLGk9dFsxXSxvPW5bMF0sYT1uWzFdO3JldHVybiBpPHI/KHI9eGgoaSxyKSxvPWUoYSxvKSk6KHI9eGgocixpKSxvPWUobyxhKSksZnVuY3Rpb24odCl7cmV0dXJuIG8ocih0KSl9fWZ1bmN0aW9uIE5oKHQsbixlKXt2YXIgcj1NYXRoLm1pbih0Lmxlbmd0aCxuLmxlbmd0aCktMSxvPW5ldyBBcnJheShyKSxhPW5ldyBBcnJheShyKSx1PS0xO2Zvcih0W3JdPHRbMF0mJih0PXQuc2xpY2UoKS5yZXZlcnNlKCksbj1uLnNsaWNlKCkucmV2ZXJzZSgpKTsrK3U8cjspb1t1XT14aCh0W3VdLHRbdSsxXSksYVt1XT1lKG5bdV0sblt1KzFdKTtyZXR1cm4gZnVuY3Rpb24obil7dmFyIGU9aSh0LG4sMSxyKS0xO3JldHVybiBhW2VdKG9bZV0obikpfX1mdW5jdGlvbiBBaCh0LG4pe3JldHVybiBuLmRvbWFpbih0LmRvbWFpbigpKS5yYW5nZSh0LnJhbmdlKCkpLmludGVycG9sYXRlKHQuaW50ZXJwb2xhdGUoKSkuY2xhbXAodC5jbGFtcCgpKS51bmtub3duKHQudW5rbm93bigpKX1mdW5jdGlvbiBUaCgpe3ZhciB0LG4sZSxyLGksbyxhPWJoLHU9YmgsYz15ZSxmPW1oO2Z1bmN0aW9uIHMoKXtyZXR1cm4gcj1NYXRoLm1pbihhLmxlbmd0aCx1Lmxlbmd0aCk+Mj9OaDpNaCxpPW89bnVsbCxsfWZ1bmN0aW9uIGwobil7cmV0dXJuIGlzTmFOKG49K24pP2U6KGl8fChpPXIoYS5tYXAodCksdSxjKSkpKHQoZihuKSkpfXJldHVybiBsLmludmVydD1mdW5jdGlvbihlKXtyZXR1cm4gZihuKChvfHwobz1yKHUsYS5tYXAodCksaGUpKSkoZSkpKX0sbC5kb21haW49ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGE9ZGguY2FsbCh0LF9oKSxmPT09bWh8fChmPXdoKGEpKSxzKCkpOmEuc2xpY2UoKX0sbC5yYW5nZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odT1waC5jYWxsKHQpLHMoKSk6dS5zbGljZSgpfSxsLnJhbmdlUm91bmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHU9cGguY2FsbCh0KSxjPV9lLHMoKX0sbC5jbGFtcD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZj10P3doKGEpOm1oLGwpOmYhPT1taH0sbC5pbnRlcnBvbGF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oYz10LHMoKSk6Y30sbC51bmtub3duPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhlPXQsbCk6ZX0sZnVuY3Rpb24oZSxyKXtyZXR1cm4gdD1lLG49cixzKCl9fWZ1bmN0aW9uIFNoKHQsbil7cmV0dXJuIFRoKCkodCxuKX1mdW5jdGlvbiBraChuLGUscixpKXt2YXIgbyxhPXcobixlLHIpO3N3aXRjaCgoaT13YShudWxsPT1pPyIsZiI6aSkpLnR5cGUpe2Nhc2UicyI6dmFyIHU9TWF0aC5tYXgoTWF0aC5hYnMobiksTWF0aC5hYnMoZSkpO3JldHVybiBudWxsIT1pLnByZWNpc2lvbnx8aXNOYU4obz16YShhLHUpKXx8KGkucHJlY2lzaW9uPW8pLHQuZm9ybWF0UHJlZml4KGksdSk7Y2FzZSIiOmNhc2UiZSI6Y2FzZSJnIjpjYXNlInAiOmNhc2UiciI6bnVsbCE9aS5wcmVjaXNpb258fGlzTmFOKG89UmEoYSxNYXRoLm1heChNYXRoLmFicyhuKSxNYXRoLmFicyhlKSkpKXx8KGkucHJlY2lzaW9uPW8tKCJlIj09PWkudHlwZSkpO2JyZWFrO2Nhc2UiZiI6Y2FzZSIlIjpudWxsIT1pLnByZWNpc2lvbnx8aXNOYU4obz1QYShhKSl8fChpLnByZWNpc2lvbj1vLTIqKCIlIj09PWkudHlwZSkpfXJldHVybiB0LmZvcm1hdChpKX1mdW5jdGlvbiBFaCh0KXt2YXIgbj10LmRvbWFpbjtyZXR1cm4gdC50aWNrcz1mdW5jdGlvbih0KXt2YXIgZT1uKCk7cmV0dXJuIG0oZVswXSxlW2UubGVuZ3RoLTFdLG51bGw9PXQ/MTA6dCl9LHQudGlja0Zvcm1hdD1mdW5jdGlvbih0LGUpe3ZhciByPW4oKTtyZXR1cm4ga2goclswXSxyW3IubGVuZ3RoLTFdLG51bGw9PXQ/MTA6dCxlKX0sdC5uaWNlPWZ1bmN0aW9uKGUpe251bGw9PWUmJihlPTEwKTt2YXIgcixpPW4oKSxvPTAsYT1pLmxlbmd0aC0xLHU9aVtvXSxjPWlbYV07cmV0dXJuIGM8dSYmKHI9dSx1PWMsYz1yLHI9byxvPWEsYT1yKSwocj14KHUsYyxlKSk+MD9yPXgodT1NYXRoLmZsb29yKHUvcikqcixjPU1hdGguY2VpbChjL3IpKnIsZSk6cjwwJiYocj14KHU9TWF0aC5jZWlsKHUqcikvcixjPU1hdGguZmxvb3IoYypyKS9yLGUpKSxyPjA/KGlbb109TWF0aC5mbG9vcih1L3IpKnIsaVthXT1NYXRoLmNlaWwoYy9yKSpyLG4oaSkpOnI8MCYmKGlbb109TWF0aC5jZWlsKHUqcikvcixpW2FdPU1hdGguZmxvb3IoYypyKS9yLG4oaSkpLHR9LHR9ZnVuY3Rpb24gQ2godCxuKXt2YXIgZSxyPTAsaT0odD10LnNsaWNlKCkpLmxlbmd0aC0xLG89dFtyXSxhPXRbaV07cmV0dXJuIGE8byYmKGU9cixyPWksaT1lLGU9byxvPWEsYT1lKSx0W3JdPW4uZmxvb3IobyksdFtpXT1uLmNlaWwoYSksdH1mdW5jdGlvbiBQaCh0KXtyZXR1cm4gTWF0aC5sb2codCl9ZnVuY3Rpb24gemgodCl7cmV0dXJuIE1hdGguZXhwKHQpfWZ1bmN0aW9uIFJoKHQpe3JldHVybi1NYXRoLmxvZygtdCl9ZnVuY3Rpb24gRGgodCl7cmV0dXJuLU1hdGguZXhwKC10KX1mdW5jdGlvbiBxaCh0KXtyZXR1cm4gaXNGaW5pdGUodCk/KygiMWUiK3QpOnQ8MD8wOnR9ZnVuY3Rpb24gTGgodCl7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybi10KC1uKX19ZnVuY3Rpb24gVWgobil7dmFyIGUscixpPW4oUGgsemgpLG89aS5kb21haW4sYT0xMDtmdW5jdGlvbiB1KCl7cmV0dXJuIGU9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1NYXRoLkU/TWF0aC5sb2c6MTA9PT10JiZNYXRoLmxvZzEwfHwyPT09dCYmTWF0aC5sb2cyfHwodD1NYXRoLmxvZyh0KSxmdW5jdGlvbihuKXtyZXR1cm4gTWF0aC5sb2cobikvdH0pfShhKSxyPWZ1bmN0aW9uKHQpe3JldHVybiAxMD09PXQ/cWg6dD09PU1hdGguRT9NYXRoLmV4cDpmdW5jdGlvbihuKXtyZXR1cm4gTWF0aC5wb3codCxuKX19KGEpLG8oKVswXTwwPyhlPUxoKGUpLHI9TGgociksbihSaCxEaCkpOm4oUGgsemgpLGl9cmV0dXJuIGkuYmFzZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oYT0rdCx1KCkpOmF9LGkuZG9tYWluPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhvKHQpLHUoKSk6bygpfSxpLnRpY2tzPWZ1bmN0aW9uKHQpe3ZhciBuLGk9bygpLHU9aVswXSxjPWlbaS5sZW5ndGgtMV07KG49Yzx1KSYmKGg9dSx1PWMsYz1oKTt2YXIgZixzLGwsaD1lKHUpLGQ9ZShjKSxwPW51bGw9PXQ/MTA6K3Qsdj1bXTtpZighKGElMSkmJmQtaDxwKXtpZihoPU1hdGgucm91bmQoaCktMSxkPU1hdGgucm91bmQoZCkrMSx1PjApe2Zvcig7aDxkOysraClmb3Iocz0xLGY9cihoKTtzPGE7KytzKWlmKCEoKGw9ZipzKTx1KSl7aWYobD5jKWJyZWFrO3YucHVzaChsKX19ZWxzZSBmb3IoO2g8ZDsrK2gpZm9yKHM9YS0xLGY9cihoKTtzPj0xOy0tcylpZighKChsPWYqcyk8dSkpe2lmKGw+YylicmVhazt2LnB1c2gobCl9fWVsc2Ugdj1tKGgsZCxNYXRoLm1pbihkLWgscCkpLm1hcChyKTtyZXR1cm4gbj92LnJldmVyc2UoKTp2fSxpLnRpY2tGb3JtYXQ9ZnVuY3Rpb24obixvKXtpZihudWxsPT1vJiYobz0xMD09PWE/Ii4wZSI6IiwiKSwiZnVuY3Rpb24iIT10eXBlb2YgbyYmKG89dC5mb3JtYXQobykpLG49PT0xLzApcmV0dXJuIG87bnVsbD09biYmKG49MTApO3ZhciB1PU1hdGgubWF4KDEsYSpuL2kudGlja3MoKS5sZW5ndGgpO3JldHVybiBmdW5jdGlvbih0KXt2YXIgbj10L3IoTWF0aC5yb3VuZChlKHQpKSk7cmV0dXJuIG4qYTxhLS41JiYobio9YSksbjw9dT9vKHQpOiIifX0saS5uaWNlPWZ1bmN0aW9uKCl7cmV0dXJuIG8oQ2gobygpLHtmbG9vcjpmdW5jdGlvbih0KXtyZXR1cm4gcihNYXRoLmZsb29yKGUodCkpKX0sY2VpbDpmdW5jdGlvbih0KXtyZXR1cm4gcihNYXRoLmNlaWwoZSh0KSkpfX0pKX0saX1mdW5jdGlvbiBPaCh0KXtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIE1hdGguc2lnbihuKSpNYXRoLmxvZzFwKE1hdGguYWJzKG4vdCkpfX1mdW5jdGlvbiBCaCh0KXtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIE1hdGguc2lnbihuKSpNYXRoLmV4cG0xKE1hdGguYWJzKG4pKSp0fX1mdW5jdGlvbiBZaCh0KXt2YXIgbj0xLGU9dChPaChuKSxCaChuKSk7cmV0dXJuIGUuY29uc3RhbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/dChPaChuPStlKSxCaChuKSk6bn0sRWgoZSl9ZnVuY3Rpb24gRmgodCl7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiBuPDA/LU1hdGgucG93KC1uLHQpOk1hdGgucG93KG4sdCl9fWZ1bmN0aW9uIEloKHQpe3JldHVybiB0PDA/LU1hdGguc3FydCgtdCk6TWF0aC5zcXJ0KHQpfWZ1bmN0aW9uIGpoKHQpe3JldHVybiB0PDA/LXQqdDp0KnR9ZnVuY3Rpb24gSGgodCl7dmFyIG49dChtaCxtaCksZT0xO3JldHVybiBuLmV4cG9uZW50PWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPzE9PT0oZT0rbik/dChtaCxtaCk6LjU9PT1lP3QoSWgsamgpOnQoRmgoZSksRmgoMS9lKSk6ZX0sRWgobil9ZnVuY3Rpb24gWGgoKXt2YXIgdD1IaChUaCgpKTtyZXR1cm4gdC5jb3B5PWZ1bmN0aW9uKCl7cmV0dXJuIEFoKHQsWGgoKSkuZXhwb25lbnQodC5leHBvbmVudCgpKX0sc2guYXBwbHkodCxhcmd1bWVudHMpLHR9dmFyIEdoPW5ldyBEYXRlLFZoPW5ldyBEYXRlO2Z1bmN0aW9uICRoKHQsbixlLHIpe2Z1bmN0aW9uIGkobil7cmV0dXJuIHQobj1uZXcgRGF0ZSgrbikpLG59cmV0dXJuIGkuZmxvb3I9aSxpLmNlaWw9ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZT1uZXcgRGF0ZShlLTEpKSxuKGUsMSksdChlKSxlfSxpLnJvdW5kPWZ1bmN0aW9uKHQpe3ZhciBuPWkodCksZT1pLmNlaWwodCk7cmV0dXJuIHQtbjxlLXQ/bjplfSxpLm9mZnNldD1mdW5jdGlvbih0LGUpe3JldHVybiBuKHQ9bmV3IERhdGUoK3QpLG51bGw9PWU/MTpNYXRoLmZsb29yKGUpKSx0fSxpLnJhbmdlPWZ1bmN0aW9uKGUscixvKXt2YXIgYSx1PVtdO2lmKGU9aS5jZWlsKGUpLG89bnVsbD09bz8xOk1hdGguZmxvb3IobyksIShlPHImJm8+MCkpcmV0dXJuIHU7ZG97dS5wdXNoKGE9bmV3IERhdGUoK2UpKSxuKGUsbyksdChlKX13aGlsZShhPGUmJmU8cik7cmV0dXJuIHV9LGkuZmlsdGVyPWZ1bmN0aW9uKGUpe3JldHVybiAkaChmdW5jdGlvbihuKXtpZihuPj1uKWZvcig7dChuKSwhZShuKTspbi5zZXRUaW1lKG4tMSl9LGZ1bmN0aW9uKHQscil7aWYodD49dClpZihyPDApZm9yKDsrK3I8PTA7KWZvcig7bih0LC0xKSwhZSh0KTspO2Vsc2UgZm9yKDstLXI+PTA7KWZvcig7bih0LDEpLCFlKHQpOyk7fSl9LGUmJihpLmNvdW50PWZ1bmN0aW9uKG4scil7cmV0dXJuIEdoLnNldFRpbWUoK24pLFZoLnNldFRpbWUoK3IpLHQoR2gpLHQoVmgpLE1hdGguZmxvb3IoZShHaCxWaCkpfSxpLmV2ZXJ5PWZ1bmN0aW9uKHQpe3JldHVybiB0PU1hdGguZmxvb3IodCksaXNGaW5pdGUodCkmJnQ+MD90PjE/aS5maWx0ZXIocj9mdW5jdGlvbihuKXtyZXR1cm4gcihuKSV0PT0wfTpmdW5jdGlvbihuKXtyZXR1cm4gaS5jb3VudCgwLG4pJXQ9PTB9KTppOm51bGx9KSxpfXZhciBXaD0kaChmdW5jdGlvbigpe30sZnVuY3Rpb24odCxuKXt0LnNldFRpbWUoK3Qrbil9LGZ1bmN0aW9uKHQsbil7cmV0dXJuIG4tdH0pO1doLmV2ZXJ5PWZ1bmN0aW9uKHQpe3JldHVybiB0PU1hdGguZmxvb3IodCksaXNGaW5pdGUodCkmJnQ+MD90PjE/JGgoZnVuY3Rpb24obil7bi5zZXRUaW1lKE1hdGguZmxvb3Iobi90KSp0KX0sZnVuY3Rpb24obixlKXtuLnNldFRpbWUoK24rZSp0KX0sZnVuY3Rpb24obixlKXtyZXR1cm4oZS1uKS90fSk6V2g6bnVsbH07dmFyIFpoPVdoLnJhbmdlLFFoPTZlNCxKaD02MDQ4ZTUsS2g9JGgoZnVuY3Rpb24odCl7dC5zZXRUaW1lKHQtdC5nZXRNaWxsaXNlY29uZHMoKSl9LGZ1bmN0aW9uKHQsbil7dC5zZXRUaW1lKCt0KzFlMypuKX0sZnVuY3Rpb24odCxuKXtyZXR1cm4obi10KS8xZTN9LGZ1bmN0aW9uKHQpe3JldHVybiB0LmdldFVUQ1NlY29uZHMoKX0pLHRkPUtoLnJhbmdlLG5kPSRoKGZ1bmN0aW9uKHQpe3Quc2V0VGltZSh0LXQuZ2V0TWlsbGlzZWNvbmRzKCktMWUzKnQuZ2V0U2Vjb25kcygpKX0sZnVuY3Rpb24odCxuKXt0LnNldFRpbWUoK3QrbipRaCl9LGZ1bmN0aW9uKHQsbil7cmV0dXJuKG4tdCkvUWh9LGZ1bmN0aW9uKHQpe3JldHVybiB0LmdldE1pbnV0ZXMoKX0pLGVkPW5kLnJhbmdlLHJkPSRoKGZ1bmN0aW9uKHQpe3Quc2V0VGltZSh0LXQuZ2V0TWlsbGlzZWNvbmRzKCktMWUzKnQuZ2V0U2Vjb25kcygpLXQuZ2V0TWludXRlcygpKlFoKX0sZnVuY3Rpb24odCxuKXt0LnNldFRpbWUoK3QrMzZlNSpuKX0sZnVuY3Rpb24odCxuKXtyZXR1cm4obi10KS8zNmU1fSxmdW5jdGlvbih0KXtyZXR1cm4gdC5nZXRIb3VycygpfSksaWQ9cmQucmFuZ2Usb2Q9JGgoZnVuY3Rpb24odCl7dC5zZXRIb3VycygwLDAsMCwwKX0sZnVuY3Rpb24odCxuKXt0LnNldERhdGUodC5nZXREYXRlKCkrbil9LGZ1bmN0aW9uKHQsbil7cmV0dXJuKG4tdC0obi5nZXRUaW1lem9uZU9mZnNldCgpLXQuZ2V0VGltZXpvbmVPZmZzZXQoKSkqUWgpLzg2NGU1fSxmdW5jdGlvbih0KXtyZXR1cm4gdC5nZXREYXRlKCktMX0pLGFkPW9kLnJhbmdlO2Z1bmN0aW9uIHVkKHQpe3JldHVybiAkaChmdW5jdGlvbihuKXtuLnNldERhdGUobi5nZXREYXRlKCktKG4uZ2V0RGF5KCkrNy10KSU3KSxuLnNldEhvdXJzKDAsMCwwLDApfSxmdW5jdGlvbih0LG4pe3Quc2V0RGF0ZSh0LmdldERhdGUoKSs3Km4pfSxmdW5jdGlvbih0LG4pe3JldHVybihuLXQtKG4uZ2V0VGltZXpvbmVPZmZzZXQoKS10LmdldFRpbWV6b25lT2Zmc2V0KCkpKlFoKS9KaH0pfXZhciBjZD11ZCgwKSxmZD11ZCgxKSxzZD11ZCgyKSxsZD11ZCgzKSxoZD11ZCg0KSxkZD11ZCg1KSxwZD11ZCg2KSx2ZD1jZC5yYW5nZSxnZD1mZC5yYW5nZSx5ZD1zZC5yYW5nZSxfZD1sZC5yYW5nZSxiZD1oZC5yYW5nZSxtZD1kZC5yYW5nZSx4ZD1wZC5yYW5nZSx3ZD0kaChmdW5jdGlvbih0KXt0LnNldERhdGUoMSksdC5zZXRIb3VycygwLDAsMCwwKX0sZnVuY3Rpb24odCxuKXt0LnNldE1vbnRoKHQuZ2V0TW9udGgoKStuKX0sZnVuY3Rpb24odCxuKXtyZXR1cm4gbi5nZXRNb250aCgpLXQuZ2V0TW9udGgoKSsxMioobi5nZXRGdWxsWWVhcigpLXQuZ2V0RnVsbFllYXIoKSl9LGZ1bmN0aW9uKHQpe3JldHVybiB0LmdldE1vbnRoKCl9KSxNZD13ZC5yYW5nZSxOZD0kaChmdW5jdGlvbih0KXt0LnNldE1vbnRoKDAsMSksdC5zZXRIb3VycygwLDAsMCwwKX0sZnVuY3Rpb24odCxuKXt0LnNldEZ1bGxZZWFyKHQuZ2V0RnVsbFllYXIoKStuKX0sZnVuY3Rpb24odCxuKXtyZXR1cm4gbi5nZXRGdWxsWWVhcigpLXQuZ2V0RnVsbFllYXIoKX0sZnVuY3Rpb24odCl7cmV0dXJuIHQuZ2V0RnVsbFllYXIoKX0pO05kLmV2ZXJ5PWZ1bmN0aW9uKHQpe3JldHVybiBpc0Zpbml0ZSh0PU1hdGguZmxvb3IodCkpJiZ0PjA/JGgoZnVuY3Rpb24obil7bi5zZXRGdWxsWWVhcihNYXRoLmZsb29yKG4uZ2V0RnVsbFllYXIoKS90KSp0KSxuLnNldE1vbnRoKDAsMSksbi5zZXRIb3VycygwLDAsMCwwKX0sZnVuY3Rpb24obixlKXtuLnNldEZ1bGxZZWFyKG4uZ2V0RnVsbFllYXIoKStlKnQpfSk6bnVsbH07dmFyIEFkPU5kLnJhbmdlLFRkPSRoKGZ1bmN0aW9uKHQpe3Quc2V0VVRDU2Vjb25kcygwLDApfSxmdW5jdGlvbih0LG4pe3Quc2V0VGltZSgrdCtuKlFoKX0sZnVuY3Rpb24odCxuKXtyZXR1cm4obi10KS9RaH0sZnVuY3Rpb24odCl7cmV0dXJuIHQuZ2V0VVRDTWludXRlcygpfSksU2Q9VGQucmFuZ2Usa2Q9JGgoZnVuY3Rpb24odCl7dC5zZXRVVENNaW51dGVzKDAsMCwwKX0sZnVuY3Rpb24odCxuKXt0LnNldFRpbWUoK3QrMzZlNSpuKX0sZnVuY3Rpb24odCxuKXtyZXR1cm4obi10KS8zNmU1fSxmdW5jdGlvbih0KXtyZXR1cm4gdC5nZXRVVENIb3VycygpfSksRWQ9a2QucmFuZ2UsQ2Q9JGgoZnVuY3Rpb24odCl7dC5zZXRVVENIb3VycygwLDAsMCwwKX0sZnVuY3Rpb24odCxuKXt0LnNldFVUQ0RhdGUodC5nZXRVVENEYXRlKCkrbil9LGZ1bmN0aW9uKHQsbil7cmV0dXJuKG4tdCkvODY0ZTV9LGZ1bmN0aW9uKHQpe3JldHVybiB0LmdldFVUQ0RhdGUoKS0xfSksUGQ9Q2QucmFuZ2U7ZnVuY3Rpb24gemQodCl7cmV0dXJuICRoKGZ1bmN0aW9uKG4pe24uc2V0VVRDRGF0ZShuLmdldFVUQ0RhdGUoKS0obi5nZXRVVENEYXkoKSs3LXQpJTcpLG4uc2V0VVRDSG91cnMoMCwwLDAsMCl9LGZ1bmN0aW9uKHQsbil7dC5zZXRVVENEYXRlKHQuZ2V0VVRDRGF0ZSgpKzcqbil9LGZ1bmN0aW9uKHQsbil7cmV0dXJuKG4tdCkvSmh9KX12YXIgUmQ9emQoMCksRGQ9emQoMSkscWQ9emQoMiksTGQ9emQoMyksVWQ9emQoNCksT2Q9emQoNSksQmQ9emQoNiksWWQ9UmQucmFuZ2UsRmQ9RGQucmFuZ2UsSWQ9cWQucmFuZ2UsamQ9TGQucmFuZ2UsSGQ9VWQucmFuZ2UsWGQ9T2QucmFuZ2UsR2Q9QmQucmFuZ2UsVmQ9JGgoZnVuY3Rpb24odCl7dC5zZXRVVENEYXRlKDEpLHQuc2V0VVRDSG91cnMoMCwwLDAsMCl9LGZ1bmN0aW9uKHQsbil7dC5zZXRVVENNb250aCh0LmdldFVUQ01vbnRoKCkrbil9LGZ1bmN0aW9uKHQsbil7cmV0dXJuIG4uZ2V0VVRDTW9udGgoKS10LmdldFVUQ01vbnRoKCkrMTIqKG4uZ2V0VVRDRnVsbFllYXIoKS10LmdldFVUQ0Z1bGxZZWFyKCkpfSxmdW5jdGlvbih0KXtyZXR1cm4gdC5nZXRVVENNb250aCgpfSksJGQ9VmQucmFuZ2UsV2Q9JGgoZnVuY3Rpb24odCl7dC5zZXRVVENNb250aCgwLDEpLHQuc2V0VVRDSG91cnMoMCwwLDAsMCl9LGZ1bmN0aW9uKHQsbil7dC5zZXRVVENGdWxsWWVhcih0LmdldFVUQ0Z1bGxZZWFyKCkrbil9LGZ1bmN0aW9uKHQsbil7cmV0dXJuIG4uZ2V0VVRDRnVsbFllYXIoKS10LmdldFVUQ0Z1bGxZZWFyKCl9LGZ1bmN0aW9uKHQpe3JldHVybiB0LmdldFVUQ0Z1bGxZZWFyKCl9KTtXZC5ldmVyeT1mdW5jdGlvbih0KXtyZXR1cm4gaXNGaW5pdGUodD1NYXRoLmZsb29yKHQpKSYmdD4wPyRoKGZ1bmN0aW9uKG4pe24uc2V0VVRDRnVsbFllYXIoTWF0aC5mbG9vcihuLmdldFVUQ0Z1bGxZZWFyKCkvdCkqdCksbi5zZXRVVENNb250aCgwLDEpLG4uc2V0VVRDSG91cnMoMCwwLDAsMCl9LGZ1bmN0aW9uKG4sZSl7bi5zZXRVVENGdWxsWWVhcihuLmdldFVUQ0Z1bGxZZWFyKCkrZSp0KX0pOm51bGx9O3ZhciBaZD1XZC5yYW5nZTtmdW5jdGlvbiBRZCh0KXtpZigwPD10LnkmJnQueTwxMDApe3ZhciBuPW5ldyBEYXRlKC0xLHQubSx0LmQsdC5ILHQuTSx0LlMsdC5MKTtyZXR1cm4gbi5zZXRGdWxsWWVhcih0LnkpLG59cmV0dXJuIG5ldyBEYXRlKHQueSx0Lm0sdC5kLHQuSCx0Lk0sdC5TLHQuTCl9ZnVuY3Rpb24gSmQodCl7aWYoMDw9dC55JiZ0Lnk8MTAwKXt2YXIgbj1uZXcgRGF0ZShEYXRlLlVUQygtMSx0Lm0sdC5kLHQuSCx0Lk0sdC5TLHQuTCkpO3JldHVybiBuLnNldFVUQ0Z1bGxZZWFyKHQueSksbn1yZXR1cm4gbmV3IERhdGUoRGF0ZS5VVEModC55LHQubSx0LmQsdC5ILHQuTSx0LlMsdC5MKSl9ZnVuY3Rpb24gS2QodCl7cmV0dXJue3k6dCxtOjAsZDoxLEg6MCxNOjAsUzowLEw6MH19ZnVuY3Rpb24gdHAodCl7dmFyIG49dC5kYXRlVGltZSxlPXQuZGF0ZSxyPXQudGltZSxpPXQucGVyaW9kcyxvPXQuZGF5cyxhPXQuc2hvcnREYXlzLHU9dC5tb250aHMsYz10LnNob3J0TW9udGhzLGY9Y3AoaSkscz1mcChpKSxsPWNwKG8pLGg9ZnAobyksZD1jcChhKSxwPWZwKGEpLHY9Y3AodSksZz1mcCh1KSx5PWNwKGMpLF89ZnAoYyksYj17YTpmdW5jdGlvbih0KXtyZXR1cm4gYVt0LmdldERheSgpXX0sQTpmdW5jdGlvbih0KXtyZXR1cm4gb1t0LmdldERheSgpXX0sYjpmdW5jdGlvbih0KXtyZXR1cm4gY1t0LmdldE1vbnRoKCldfSxCOmZ1bmN0aW9uKHQpe3JldHVybiB1W3QuZ2V0TW9udGgoKV19LGM6bnVsbCxkOkVwLGU6RXAsZjpEcCxIOkNwLEk6UHAsajp6cCxMOlJwLG06cXAsTTpMcCxwOmZ1bmN0aW9uKHQpe3JldHVybiBpWysodC5nZXRIb3VycygpPj0xMildfSxROnN2LHM6bHYsUzpVcCx1Ok9wLFU6QnAsVjpZcCx3OkZwLFc6SXAseDpudWxsLFg6bnVsbCx5OmpwLFk6SHAsWjpYcCwiJSI6ZnZ9LG09e2E6ZnVuY3Rpb24odCl7cmV0dXJuIGFbdC5nZXRVVENEYXkoKV19LEE6ZnVuY3Rpb24odCl7cmV0dXJuIG9bdC5nZXRVVENEYXkoKV19LGI6ZnVuY3Rpb24odCl7cmV0dXJuIGNbdC5nZXRVVENNb250aCgpXX0sQjpmdW5jdGlvbih0KXtyZXR1cm4gdVt0LmdldFVUQ01vbnRoKCldfSxjOm51bGwsZDpHcCxlOkdwLGY6UXAsSDpWcCxJOiRwLGo6V3AsTDpacCxtOkpwLE06S3AscDpmdW5jdGlvbih0KXtyZXR1cm4gaVsrKHQuZ2V0VVRDSG91cnMoKT49MTIpXX0sUTpzdixzOmx2LFM6dHYsdTpudixVOmV2LFY6cnYsdzppdixXOm92LHg6bnVsbCxYOm51bGwseTphdixZOnV2LFo6Y3YsIiUiOmZ2fSx4PXthOmZ1bmN0aW9uKHQsbixlKXt2YXIgcj1kLmV4ZWMobi5zbGljZShlKSk7cmV0dXJuIHI/KHQudz1wW3JbMF0udG9Mb3dlckNhc2UoKV0sZStyWzBdLmxlbmd0aCk6LTF9LEE6ZnVuY3Rpb24odCxuLGUpe3ZhciByPWwuZXhlYyhuLnNsaWNlKGUpKTtyZXR1cm4gcj8odC53PWhbclswXS50b0xvd2VyQ2FzZSgpXSxlK3JbMF0ubGVuZ3RoKTotMX0sYjpmdW5jdGlvbih0LG4sZSl7dmFyIHI9eS5leGVjKG4uc2xpY2UoZSkpO3JldHVybiByPyh0Lm09X1tyWzBdLnRvTG93ZXJDYXNlKCldLGUrclswXS5sZW5ndGgpOi0xfSxCOmZ1bmN0aW9uKHQsbixlKXt2YXIgcj12LmV4ZWMobi5zbGljZShlKSk7cmV0dXJuIHI/KHQubT1nW3JbMF0udG9Mb3dlckNhc2UoKV0sZStyWzBdLmxlbmd0aCk6LTF9LGM6ZnVuY3Rpb24odCxlLHIpe3JldHVybiBOKHQsbixlLHIpfSxkOmJwLGU6YnAsZjpBcCxIOnhwLEk6eHAsajptcCxMOk5wLG06X3AsTTp3cCxwOmZ1bmN0aW9uKHQsbixlKXt2YXIgcj1mLmV4ZWMobi5zbGljZShlKSk7cmV0dXJuIHI/KHQucD1zW3JbMF0udG9Mb3dlckNhc2UoKV0sZStyWzBdLmxlbmd0aCk6LTF9LFE6U3AsczprcCxTOk1wLHU6bHAsVTpocCxWOmRwLHc6c3AsVzpwcCx4OmZ1bmN0aW9uKHQsbixyKXtyZXR1cm4gTih0LGUsbixyKX0sWDpmdW5jdGlvbih0LG4sZSl7cmV0dXJuIE4odCxyLG4sZSl9LHk6Z3AsWTp2cCxaOnlwLCIlIjpUcH07ZnVuY3Rpb24gdyh0LG4pe3JldHVybiBmdW5jdGlvbihlKXt2YXIgcixpLG8sYT1bXSx1PS0xLGM9MCxmPXQubGVuZ3RoO2ZvcihlIGluc3RhbmNlb2YgRGF0ZXx8KGU9bmV3IERhdGUoK2UpKTsrK3U8ZjspMzc9PT10LmNoYXJDb2RlQXQodSkmJihhLnB1c2godC5zbGljZShjLHUpKSxudWxsIT0oaT1lcFtyPXQuY2hhckF0KCsrdSldKT9yPXQuY2hhckF0KCsrdSk6aT0iZSI9PT1yPyIgIjoiMCIsKG89bltyXSkmJihyPW8oZSxpKSksYS5wdXNoKHIpLGM9dSsxKTtyZXR1cm4gYS5wdXNoKHQuc2xpY2UoYyx1KSksYS5qb2luKCIiKX19ZnVuY3Rpb24gTSh0LG4pe3JldHVybiBmdW5jdGlvbihlKXt2YXIgcixpLG89S2QoMTkwMCk7aWYoTihvLHQsZSs9IiIsMCkhPWUubGVuZ3RoKXJldHVybiBudWxsO2lmKCJRImluIG8pcmV0dXJuIG5ldyBEYXRlKG8uUSk7aWYoInAiaW4gbyYmKG8uSD1vLkglMTIrMTIqby5wKSwiViJpbiBvKXtpZihvLlY8MXx8by5WPjUzKXJldHVybiBudWxsOyJ3ImluIG98fChvLnc9MSksIloiaW4gbz8oaT0ocj1KZChLZChvLnkpKSkuZ2V0VVRDRGF5KCkscj1pPjR8fDA9PT1pP0RkLmNlaWwocik6RGQocikscj1DZC5vZmZzZXQociw3KihvLlYtMSkpLG8ueT1yLmdldFVUQ0Z1bGxZZWFyKCksby5tPXIuZ2V0VVRDTW9udGgoKSxvLmQ9ci5nZXRVVENEYXRlKCkrKG8udys2KSU3KTooaT0ocj1uKEtkKG8ueSkpKS5nZXREYXkoKSxyPWk+NHx8MD09PWk/ZmQuY2VpbChyKTpmZChyKSxyPW9kLm9mZnNldChyLDcqKG8uVi0xKSksby55PXIuZ2V0RnVsbFllYXIoKSxvLm09ci5nZXRNb250aCgpLG8uZD1yLmdldERhdGUoKSsoby53KzYpJTcpfWVsc2UoIlciaW4gb3x8IlUiaW4gbykmJigidyJpbiBvfHwoby53PSJ1ImluIG8/by51JTc6IlciaW4gbz8xOjApLGk9IloiaW4gbz9KZChLZChvLnkpKS5nZXRVVENEYXkoKTpuKEtkKG8ueSkpLmdldERheSgpLG8ubT0wLG8uZD0iVyJpbiBvPyhvLncrNiklNys3Km8uVy0oaSs1KSU3Om8udys3Km8uVS0oaSs2KSU3KTtyZXR1cm4iWiJpbiBvPyhvLkgrPW8uWi8xMDB8MCxvLk0rPW8uWiUxMDAsSmQobykpOm4obyl9fWZ1bmN0aW9uIE4odCxuLGUscil7Zm9yKHZhciBpLG8sYT0wLHU9bi5sZW5ndGgsYz1lLmxlbmd0aDthPHU7KXtpZihyPj1jKXJldHVybi0xO2lmKDM3PT09KGk9bi5jaGFyQ29kZUF0KGErKykpKXtpZihpPW4uY2hhckF0KGErKyksIShvPXhbaSBpbiBlcD9uLmNoYXJBdChhKyspOmldKXx8KHI9byh0LGUscikpPDApcmV0dXJuLTF9ZWxzZSBpZihpIT1lLmNoYXJDb2RlQXQocisrKSlyZXR1cm4tMX1yZXR1cm4gcn1yZXR1cm4gYi54PXcoZSxiKSxiLlg9dyhyLGIpLGIuYz13KG4sYiksbS54PXcoZSxtKSxtLlg9dyhyLG0pLG0uYz13KG4sbSkse2Zvcm1hdDpmdW5jdGlvbih0KXt2YXIgbj13KHQrPSIiLGIpO3JldHVybiBuLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHR9LG59LHBhcnNlOmZ1bmN0aW9uKHQpe3ZhciBuPU0odCs9IiIsUWQpO3JldHVybiBuLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHR9LG59LHV0Y0Zvcm1hdDpmdW5jdGlvbih0KXt2YXIgbj13KHQrPSIiLG0pO3JldHVybiBuLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHR9LG59LHV0Y1BhcnNlOmZ1bmN0aW9uKHQpe3ZhciBuPU0odCxKZCk7cmV0dXJuIG4udG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdH0sbn19fXZhciBucCxlcD17Ii0iOiIiLF86IiAiLDA6IjAifSxycD0vXlxzKlxkKy8saXA9L14lLyxvcD0vW1xcXiQqKz98W1xdKCkue31dL2c7ZnVuY3Rpb24gYXAodCxuLGUpe3ZhciByPXQ8MD8iLSI6IiIsaT0ocj8tdDp0KSsiIixvPWkubGVuZ3RoO3JldHVybiByKyhvPGU/bmV3IEFycmF5KGUtbysxKS5qb2luKG4pK2k6aSl9ZnVuY3Rpb24gdXAodCl7cmV0dXJuIHQucmVwbGFjZShvcCwiXFwkJiIpfWZ1bmN0aW9uIGNwKHQpe3JldHVybiBuZXcgUmVnRXhwKCJeKD86Iit0Lm1hcCh1cCkuam9pbigifCIpKyIpIiwiaSIpfWZ1bmN0aW9uIGZwKHQpe2Zvcih2YXIgbj17fSxlPS0xLHI9dC5sZW5ndGg7KytlPHI7KW5bdFtlXS50b0xvd2VyQ2FzZSgpXT1lO3JldHVybiBufWZ1bmN0aW9uIHNwKHQsbixlKXt2YXIgcj1ycC5leGVjKG4uc2xpY2UoZSxlKzEpKTtyZXR1cm4gcj8odC53PStyWzBdLGUrclswXS5sZW5ndGgpOi0xfWZ1bmN0aW9uIGxwKHQsbixlKXt2YXIgcj1ycC5leGVjKG4uc2xpY2UoZSxlKzEpKTtyZXR1cm4gcj8odC51PStyWzBdLGUrclswXS5sZW5ndGgpOi0xfWZ1bmN0aW9uIGhwKHQsbixlKXt2YXIgcj1ycC5leGVjKG4uc2xpY2UoZSxlKzIpKTtyZXR1cm4gcj8odC5VPStyWzBdLGUrclswXS5sZW5ndGgpOi0xfWZ1bmN0aW9uIGRwKHQsbixlKXt2YXIgcj1ycC5leGVjKG4uc2xpY2UoZSxlKzIpKTtyZXR1cm4gcj8odC5WPStyWzBdLGUrclswXS5sZW5ndGgpOi0xfWZ1bmN0aW9uIHBwKHQsbixlKXt2YXIgcj1ycC5leGVjKG4uc2xpY2UoZSxlKzIpKTtyZXR1cm4gcj8odC5XPStyWzBdLGUrclswXS5sZW5ndGgpOi0xfWZ1bmN0aW9uIHZwKHQsbixlKXt2YXIgcj1ycC5leGVjKG4uc2xpY2UoZSxlKzQpKTtyZXR1cm4gcj8odC55PStyWzBdLGUrclswXS5sZW5ndGgpOi0xfWZ1bmN0aW9uIGdwKHQsbixlKXt2YXIgcj1ycC5leGVjKG4uc2xpY2UoZSxlKzIpKTtyZXR1cm4gcj8odC55PStyWzBdKygrclswXT42OD8xOTAwOjJlMyksZStyWzBdLmxlbmd0aCk6LTF9ZnVuY3Rpb24geXAodCxuLGUpe3ZhciByPS9eKFopfChbKy1dXGRcZCkoPzo6PyhcZFxkKSk/Ly5leGVjKG4uc2xpY2UoZSxlKzYpKTtyZXR1cm4gcj8odC5aPXJbMV0/MDotKHJbMl0rKHJbM118fCIwMCIpKSxlK3JbMF0ubGVuZ3RoKTotMX1mdW5jdGlvbiBfcCh0LG4sZSl7dmFyIHI9cnAuZXhlYyhuLnNsaWNlKGUsZSsyKSk7cmV0dXJuIHI/KHQubT1yWzBdLTEsZStyWzBdLmxlbmd0aCk6LTF9ZnVuY3Rpb24gYnAodCxuLGUpe3ZhciByPXJwLmV4ZWMobi5zbGljZShlLGUrMikpO3JldHVybiByPyh0LmQ9K3JbMF0sZStyWzBdLmxlbmd0aCk6LTF9ZnVuY3Rpb24gbXAodCxuLGUpe3ZhciByPXJwLmV4ZWMobi5zbGljZShlLGUrMykpO3JldHVybiByPyh0Lm09MCx0LmQ9K3JbMF0sZStyWzBdLmxlbmd0aCk6LTF9ZnVuY3Rpb24geHAodCxuLGUpe3ZhciByPXJwLmV4ZWMobi5zbGljZShlLGUrMikpO3JldHVybiByPyh0Lkg9K3JbMF0sZStyWzBdLmxlbmd0aCk6LTF9ZnVuY3Rpb24gd3AodCxuLGUpe3ZhciByPXJwLmV4ZWMobi5zbGljZShlLGUrMikpO3JldHVybiByPyh0Lk09K3JbMF0sZStyWzBdLmxlbmd0aCk6LTF9ZnVuY3Rpb24gTXAodCxuLGUpe3ZhciByPXJwLmV4ZWMobi5zbGljZShlLGUrMikpO3JldHVybiByPyh0LlM9K3JbMF0sZStyWzBdLmxlbmd0aCk6LTF9ZnVuY3Rpb24gTnAodCxuLGUpe3ZhciByPXJwLmV4ZWMobi5zbGljZShlLGUrMykpO3JldHVybiByPyh0Lkw9K3JbMF0sZStyWzBdLmxlbmd0aCk6LTF9ZnVuY3Rpb24gQXAodCxuLGUpe3ZhciByPXJwLmV4ZWMobi5zbGljZShlLGUrNikpO3JldHVybiByPyh0Lkw9TWF0aC5mbG9vcihyWzBdLzFlMyksZStyWzBdLmxlbmd0aCk6LTF9ZnVuY3Rpb24gVHAodCxuLGUpe3ZhciByPWlwLmV4ZWMobi5zbGljZShlLGUrMSkpO3JldHVybiByP2UrclswXS5sZW5ndGg6LTF9ZnVuY3Rpb24gU3AodCxuLGUpe3ZhciByPXJwLmV4ZWMobi5zbGljZShlKSk7cmV0dXJuIHI/KHQuUT0rclswXSxlK3JbMF0ubGVuZ3RoKTotMX1mdW5jdGlvbiBrcCh0LG4sZSl7dmFyIHI9cnAuZXhlYyhuLnNsaWNlKGUpKTtyZXR1cm4gcj8odC5RPTFlMyorclswXSxlK3JbMF0ubGVuZ3RoKTotMX1mdW5jdGlvbiBFcCh0LG4pe3JldHVybiBhcCh0LmdldERhdGUoKSxuLDIpfWZ1bmN0aW9uIENwKHQsbil7cmV0dXJuIGFwKHQuZ2V0SG91cnMoKSxuLDIpfWZ1bmN0aW9uIFBwKHQsbil7cmV0dXJuIGFwKHQuZ2V0SG91cnMoKSUxMnx8MTIsbiwyKX1mdW5jdGlvbiB6cCh0LG4pe3JldHVybiBhcCgxK29kLmNvdW50KE5kKHQpLHQpLG4sMyl9ZnVuY3Rpb24gUnAodCxuKXtyZXR1cm4gYXAodC5nZXRNaWxsaXNlY29uZHMoKSxuLDMpfWZ1bmN0aW9uIERwKHQsbil7cmV0dXJuIFJwKHQsbikrIjAwMCJ9ZnVuY3Rpb24gcXAodCxuKXtyZXR1cm4gYXAodC5nZXRNb250aCgpKzEsbiwyKX1mdW5jdGlvbiBMcCh0LG4pe3JldHVybiBhcCh0LmdldE1pbnV0ZXMoKSxuLDIpfWZ1bmN0aW9uIFVwKHQsbil7cmV0dXJuIGFwKHQuZ2V0U2Vjb25kcygpLG4sMil9ZnVuY3Rpb24gT3AodCl7dmFyIG49dC5nZXREYXkoKTtyZXR1cm4gMD09PW4/NzpufWZ1bmN0aW9uIEJwKHQsbil7cmV0dXJuIGFwKGNkLmNvdW50KE5kKHQpLHQpLG4sMil9ZnVuY3Rpb24gWXAodCxuKXt2YXIgZT10LmdldERheSgpO3JldHVybiB0PWU+PTR8fDA9PT1lP2hkKHQpOmhkLmNlaWwodCksYXAoaGQuY291bnQoTmQodCksdCkrKDQ9PT1OZCh0KS5nZXREYXkoKSksbiwyKX1mdW5jdGlvbiBGcCh0KXtyZXR1cm4gdC5nZXREYXkoKX1mdW5jdGlvbiBJcCh0LG4pe3JldHVybiBhcChmZC5jb3VudChOZCh0KSx0KSxuLDIpfWZ1bmN0aW9uIGpwKHQsbil7cmV0dXJuIGFwKHQuZ2V0RnVsbFllYXIoKSUxMDAsbiwyKX1mdW5jdGlvbiBIcCh0LG4pe3JldHVybiBhcCh0LmdldEZ1bGxZZWFyKCklMWU0LG4sNCl9ZnVuY3Rpb24gWHAodCl7dmFyIG49dC5nZXRUaW1lem9uZU9mZnNldCgpO3JldHVybihuPjA/Ii0iOihuKj0tMSwiKyIpKSthcChuLzYwfDAsIjAiLDIpK2FwKG4lNjAsIjAiLDIpfWZ1bmN0aW9uIEdwKHQsbil7cmV0dXJuIGFwKHQuZ2V0VVRDRGF0ZSgpLG4sMil9ZnVuY3Rpb24gVnAodCxuKXtyZXR1cm4gYXAodC5nZXRVVENIb3VycygpLG4sMil9ZnVuY3Rpb24gJHAodCxuKXtyZXR1cm4gYXAodC5nZXRVVENIb3VycygpJTEyfHwxMixuLDIpfWZ1bmN0aW9uIFdwKHQsbil7cmV0dXJuIGFwKDErQ2QuY291bnQoV2QodCksdCksbiwzKX1mdW5jdGlvbiBacCh0LG4pe3JldHVybiBhcCh0LmdldFVUQ01pbGxpc2Vjb25kcygpLG4sMyl9ZnVuY3Rpb24gUXAodCxuKXtyZXR1cm4gWnAodCxuKSsiMDAwIn1mdW5jdGlvbiBKcCh0LG4pe3JldHVybiBhcCh0LmdldFVUQ01vbnRoKCkrMSxuLDIpfWZ1bmN0aW9uIEtwKHQsbil7cmV0dXJuIGFwKHQuZ2V0VVRDTWludXRlcygpLG4sMil9ZnVuY3Rpb24gdHYodCxuKXtyZXR1cm4gYXAodC5nZXRVVENTZWNvbmRzKCksbiwyKX1mdW5jdGlvbiBudih0KXt2YXIgbj10LmdldFVUQ0RheSgpO3JldHVybiAwPT09bj83Om59ZnVuY3Rpb24gZXYodCxuKXtyZXR1cm4gYXAoUmQuY291bnQoV2QodCksdCksbiwyKX1mdW5jdGlvbiBydih0LG4pe3ZhciBlPXQuZ2V0VVRDRGF5KCk7cmV0dXJuIHQ9ZT49NHx8MD09PWU/VWQodCk6VWQuY2VpbCh0KSxhcChVZC5jb3VudChXZCh0KSx0KSsoND09PVdkKHQpLmdldFVUQ0RheSgpKSxuLDIpfWZ1bmN0aW9uIGl2KHQpe3JldHVybiB0LmdldFVUQ0RheSgpfWZ1bmN0aW9uIG92KHQsbil7cmV0dXJuIGFwKERkLmNvdW50KFdkKHQpLHQpLG4sMil9ZnVuY3Rpb24gYXYodCxuKXtyZXR1cm4gYXAodC5nZXRVVENGdWxsWWVhcigpJTEwMCxuLDIpfWZ1bmN0aW9uIHV2KHQsbil7cmV0dXJuIGFwKHQuZ2V0VVRDRnVsbFllYXIoKSUxZTQsbiw0KX1mdW5jdGlvbiBjdigpe3JldHVybiIrMDAwMCJ9ZnVuY3Rpb24gZnYoKXtyZXR1cm4iJSJ9ZnVuY3Rpb24gc3YodCl7cmV0dXJuK3R9ZnVuY3Rpb24gbHYodCl7cmV0dXJuIE1hdGguZmxvb3IoK3QvMWUzKX1mdW5jdGlvbiBodihuKXtyZXR1cm4gbnA9dHAobiksdC50aW1lRm9ybWF0PW5wLmZvcm1hdCx0LnRpbWVQYXJzZT1ucC5wYXJzZSx0LnV0Y0Zvcm1hdD1ucC51dGNGb3JtYXQsdC51dGNQYXJzZT1ucC51dGNQYXJzZSxucH1odih7ZGF0ZVRpbWU6IiV4LCAlWCIsZGF0ZToiJS1tLyUtZC8lWSIsdGltZToiJS1JOiVNOiVTICVwIixwZXJpb2RzOlsiQU0iLCJQTSJdLGRheXM6WyJTdW5kYXkiLCJNb25kYXkiLCJUdWVzZGF5IiwiV2VkbmVzZGF5IiwiVGh1cnNkYXkiLCJGcmlkYXkiLCJTYXR1cmRheSJdLHNob3J0RGF5czpbIlN1biIsIk1vbiIsIlR1ZSIsIldlZCIsIlRodSIsIkZyaSIsIlNhdCJdLG1vbnRoczpbIkphbnVhcnkiLCJGZWJydWFyeSIsIk1hcmNoIiwiQXByaWwiLCJNYXkiLCJKdW5lIiwiSnVseSIsIkF1Z3VzdCIsIlNlcHRlbWJlciIsIk9jdG9iZXIiLCJOb3ZlbWJlciIsIkRlY2VtYmVyIl0sc2hvcnRNb250aHM6WyJKYW4iLCJGZWIiLCJNYXIiLCJBcHIiLCJNYXkiLCJKdW4iLCJKdWwiLCJBdWciLCJTZXAiLCJPY3QiLCJOb3YiLCJEZWMiXX0pO3ZhciBkdj1EYXRlLnByb3RvdHlwZS50b0lTT1N0cmluZz9mdW5jdGlvbih0KXtyZXR1cm4gdC50b0lTT1N0cmluZygpfTp0LnV0Y0Zvcm1hdCgiJVktJW0tJWRUJUg6JU06JVMuJUxaIik7dmFyIHB2PStuZXcgRGF0ZSgiMjAwMC0wMS0wMVQwMDowMDowMC4wMDBaIik/ZnVuY3Rpb24odCl7dmFyIG49bmV3IERhdGUodCk7cmV0dXJuIGlzTmFOKG4pP251bGw6bn06dC51dGNQYXJzZSgiJVktJW0tJWRUJUg6JU06JVMuJUxaIiksdnY9MWUzLGd2PTYwKnZ2LHl2PTYwKmd2LF92PTI0Knl2LGJ2PTcqX3YsbXY9MzAqX3YseHY9MzY1Kl92O2Z1bmN0aW9uIHd2KHQpe3JldHVybiBuZXcgRGF0ZSh0KX1mdW5jdGlvbiBNdih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIERhdGU/K3Q6K25ldyBEYXRlKCt0KX1mdW5jdGlvbiBOdih0LG4scixpLG8sYSx1LGMsZil7dmFyIHM9U2gobWgsbWgpLGw9cy5pbnZlcnQsaD1zLmRvbWFpbixkPWYoIi4lTCIpLHA9ZigiOiVTIiksdj1mKCIlSTolTSIpLGc9ZigiJUkgJXAiKSx5PWYoIiVhICVkIiksXz1mKCIlYiAlZCIpLGI9ZigiJUIiKSxtPWYoIiVZIikseD1bW3UsMSx2dl0sW3UsNSw1KnZ2XSxbdSwxNSwxNSp2dl0sW3UsMzAsMzAqdnZdLFthLDEsZ3ZdLFthLDUsNSpndl0sW2EsMTUsMTUqZ3ZdLFthLDMwLDMwKmd2XSxbbywxLHl2XSxbbywzLDMqeXZdLFtvLDYsNip5dl0sW28sMTIsMTIqeXZdLFtpLDEsX3ZdLFtpLDIsMipfdl0sW3IsMSxidl0sW24sMSxtdl0sW24sMywzKm12XSxbdCwxLHh2XV07ZnVuY3Rpb24gTShlKXtyZXR1cm4odShlKTxlP2Q6YShlKTxlP3A6byhlKTxlP3Y6aShlKTxlP2c6bihlKTxlP3IoZSk8ZT95Ol86dChlKTxlP2I6bSkoZSl9ZnVuY3Rpb24gTihuLHIsaSxvKXtpZihudWxsPT1uJiYobj0xMCksIm51bWJlciI9PXR5cGVvZiBuKXt2YXIgYT1NYXRoLmFicyhpLXIpL24sdT1lKGZ1bmN0aW9uKHQpe3JldHVybiB0WzJdfSkucmlnaHQoeCxhKTt1PT09eC5sZW5ndGg/KG89dyhyL3h2LGkveHYsbiksbj10KTp1PyhvPSh1PXhbYS94W3UtMV1bMl08eFt1XVsyXS9hP3UtMTp1XSlbMV0sbj11WzBdKToobz1NYXRoLm1heCh3KHIsaSxuKSwxKSxuPWMpfXJldHVybiBudWxsPT1vP246bi5ldmVyeShvKX1yZXR1cm4gcy5pbnZlcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBEYXRlKGwodCkpfSxzLmRvbWFpbj1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD9oKGRoLmNhbGwodCxNdikpOmgoKS5tYXAod3YpfSxzLnRpY2tzPWZ1bmN0aW9uKHQsbil7dmFyIGUscj1oKCksaT1yWzBdLG89cltyLmxlbmd0aC0xXSxhPW88aTtyZXR1cm4gYSYmKGU9aSxpPW8sbz1lKSxlPShlPU4odCxpLG8sbikpP2UucmFuZ2UoaSxvKzEpOltdLGE/ZS5yZXZlcnNlKCk6ZX0scy50aWNrRm9ybWF0PWZ1bmN0aW9uKHQsbil7cmV0dXJuIG51bGw9PW4/TTpmKG4pfSxzLm5pY2U9ZnVuY3Rpb24odCxuKXt2YXIgZT1oKCk7cmV0dXJuKHQ9Tih0LGVbMF0sZVtlLmxlbmd0aC0xXSxuKSk/aChDaChlLHQpKTpzfSxzLmNvcHk9ZnVuY3Rpb24oKXtyZXR1cm4gQWgocyxOdih0LG4scixpLG8sYSx1LGMsZikpfSxzfWZ1bmN0aW9uIEF2KCl7dmFyIHQsbixlLHIsaSxvPTAsYT0xLHU9bWgsYz0hMTtmdW5jdGlvbiBmKG4pe3JldHVybiBpc05hTihuPStuKT9pOnUoMD09PWU/LjU6KG49KHIobiktdCkqZSxjP01hdGgubWF4KDAsTWF0aC5taW4oMSxuKSk6bikpfXJldHVybiBmLmRvbWFpbj1mdW5jdGlvbihpKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odD1yKG89K2lbMF0pLG49cihhPStpWzFdKSxlPXQ9PT1uPzA6MS8obi10KSxmKTpbbyxhXX0sZi5jbGFtcD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oYz0hIXQsZik6Y30sZi5pbnRlcnBvbGF0b3I9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHU9dCxmKTp1fSxmLnVua25vd249ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGk9dCxmKTppfSxmdW5jdGlvbihpKXtyZXR1cm4gcj1pLHQ9aShvKSxuPWkoYSksZT10PT09bj8wOjEvKG4tdCksZn19ZnVuY3Rpb24gVHYodCxuKXtyZXR1cm4gbi5kb21haW4odC5kb21haW4oKSkuaW50ZXJwb2xhdG9yKHQuaW50ZXJwb2xhdG9yKCkpLmNsYW1wKHQuY2xhbXAoKSkudW5rbm93bih0LnVua25vd24oKSl9ZnVuY3Rpb24gU3YoKXt2YXIgdD1IaChBdigpKTtyZXR1cm4gdC5jb3B5PWZ1bmN0aW9uKCl7cmV0dXJuIFR2KHQsU3YoKSkuZXhwb25lbnQodC5leHBvbmVudCgpKX0sbGguYXBwbHkodCxhcmd1bWVudHMpfWZ1bmN0aW9uIGt2KCl7dmFyIHQsbixlLHIsaSxvLGEsdT0wLGM9LjUsZj0xLHM9bWgsbD0hMTtmdW5jdGlvbiBoKHQpe3JldHVybiBpc05hTih0PSt0KT9hOih0PS41KygodD0rbyh0KSktbikqKHQ8bj9yOmkpLHMobD9NYXRoLm1heCgwLE1hdGgubWluKDEsdCkpOnQpKX1yZXR1cm4gaC5kb21haW49ZnVuY3Rpb24oYSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHQ9byh1PSthWzBdKSxuPW8oYz0rYVsxXSksZT1vKGY9K2FbMl0pLHI9dD09PW4/MDouNS8obi10KSxpPW49PT1lPzA6LjUvKGUtbiksaCk6W3UsYyxmXX0saC5jbGFtcD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8obD0hIXQsaCk6bH0saC5pbnRlcnBvbGF0b3I9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHM9dCxoKTpzfSxoLnVua25vd249ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGE9dCxoKTphfSxmdW5jdGlvbihhKXtyZXR1cm4gbz1hLHQ9YSh1KSxuPWEoYyksZT1hKGYpLHI9dD09PW4/MDouNS8obi10KSxpPW49PT1lPzA6LjUvKGUtbiksaH19ZnVuY3Rpb24gRXYoKXt2YXIgdD1IaChrdigpKTtyZXR1cm4gdC5jb3B5PWZ1bmN0aW9uKCl7cmV0dXJuIFR2KHQsRXYoKSkuZXhwb25lbnQodC5leHBvbmVudCgpKX0sbGguYXBwbHkodCxhcmd1bWVudHMpfWZ1bmN0aW9uIEN2KHQpe2Zvcih2YXIgbj10Lmxlbmd0aC82fDAsZT1uZXcgQXJyYXkobikscj0wO3I8bjspZVtyXT0iIyIrdC5zbGljZSg2KnIsNiorK3IpO3JldHVybiBlfXZhciBQdj1DdigiMWY3N2I0ZmY3ZjBlMmNhMDJjZDYyNzI4OTQ2N2JkOGM1NjRiZTM3N2MyN2Y3ZjdmYmNiZDIyMTdiZWNmIiksenY9Q3YoIjdmYzk3ZmJlYWVkNGZkYzA4NmZmZmY5OTM4NmNiMGYwMDI3ZmJmNWIxNzY2NjY2NiIpLFJ2PUN2KCIxYjllNzdkOTVmMDI3NTcwYjNlNzI5OGE2NmE2MWVlNmFiMDJhNjc2MWQ2NjY2NjYiKSxEdj1DdigiYTZjZWUzMWY3OGI0YjJkZjhhMzNhMDJjZmI5YTk5ZTMxYTFjZmRiZjZmZmY3ZjAwY2FiMmQ2NmEzZDlhZmZmZjk5YjE1OTI4IikscXY9Q3YoImZiYjRhZWIzY2RlM2NjZWJjNWRlY2JlNGZlZDlhNmZmZmZjY2U1ZDhiZGZkZGFlY2YyZjJmMiIpLEx2PUN2KCJiM2UyY2RmZGNkYWNjYmQ1ZThmNGNhZTRlNmY1YzlmZmYyYWVmMWUyY2NjY2NjY2MiKSxVdj1DdigiZTQxYTFjMzc3ZWI4NGRhZjRhOTg0ZWEzZmY3ZjAwZmZmZjMzYTY1NjI4Zjc4MWJmOTk5OTk5IiksT3Y9Q3YoIjY2YzJhNWZjOGQ2MjhkYTBjYmU3OGFjM2E2ZDg1NGZmZDkyZmU1YzQ5NGIzYjNiMyIpLEJ2PUN2KCI4ZGQzYzdmZmZmYjNiZWJhZGFmYjgwNzI4MGIxZDNmZGI0NjJiM2RlNjlmY2NkZTVkOWQ5ZDliYzgwYmRjY2ViYzVmZmVkNmYiKTtmdW5jdGlvbiBZdih0KXtyZXR1cm4gY2UodFt0Lmxlbmd0aC0xXSl9dmFyIEZ2PW5ldyBBcnJheSgzKS5jb25jYXQoImQ4YjM2NWY1ZjVmNTVhYjRhYyIsImE2NjExYWRmYzI3ZDgwY2RjMTAxODU3MSIsImE2NjExYWRmYzI3ZGY1ZjVmNTgwY2RjMTAxODU3MSIsIjhjNTEwYWQ4YjM2NWY2ZThjM2M3ZWFlNTVhYjRhYzAxNjY1ZSIsIjhjNTEwYWQ4YjM2NWY2ZThjM2Y1ZjVmNWM3ZWFlNTVhYjRhYzAxNjY1ZSIsIjhjNTEwYWJmODEyZGRmYzI3ZGY2ZThjM2M3ZWFlNTgwY2RjMTM1OTc4ZjAxNjY1ZSIsIjhjNTEwYWJmODEyZGRmYzI3ZGY2ZThjM2Y1ZjVmNWM3ZWFlNTgwY2RjMTM1OTc4ZjAxNjY1ZSIsIjU0MzAwNThjNTEwYWJmODEyZGRmYzI3ZGY2ZThjM2M3ZWFlNTgwY2RjMTM1OTc4ZjAxNjY1ZTAwM2MzMCIsIjU0MzAwNThjNTEwYWJmODEyZGRmYzI3ZGY2ZThjM2Y1ZjVmNWM3ZWFlNTgwY2RjMTM1OTc4ZjAxNjY1ZTAwM2MzMCIpLm1hcChDdiksSXY9WXYoRnYpLGp2PW5ldyBBcnJheSgzKS5jb25jYXQoImFmOGRjM2Y3ZjdmNzdmYmY3YiIsIjdiMzI5NGMyYTVjZmE2ZGJhMDAwODgzNyIsIjdiMzI5NGMyYTVjZmY3ZjdmN2E2ZGJhMDAwODgzNyIsIjc2MmE4M2FmOGRjM2U3ZDRlOGQ5ZjBkMzdmYmY3YjFiNzgzNyIsIjc2MmE4M2FmOGRjM2U3ZDRlOGY3ZjdmN2Q5ZjBkMzdmYmY3YjFiNzgzNyIsIjc2MmE4Mzk5NzBhYmMyYTVjZmU3ZDRlOGQ5ZjBkM2E2ZGJhMDVhYWU2MTFiNzgzNyIsIjc2MmE4Mzk5NzBhYmMyYTVjZmU3ZDRlOGY3ZjdmN2Q5ZjBkM2E2ZGJhMDVhYWU2MTFiNzgzNyIsIjQwMDA0Yjc2MmE4Mzk5NzBhYmMyYTVjZmU3ZDRlOGQ5ZjBkM2E2ZGJhMDVhYWU2MTFiNzgzNzAwNDQxYiIsIjQwMDA0Yjc2MmE4Mzk5NzBhYmMyYTVjZmU3ZDRlOGY3ZjdmN2Q5ZjBkM2E2ZGJhMDVhYWU2MTFiNzgzNzAwNDQxYiIpLm1hcChDdiksSHY9WXYoanYpLFh2PW5ldyBBcnJheSgzKS5jb25jYXQoImU5YTNjOWY3ZjdmN2ExZDc2YSIsImQwMWM4YmYxYjZkYWI4ZTE4NjRkYWMyNiIsImQwMWM4YmYxYjZkYWY3ZjdmN2I4ZTE4NjRkYWMyNiIsImM1MWI3ZGU5YTNjOWZkZTBlZmU2ZjVkMGExZDc2YTRkOTIyMSIsImM1MWI3ZGU5YTNjOWZkZTBlZmY3ZjdmN2U2ZjVkMGExZDc2YTRkOTIyMSIsImM1MWI3ZGRlNzdhZWYxYjZkYWZkZTBlZmU2ZjVkMGI4ZTE4NjdmYmM0MTRkOTIyMSIsImM1MWI3ZGRlNzdhZWYxYjZkYWZkZTBlZmY3ZjdmN2U2ZjVkMGI4ZTE4NjdmYmM0MTRkOTIyMSIsIjhlMDE1MmM1MWI3ZGRlNzdhZWYxYjZkYWZkZTBlZmU2ZjVkMGI4ZTE4NjdmYmM0MTRkOTIyMTI3NjQxOSIsIjhlMDE1MmM1MWI3ZGRlNzdhZWYxYjZkYWZkZTBlZmY3ZjdmN2U2ZjVkMGI4ZTE4NjdmYmM0MTRkOTIyMTI3NjQxOSIpLm1hcChDdiksR3Y9WXYoWHYpLFZ2PW5ldyBBcnJheSgzKS5jb25jYXQoIjk5OGVjM2Y3ZjdmN2YxYTM0MCIsIjVlM2M5OWIyYWJkMmZkYjg2M2U2NjEwMSIsIjVlM2M5OWIyYWJkMmY3ZjdmN2ZkYjg2M2U2NjEwMSIsIjU0Mjc4ODk5OGVjM2Q4ZGFlYmZlZTBiNmYxYTM0MGIzNTgwNiIsIjU0Mjc4ODk5OGVjM2Q4ZGFlYmY3ZjdmN2ZlZTBiNmYxYTM0MGIzNTgwNiIsIjU0Mjc4ODgwNzNhY2IyYWJkMmQ4ZGFlYmZlZTBiNmZkYjg2M2UwODIxNGIzNTgwNiIsIjU0Mjc4ODgwNzNhY2IyYWJkMmQ4ZGFlYmY3ZjdmN2ZlZTBiNmZkYjg2M2UwODIxNGIzNTgwNiIsIjJkMDA0YjU0Mjc4ODgwNzNhY2IyYWJkMmQ4ZGFlYmZlZTBiNmZkYjg2M2UwODIxNGIzNTgwNjdmM2IwOCIsIjJkMDA0YjU0Mjc4ODgwNzNhY2IyYWJkMmQ4ZGFlYmY3ZjdmN2ZlZTBiNmZkYjg2M2UwODIxNGIzNTgwNjdmM2IwOCIpLm1hcChDdiksJHY9WXYoVnYpLFd2PW5ldyBBcnJheSgzKS5jb25jYXQoImVmOGE2MmY3ZjdmNzY3YTljZiIsImNhMDAyMGY0YTU4MjkyYzVkZTA1NzFiMCIsImNhMDAyMGY0YTU4MmY3ZjdmNzkyYzVkZTA1NzFiMCIsImIyMTgyYmVmOGE2MmZkZGJjN2QxZTVmMDY3YTljZjIxNjZhYyIsImIyMTgyYmVmOGE2MmZkZGJjN2Y3ZjdmN2QxZTVmMDY3YTljZjIxNjZhYyIsImIyMTgyYmQ2NjA0ZGY0YTU4MmZkZGJjN2QxZTVmMDkyYzVkZTQzOTNjMzIxNjZhYyIsImIyMTgyYmQ2NjA0ZGY0YTU4MmZkZGJjN2Y3ZjdmN2QxZTVmMDkyYzVkZTQzOTNjMzIxNjZhYyIsIjY3MDAxZmIyMTgyYmQ2NjA0ZGY0YTU4MmZkZGJjN2QxZTVmMDkyYzVkZTQzOTNjMzIxNjZhYzA1MzA2MSIsIjY3MDAxZmIyMTgyYmQ2NjA0ZGY0YTU4MmZkZGJjN2Y3ZjdmN2QxZTVmMDkyYzVkZTQzOTNjMzIxNjZhYzA1MzA2MSIpLm1hcChDdiksWnY9WXYoV3YpLFF2PW5ldyBBcnJheSgzKS5jb25jYXQoImVmOGE2MmZmZmZmZjk5OTk5OSIsImNhMDAyMGY0YTU4MmJhYmFiYTQwNDA0MCIsImNhMDAyMGY0YTU4MmZmZmZmZmJhYmFiYTQwNDA0MCIsImIyMTgyYmVmOGE2MmZkZGJjN2UwZTBlMDk5OTk5OTRkNGQ0ZCIsImIyMTgyYmVmOGE2MmZkZGJjN2ZmZmZmZmUwZTBlMDk5OTk5OTRkNGQ0ZCIsImIyMTgyYmQ2NjA0ZGY0YTU4MmZkZGJjN2UwZTBlMGJhYmFiYTg3ODc4NzRkNGQ0ZCIsImIyMTgyYmQ2NjA0ZGY0YTU4MmZkZGJjN2ZmZmZmZmUwZTBlMGJhYmFiYTg3ODc4NzRkNGQ0ZCIsIjY3MDAxZmIyMTgyYmQ2NjA0ZGY0YTU4MmZkZGJjN2UwZTBlMGJhYmFiYTg3ODc4NzRkNGQ0ZDFhMWExYSIsIjY3MDAxZmIyMTgyYmQ2NjA0ZGY0YTU4MmZkZGJjN2ZmZmZmZmUwZTBlMGJhYmFiYTg3ODc4NzRkNGQ0ZDFhMWExYSIpLm1hcChDdiksSnY9WXYoUXYpLEt2PW5ldyBBcnJheSgzKS5jb25jYXQoImZjOGQ1OWZmZmZiZjkxYmZkYiIsImQ3MTkxY2ZkYWU2MWFiZDllOTJjN2JiNiIsImQ3MTkxY2ZkYWU2MWZmZmZiZmFiZDllOTJjN2JiNiIsImQ3MzAyN2ZjOGQ1OWZlZTA5MGUwZjNmODkxYmZkYjQ1NzViNCIsImQ3MzAyN2ZjOGQ1OWZlZTA5MGZmZmZiZmUwZjNmODkxYmZkYjQ1NzViNCIsImQ3MzAyN2Y0NmQ0M2ZkYWU2MWZlZTA5MGUwZjNmOGFiZDllOTc0YWRkMTQ1NzViNCIsImQ3MzAyN2Y0NmQ0M2ZkYWU2MWZlZTA5MGZmZmZiZmUwZjNmOGFiZDllOTc0YWRkMTQ1NzViNCIsImE1MDAyNmQ3MzAyN2Y0NmQ0M2ZkYWU2MWZlZTA5MGUwZjNmOGFiZDllOTc0YWRkMTQ1NzViNDMxMzY5NSIsImE1MDAyNmQ3MzAyN2Y0NmQ0M2ZkYWU2MWZlZTA5MGZmZmZiZmUwZjNmOGFiZDllOTc0YWRkMTQ1NzViNDMxMzY5NSIpLm1hcChDdiksdGc9WXYoS3YpLG5nPW5ldyBBcnJheSgzKS5jb25jYXQoImZjOGQ1OWZmZmZiZjkxY2Y2MCIsImQ3MTkxY2ZkYWU2MWE2ZDk2YTFhOTY0MSIsImQ3MTkxY2ZkYWU2MWZmZmZiZmE2ZDk2YTFhOTY0MSIsImQ3MzAyN2ZjOGQ1OWZlZTA4YmQ5ZWY4YjkxY2Y2MDFhOTg1MCIsImQ3MzAyN2ZjOGQ1OWZlZTA4YmZmZmZiZmQ5ZWY4YjkxY2Y2MDFhOTg1MCIsImQ3MzAyN2Y0NmQ0M2ZkYWU2MWZlZTA4YmQ5ZWY4YmE2ZDk2YTY2YmQ2MzFhOTg1MCIsImQ3MzAyN2Y0NmQ0M2ZkYWU2MWZlZTA4YmZmZmZiZmQ5ZWY4YmE2ZDk2YTY2YmQ2MzFhOTg1MCIsImE1MDAyNmQ3MzAyN2Y0NmQ0M2ZkYWU2MWZlZTA4YmQ5ZWY4YmE2ZDk2YTY2YmQ2MzFhOTg1MDAwNjgzNyIsImE1MDAyNmQ3MzAyN2Y0NmQ0M2ZkYWU2MWZlZTA4YmZmZmZiZmQ5ZWY4YmE2ZDk2YTY2YmQ2MzFhOTg1MDAwNjgzNyIpLm1hcChDdiksZWc9WXYobmcpLHJnPW5ldyBBcnJheSgzKS5jb25jYXQoImZjOGQ1OWZmZmZiZjk5ZDU5NCIsImQ3MTkxY2ZkYWU2MWFiZGRhNDJiODNiYSIsImQ3MTkxY2ZkYWU2MWZmZmZiZmFiZGRhNDJiODNiYSIsImQ1M2U0ZmZjOGQ1OWZlZTA4YmU2ZjU5ODk5ZDU5NDMyODhiZCIsImQ1M2U0ZmZjOGQ1OWZlZTA4YmZmZmZiZmU2ZjU5ODk5ZDU5NDMyODhiZCIsImQ1M2U0ZmY0NmQ0M2ZkYWU2MWZlZTA4YmU2ZjU5OGFiZGRhNDY2YzJhNTMyODhiZCIsImQ1M2U0ZmY0NmQ0M2ZkYWU2MWZlZTA4YmZmZmZiZmU2ZjU5OGFiZGRhNDY2YzJhNTMyODhiZCIsIjllMDE0MmQ1M2U0ZmY0NmQ0M2ZkYWU2MWZlZTA4YmU2ZjU5OGFiZGRhNDY2YzJhNTMyODhiZDVlNGZhMiIsIjllMDE0MmQ1M2U0ZmY0NmQ0M2ZkYWU2MWZlZTA4YmZmZmZiZmU2ZjU5OGFiZGRhNDY2YzJhNTMyODhiZDVlNGZhMiIpLm1hcChDdiksaWc9WXYocmcpLG9nPW5ldyBBcnJheSgzKS5jb25jYXQoImU1ZjVmOTk5ZDhjOTJjYTI1ZiIsImVkZjhmYmIyZTJlMjY2YzJhNDIzOGI0NSIsImVkZjhmYmIyZTJlMjY2YzJhNDJjYTI1ZjAwNmQyYyIsImVkZjhmYmNjZWNlNjk5ZDhjOTY2YzJhNDJjYTI1ZjAwNmQyYyIsImVkZjhmYmNjZWNlNjk5ZDhjOTY2YzJhNDQxYWU3NjIzOGI0NTAwNTgyNCIsImY3ZmNmZGU1ZjVmOWNjZWNlNjk5ZDhjOTY2YzJhNDQxYWU3NjIzOGI0NTAwNTgyNCIsImY3ZmNmZGU1ZjVmOWNjZWNlNjk5ZDhjOTY2YzJhNDQxYWU3NjIzOGI0NTAwNmQyYzAwNDQxYiIpLm1hcChDdiksYWc9WXYob2cpLHVnPW5ldyBBcnJheSgzKS5jb25jYXQoImUwZWNmNDllYmNkYTg4NTZhNyIsImVkZjhmYmIzY2RlMzhjOTZjNjg4NDE5ZCIsImVkZjhmYmIzY2RlMzhjOTZjNjg4NTZhNzgxMGY3YyIsImVkZjhmYmJmZDNlNjllYmNkYThjOTZjNjg4NTZhNzgxMGY3YyIsImVkZjhmYmJmZDNlNjllYmNkYThjOTZjNjhjNmJiMTg4NDE5ZDZlMDE2YiIsImY3ZmNmZGUwZWNmNGJmZDNlNjllYmNkYThjOTZjNjhjNmJiMTg4NDE5ZDZlMDE2YiIsImY3ZmNmZGUwZWNmNGJmZDNlNjllYmNkYThjOTZjNjhjNmJiMTg4NDE5ZDgxMGY3YzRkMDA0YiIpLm1hcChDdiksY2c9WXYodWcpLGZnPW5ldyBBcnJheSgzKS5jb25jYXQoImUwZjNkYmE4ZGRiNTQzYTJjYSIsImYwZjllOGJhZTRiYzdiY2NjNDJiOGNiZSIsImYwZjllOGJhZTRiYzdiY2NjNDQzYTJjYTA4NjhhYyIsImYwZjllOGNjZWJjNWE4ZGRiNTdiY2NjNDQzYTJjYTA4NjhhYyIsImYwZjllOGNjZWJjNWE4ZGRiNTdiY2NjNDRlYjNkMzJiOGNiZTA4NTg5ZSIsImY3ZmNmMGUwZjNkYmNjZWJjNWE4ZGRiNTdiY2NjNDRlYjNkMzJiOGNiZTA4NTg5ZSIsImY3ZmNmMGUwZjNkYmNjZWJjNWE4ZGRiNTdiY2NjNDRlYjNkMzJiOGNiZTA4NjhhYzA4NDA4MSIpLm1hcChDdiksc2c9WXYoZmcpLGxnPW5ldyBBcnJheSgzKS5jb25jYXQoImZlZThjOGZkYmI4NGUzNGEzMyIsImZlZjBkOWZkY2M4YWZjOGQ1OWQ3MzAxZiIsImZlZjBkOWZkY2M4YWZjOGQ1OWUzNGEzM2IzMDAwMCIsImZlZjBkOWZkZDQ5ZWZkYmI4NGZjOGQ1OWUzNGEzM2IzMDAwMCIsImZlZjBkOWZkZDQ5ZWZkYmI4NGZjOGQ1OWVmNjU0OGQ3MzAxZjk5MDAwMCIsImZmZjdlY2ZlZThjOGZkZDQ5ZWZkYmI4NGZjOGQ1OWVmNjU0OGQ3MzAxZjk5MDAwMCIsImZmZjdlY2ZlZThjOGZkZDQ5ZWZkYmI4NGZjOGQ1OWVmNjU0OGQ3MzAxZmIzMDAwMDdmMDAwMCIpLm1hcChDdiksaGc9WXYobGcpLGRnPW5ldyBBcnJheSgzKS5jb25jYXQoImVjZTJmMGE2YmRkYjFjOTA5OSIsImY2ZWZmN2JkYzllMTY3YTljZjAyODE4YSIsImY2ZWZmN2JkYzllMTY3YTljZjFjOTA5OTAxNmM1OSIsImY2ZWZmN2QwZDFlNmE2YmRkYjY3YTljZjFjOTA5OTAxNmM1OSIsImY2ZWZmN2QwZDFlNmE2YmRkYjY3YTljZjM2OTBjMDAyODE4YTAxNjQ1MCIsImZmZjdmYmVjZTJmMGQwZDFlNmE2YmRkYjY3YTljZjM2OTBjMDAyODE4YTAxNjQ1MCIsImZmZjdmYmVjZTJmMGQwZDFlNmE2YmRkYjY3YTljZjM2OTBjMDAyODE4YTAxNmM1OTAxNDYzNiIpLm1hcChDdikscGc9WXYoZGcpLHZnPW5ldyBBcnJheSgzKS5jb25jYXQoImVjZTdmMmE2YmRkYjJiOGNiZSIsImYxZWVmNmJkYzllMTc0YTljZjA1NzBiMCIsImYxZWVmNmJkYzllMTc0YTljZjJiOGNiZTA0NWE4ZCIsImYxZWVmNmQwZDFlNmE2YmRkYjc0YTljZjJiOGNiZTA0NWE4ZCIsImYxZWVmNmQwZDFlNmE2YmRkYjc0YTljZjM2OTBjMDA1NzBiMDAzNGU3YiIsImZmZjdmYmVjZTdmMmQwZDFlNmE2YmRkYjc0YTljZjM2OTBjMDA1NzBiMDAzNGU3YiIsImZmZjdmYmVjZTdmMmQwZDFlNmE2YmRkYjc0YTljZjM2OTBjMDA1NzBiMDA0NWE4ZDAyMzg1OCIpLm1hcChDdiksZ2c9WXYodmcpLHlnPW5ldyBBcnJheSgzKS5jb25jYXQoImU3ZTFlZmM5OTRjN2RkMWM3NyIsImYxZWVmNmQ3YjVkOGRmNjViMGNlMTI1NiIsImYxZWVmNmQ3YjVkOGRmNjViMGRkMWM3Nzk4MDA0MyIsImYxZWVmNmQ0YjlkYWM5OTRjN2RmNjViMGRkMWM3Nzk4MDA0MyIsImYxZWVmNmQ0YjlkYWM5OTRjN2RmNjViMGU3Mjk4YWNlMTI1NjkxMDAzZiIsImY3ZjRmOWU3ZTFlZmQ0YjlkYWM5OTRjN2RmNjViMGU3Mjk4YWNlMTI1NjkxMDAzZiIsImY3ZjRmOWU3ZTFlZmQ0YjlkYWM5OTRjN2RmNjViMGU3Mjk4YWNlMTI1Njk4MDA0MzY3MDAxZiIpLm1hcChDdiksX2c9WXYoeWcpLGJnPW5ldyBBcnJheSgzKS5jb25jYXQoImZkZTBkZGZhOWZiNWM1MWI4YSIsImZlZWJlMmZiYjRiOWY3NjhhMWFlMDE3ZSIsImZlZWJlMmZiYjRiOWY3NjhhMWM1MWI4YTdhMDE3NyIsImZlZWJlMmZjYzVjMGZhOWZiNWY3NjhhMWM1MWI4YTdhMDE3NyIsImZlZWJlMmZjYzVjMGZhOWZiNWY3NjhhMWRkMzQ5N2FlMDE3ZTdhMDE3NyIsImZmZjdmM2ZkZTBkZGZjYzVjMGZhOWZiNWY3NjhhMWRkMzQ5N2FlMDE3ZTdhMDE3NyIsImZmZjdmM2ZkZTBkZGZjYzVjMGZhOWZiNWY3NjhhMWRkMzQ5N2FlMDE3ZTdhMDE3NzQ5MDA2YSIpLm1hcChDdiksbWc9WXYoYmcpLHhnPW5ldyBBcnJheSgzKS5jb25jYXQoImVkZjhiMTdmY2RiYjJjN2ZiOCIsImZmZmZjY2ExZGFiNDQxYjZjNDIyNWVhOCIsImZmZmZjY2ExZGFiNDQxYjZjNDJjN2ZiODI1MzQ5NCIsImZmZmZjY2M3ZTliNDdmY2RiYjQxYjZjNDJjN2ZiODI1MzQ5NCIsImZmZmZjY2M3ZTliNDdmY2RiYjQxYjZjNDFkOTFjMDIyNWVhODBjMmM4NCIsImZmZmZkOWVkZjhiMWM3ZTliNDdmY2RiYjQxYjZjNDFkOTFjMDIyNWVhODBjMmM4NCIsImZmZmZkOWVkZjhiMWM3ZTliNDdmY2RiYjQxYjZjNDFkOTFjMDIyNWVhODI1MzQ5NDA4MWQ1OCIpLm1hcChDdiksd2c9WXYoeGcpLE1nPW5ldyBBcnJheSgzKS5jb25jYXQoImY3ZmNiOWFkZGQ4ZTMxYTM1NCIsImZmZmZjY2MyZTY5OTc4YzY3OTIzODQ0MyIsImZmZmZjY2MyZTY5OTc4YzY3OTMxYTM1NDAwNjgzNyIsImZmZmZjY2Q5ZjBhM2FkZGQ4ZTc4YzY3OTMxYTM1NDAwNjgzNyIsImZmZmZjY2Q5ZjBhM2FkZGQ4ZTc4YzY3OTQxYWI1ZDIzODQ0MzAwNWEzMiIsImZmZmZlNWY3ZmNiOWQ5ZjBhM2FkZGQ4ZTc4YzY3OTQxYWI1ZDIzODQ0MzAwNWEzMiIsImZmZmZlNWY3ZmNiOWQ5ZjBhM2FkZGQ4ZTc4YzY3OTQxYWI1ZDIzODQ0MzAwNjgzNzAwNDUyOSIpLm1hcChDdiksTmc9WXYoTWcpLEFnPW5ldyBBcnJheSgzKS5jb25jYXQoImZmZjdiY2ZlYzQ0ZmQ5NWYwZSIsImZmZmZkNGZlZDk4ZWZlOTkyOWNjNGMwMiIsImZmZmZkNGZlZDk4ZWZlOTkyOWQ5NWYwZTk5MzQwNCIsImZmZmZkNGZlZTM5MWZlYzQ0ZmZlOTkyOWQ5NWYwZTk5MzQwNCIsImZmZmZkNGZlZTM5MWZlYzQ0ZmZlOTkyOWVjNzAxNGNjNGMwMjhjMmQwNCIsImZmZmZlNWZmZjdiY2ZlZTM5MWZlYzQ0ZmZlOTkyOWVjNzAxNGNjNGMwMjhjMmQwNCIsImZmZmZlNWZmZjdiY2ZlZTM5MWZlYzQ0ZmZlOTkyOWVjNzAxNGNjNGMwMjk5MzQwNDY2MjUwNiIpLm1hcChDdiksVGc9WXYoQWcpLFNnPW5ldyBBcnJheSgzKS5jb25jYXQoImZmZWRhMGZlYjI0Y2YwM2IyMCIsImZmZmZiMmZlY2M1Y2ZkOGQzY2UzMWExYyIsImZmZmZiMmZlY2M1Y2ZkOGQzY2YwM2IyMGJkMDAyNiIsImZmZmZiMmZlZDk3NmZlYjI0Y2ZkOGQzY2YwM2IyMGJkMDAyNiIsImZmZmZiMmZlZDk3NmZlYjI0Y2ZkOGQzY2ZjNGUyYWUzMWExY2IxMDAyNiIsImZmZmZjY2ZmZWRhMGZlZDk3NmZlYjI0Y2ZkOGQzY2ZjNGUyYWUzMWExY2IxMDAyNiIsImZmZmZjY2ZmZWRhMGZlZDk3NmZlYjI0Y2ZkOGQzY2ZjNGUyYWUzMWExY2JkMDAyNjgwMDAyNiIpLm1hcChDdiksa2c9WXYoU2cpLEVnPW5ldyBBcnJheSgzKS5jb25jYXQoImRlZWJmNzllY2FlMTMxODJiZCIsImVmZjNmZmJkZDdlNzZiYWVkNjIxNzFiNSIsImVmZjNmZmJkZDdlNzZiYWVkNjMxODJiZDA4NTE5YyIsImVmZjNmZmM2ZGJlZjllY2FlMTZiYWVkNjMxODJiZDA4NTE5YyIsImVmZjNmZmM2ZGJlZjllY2FlMTZiYWVkNjQyOTJjNjIxNzFiNTA4NDU5NCIsImY3ZmJmZmRlZWJmN2M2ZGJlZjllY2FlMTZiYWVkNjQyOTJjNjIxNzFiNTA4NDU5NCIsImY3ZmJmZmRlZWJmN2M2ZGJlZjllY2FlMTZiYWVkNjQyOTJjNjIxNzFiNTA4NTE5YzA4MzA2YiIpLm1hcChDdiksQ2c9WXYoRWcpLFBnPW5ldyBBcnJheSgzKS5jb25jYXQoImU1ZjVlMGExZDk5YjMxYTM1NCIsImVkZjhlOWJhZTRiMzc0YzQ3NjIzOGI0NSIsImVkZjhlOWJhZTRiMzc0YzQ3NjMxYTM1NDAwNmQyYyIsImVkZjhlOWM3ZTljMGExZDk5Yjc0YzQ3NjMxYTM1NDAwNmQyYyIsImVkZjhlOWM3ZTljMGExZDk5Yjc0YzQ3NjQxYWI1ZDIzOGI0NTAwNWEzMiIsImY3ZmNmNWU1ZjVlMGM3ZTljMGExZDk5Yjc0YzQ3NjQxYWI1ZDIzOGI0NTAwNWEzMiIsImY3ZmNmNWU1ZjVlMGM3ZTljMGExZDk5Yjc0YzQ3NjQxYWI1ZDIzOGI0NTAwNmQyYzAwNDQxYiIpLm1hcChDdiksemc9WXYoUGcpLFJnPW5ldyBBcnJheSgzKS5jb25jYXQoImYwZjBmMGJkYmRiZDYzNjM2MyIsImY3ZjdmN2NjY2NjYzk2OTY5NjUyNTI1MiIsImY3ZjdmN2NjY2NjYzk2OTY5NjYzNjM2MzI1MjUyNSIsImY3ZjdmN2Q5ZDlkOWJkYmRiZDk2OTY5NjYzNjM2MzI1MjUyNSIsImY3ZjdmN2Q5ZDlkOWJkYmRiZDk2OTY5NjczNzM3MzUyNTI1MjI1MjUyNSIsImZmZmZmZmYwZjBmMGQ5ZDlkOWJkYmRiZDk2OTY5NjczNzM3MzUyNTI1MjI1MjUyNSIsImZmZmZmZmYwZjBmMGQ5ZDlkOWJkYmRiZDk2OTY5NjczNzM3MzUyNTI1MjI1MjUyNTAwMDAwMCIpLm1hcChDdiksRGc9WXYoUmcpLHFnPW5ldyBBcnJheSgzKS5jb25jYXQoImVmZWRmNWJjYmRkYzc1NmJiMSIsImYyZjBmN2NiYzllMjllOWFjODZhNTFhMyIsImYyZjBmN2NiYzllMjllOWFjODc1NmJiMTU0Mjc4ZiIsImYyZjBmN2RhZGFlYmJjYmRkYzllOWFjODc1NmJiMTU0Mjc4ZiIsImYyZjBmN2RhZGFlYmJjYmRkYzllOWFjODgwN2RiYTZhNTFhMzRhMTQ4NiIsImZjZmJmZGVmZWRmNWRhZGFlYmJjYmRkYzllOWFjODgwN2RiYTZhNTFhMzRhMTQ4NiIsImZjZmJmZGVmZWRmNWRhZGFlYmJjYmRkYzllOWFjODgwN2RiYTZhNTFhMzU0Mjc4ZjNmMDA3ZCIpLm1hcChDdiksTGc9WXYocWcpLFVnPW5ldyBBcnJheSgzKS5jb25jYXQoImZlZTBkMmZjOTI3MmRlMmQyNiIsImZlZTVkOWZjYWU5MWZiNmE0YWNiMTgxZCIsImZlZTVkOWZjYWU5MWZiNmE0YWRlMmQyNmE1MGYxNSIsImZlZTVkOWZjYmJhMWZjOTI3MmZiNmE0YWRlMmQyNmE1MGYxNSIsImZlZTVkOWZjYmJhMWZjOTI3MmZiNmE0YWVmM2IyY2NiMTgxZDk5MDAwZCIsImZmZjVmMGZlZTBkMmZjYmJhMWZjOTI3MmZiNmE0YWVmM2IyY2NiMTgxZDk5MDAwZCIsImZmZjVmMGZlZTBkMmZjYmJhMWZjOTI3MmZiNmE0YWVmM2IyY2NiMTgxZGE1MGYxNTY3MDAwZCIpLm1hcChDdiksT2c9WXYoVWcpLEJnPW5ldyBBcnJheSgzKS5jb25jYXQoImZlZTZjZWZkYWU2YmU2NTUwZCIsImZlZWRkZWZkYmU4NWZkOGQzY2Q5NDcwMSIsImZlZWRkZWZkYmU4NWZkOGQzY2U2NTUwZGE2MzYwMyIsImZlZWRkZWZkZDBhMmZkYWU2YmZkOGQzY2U2NTUwZGE2MzYwMyIsImZlZWRkZWZkZDBhMmZkYWU2YmZkOGQzY2YxNjkxM2Q5NDgwMThjMmQwNCIsImZmZjVlYmZlZTZjZWZkZDBhMmZkYWU2YmZkOGQzY2YxNjkxM2Q5NDgwMThjMmQwNCIsImZmZjVlYmZlZTZjZWZkZDBhMmZkYWU2YmZkOGQzY2YxNjkxM2Q5NDgwMWE2MzYwMzdmMjcwNCIpLm1hcChDdiksWWc9WXYoQmcpLEZnPWplKFpuKDMwMCwuNSwwKSxabigtMjQwLC41LDEpKSxJZz1qZShabigtMTAwLC43NSwuMzUpLFpuKDgwLDEuNSwuOCkpLGpnPWplKFpuKDI2MCwuNzUsLjM1KSxabig4MCwxLjUsLjgpKSxIZz1abigpO3ZhciBYZz1nbigpLEdnPU1hdGguUEkvMyxWZz0yKk1hdGguUEkvMztmdW5jdGlvbiAkZyh0KXt2YXIgbj10Lmxlbmd0aDtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIHRbTWF0aC5tYXgoMCxNYXRoLm1pbihuLTEsTWF0aC5mbG9vcihlKm4pKSldfX12YXIgV2c9JGcoQ3YoIjQ0MDE1NDQ0MDI1NjQ1MDQ1NzQ1MDU1OTQ2MDc1YTQ2MDg1YzQ2MGE1ZDQ2MGI1ZTQ3MGQ2MDQ3MGU2MTQ3MTA2MzQ3MTE2NDQ3MTM2NTQ4MTQ2NzQ4MTY2ODQ4MTc2OTQ4MTg2YTQ4MWE2YzQ4MWI2ZDQ4MWM2ZTQ4MWQ2ZjQ4MWY3MDQ4MjA3MTQ4MjE3MzQ4MjM3NDQ4MjQ3NTQ4MjU3NjQ4MjY3NzQ4Mjg3ODQ4Mjk3OTQ3MmE3YTQ3MmM3YTQ3MmQ3YjQ3MmU3YzQ3MmY3ZDQ2MzA3ZTQ2MzI3ZTQ2MzM3ZjQ2MzQ4MDQ1MzU4MTQ1Mzc4MTQ1Mzg4MjQ0Mzk4MzQ0M2E4MzQ0M2I4NDQzM2Q4NDQzM2U4NTQyM2Y4NTQyNDA4NjQyNDE4NjQxNDI4NzQxNDQ4NzQwNDU4ODQwNDY4ODNmNDc4ODNmNDg4OTNlNDk4OTNlNGE4OTNlNGM4YTNkNGQ4YTNkNGU4YTNjNGY4YTNjNTA4YjNiNTE4YjNiNTI4YjNhNTM4YjNhNTQ4YzM5NTU4YzM5NTY4YzM4NTg4YzM4NTk4YzM3NWE4YzM3NWI4ZDM2NWM4ZDM2NWQ4ZDM1NWU4ZDM1NWY4ZDM0NjA4ZDM0NjE4ZDMzNjI4ZDMzNjM4ZDMyNjQ4ZTMyNjU4ZTMxNjY4ZTMxNjc4ZTMxNjg4ZTMwNjk4ZTMwNmE4ZTJmNmI4ZTJmNmM4ZTJlNmQ4ZTJlNmU4ZTJlNmY4ZTJkNzA4ZTJkNzE4ZTJjNzE4ZTJjNzI4ZTJjNzM4ZTJiNzQ4ZTJiNzU4ZTJhNzY4ZTJhNzc4ZTJhNzg4ZTI5Nzk4ZTI5N2E4ZTI5N2I4ZTI4N2M4ZTI4N2Q4ZTI3N2U4ZTI3N2Y4ZTI3ODA4ZTI2ODE4ZTI2ODI4ZTI2ODI4ZTI1ODM4ZTI1ODQ4ZTI1ODU4ZTI0ODY4ZTI0ODc4ZTIzODg4ZTIzODk4ZTIzOGE4ZDIyOGI4ZDIyOGM4ZDIyOGQ4ZDIxOGU4ZDIxOGY4ZDIxOTA4ZDIxOTE4YzIwOTI4YzIwOTI4YzIwOTM4YzFmOTQ4YzFmOTU4YjFmOTY4YjFmOTc4YjFmOTg4YjFmOTk4YTFmOWE4YTFlOWI4YTFlOWM4OTFlOWQ4OTFmOWU4OTFmOWY4ODFmYTA4ODFmYTE4ODFmYTE4NzFmYTI4NzIwYTM4NjIwYTQ4NjIxYTU4NTIxYTY4NTIyYTc4NTIyYTg4NDIzYTk4MzI0YWE4MzI1YWI4MjI1YWM4MjI2YWQ4MTI3YWQ4MTI4YWU4MDI5YWY3ZjJhYjA3ZjJjYjE3ZTJkYjI3ZDJlYjM3YzJmYjQ3YzMxYjU3YjMyYjY3YTM0YjY3OTM1Yjc3OTM3Yjg3ODM4Yjk3NzNhYmE3NjNiYmI3NTNkYmM3NDNmYmM3MzQwYmQ3MjQyYmU3MTQ0YmY3MDQ2YzA2ZjQ4YzE2ZTRhYzE2ZDRjYzI2YzRlYzM2YjUwYzQ2YTUyYzU2OTU0YzU2ODU2YzY2NzU4Yzc2NTVhYzg2NDVjYzg2MzVlYzk2MjYwY2E2MDYzY2I1ZjY1Y2I1ZTY3Y2M1YzY5Y2Q1YjZjY2Q1YTZlY2U1ODcwY2Y1NzczZDA1Njc1ZDA1NDc3ZDE1MzdhZDE1MTdjZDI1MDdmZDM0ZTgxZDM0ZDg0ZDQ0Yjg2ZDU0OTg5ZDU0ODhiZDY0NjhlZDY0NTkwZDc0MzkzZDc0MTk1ZDg0MDk4ZDgzZTliZDkzYzlkZDkzYmEwZGEzOWEyZGEzN2E1ZGIzNmE4ZGIzNGFhZGMzMmFkZGMzMGIwZGQyZmIyZGQyZGI1ZGUyYmI4ZGUyOWJhZGUyOGJkZGYyNmMwZGYyNWMyZGYyM2M1ZTAyMWM4ZTAyMGNhZTExZmNkZTExZGQwZTExY2QyZTIxYmQ1ZTIxYWQ4ZTIxOWRhZTMxOWRkZTMxOGRmZTMxOGUyZTQxOGU1ZTQxOWU3ZTQxOWVhZTUxYWVjZTUxYmVmZTUxY2YxZTUxZGY0ZTYxZWY2ZTYyMGY4ZTYyMWZiZTcyM2ZkZTcyNSIpKSxaZz0kZyhDdigiMDAwMDA0MDEwMDA1MDEwMTA2MDEwMTA4MDIwMTA5MDIwMjBiMDIwMjBkMDMwMzBmMDMwMzEyMDQwNDE0MDUwNDE2MDYwNTE4MDYwNTFhMDcwNjFjMDgwNzFlMDkwNzIwMGEwODIyMGIwOTI0MGMwOTI2MGQwYTI5MGUwYjJiMTAwYjJkMTEwYzJmMTIwZDMxMTMwZDM0MTQwZTM2MTUwZTM4MTYwZjNiMTgwZjNkMTkxMDNmMWExMDQyMWMxMDQ0MWQxMTQ3MWUxMTQ5MjAxMTRiMjExMTRlMjIxMTUwMjQxMjUzMjUxMjU1MjcxMjU4MjkxMTVhMmExMTVjMmMxMTVmMmQxMTYxMmYxMTYzMzExMTY1MzMxMDY3MzQxMDY5MzYxMDZiMzgxMDZjMzkwZjZlM2IwZjcwM2QwZjcxM2YwZjcyNDAwZjc0NDIwZjc1NDQwZjc2NDUxMDc3NDcxMDc4NDkxMDc4NGExMDc5NGMxMTdhNGUxMTdiNGYxMjdiNTExMjdjNTIxMzdjNTQxMzdkNTYxNDdkNTcxNTdlNTkxNTdlNWExNjdlNWMxNjdmNWQxNzdmNWYxODdmNjAxODgwNjIxOTgwNjQxYTgwNjUxYTgwNjcxYjgwNjgxYzgxNmExYzgxNmIxZDgxNmQxZDgxNmUxZTgxNzAxZjgxNzIxZjgxNzMyMDgxNzUyMTgxNzYyMTgxNzgyMjgxNzkyMjgyN2IyMzgyN2MyMzgyN2UyNDgyODAyNTgyODEyNTgxODMyNjgxODQyNjgxODYyNzgxODgyNzgxODkyODgxOGIyOTgxOGMyOTgxOGUyYTgxOTAyYTgxOTEyYjgxOTMyYjgwOTQyYzgwOTYyYzgwOTgyZDgwOTkyZDgwOWIyZTdmOWMyZTdmOWUyZjdmYTAyZjdmYTEzMDdlYTMzMDdlYTUzMTdlYTYzMTdkYTgzMjdkYWEzMzdkYWIzMzdjYWQzNDdjYWUzNDdiYjAzNTdiYjIzNTdiYjMzNjdhYjUzNjdhYjczNzc5YjgzNzc5YmEzODc4YmMzOTc4YmQzOTc3YmYzYTc3YzAzYTc2YzIzYjc1YzQzYzc1YzUzYzc0YzczZDczYzgzZTczY2EzZTcyY2MzZjcxY2Q0MDcxY2Y0MDcwZDA0MTZmZDI0MjZmZDM0MzZlZDU0NDZkZDY0NTZjZDg0NTZjZDk0NjZiZGI0NzZhZGM0ODY5ZGU0OTY4ZGY0YTY4ZTA0YzY3ZTI0ZDY2ZTM0ZTY1ZTQ0ZjY0ZTU1MDY0ZTc1MjYzZTg1MzYyZTk1NDYyZWE1NjYxZWI1NzYwZWM1ODYwZWQ1YTVmZWU1YjVlZWY1ZDVlZjA1ZjVlZjE2MDVkZjI2MjVkZjI2NDVjZjM2NTVjZjQ2NzVjZjQ2OTVjZjU2YjVjZjY2YzVjZjY2ZTVjZjc3MDVjZjc3MjVjZjg3NDVjZjg3NjVjZjk3ODVkZjk3OTVkZjk3YjVkZmE3ZDVlZmE3ZjVlZmE4MTVmZmI4MzVmZmI4NTYwZmI4NzYxZmM4OTYxZmM4YTYyZmM4YzYzZmM4ZTY0ZmM5MDY1ZmQ5MjY2ZmQ5NDY3ZmQ5NjY4ZmQ5ODY5ZmQ5YTZhZmQ5YjZiZmU5ZDZjZmU5ZjZkZmVhMTZlZmVhMzZmZmVhNTcxZmVhNzcyZmVhOTczZmVhYTc0ZmVhYzc2ZmVhZTc3ZmViMDc4ZmViMjdhZmViNDdiZmViNjdjZmViNzdlZmViOTdmZmViYjgxZmViZDgyZmViZjg0ZmVjMTg1ZmVjMjg3ZmVjNDg4ZmVjNjhhZmVjODhjZmVjYThkZmVjYzhmZmVjZDkwZmVjZjkyZmVkMTk0ZmVkMzk1ZmVkNTk3ZmVkNzk5ZmVkODlhZmRkYTljZmRkYzllZmRkZWEwZmRlMGExZmRlMmEzZmRlM2E1ZmRlNWE3ZmRlN2E5ZmRlOWFhZmRlYmFjZmNlY2FlZmNlZWIwZmNmMGIyZmNmMmI0ZmNmNGI2ZmNmNmI4ZmNmN2I5ZmNmOWJiZmNmYmJkZmNmZGJmIikpLFFnPSRnKEN2KCIwMDAwMDQwMTAwMDUwMTAxMDYwMTAxMDgwMjAxMGEwMjAyMGMwMjAyMGUwMzAyMTAwNDAzMTIwNDAzMTQwNTA0MTcwNjA0MTkwNzA1MWIwODA1MWQwOTA2MWYwYTA3MjIwYjA3MjQwYzA4MjYwZDA4MjkwZTA5MmIxMDA5MmQxMTBhMzAxMjBhMzIxNDBiMzQxNTBiMzcxNjBiMzkxODBjM2MxOTBjM2UxYjBjNDExYzBjNDMxZTBjNDUxZjBjNDgyMTBjNGEyMzBjNGMyNDBjNGYyNjBjNTEyODBiNTMyOTBiNTUyYjBiNTcyZDBiNTkyZjBhNWIzMTBhNWMzMjBhNWUzNDBhNWYzNjA5NjEzODA5NjIzOTA5NjMzYjA5NjQzZDA5NjUzZTA5NjY0MDBhNjc0MjBhNjg0NDBhNjg0NTBhNjk0NzBiNmE0OTBiNmE0YTBjNmI0YzBjNmI0ZDBkNmM0ZjBkNmM1MTBlNmM1MjBlNmQ1NDBmNmQ1NTBmNmQ1NzEwNmU1OTEwNmU1YTExNmU1YzEyNmU1ZDEyNmU1ZjEzNmU2MTEzNmU2MjE0NmU2NDE1NmU2NTE1NmU2NzE2NmU2OTE2NmU2YTE3NmU2YzE4NmU2ZDE4NmU2ZjE5NmU3MTE5NmU3MjFhNmU3NDFhNmU3NTFiNmU3NzFjNmQ3ODFjNmQ3YTFkNmQ3YzFkNmQ3ZDFlNmQ3ZjFlNmM4MDFmNmM4MjIwNmM4NDIwNmI4NTIxNmI4NzIxNmI4ODIyNmE4YTIyNmE4YzIzNjk4ZDIzNjk4ZjI0Njk5MDI1Njg5MjI1Njg5MzI2Njc5NTI2Njc5NzI3NjY5ODI3NjY5YTI4NjU5YjI5NjQ5ZDI5NjQ5ZjJhNjNhMDJhNjNhMjJiNjJhMzJjNjFhNTJjNjBhNjJkNjBhODJlNWZhOTJlNWVhYjJmNWVhZDMwNWRhZTMwNWNiMDMxNWJiMTMyNWFiMzMyNWFiNDMzNTliNjM0NThiNzM1NTdiOTM1NTZiYTM2NTViYzM3NTRiZDM4NTNiZjM5NTJjMDNhNTFjMTNhNTBjMzNiNGZjNDNjNGVjNjNkNGRjNzNlNGNjODNmNGJjYTQwNGFjYjQxNDljYzQyNDhjZTQzNDdjZjQ0NDZkMDQ1NDVkMjQ2NDRkMzQ3NDNkNDQ4NDJkNTRhNDFkNzRiM2ZkODRjM2VkOTRkM2RkYTRlM2NkYjUwM2JkZDUxM2FkZTUyMzhkZjUzMzdlMDU1MzZlMTU2MzVlMjU3MzRlMzU5MzNlNDVhMzFlNTVjMzBlNjVkMmZlNzVlMmVlODYwMmRlOTYxMmJlYTYzMmFlYjY0MjllYjY2MjhlYzY3MjZlZDY5MjVlZTZhMjRlZjZjMjNlZjZlMjFmMDZmMjBmMTcxMWZmMTczMWRmMjc0MWNmMzc2MWJmMzc4MTlmNDc5MThmNTdiMTdmNTdkMTVmNjdlMTRmNjgwMTNmNzgyMTJmNzg0MTBmODg1MGZmODg3MGVmODg5MGNmOThiMGJmOThjMGFmOThlMDlmYTkwMDhmYTkyMDdmYTk0MDdmYjk2MDZmYjk3MDZmYjk5MDZmYjliMDZmYjlkMDdmYzlmMDdmY2ExMDhmY2EzMDlmY2E1MGFmY2E2MGNmY2E4MGRmY2FhMGZmY2FjMTFmY2FlMTJmY2IwMTRmY2IyMTZmY2I0MThmYmI2MWFmYmI4MWRmYmJhMWZmYmJjMjFmYmJlMjNmYWMwMjZmYWMyMjhmYWM0MmFmYWM2MmRmOWM3MmZmOWM5MzJmOWNiMzVmOGNkMzdmOGNmM2FmN2QxM2RmN2QzNDBmNmQ1NDNmNmQ3NDZmNWQ5NDlmNWRiNGNmNGRkNGZmNGRmNTNmNGUxNTZmM2UzNWFmM2U1NWRmMmU2NjFmMmU4NjVmMmVhNjlmMWVjNmRmMWVkNzFmMWVmNzVmMWYxNzlmMmYyN2RmMmY0ODJmM2Y1ODZmM2Y2OGFmNGY4OGVmNWY5OTJmNmZhOTZmOGZiOWFmOWZjOWRmYWZkYTFmY2ZmYTQiKSksSmc9JGcoQ3YoIjBkMDg4NzEwMDc4ODEzMDc4OTE2MDc4YTE5MDY4YzFiMDY4ZDFkMDY4ZTIwMDY4ZjIyMDY5MDI0MDY5MTI2MDU5MTI4MDU5MjJhMDU5MzJjMDU5NDJlMDU5NTJmMDU5NjMxMDU5NzMzMDU5NzM1MDQ5ODM3MDQ5OTM4MDQ5YTNhMDQ5YTNjMDQ5YjNlMDQ5YzNmMDQ5YzQxMDQ5ZDQzMDM5ZTQ0MDM5ZTQ2MDM5ZjQ4MDM5ZjQ5MDNhMDRiMDNhMTRjMDJhMTRlMDJhMjUwMDJhMjUxMDJhMzUzMDJhMzU1MDJhNDU2MDFhNDU4MDFhNDU5MDFhNTViMDFhNTVjMDFhNjVlMDFhNjYwMDFhNjYxMDBhNzYzMDBhNzY0MDBhNzY2MDBhNzY3MDBhODY5MDBhODZhMDBhODZjMDBhODZlMDBhODZmMDBhODcxMDBhODcyMDFhODc0MDFhODc1MDFhODc3MDFhODc4MDFhODdhMDJhODdiMDJhODdkMDNhODdlMDNhODgwMDRhODgxMDRhNzgzMDVhNzg0MDVhNzg2MDZhNjg3MDdhNjg4MDhhNjhhMDlhNThiMGFhNThkMGJhNThlMGNhNDhmMGRhNDkxMGVhMzkyMGZhMzk0MTBhMjk1MTFhMTk2MTNhMTk4MTRhMDk5MTU5ZjlhMTY5ZjljMTc5ZTlkMTg5ZDllMTk5ZGEwMWE5Y2ExMWI5YmEyMWQ5YWEzMWU5YWE1MWY5OWE2MjA5OGE3MjE5N2E4MjI5NmFhMjM5NWFiMjQ5NGFjMjY5NGFkMjc5M2FlMjg5MmIwMjk5MWIxMmE5MGIyMmI4ZmIzMmM4ZWI0MmU4ZGI1MmY4Y2I2MzA4YmI3MzE4YWI4MzI4OWJhMzM4OGJiMzQ4OGJjMzU4N2JkMzc4NmJlMzg4NWJmMzk4NGMwM2E4M2MxM2I4MmMyM2M4MWMzM2Q4MGM0M2U3ZmM1NDA3ZWM2NDE3ZGM3NDI3Y2M4NDM3YmM5NDQ3YWNhNDU3YWNiNDY3OWNjNDc3OGNjNDk3N2NkNGE3NmNlNGI3NWNmNGM3NGQwNGQ3M2QxNGU3MmQyNGY3MWQzNTE3MWQ0NTI3MGQ1NTM2ZmQ1NTQ2ZWQ2NTU2ZGQ3NTY2Y2Q4NTc2YmQ5NTg2YWRhNWE2YWRhNWI2OWRiNWM2OGRjNWQ2N2RkNWU2NmRlNWY2NWRlNjE2NGRmNjI2M2UwNjM2M2UxNjQ2MmUyNjU2MWUyNjY2MGUzNjg1ZmU0Njk1ZWU1NmE1ZGU1NmI1ZGU2NmM1Y2U3NmU1YmU3NmY1YWU4NzA1OWU5NzE1OGU5NzI1N2VhNzQ1N2ViNzU1NmViNzY1NWVjNzc1NGVkNzk1M2VkN2E1MmVlN2I1MWVmN2M1MWVmN2U1MGYwN2Y0ZmYwODA0ZWYxODE0ZGYxODM0Y2YyODQ0YmYzODU0YmYzODc0YWY0ODg0OWY0ODk0OGY1OGI0N2Y1OGM0NmY2OGQ0NWY2OGY0NGY3OTA0NGY3OTE0M2Y3OTM0MmY4OTQ0MWY4OTU0MGY5OTczZmY5OTgzZWY5OWEzZWZhOWIzZGZhOWMzY2ZhOWUzYmZiOWYzYWZiYTEzOWZiYTIzOGZjYTMzOGZjYTUzN2ZjYTYzNmZjYTgzNWZjYTkzNGZkYWIzM2ZkYWMzM2ZkYWUzMmZkYWYzMWZkYjEzMGZkYjIyZmZkYjQyZmZkYjUyZWZlYjcyZGZlYjgyY2ZlYmEyY2ZlYmIyYmZlYmQyYWZlYmUyYWZlYzAyOWZkYzIyOWZkYzMyOGZkYzUyN2ZkYzYyN2ZkYzgyN2ZkY2EyNmZkY2IyNmZjY2QyNWZjY2UyNWZjZDAyNWZjZDIyNWZiZDMyNGZiZDUyNGZiZDcyNGZhZDgyNGZhZGEyNGY5ZGMyNGY5ZGQyNWY4ZGYyNWY4ZTEyNWY3ZTIyNWY3ZTQyNWY2ZTYyNmY2ZTgyNmY1ZTkyNmY1ZWIyN2Y0ZWQyN2YzZWUyN2YzZjAyN2YyZjIyN2YxZjQyNmYxZjUyNWYwZjcyNGYwZjkyMSIpKTtmdW5jdGlvbiBLZyh0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdH19dmFyIHR5PU1hdGguYWJzLG55PU1hdGguYXRhbjIsZXk9TWF0aC5jb3Mscnk9TWF0aC5tYXgsaXk9TWF0aC5taW4sb3k9TWF0aC5zaW4sYXk9TWF0aC5zcXJ0LHV5PTFlLTEyLGN5PU1hdGguUEksZnk9Y3kvMixzeT0yKmN5O2Z1bmN0aW9uIGx5KHQpe3JldHVybiB0Pj0xP2Z5OnQ8PS0xPy1meTpNYXRoLmFzaW4odCl9ZnVuY3Rpb24gaHkodCl7cmV0dXJuIHQuaW5uZXJSYWRpdXN9ZnVuY3Rpb24gZHkodCl7cmV0dXJuIHQub3V0ZXJSYWRpdXN9ZnVuY3Rpb24gcHkodCl7cmV0dXJuIHQuc3RhcnRBbmdsZX1mdW5jdGlvbiB2eSh0KXtyZXR1cm4gdC5lbmRBbmdsZX1mdW5jdGlvbiBneSh0KXtyZXR1cm4gdCYmdC5wYWRBbmdsZX1mdW5jdGlvbiB5eSh0LG4sZSxyLGksbyxhKXt2YXIgdT10LWUsYz1uLXIsZj0oYT9vOi1vKS9heSh1KnUrYypjKSxzPWYqYyxsPS1mKnUsaD10K3MsZD1uK2wscD1lK3Msdj1yK2wsZz0oaCtwKS8yLHk9KGQrdikvMixfPXAtaCxiPXYtZCxtPV8qXytiKmIseD1pLW8sdz1oKnYtcCpkLE09KGI8MD8tMToxKSpheShyeSgwLHgqeCptLXcqdykpLE49KHcqYi1fKk0pL20sQT0oLXcqXy1iKk0pL20sVD0odypiK18qTSkvbSxTPSgtdypfK2IqTSkvbSxrPU4tZyxFPUEteSxDPVQtZyxQPVMteTtyZXR1cm4gayprK0UqRT5DKkMrUCpQJiYoTj1ULEE9Uykse2N4Ok4sY3k6QSx4MDE6LXMseTAxOi1sLHgxMTpOKihpL3gtMSkseTExOkEqKGkveC0xKX19ZnVuY3Rpb24gX3kodCl7dGhpcy5fY29udGV4dD10fWZ1bmN0aW9uIGJ5KHQpe3JldHVybiBuZXcgX3kodCl9ZnVuY3Rpb24gbXkodCl7cmV0dXJuIHRbMF19ZnVuY3Rpb24geHkodCl7cmV0dXJuIHRbMV19ZnVuY3Rpb24gd3koKXt2YXIgdD1teSxuPXh5LGU9S2coITApLHI9bnVsbCxpPWJ5LG89bnVsbDtmdW5jdGlvbiBhKGEpe3ZhciB1LGMsZixzPWEubGVuZ3RoLGw9ITE7Zm9yKG51bGw9PXImJihvPWkoZj1IaSgpKSksdT0wO3U8PXM7Kyt1KSEodTxzJiZlKGM9YVt1XSx1LGEpKT09PWwmJigobD0hbCk/by5saW5lU3RhcnQoKTpvLmxpbmVFbmQoKSksbCYmby5wb2ludCgrdChjLHUsYSksK24oYyx1LGEpKTtpZihmKXJldHVybiBvPW51bGwsZisiInx8bnVsbH1yZXR1cm4gYS54PWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0PSJmdW5jdGlvbiI9PXR5cGVvZiBuP246S2coK24pLGEpOnR9LGEueT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8obj0iZnVuY3Rpb24iPT10eXBlb2YgdD90OktnKCt0KSxhKTpufSxhLmRlZmluZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGU9ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDpLZyghIXQpLGEpOmV9LGEuY3VydmU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGk9dCxudWxsIT1yJiYobz1pKHIpKSxhKTppfSxhLmNvbnRleHQ9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG51bGw9PXQ/cj1vPW51bGw6bz1pKHI9dCksYSk6cn0sYX1mdW5jdGlvbiBNeSgpe3ZhciB0PW15LG49bnVsbCxlPUtnKDApLHI9eHksaT1LZyghMCksbz1udWxsLGE9YnksdT1udWxsO2Z1bmN0aW9uIGMoYyl7dmFyIGYscyxsLGgsZCxwPWMubGVuZ3RoLHY9ITEsZz1uZXcgQXJyYXkocCkseT1uZXcgQXJyYXkocCk7Zm9yKG51bGw9PW8mJih1PWEoZD1IaSgpKSksZj0wO2Y8PXA7KytmKXtpZighKGY8cCYmaShoPWNbZl0sZixjKSk9PT12KWlmKHY9IXYpcz1mLHUuYXJlYVN0YXJ0KCksdS5saW5lU3RhcnQoKTtlbHNle2Zvcih1LmxpbmVFbmQoKSx1LmxpbmVTdGFydCgpLGw9Zi0xO2w+PXM7LS1sKXUucG9pbnQoZ1tsXSx5W2xdKTt1LmxpbmVFbmQoKSx1LmFyZWFFbmQoKX12JiYoZ1tmXT0rdChoLGYsYykseVtmXT0rZShoLGYsYyksdS5wb2ludChuPytuKGgsZixjKTpnW2ZdLHI/K3IoaCxmLGMpOnlbZl0pKX1pZihkKXJldHVybiB1PW51bGwsZCsiInx8bnVsbH1mdW5jdGlvbiBmKCl7cmV0dXJuIHd5KCkuZGVmaW5lZChpKS5jdXJ2ZShhKS5jb250ZXh0KG8pfXJldHVybiBjLng9ZnVuY3Rpb24oZSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHQ9ImZ1bmN0aW9uIj09dHlwZW9mIGU/ZTpLZygrZSksbj1udWxsLGMpOnR9LGMueDA9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHQ9ImZ1bmN0aW9uIj09dHlwZW9mIG4/bjpLZygrbiksYyk6dH0sYy54MT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8obj1udWxsPT10P251bGw6ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDpLZygrdCksYyk6bn0sYy55PWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhlPSJmdW5jdGlvbiI9PXR5cGVvZiB0P3Q6S2coK3QpLHI9bnVsbCxjKTplfSxjLnkwPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhlPSJmdW5jdGlvbiI9PXR5cGVvZiB0P3Q6S2coK3QpLGMpOmV9LGMueTE9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHI9bnVsbD09dD9udWxsOiJmdW5jdGlvbiI9PXR5cGVvZiB0P3Q6S2coK3QpLGMpOnJ9LGMubGluZVgwPWMubGluZVkwPWZ1bmN0aW9uKCl7cmV0dXJuIGYoKS54KHQpLnkoZSl9LGMubGluZVkxPWZ1bmN0aW9uKCl7cmV0dXJuIGYoKS54KHQpLnkocil9LGMubGluZVgxPWZ1bmN0aW9uKCl7cmV0dXJuIGYoKS54KG4pLnkoZSl9LGMuZGVmaW5lZD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oaT0iZnVuY3Rpb24iPT10eXBlb2YgdD90OktnKCEhdCksYyk6aX0sYy5jdXJ2ZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oYT10LG51bGwhPW8mJih1PWEobykpLGMpOmF9LGMuY29udGV4dD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8obnVsbD09dD9vPXU9bnVsbDp1PWEobz10KSxjKTpvfSxjfWZ1bmN0aW9uIE55KHQsbil7cmV0dXJuIG48dD8tMTpuPnQ/MTpuPj10PzA6TmFOfWZ1bmN0aW9uIEF5KHQpe3JldHVybiB0fV95LnByb3RvdHlwZT17YXJlYVN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5fbGluZT0wfSxhcmVhRW5kOmZ1bmN0aW9uKCl7dGhpcy5fbGluZT1OYU59LGxpbmVTdGFydDpmdW5jdGlvbigpe3RoaXMuX3BvaW50PTB9LGxpbmVFbmQ6ZnVuY3Rpb24oKXsodGhpcy5fbGluZXx8MCE9PXRoaXMuX2xpbmUmJjE9PT10aGlzLl9wb2ludCkmJnRoaXMuX2NvbnRleHQuY2xvc2VQYXRoKCksdGhpcy5fbGluZT0xLXRoaXMuX2xpbmV9LHBvaW50OmZ1bmN0aW9uKHQsbil7c3dpdGNoKHQ9K3Qsbj0rbix0aGlzLl9wb2ludCl7Y2FzZSAwOnRoaXMuX3BvaW50PTEsdGhpcy5fbGluZT90aGlzLl9jb250ZXh0LmxpbmVUbyh0LG4pOnRoaXMuX2NvbnRleHQubW92ZVRvKHQsbik7YnJlYWs7Y2FzZSAxOnRoaXMuX3BvaW50PTI7ZGVmYXVsdDp0aGlzLl9jb250ZXh0LmxpbmVUbyh0LG4pfX19O3ZhciBUeT1reShieSk7ZnVuY3Rpb24gU3kodCl7dGhpcy5fY3VydmU9dH1mdW5jdGlvbiBreSh0KXtmdW5jdGlvbiBuKG4pe3JldHVybiBuZXcgU3kodChuKSl9cmV0dXJuIG4uX2N1cnZlPXQsbn1mdW5jdGlvbiBFeSh0KXt2YXIgbj10LmN1cnZlO3JldHVybiB0LmFuZ2xlPXQueCxkZWxldGUgdC54LHQucmFkaXVzPXQueSxkZWxldGUgdC55LHQuY3VydmU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/bihreSh0KSk6bigpLl9jdXJ2ZX0sdH1mdW5jdGlvbiBDeSgpe3JldHVybiBFeSh3eSgpLmN1cnZlKFR5KSl9ZnVuY3Rpb24gUHkoKXt2YXIgdD1NeSgpLmN1cnZlKFR5KSxuPXQuY3VydmUsZT10LmxpbmVYMCxyPXQubGluZVgxLGk9dC5saW5lWTAsbz10LmxpbmVZMTtyZXR1cm4gdC5hbmdsZT10LngsZGVsZXRlIHQueCx0LnN0YXJ0QW5nbGU9dC54MCxkZWxldGUgdC54MCx0LmVuZEFuZ2xlPXQueDEsZGVsZXRlIHQueDEsdC5yYWRpdXM9dC55LGRlbGV0ZSB0LnksdC5pbm5lclJhZGl1cz10LnkwLGRlbGV0ZSB0LnkwLHQub3V0ZXJSYWRpdXM9dC55MSxkZWxldGUgdC55MSx0LmxpbmVTdGFydEFuZ2xlPWZ1bmN0aW9uKCl7cmV0dXJuIEV5KGUoKSl9LGRlbGV0ZSB0LmxpbmVYMCx0LmxpbmVFbmRBbmdsZT1mdW5jdGlvbigpe3JldHVybiBFeShyKCkpfSxkZWxldGUgdC5saW5lWDEsdC5saW5lSW5uZXJSYWRpdXM9ZnVuY3Rpb24oKXtyZXR1cm4gRXkoaSgpKX0sZGVsZXRlIHQubGluZVkwLHQubGluZU91dGVyUmFkaXVzPWZ1bmN0aW9uKCl7cmV0dXJuIEV5KG8oKSl9LGRlbGV0ZSB0LmxpbmVZMSx0LmN1cnZlPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoP24oa3kodCkpOm4oKS5fY3VydmV9LHR9ZnVuY3Rpb24genkodCxuKXtyZXR1cm5bKG49K24pKk1hdGguY29zKHQtPU1hdGguUEkvMiksbipNYXRoLnNpbih0KV19U3kucHJvdG90eXBlPXthcmVhU3RhcnQ6ZnVuY3Rpb24oKXt0aGlzLl9jdXJ2ZS5hcmVhU3RhcnQoKX0sYXJlYUVuZDpmdW5jdGlvbigpe3RoaXMuX2N1cnZlLmFyZWFFbmQoKX0sbGluZVN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5fY3VydmUubGluZVN0YXJ0KCl9LGxpbmVFbmQ6ZnVuY3Rpb24oKXt0aGlzLl9jdXJ2ZS5saW5lRW5kKCl9LHBvaW50OmZ1bmN0aW9uKHQsbil7dGhpcy5fY3VydmUucG9pbnQobipNYXRoLnNpbih0KSxuKi1NYXRoLmNvcyh0KSl9fTt2YXIgUnk9QXJyYXkucHJvdG90eXBlLnNsaWNlO2Z1bmN0aW9uIER5KHQpe3JldHVybiB0LnNvdXJjZX1mdW5jdGlvbiBxeSh0KXtyZXR1cm4gdC50YXJnZXR9ZnVuY3Rpb24gTHkodCl7dmFyIG49RHksZT1xeSxyPW15LGk9eHksbz1udWxsO2Z1bmN0aW9uIGEoKXt2YXIgYSx1PVJ5LmNhbGwoYXJndW1lbnRzKSxjPW4uYXBwbHkodGhpcyx1KSxmPWUuYXBwbHkodGhpcyx1KTtpZihvfHwobz1hPUhpKCkpLHQobywrci5hcHBseSh0aGlzLCh1WzBdPWMsdSkpLCtpLmFwcGx5KHRoaXMsdSksK3IuYXBwbHkodGhpcywodVswXT1mLHUpKSwraS5hcHBseSh0aGlzLHUpKSxhKXJldHVybiBvPW51bGwsYSsiInx8bnVsbH1yZXR1cm4gYS5zb3VyY2U9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG49dCxhKTpufSxhLnRhcmdldD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZT10LGEpOmV9LGEueD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocj0iZnVuY3Rpb24iPT10eXBlb2YgdD90OktnKCt0KSxhKTpyfSxhLnk9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGk9ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDpLZygrdCksYSk6aX0sYS5jb250ZXh0PWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhvPW51bGw9PXQ/bnVsbDp0LGEpOm99LGF9ZnVuY3Rpb24gVXkodCxuLGUscixpKXt0Lm1vdmVUbyhuLGUpLHQuYmV6aWVyQ3VydmVUbyhuPShuK3IpLzIsZSxuLGkscixpKX1mdW5jdGlvbiBPeSh0LG4sZSxyLGkpe3QubW92ZVRvKG4sZSksdC5iZXppZXJDdXJ2ZVRvKG4sZT0oZStpKS8yLHIsZSxyLGkpfWZ1bmN0aW9uIEJ5KHQsbixlLHIsaSl7dmFyIG89enkobixlKSxhPXp5KG4sZT0oZStpKS8yKSx1PXp5KHIsZSksYz16eShyLGkpO3QubW92ZVRvKG9bMF0sb1sxXSksdC5iZXppZXJDdXJ2ZVRvKGFbMF0sYVsxXSx1WzBdLHVbMV0sY1swXSxjWzFdKX12YXIgWXk9e2RyYXc6ZnVuY3Rpb24odCxuKXt2YXIgZT1NYXRoLnNxcnQobi9jeSk7dC5tb3ZlVG8oZSwwKSx0LmFyYygwLDAsZSwwLHN5KX19LEZ5PXtkcmF3OmZ1bmN0aW9uKHQsbil7dmFyIGU9TWF0aC5zcXJ0KG4vNSkvMjt0Lm1vdmVUbygtMyplLC1lKSx0LmxpbmVUbygtZSwtZSksdC5saW5lVG8oLWUsLTMqZSksdC5saW5lVG8oZSwtMyplKSx0LmxpbmVUbyhlLC1lKSx0LmxpbmVUbygzKmUsLWUpLHQubGluZVRvKDMqZSxlKSx0LmxpbmVUbyhlLGUpLHQubGluZVRvKGUsMyplKSx0LmxpbmVUbygtZSwzKmUpLHQubGluZVRvKC1lLGUpLHQubGluZVRvKC0zKmUsZSksdC5jbG9zZVBhdGgoKX19LEl5PU1hdGguc3FydCgxLzMpLGp5PTIqSXksSHk9e2RyYXc6ZnVuY3Rpb24odCxuKXt2YXIgZT1NYXRoLnNxcnQobi9qeSkscj1lKkl5O3QubW92ZVRvKDAsLWUpLHQubGluZVRvKHIsMCksdC5saW5lVG8oMCxlKSx0LmxpbmVUbygtciwwKSx0LmNsb3NlUGF0aCgpfX0sWHk9TWF0aC5zaW4oY3kvMTApL01hdGguc2luKDcqY3kvMTApLEd5PU1hdGguc2luKHN5LzEwKSpYeSxWeT0tTWF0aC5jb3Moc3kvMTApKlh5LCR5PXtkcmF3OmZ1bmN0aW9uKHQsbil7dmFyIGU9TWF0aC5zcXJ0KC44OTA4MTMwOTE1MjkyODUyKm4pLHI9R3kqZSxpPVZ5KmU7dC5tb3ZlVG8oMCwtZSksdC5saW5lVG8ocixpKTtmb3IodmFyIG89MTtvPDU7KytvKXt2YXIgYT1zeSpvLzUsdT1NYXRoLmNvcyhhKSxjPU1hdGguc2luKGEpO3QubGluZVRvKGMqZSwtdSplKSx0LmxpbmVUbyh1KnItYyppLGMqcit1KmkpfXQuY2xvc2VQYXRoKCl9fSxXeT17ZHJhdzpmdW5jdGlvbih0LG4pe3ZhciBlPU1hdGguc3FydChuKSxyPS1lLzI7dC5yZWN0KHIscixlLGUpfX0sWnk9TWF0aC5zcXJ0KDMpLFF5PXtkcmF3OmZ1bmN0aW9uKHQsbil7dmFyIGU9LU1hdGguc3FydChuLygzKlp5KSk7dC5tb3ZlVG8oMCwyKmUpLHQubGluZVRvKC1aeSplLC1lKSx0LmxpbmVUbyhaeSplLC1lKSx0LmNsb3NlUGF0aCgpfX0sSnk9TWF0aC5zcXJ0KDMpLzIsS3k9MS9NYXRoLnNxcnQoMTIpLHRfPTMqKEt5LzIrMSksbl89e2RyYXc6ZnVuY3Rpb24odCxuKXt2YXIgZT1NYXRoLnNxcnQobi90Xykscj1lLzIsaT1lKkt5LG89cixhPWUqS3krZSx1PS1vLGM9YTt0Lm1vdmVUbyhyLGkpLHQubGluZVRvKG8sYSksdC5saW5lVG8odSxjKSx0LmxpbmVUbygtLjUqci1KeSppLEp5KnIrLS41KmkpLHQubGluZVRvKC0uNSpvLUp5KmEsSnkqbystLjUqYSksdC5saW5lVG8oLS41KnUtSnkqYyxKeSp1Ky0uNSpjKSx0LmxpbmVUbygtLjUqcitKeSppLC0uNSppLUp5KnIpLHQubGluZVRvKC0uNSpvK0p5KmEsLS41KmEtSnkqbyksdC5saW5lVG8oLS41KnUrSnkqYywtLjUqYy1KeSp1KSx0LmNsb3NlUGF0aCgpfX0sZV89W1l5LEZ5LEh5LFd5LCR5LFF5LG5fXTtmdW5jdGlvbiByXygpe31mdW5jdGlvbiBpXyh0LG4sZSl7dC5fY29udGV4dC5iZXppZXJDdXJ2ZVRvKCgyKnQuX3gwK3QuX3gxKS8zLCgyKnQuX3kwK3QuX3kxKS8zLCh0Ll94MCsyKnQuX3gxKS8zLCh0Ll95MCsyKnQuX3kxKS8zLCh0Ll94MCs0KnQuX3gxK24pLzYsKHQuX3kwKzQqdC5feTErZSkvNil9ZnVuY3Rpb24gb18odCl7dGhpcy5fY29udGV4dD10fWZ1bmN0aW9uIGFfKHQpe3RoaXMuX2NvbnRleHQ9dH1mdW5jdGlvbiB1Xyh0KXt0aGlzLl9jb250ZXh0PXR9ZnVuY3Rpb24gY18odCxuKXt0aGlzLl9iYXNpcz1uZXcgb18odCksdGhpcy5fYmV0YT1ufW9fLnByb3RvdHlwZT17YXJlYVN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5fbGluZT0wfSxhcmVhRW5kOmZ1bmN0aW9uKCl7dGhpcy5fbGluZT1OYU59LGxpbmVTdGFydDpmdW5jdGlvbigpe3RoaXMuX3gwPXRoaXMuX3gxPXRoaXMuX3kwPXRoaXMuX3kxPU5hTix0aGlzLl9wb2ludD0wfSxsaW5lRW5kOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuX3BvaW50KXtjYXNlIDM6aV8odGhpcyx0aGlzLl94MSx0aGlzLl95MSk7Y2FzZSAyOnRoaXMuX2NvbnRleHQubGluZVRvKHRoaXMuX3gxLHRoaXMuX3kxKX0odGhpcy5fbGluZXx8MCE9PXRoaXMuX2xpbmUmJjE9PT10aGlzLl9wb2ludCkmJnRoaXMuX2NvbnRleHQuY2xvc2VQYXRoKCksdGhpcy5fbGluZT0xLXRoaXMuX2xpbmV9LHBvaW50OmZ1bmN0aW9uKHQsbil7c3dpdGNoKHQ9K3Qsbj0rbix0aGlzLl9wb2ludCl7Y2FzZSAwOnRoaXMuX3BvaW50PTEsdGhpcy5fbGluZT90aGlzLl9jb250ZXh0LmxpbmVUbyh0LG4pOnRoaXMuX2NvbnRleHQubW92ZVRvKHQsbik7YnJlYWs7Y2FzZSAxOnRoaXMuX3BvaW50PTI7YnJlYWs7Y2FzZSAyOnRoaXMuX3BvaW50PTMsdGhpcy5fY29udGV4dC5saW5lVG8oKDUqdGhpcy5feDArdGhpcy5feDEpLzYsKDUqdGhpcy5feTArdGhpcy5feTEpLzYpO2RlZmF1bHQ6aV8odGhpcyx0LG4pfXRoaXMuX3gwPXRoaXMuX3gxLHRoaXMuX3gxPXQsdGhpcy5feTA9dGhpcy5feTEsdGhpcy5feTE9bn19LGFfLnByb3RvdHlwZT17YXJlYVN0YXJ0OnJfLGFyZWFFbmQ6cl8sbGluZVN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5feDA9dGhpcy5feDE9dGhpcy5feDI9dGhpcy5feDM9dGhpcy5feDQ9dGhpcy5feTA9dGhpcy5feTE9dGhpcy5feTI9dGhpcy5feTM9dGhpcy5feTQ9TmFOLHRoaXMuX3BvaW50PTB9LGxpbmVFbmQ6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5fcG9pbnQpe2Nhc2UgMTp0aGlzLl9jb250ZXh0Lm1vdmVUbyh0aGlzLl94Mix0aGlzLl95MiksdGhpcy5fY29udGV4dC5jbG9zZVBhdGgoKTticmVhaztjYXNlIDI6dGhpcy5fY29udGV4dC5tb3ZlVG8oKHRoaXMuX3gyKzIqdGhpcy5feDMpLzMsKHRoaXMuX3kyKzIqdGhpcy5feTMpLzMpLHRoaXMuX2NvbnRleHQubGluZVRvKCh0aGlzLl94MysyKnRoaXMuX3gyKS8zLCh0aGlzLl95MysyKnRoaXMuX3kyKS8zKSx0aGlzLl9jb250ZXh0LmNsb3NlUGF0aCgpO2JyZWFrO2Nhc2UgMzp0aGlzLnBvaW50KHRoaXMuX3gyLHRoaXMuX3kyKSx0aGlzLnBvaW50KHRoaXMuX3gzLHRoaXMuX3kzKSx0aGlzLnBvaW50KHRoaXMuX3g0LHRoaXMuX3k0KX19LHBvaW50OmZ1bmN0aW9uKHQsbil7c3dpdGNoKHQ9K3Qsbj0rbix0aGlzLl9wb2ludCl7Y2FzZSAwOnRoaXMuX3BvaW50PTEsdGhpcy5feDI9dCx0aGlzLl95Mj1uO2JyZWFrO2Nhc2UgMTp0aGlzLl9wb2ludD0yLHRoaXMuX3gzPXQsdGhpcy5feTM9bjticmVhaztjYXNlIDI6dGhpcy5fcG9pbnQ9Myx0aGlzLl94ND10LHRoaXMuX3k0PW4sdGhpcy5fY29udGV4dC5tb3ZlVG8oKHRoaXMuX3gwKzQqdGhpcy5feDErdCkvNiwodGhpcy5feTArNCp0aGlzLl95MStuKS82KTticmVhaztkZWZhdWx0OmlfKHRoaXMsdCxuKX10aGlzLl94MD10aGlzLl94MSx0aGlzLl94MT10LHRoaXMuX3kwPXRoaXMuX3kxLHRoaXMuX3kxPW59fSx1Xy5wcm90b3R5cGU9e2FyZWFTdGFydDpmdW5jdGlvbigpe3RoaXMuX2xpbmU9MH0sYXJlYUVuZDpmdW5jdGlvbigpe3RoaXMuX2xpbmU9TmFOfSxsaW5lU3RhcnQ6ZnVuY3Rpb24oKXt0aGlzLl94MD10aGlzLl94MT10aGlzLl95MD10aGlzLl95MT1OYU4sdGhpcy5fcG9pbnQ9MH0sbGluZUVuZDpmdW5jdGlvbigpeyh0aGlzLl9saW5lfHwwIT09dGhpcy5fbGluZSYmMz09PXRoaXMuX3BvaW50KSYmdGhpcy5fY29udGV4dC5jbG9zZVBhdGgoKSx0aGlzLl9saW5lPTEtdGhpcy5fbGluZX0scG9pbnQ6ZnVuY3Rpb24odCxuKXtzd2l0Y2godD0rdCxuPStuLHRoaXMuX3BvaW50KXtjYXNlIDA6dGhpcy5fcG9pbnQ9MTticmVhaztjYXNlIDE6dGhpcy5fcG9pbnQ9MjticmVhaztjYXNlIDI6dGhpcy5fcG9pbnQ9Mzt2YXIgZT0odGhpcy5feDArNCp0aGlzLl94MSt0KS82LHI9KHRoaXMuX3kwKzQqdGhpcy5feTErbikvNjt0aGlzLl9saW5lP3RoaXMuX2NvbnRleHQubGluZVRvKGUscik6dGhpcy5fY29udGV4dC5tb3ZlVG8oZSxyKTticmVhaztjYXNlIDM6dGhpcy5fcG9pbnQ9NDtkZWZhdWx0OmlfKHRoaXMsdCxuKX10aGlzLl94MD10aGlzLl94MSx0aGlzLl94MT10LHRoaXMuX3kwPXRoaXMuX3kxLHRoaXMuX3kxPW59fSxjXy5wcm90b3R5cGU9e2xpbmVTdGFydDpmdW5jdGlvbigpe3RoaXMuX3g9W10sdGhpcy5feT1bXSx0aGlzLl9iYXNpcy5saW5lU3RhcnQoKX0sbGluZUVuZDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3gsbj10aGlzLl95LGU9dC5sZW5ndGgtMTtpZihlPjApZm9yKHZhciByLGk9dFswXSxvPW5bMF0sYT10W2VdLWksdT1uW2VdLW8sYz0tMTsrK2M8PWU7KXI9Yy9lLHRoaXMuX2Jhc2lzLnBvaW50KHRoaXMuX2JldGEqdFtjXSsoMS10aGlzLl9iZXRhKSooaStyKmEpLHRoaXMuX2JldGEqbltjXSsoMS10aGlzLl9iZXRhKSoobytyKnUpKTt0aGlzLl94PXRoaXMuX3k9bnVsbCx0aGlzLl9iYXNpcy5saW5lRW5kKCl9LHBvaW50OmZ1bmN0aW9uKHQsbil7dGhpcy5feC5wdXNoKCt0KSx0aGlzLl95LnB1c2goK24pfX07dmFyIGZfPWZ1bmN0aW9uIHQobil7ZnVuY3Rpb24gZSh0KXtyZXR1cm4gMT09PW4/bmV3IG9fKHQpOm5ldyBjXyh0LG4pfXJldHVybiBlLmJldGE9ZnVuY3Rpb24obil7cmV0dXJuIHQoK24pfSxlfSguODUpO2Z1bmN0aW9uIHNfKHQsbixlKXt0Ll9jb250ZXh0LmJlemllckN1cnZlVG8odC5feDErdC5fayoodC5feDItdC5feDApLHQuX3kxK3QuX2sqKHQuX3kyLXQuX3kwKSx0Ll94Mit0Ll9rKih0Ll94MS1uKSx0Ll95Mit0Ll9rKih0Ll95MS1lKSx0Ll94Mix0Ll95Mil9ZnVuY3Rpb24gbF8odCxuKXt0aGlzLl9jb250ZXh0PXQsdGhpcy5faz0oMS1uKS82fWxfLnByb3RvdHlwZT17YXJlYVN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5fbGluZT0wfSxhcmVhRW5kOmZ1bmN0aW9uKCl7dGhpcy5fbGluZT1OYU59LGxpbmVTdGFydDpmdW5jdGlvbigpe3RoaXMuX3gwPXRoaXMuX3gxPXRoaXMuX3gyPXRoaXMuX3kwPXRoaXMuX3kxPXRoaXMuX3kyPU5hTix0aGlzLl9wb2ludD0wfSxsaW5lRW5kOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuX3BvaW50KXtjYXNlIDI6dGhpcy5fY29udGV4dC5saW5lVG8odGhpcy5feDIsdGhpcy5feTIpO2JyZWFrO2Nhc2UgMzpzXyh0aGlzLHRoaXMuX3gxLHRoaXMuX3kxKX0odGhpcy5fbGluZXx8MCE9PXRoaXMuX2xpbmUmJjE9PT10aGlzLl9wb2ludCkmJnRoaXMuX2NvbnRleHQuY2xvc2VQYXRoKCksdGhpcy5fbGluZT0xLXRoaXMuX2xpbmV9LHBvaW50OmZ1bmN0aW9uKHQsbil7c3dpdGNoKHQ9K3Qsbj0rbix0aGlzLl9wb2ludCl7Y2FzZSAwOnRoaXMuX3BvaW50PTEsdGhpcy5fbGluZT90aGlzLl9jb250ZXh0LmxpbmVUbyh0LG4pOnRoaXMuX2NvbnRleHQubW92ZVRvKHQsbik7YnJlYWs7Y2FzZSAxOnRoaXMuX3BvaW50PTIsdGhpcy5feDE9dCx0aGlzLl95MT1uO2JyZWFrO2Nhc2UgMjp0aGlzLl9wb2ludD0zO2RlZmF1bHQ6c18odGhpcyx0LG4pfXRoaXMuX3gwPXRoaXMuX3gxLHRoaXMuX3gxPXRoaXMuX3gyLHRoaXMuX3gyPXQsdGhpcy5feTA9dGhpcy5feTEsdGhpcy5feTE9dGhpcy5feTIsdGhpcy5feTI9bn19O3ZhciBoXz1mdW5jdGlvbiB0KG4pe2Z1bmN0aW9uIGUodCl7cmV0dXJuIG5ldyBsXyh0LG4pfXJldHVybiBlLnRlbnNpb249ZnVuY3Rpb24obil7cmV0dXJuIHQoK24pfSxlfSgwKTtmdW5jdGlvbiBkXyh0LG4pe3RoaXMuX2NvbnRleHQ9dCx0aGlzLl9rPSgxLW4pLzZ9ZF8ucHJvdG90eXBlPXthcmVhU3RhcnQ6cl8sYXJlYUVuZDpyXyxsaW5lU3RhcnQ6ZnVuY3Rpb24oKXt0aGlzLl94MD10aGlzLl94MT10aGlzLl94Mj10aGlzLl94Mz10aGlzLl94ND10aGlzLl94NT10aGlzLl95MD10aGlzLl95MT10aGlzLl95Mj10aGlzLl95Mz10aGlzLl95ND10aGlzLl95NT1OYU4sdGhpcy5fcG9pbnQ9MH0sbGluZUVuZDpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLl9wb2ludCl7Y2FzZSAxOnRoaXMuX2NvbnRleHQubW92ZVRvKHRoaXMuX3gzLHRoaXMuX3kzKSx0aGlzLl9jb250ZXh0LmNsb3NlUGF0aCgpO2JyZWFrO2Nhc2UgMjp0aGlzLl9jb250ZXh0LmxpbmVUbyh0aGlzLl94Myx0aGlzLl95MyksdGhpcy5fY29udGV4dC5jbG9zZVBhdGgoKTticmVhaztjYXNlIDM6dGhpcy5wb2ludCh0aGlzLl94Myx0aGlzLl95MyksdGhpcy5wb2ludCh0aGlzLl94NCx0aGlzLl95NCksdGhpcy5wb2ludCh0aGlzLl94NSx0aGlzLl95NSl9fSxwb2ludDpmdW5jdGlvbih0LG4pe3N3aXRjaCh0PSt0LG49K24sdGhpcy5fcG9pbnQpe2Nhc2UgMDp0aGlzLl9wb2ludD0xLHRoaXMuX3gzPXQsdGhpcy5feTM9bjticmVhaztjYXNlIDE6dGhpcy5fcG9pbnQ9Mix0aGlzLl9jb250ZXh0Lm1vdmVUbyh0aGlzLl94ND10LHRoaXMuX3k0PW4pO2JyZWFrO2Nhc2UgMjp0aGlzLl9wb2ludD0zLHRoaXMuX3g1PXQsdGhpcy5feTU9bjticmVhaztkZWZhdWx0OnNfKHRoaXMsdCxuKX10aGlzLl94MD10aGlzLl94MSx0aGlzLl94MT10aGlzLl94Mix0aGlzLl94Mj10LHRoaXMuX3kwPXRoaXMuX3kxLHRoaXMuX3kxPXRoaXMuX3kyLHRoaXMuX3kyPW59fTt2YXIgcF89ZnVuY3Rpb24gdChuKXtmdW5jdGlvbiBlKHQpe3JldHVybiBuZXcgZF8odCxuKX1yZXR1cm4gZS50ZW5zaW9uPWZ1bmN0aW9uKG4pe3JldHVybiB0KCtuKX0sZX0oMCk7ZnVuY3Rpb24gdl8odCxuKXt0aGlzLl9jb250ZXh0PXQsdGhpcy5faz0oMS1uKS82fXZfLnByb3RvdHlwZT17YXJlYVN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5fbGluZT0wfSxhcmVhRW5kOmZ1bmN0aW9uKCl7dGhpcy5fbGluZT1OYU59LGxpbmVTdGFydDpmdW5jdGlvbigpe3RoaXMuX3gwPXRoaXMuX3gxPXRoaXMuX3gyPXRoaXMuX3kwPXRoaXMuX3kxPXRoaXMuX3kyPU5hTix0aGlzLl9wb2ludD0wfSxsaW5lRW5kOmZ1bmN0aW9uKCl7KHRoaXMuX2xpbmV8fDAhPT10aGlzLl9saW5lJiYzPT09dGhpcy5fcG9pbnQpJiZ0aGlzLl9jb250ZXh0LmNsb3NlUGF0aCgpLHRoaXMuX2xpbmU9MS10aGlzLl9saW5lfSxwb2ludDpmdW5jdGlvbih0LG4pe3N3aXRjaCh0PSt0LG49K24sdGhpcy5fcG9pbnQpe2Nhc2UgMDp0aGlzLl9wb2ludD0xO2JyZWFrO2Nhc2UgMTp0aGlzLl9wb2ludD0yO2JyZWFrO2Nhc2UgMjp0aGlzLl9wb2ludD0zLHRoaXMuX2xpbmU/dGhpcy5fY29udGV4dC5saW5lVG8odGhpcy5feDIsdGhpcy5feTIpOnRoaXMuX2NvbnRleHQubW92ZVRvKHRoaXMuX3gyLHRoaXMuX3kyKTticmVhaztjYXNlIDM6dGhpcy5fcG9pbnQ9NDtkZWZhdWx0OnNfKHRoaXMsdCxuKX10aGlzLl94MD10aGlzLl94MSx0aGlzLl94MT10aGlzLl94Mix0aGlzLl94Mj10LHRoaXMuX3kwPXRoaXMuX3kxLHRoaXMuX3kxPXRoaXMuX3kyLHRoaXMuX3kyPW59fTt2YXIgZ189ZnVuY3Rpb24gdChuKXtmdW5jdGlvbiBlKHQpe3JldHVybiBuZXcgdl8odCxuKX1yZXR1cm4gZS50ZW5zaW9uPWZ1bmN0aW9uKG4pe3JldHVybiB0KCtuKX0sZX0oMCk7ZnVuY3Rpb24geV8odCxuLGUpe3ZhciByPXQuX3gxLGk9dC5feTEsbz10Ll94MixhPXQuX3kyO2lmKHQuX2wwMV9hPnV5KXt2YXIgdT0yKnQuX2wwMV8yYSszKnQuX2wwMV9hKnQuX2wxMl9hK3QuX2wxMl8yYSxjPTMqdC5fbDAxX2EqKHQuX2wwMV9hK3QuX2wxMl9hKTtyPShyKnUtdC5feDAqdC5fbDEyXzJhK3QuX3gyKnQuX2wwMV8yYSkvYyxpPShpKnUtdC5feTAqdC5fbDEyXzJhK3QuX3kyKnQuX2wwMV8yYSkvY31pZih0Ll9sMjNfYT51eSl7dmFyIGY9Mip0Ll9sMjNfMmErMyp0Ll9sMjNfYSp0Ll9sMTJfYSt0Ll9sMTJfMmEscz0zKnQuX2wyM19hKih0Ll9sMjNfYSt0Ll9sMTJfYSk7bz0obypmK3QuX3gxKnQuX2wyM18yYS1uKnQuX2wxMl8yYSkvcyxhPShhKmYrdC5feTEqdC5fbDIzXzJhLWUqdC5fbDEyXzJhKS9zfXQuX2NvbnRleHQuYmV6aWVyQ3VydmVUbyhyLGksbyxhLHQuX3gyLHQuX3kyKX1mdW5jdGlvbiBfXyh0LG4pe3RoaXMuX2NvbnRleHQ9dCx0aGlzLl9hbHBoYT1ufV9fLnByb3RvdHlwZT17YXJlYVN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5fbGluZT0wfSxhcmVhRW5kOmZ1bmN0aW9uKCl7dGhpcy5fbGluZT1OYU59LGxpbmVTdGFydDpmdW5jdGlvbigpe3RoaXMuX3gwPXRoaXMuX3gxPXRoaXMuX3gyPXRoaXMuX3kwPXRoaXMuX3kxPXRoaXMuX3kyPU5hTix0aGlzLl9sMDFfYT10aGlzLl9sMTJfYT10aGlzLl9sMjNfYT10aGlzLl9sMDFfMmE9dGhpcy5fbDEyXzJhPXRoaXMuX2wyM18yYT10aGlzLl9wb2ludD0wfSxsaW5lRW5kOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuX3BvaW50KXtjYXNlIDI6dGhpcy5fY29udGV4dC5saW5lVG8odGhpcy5feDIsdGhpcy5feTIpO2JyZWFrO2Nhc2UgMzp0aGlzLnBvaW50KHRoaXMuX3gyLHRoaXMuX3kyKX0odGhpcy5fbGluZXx8MCE9PXRoaXMuX2xpbmUmJjE9PT10aGlzLl9wb2ludCkmJnRoaXMuX2NvbnRleHQuY2xvc2VQYXRoKCksdGhpcy5fbGluZT0xLXRoaXMuX2xpbmV9LHBvaW50OmZ1bmN0aW9uKHQsbil7aWYodD0rdCxuPStuLHRoaXMuX3BvaW50KXt2YXIgZT10aGlzLl94Mi10LHI9dGhpcy5feTItbjt0aGlzLl9sMjNfYT1NYXRoLnNxcnQodGhpcy5fbDIzXzJhPU1hdGgucG93KGUqZStyKnIsdGhpcy5fYWxwaGEpKX1zd2l0Y2godGhpcy5fcG9pbnQpe2Nhc2UgMDp0aGlzLl9wb2ludD0xLHRoaXMuX2xpbmU/dGhpcy5fY29udGV4dC5saW5lVG8odCxuKTp0aGlzLl9jb250ZXh0Lm1vdmVUbyh0LG4pO2JyZWFrO2Nhc2UgMTp0aGlzLl9wb2ludD0yO2JyZWFrO2Nhc2UgMjp0aGlzLl9wb2ludD0zO2RlZmF1bHQ6eV8odGhpcyx0LG4pfXRoaXMuX2wwMV9hPXRoaXMuX2wxMl9hLHRoaXMuX2wxMl9hPXRoaXMuX2wyM19hLHRoaXMuX2wwMV8yYT10aGlzLl9sMTJfMmEsdGhpcy5fbDEyXzJhPXRoaXMuX2wyM18yYSx0aGlzLl94MD10aGlzLl94MSx0aGlzLl94MT10aGlzLl94Mix0aGlzLl94Mj10LHRoaXMuX3kwPXRoaXMuX3kxLHRoaXMuX3kxPXRoaXMuX3kyLHRoaXMuX3kyPW59fTt2YXIgYl89ZnVuY3Rpb24gdChuKXtmdW5jdGlvbiBlKHQpe3JldHVybiBuP25ldyBfXyh0LG4pOm5ldyBsXyh0LDApfXJldHVybiBlLmFscGhhPWZ1bmN0aW9uKG4pe3JldHVybiB0KCtuKX0sZX0oLjUpO2Z1bmN0aW9uIG1fKHQsbil7dGhpcy5fY29udGV4dD10LHRoaXMuX2FscGhhPW59bV8ucHJvdG90eXBlPXthcmVhU3RhcnQ6cl8sYXJlYUVuZDpyXyxsaW5lU3RhcnQ6ZnVuY3Rpb24oKXt0aGlzLl94MD10aGlzLl94MT10aGlzLl94Mj10aGlzLl94Mz10aGlzLl94ND10aGlzLl94NT10aGlzLl95MD10aGlzLl95MT10aGlzLl95Mj10aGlzLl95Mz10aGlzLl95ND10aGlzLl95NT1OYU4sdGhpcy5fbDAxX2E9dGhpcy5fbDEyX2E9dGhpcy5fbDIzX2E9dGhpcy5fbDAxXzJhPXRoaXMuX2wxMl8yYT10aGlzLl9sMjNfMmE9dGhpcy5fcG9pbnQ9MH0sbGluZUVuZDpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLl9wb2ludCl7Y2FzZSAxOnRoaXMuX2NvbnRleHQubW92ZVRvKHRoaXMuX3gzLHRoaXMuX3kzKSx0aGlzLl9jb250ZXh0LmNsb3NlUGF0aCgpO2JyZWFrO2Nhc2UgMjp0aGlzLl9jb250ZXh0LmxpbmVUbyh0aGlzLl94Myx0aGlzLl95MyksdGhpcy5fY29udGV4dC5jbG9zZVBhdGgoKTticmVhaztjYXNlIDM6dGhpcy5wb2ludCh0aGlzLl94Myx0aGlzLl95MyksdGhpcy5wb2ludCh0aGlzLl94NCx0aGlzLl95NCksdGhpcy5wb2ludCh0aGlzLl94NSx0aGlzLl95NSl9fSxwb2ludDpmdW5jdGlvbih0LG4pe2lmKHQ9K3Qsbj0rbix0aGlzLl9wb2ludCl7dmFyIGU9dGhpcy5feDItdCxyPXRoaXMuX3kyLW47dGhpcy5fbDIzX2E9TWF0aC5zcXJ0KHRoaXMuX2wyM18yYT1NYXRoLnBvdyhlKmUrcipyLHRoaXMuX2FscGhhKSl9c3dpdGNoKHRoaXMuX3BvaW50KXtjYXNlIDA6dGhpcy5fcG9pbnQ9MSx0aGlzLl94Mz10LHRoaXMuX3kzPW47YnJlYWs7Y2FzZSAxOnRoaXMuX3BvaW50PTIsdGhpcy5fY29udGV4dC5tb3ZlVG8odGhpcy5feDQ9dCx0aGlzLl95ND1uKTticmVhaztjYXNlIDI6dGhpcy5fcG9pbnQ9Myx0aGlzLl94NT10LHRoaXMuX3k1PW47YnJlYWs7ZGVmYXVsdDp5Xyh0aGlzLHQsbil9dGhpcy5fbDAxX2E9dGhpcy5fbDEyX2EsdGhpcy5fbDEyX2E9dGhpcy5fbDIzX2EsdGhpcy5fbDAxXzJhPXRoaXMuX2wxMl8yYSx0aGlzLl9sMTJfMmE9dGhpcy5fbDIzXzJhLHRoaXMuX3gwPXRoaXMuX3gxLHRoaXMuX3gxPXRoaXMuX3gyLHRoaXMuX3gyPXQsdGhpcy5feTA9dGhpcy5feTEsdGhpcy5feTE9dGhpcy5feTIsdGhpcy5feTI9bn19O3ZhciB4Xz1mdW5jdGlvbiB0KG4pe2Z1bmN0aW9uIGUodCl7cmV0dXJuIG4/bmV3IG1fKHQsbik6bmV3IGRfKHQsMCl9cmV0dXJuIGUuYWxwaGE9ZnVuY3Rpb24obil7cmV0dXJuIHQoK24pfSxlfSguNSk7ZnVuY3Rpb24gd18odCxuKXt0aGlzLl9jb250ZXh0PXQsdGhpcy5fYWxwaGE9bn13Xy5wcm90b3R5cGU9e2FyZWFTdGFydDpmdW5jdGlvbigpe3RoaXMuX2xpbmU9MH0sYXJlYUVuZDpmdW5jdGlvbigpe3RoaXMuX2xpbmU9TmFOfSxsaW5lU3RhcnQ6ZnVuY3Rpb24oKXt0aGlzLl94MD10aGlzLl94MT10aGlzLl94Mj10aGlzLl95MD10aGlzLl95MT10aGlzLl95Mj1OYU4sdGhpcy5fbDAxX2E9dGhpcy5fbDEyX2E9dGhpcy5fbDIzX2E9dGhpcy5fbDAxXzJhPXRoaXMuX2wxMl8yYT10aGlzLl9sMjNfMmE9dGhpcy5fcG9pbnQ9MH0sbGluZUVuZDpmdW5jdGlvbigpeyh0aGlzLl9saW5lfHwwIT09dGhpcy5fbGluZSYmMz09PXRoaXMuX3BvaW50KSYmdGhpcy5fY29udGV4dC5jbG9zZVBhdGgoKSx0aGlzLl9saW5lPTEtdGhpcy5fbGluZX0scG9pbnQ6ZnVuY3Rpb24odCxuKXtpZih0PSt0LG49K24sdGhpcy5fcG9pbnQpe3ZhciBlPXRoaXMuX3gyLXQscj10aGlzLl95Mi1uO3RoaXMuX2wyM19hPU1hdGguc3FydCh0aGlzLl9sMjNfMmE9TWF0aC5wb3coZSplK3Iqcix0aGlzLl9hbHBoYSkpfXN3aXRjaCh0aGlzLl9wb2ludCl7Y2FzZSAwOnRoaXMuX3BvaW50PTE7YnJlYWs7Y2FzZSAxOnRoaXMuX3BvaW50PTI7YnJlYWs7Y2FzZSAyOnRoaXMuX3BvaW50PTMsdGhpcy5fbGluZT90aGlzLl9jb250ZXh0LmxpbmVUbyh0aGlzLl94Mix0aGlzLl95Mik6dGhpcy5fY29udGV4dC5tb3ZlVG8odGhpcy5feDIsdGhpcy5feTIpO2JyZWFrO2Nhc2UgMzp0aGlzLl9wb2ludD00O2RlZmF1bHQ6eV8odGhpcyx0LG4pfXRoaXMuX2wwMV9hPXRoaXMuX2wxMl9hLHRoaXMuX2wxMl9hPXRoaXMuX2wyM19hLHRoaXMuX2wwMV8yYT10aGlzLl9sMTJfMmEsdGhpcy5fbDEyXzJhPXRoaXMuX2wyM18yYSx0aGlzLl94MD10aGlzLl94MSx0aGlzLl94MT10aGlzLl94Mix0aGlzLl94Mj10LHRoaXMuX3kwPXRoaXMuX3kxLHRoaXMuX3kxPXRoaXMuX3kyLHRoaXMuX3kyPW59fTt2YXIgTV89ZnVuY3Rpb24gdChuKXtmdW5jdGlvbiBlKHQpe3JldHVybiBuP25ldyB3Xyh0LG4pOm5ldyB2Xyh0LDApfXJldHVybiBlLmFscGhhPWZ1bmN0aW9uKG4pe3JldHVybiB0KCtuKX0sZX0oLjUpO2Z1bmN0aW9uIE5fKHQpe3RoaXMuX2NvbnRleHQ9dH1mdW5jdGlvbiBBXyh0KXtyZXR1cm4gdDwwPy0xOjF9ZnVuY3Rpb24gVF8odCxuLGUpe3ZhciByPXQuX3gxLXQuX3gwLGk9bi10Ll94MSxvPSh0Ll95MS10Ll95MCkvKHJ8fGk8MCYmLTApLGE9KGUtdC5feTEpLyhpfHxyPDAmJi0wKSx1PShvKmkrYSpyKS8ocitpKTtyZXR1cm4oQV8obykrQV8oYSkpKk1hdGgubWluKE1hdGguYWJzKG8pLE1hdGguYWJzKGEpLC41Kk1hdGguYWJzKHUpKXx8MH1mdW5jdGlvbiBTXyh0LG4pe3ZhciBlPXQuX3gxLXQuX3gwO3JldHVybiBlPygzKih0Ll95MS10Ll95MCkvZS1uKS8yOm59ZnVuY3Rpb24ga18odCxuLGUpe3ZhciByPXQuX3gwLGk9dC5feTAsbz10Ll94MSxhPXQuX3kxLHU9KG8tcikvMzt0Ll9jb250ZXh0LmJlemllckN1cnZlVG8ocit1LGkrdSpuLG8tdSxhLXUqZSxvLGEpfWZ1bmN0aW9uIEVfKHQpe3RoaXMuX2NvbnRleHQ9dH1mdW5jdGlvbiBDXyh0KXt0aGlzLl9jb250ZXh0PW5ldyBQXyh0KX1mdW5jdGlvbiBQXyh0KXt0aGlzLl9jb250ZXh0PXR9ZnVuY3Rpb24gel8odCl7dGhpcy5fY29udGV4dD10fWZ1bmN0aW9uIFJfKHQpe3ZhciBuLGUscj10Lmxlbmd0aC0xLGk9bmV3IEFycmF5KHIpLG89bmV3IEFycmF5KHIpLGE9bmV3IEFycmF5KHIpO2ZvcihpWzBdPTAsb1swXT0yLGFbMF09dFswXSsyKnRbMV0sbj0xO248ci0xOysrbilpW25dPTEsb1tuXT00LGFbbl09NCp0W25dKzIqdFtuKzFdO2ZvcihpW3ItMV09MixvW3ItMV09NyxhW3ItMV09OCp0W3ItMV0rdFtyXSxuPTE7bjxyOysrbillPWlbbl0vb1tuLTFdLG9bbl0tPWUsYVtuXS09ZSphW24tMV07Zm9yKGlbci0xXT1hW3ItMV0vb1tyLTFdLG49ci0yO24+PTA7LS1uKWlbbl09KGFbbl0taVtuKzFdKS9vW25dO2ZvcihvW3ItMV09KHRbcl0raVtyLTFdKS8yLG49MDtuPHItMTsrK24pb1tuXT0yKnRbbisxXS1pW24rMV07cmV0dXJuW2ksb119ZnVuY3Rpb24gRF8odCxuKXt0aGlzLl9jb250ZXh0PXQsdGhpcy5fdD1ufWZ1bmN0aW9uIHFfKHQsbil7aWYoKGk9dC5sZW5ndGgpPjEpZm9yKHZhciBlLHIsaSxvPTEsYT10W25bMF1dLHU9YS5sZW5ndGg7bzxpOysrbylmb3Iocj1hLGE9dFtuW29dXSxlPTA7ZTx1OysrZSlhW2VdWzFdKz1hW2VdWzBdPWlzTmFOKHJbZV1bMV0pP3JbZV1bMF06cltlXVsxXX1mdW5jdGlvbiBMXyh0KXtmb3IodmFyIG49dC5sZW5ndGgsZT1uZXcgQXJyYXkobik7LS1uPj0wOyllW25dPW47cmV0dXJuIGV9ZnVuY3Rpb24gVV8odCxuKXtyZXR1cm4gdFtuXX1mdW5jdGlvbiBPXyh0KXt2YXIgbj10Lm1hcChCXyk7cmV0dXJuIExfKHQpLnNvcnQoZnVuY3Rpb24odCxlKXtyZXR1cm4gblt0XS1uW2VdfSl9ZnVuY3Rpb24gQl8odCl7Zm9yKHZhciBuLGU9LTEscj0wLGk9dC5sZW5ndGgsbz0tMS8wOysrZTxpOykobj0rdFtlXVsxXSk+byYmKG89bixyPWUpO3JldHVybiByfWZ1bmN0aW9uIFlfKHQpe3ZhciBuPXQubWFwKEZfKTtyZXR1cm4gTF8odCkuc29ydChmdW5jdGlvbih0LGUpe3JldHVybiBuW3RdLW5bZV19KX1mdW5jdGlvbiBGXyh0KXtmb3IodmFyIG4sZT0wLHI9LTEsaT10Lmxlbmd0aDsrK3I8aTspKG49K3Rbcl1bMV0pJiYoZSs9bik7cmV0dXJuIGV9ZnVuY3Rpb24gSV8odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHR9fWZ1bmN0aW9uIGpfKHQpe3JldHVybiB0WzBdfWZ1bmN0aW9uIEhfKHQpe3JldHVybiB0WzFdfWZ1bmN0aW9uIFhfKCl7dGhpcy5fPW51bGx9ZnVuY3Rpb24gR18odCl7dC5VPXQuQz10Lkw9dC5SPXQuUD10Lk49bnVsbH1mdW5jdGlvbiBWXyh0LG4pe3ZhciBlPW4scj1uLlIsaT1lLlU7aT9pLkw9PT1lP2kuTD1yOmkuUj1yOnQuXz1yLHIuVT1pLGUuVT1yLGUuUj1yLkwsZS5SJiYoZS5SLlU9ZSksci5MPWV9ZnVuY3Rpb24gJF8odCxuKXt2YXIgZT1uLHI9bi5MLGk9ZS5VO2k/aS5MPT09ZT9pLkw9cjppLlI9cjp0Ll89cixyLlU9aSxlLlU9cixlLkw9ci5SLGUuTCYmKGUuTC5VPWUpLHIuUj1lfWZ1bmN0aW9uIFdfKHQpe2Zvcig7dC5MOyl0PXQuTDtyZXR1cm4gdH1mdW5jdGlvbiBaXyh0LG4sZSxyKXt2YXIgaT1bbnVsbCxudWxsXSxvPW1iLnB1c2goaSktMTtyZXR1cm4gaS5sZWZ0PXQsaS5yaWdodD1uLGUmJkpfKGksdCxuLGUpLHImJkpfKGksbix0LHIpLF9iW3QuaW5kZXhdLmhhbGZlZGdlcy5wdXNoKG8pLF9iW24uaW5kZXhdLmhhbGZlZGdlcy5wdXNoKG8pLGl9ZnVuY3Rpb24gUV8odCxuLGUpe3ZhciByPVtuLGVdO3JldHVybiByLmxlZnQ9dCxyfWZ1bmN0aW9uIEpfKHQsbixlLHIpe3RbMF18fHRbMV0/dC5sZWZ0PT09ZT90WzFdPXI6dFswXT1yOih0WzBdPXIsdC5sZWZ0PW4sdC5yaWdodD1lKX1mdW5jdGlvbiBLXyh0LG4sZSxyLGkpe3ZhciBvLGE9dFswXSx1PXRbMV0sYz1hWzBdLGY9YVsxXSxzPTAsbD0xLGg9dVswXS1jLGQ9dVsxXS1mO2lmKG89bi1jLGh8fCEobz4wKSl7aWYoby89aCxoPDApe2lmKG88cylyZXR1cm47bzxsJiYobD1vKX1lbHNlIGlmKGg+MCl7aWYobz5sKXJldHVybjtvPnMmJihzPW8pfWlmKG89ci1jLGh8fCEobzwwKSl7aWYoby89aCxoPDApe2lmKG8+bClyZXR1cm47bz5zJiYocz1vKX1lbHNlIGlmKGg+MCl7aWYobzxzKXJldHVybjtvPGwmJihsPW8pfWlmKG89ZS1mLGR8fCEobz4wKSl7aWYoby89ZCxkPDApe2lmKG88cylyZXR1cm47bzxsJiYobD1vKX1lbHNlIGlmKGQ+MCl7aWYobz5sKXJldHVybjtvPnMmJihzPW8pfWlmKG89aS1mLGR8fCEobzwwKSl7aWYoby89ZCxkPDApe2lmKG8+bClyZXR1cm47bz5zJiYocz1vKX1lbHNlIGlmKGQ+MCl7aWYobzxzKXJldHVybjtvPGwmJihsPW8pfXJldHVybiEocz4wfHxsPDEpfHwocz4wJiYodFswXT1bYytzKmgsZitzKmRdKSxsPDEmJih0WzFdPVtjK2wqaCxmK2wqZF0pLCEwKX19fX19ZnVuY3Rpb24gdGIodCxuLGUscixpKXt2YXIgbz10WzFdO2lmKG8pcmV0dXJuITA7dmFyIGEsdSxjPXRbMF0sZj10LmxlZnQscz10LnJpZ2h0LGw9ZlswXSxoPWZbMV0sZD1zWzBdLHA9c1sxXSx2PShsK2QpLzIsZz0oaCtwKS8yO2lmKHA9PT1oKXtpZih2PG58fHY+PXIpcmV0dXJuO2lmKGw+ZCl7aWYoYyl7aWYoY1sxXT49aSlyZXR1cm59ZWxzZSBjPVt2LGVdO289W3YsaV19ZWxzZXtpZihjKXtpZihjWzFdPGUpcmV0dXJufWVsc2UgYz1bdixpXTtvPVt2LGVdfX1lbHNlIGlmKHU9Zy0oYT0obC1kKS8ocC1oKSkqdixhPC0xfHxhPjEpaWYobD5kKXtpZihjKXtpZihjWzFdPj1pKXJldHVybn1lbHNlIGM9WyhlLXUpL2EsZV07bz1bKGktdSkvYSxpXX1lbHNle2lmKGMpe2lmKGNbMV08ZSlyZXR1cm59ZWxzZSBjPVsoaS11KS9hLGldO289WyhlLXUpL2EsZV19ZWxzZSBpZihoPHApe2lmKGMpe2lmKGNbMF0+PXIpcmV0dXJufWVsc2UgYz1bbixhKm4rdV07bz1bcixhKnIrdV19ZWxzZXtpZihjKXtpZihjWzBdPG4pcmV0dXJufWVsc2UgYz1bcixhKnIrdV07bz1bbixhKm4rdV19cmV0dXJuIHRbMF09Yyx0WzFdPW8sITB9ZnVuY3Rpb24gbmIodCxuKXt2YXIgZT10LnNpdGUscj1uLmxlZnQsaT1uLnJpZ2h0O3JldHVybiBlPT09aSYmKGk9cixyPWUpLGk/TWF0aC5hdGFuMihpWzFdLXJbMV0saVswXS1yWzBdKTooZT09PXI/KHI9blsxXSxpPW5bMF0pOihyPW5bMF0saT1uWzFdKSxNYXRoLmF0YW4yKHJbMF0taVswXSxpWzFdLXJbMV0pKX1mdW5jdGlvbiBlYih0LG4pe3JldHVybiBuWysobi5sZWZ0IT09dC5zaXRlKV19ZnVuY3Rpb24gcmIodCxuKXtyZXR1cm4gblsrKG4ubGVmdD09PXQuc2l0ZSldfU5fLnByb3RvdHlwZT17YXJlYVN0YXJ0OnJfLGFyZWFFbmQ6cl8sbGluZVN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5fcG9pbnQ9MH0sbGluZUVuZDpmdW5jdGlvbigpe3RoaXMuX3BvaW50JiZ0aGlzLl9jb250ZXh0LmNsb3NlUGF0aCgpfSxwb2ludDpmdW5jdGlvbih0LG4pe3Q9K3Qsbj0rbix0aGlzLl9wb2ludD90aGlzLl9jb250ZXh0LmxpbmVUbyh0LG4pOih0aGlzLl9wb2ludD0xLHRoaXMuX2NvbnRleHQubW92ZVRvKHQsbikpfX0sRV8ucHJvdG90eXBlPXthcmVhU3RhcnQ6ZnVuY3Rpb24oKXt0aGlzLl9saW5lPTB9LGFyZWFFbmQ6ZnVuY3Rpb24oKXt0aGlzLl9saW5lPU5hTn0sbGluZVN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5feDA9dGhpcy5feDE9dGhpcy5feTA9dGhpcy5feTE9dGhpcy5fdDA9TmFOLHRoaXMuX3BvaW50PTB9LGxpbmVFbmQ6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5fcG9pbnQpe2Nhc2UgMjp0aGlzLl9jb250ZXh0LmxpbmVUbyh0aGlzLl94MSx0aGlzLl95MSk7YnJlYWs7Y2FzZSAzOmtfKHRoaXMsdGhpcy5fdDAsU18odGhpcyx0aGlzLl90MCkpfSh0aGlzLl9saW5lfHwwIT09dGhpcy5fbGluZSYmMT09PXRoaXMuX3BvaW50KSYmdGhpcy5fY29udGV4dC5jbG9zZVBhdGgoKSx0aGlzLl9saW5lPTEtdGhpcy5fbGluZX0scG9pbnQ6ZnVuY3Rpb24odCxuKXt2YXIgZT1OYU47aWYobj0rbiwodD0rdCkhPT10aGlzLl94MXx8biE9PXRoaXMuX3kxKXtzd2l0Y2godGhpcy5fcG9pbnQpe2Nhc2UgMDp0aGlzLl9wb2ludD0xLHRoaXMuX2xpbmU/dGhpcy5fY29udGV4dC5saW5lVG8odCxuKTp0aGlzLl9jb250ZXh0Lm1vdmVUbyh0LG4pO2JyZWFrO2Nhc2UgMTp0aGlzLl9wb2ludD0yO2JyZWFrO2Nhc2UgMjp0aGlzLl9wb2ludD0zLGtfKHRoaXMsU18odGhpcyxlPVRfKHRoaXMsdCxuKSksZSk7YnJlYWs7ZGVmYXVsdDprXyh0aGlzLHRoaXMuX3QwLGU9VF8odGhpcyx0LG4pKX10aGlzLl94MD10aGlzLl94MSx0aGlzLl94MT10LHRoaXMuX3kwPXRoaXMuX3kxLHRoaXMuX3kxPW4sdGhpcy5fdDA9ZX19fSwoQ18ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRV8ucHJvdG90eXBlKSkucG9pbnQ9ZnVuY3Rpb24odCxuKXtFXy5wcm90b3R5cGUucG9pbnQuY2FsbCh0aGlzLG4sdCl9LFBfLnByb3RvdHlwZT17bW92ZVRvOmZ1bmN0aW9uKHQsbil7dGhpcy5fY29udGV4dC5tb3ZlVG8obix0KX0sY2xvc2VQYXRoOmZ1bmN0aW9uKCl7dGhpcy5fY29udGV4dC5jbG9zZVBhdGgoKX0sbGluZVRvOmZ1bmN0aW9uKHQsbil7dGhpcy5fY29udGV4dC5saW5lVG8obix0KX0sYmV6aWVyQ3VydmVUbzpmdW5jdGlvbih0LG4sZSxyLGksbyl7dGhpcy5fY29udGV4dC5iZXppZXJDdXJ2ZVRvKG4sdCxyLGUsbyxpKX19LHpfLnByb3RvdHlwZT17YXJlYVN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5fbGluZT0wfSxhcmVhRW5kOmZ1bmN0aW9uKCl7dGhpcy5fbGluZT1OYU59LGxpbmVTdGFydDpmdW5jdGlvbigpe3RoaXMuX3g9W10sdGhpcy5feT1bXX0sbGluZUVuZDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3gsbj10aGlzLl95LGU9dC5sZW5ndGg7aWYoZSlpZih0aGlzLl9saW5lP3RoaXMuX2NvbnRleHQubGluZVRvKHRbMF0sblswXSk6dGhpcy5fY29udGV4dC5tb3ZlVG8odFswXSxuWzBdKSwyPT09ZSl0aGlzLl9jb250ZXh0LmxpbmVUbyh0WzFdLG5bMV0pO2Vsc2UgZm9yKHZhciByPVJfKHQpLGk9Ul8obiksbz0wLGE9MTthPGU7KytvLCsrYSl0aGlzLl9jb250ZXh0LmJlemllckN1cnZlVG8oclswXVtvXSxpWzBdW29dLHJbMV1bb10saVsxXVtvXSx0W2FdLG5bYV0pOyh0aGlzLl9saW5lfHwwIT09dGhpcy5fbGluZSYmMT09PWUpJiZ0aGlzLl9jb250ZXh0LmNsb3NlUGF0aCgpLHRoaXMuX2xpbmU9MS10aGlzLl9saW5lLHRoaXMuX3g9dGhpcy5feT1udWxsfSxwb2ludDpmdW5jdGlvbih0LG4pe3RoaXMuX3gucHVzaCgrdCksdGhpcy5feS5wdXNoKCtuKX19LERfLnByb3RvdHlwZT17YXJlYVN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5fbGluZT0wfSxhcmVhRW5kOmZ1bmN0aW9uKCl7dGhpcy5fbGluZT1OYU59LGxpbmVTdGFydDpmdW5jdGlvbigpe3RoaXMuX3g9dGhpcy5feT1OYU4sdGhpcy5fcG9pbnQ9MH0sbGluZUVuZDpmdW5jdGlvbigpezA8dGhpcy5fdCYmdGhpcy5fdDwxJiYyPT09dGhpcy5fcG9pbnQmJnRoaXMuX2NvbnRleHQubGluZVRvKHRoaXMuX3gsdGhpcy5feSksKHRoaXMuX2xpbmV8fDAhPT10aGlzLl9saW5lJiYxPT09dGhpcy5fcG9pbnQpJiZ0aGlzLl9jb250ZXh0LmNsb3NlUGF0aCgpLHRoaXMuX2xpbmU+PTAmJih0aGlzLl90PTEtdGhpcy5fdCx0aGlzLl9saW5lPTEtdGhpcy5fbGluZSl9LHBvaW50OmZ1bmN0aW9uKHQsbil7c3dpdGNoKHQ9K3Qsbj0rbix0aGlzLl9wb2ludCl7Y2FzZSAwOnRoaXMuX3BvaW50PTEsdGhpcy5fbGluZT90aGlzLl9jb250ZXh0LmxpbmVUbyh0LG4pOnRoaXMuX2NvbnRleHQubW92ZVRvKHQsbik7YnJlYWs7Y2FzZSAxOnRoaXMuX3BvaW50PTI7ZGVmYXVsdDppZih0aGlzLl90PD0wKXRoaXMuX2NvbnRleHQubGluZVRvKHRoaXMuX3gsbiksdGhpcy5fY29udGV4dC5saW5lVG8odCxuKTtlbHNle3ZhciBlPXRoaXMuX3gqKDEtdGhpcy5fdCkrdCp0aGlzLl90O3RoaXMuX2NvbnRleHQubGluZVRvKGUsdGhpcy5feSksdGhpcy5fY29udGV4dC5saW5lVG8oZSxuKX19dGhpcy5feD10LHRoaXMuX3k9bn19LFhfLnByb3RvdHlwZT17Y29uc3RydWN0b3I6WF8saW5zZXJ0OmZ1bmN0aW9uKHQsbil7dmFyIGUscixpO2lmKHQpe2lmKG4uUD10LG4uTj10Lk4sdC5OJiYodC5OLlA9biksdC5OPW4sdC5SKXtmb3IodD10LlI7dC5MOyl0PXQuTDt0Lkw9bn1lbHNlIHQuUj1uO2U9dH1lbHNlIHRoaXMuXz8odD1XXyh0aGlzLl8pLG4uUD1udWxsLG4uTj10LHQuUD10Lkw9bixlPXQpOihuLlA9bi5OPW51bGwsdGhpcy5fPW4sZT1udWxsKTtmb3Iobi5MPW4uUj1udWxsLG4uVT1lLG4uQz0hMCx0PW47ZSYmZS5DOyllPT09KHI9ZS5VKS5MPyhpPXIuUikmJmkuQz8oZS5DPWkuQz0hMSxyLkM9ITAsdD1yKToodD09PWUuUiYmKFZfKHRoaXMsZSksZT0odD1lKS5VKSxlLkM9ITEsci5DPSEwLCRfKHRoaXMscikpOihpPXIuTCkmJmkuQz8oZS5DPWkuQz0hMSxyLkM9ITAsdD1yKToodD09PWUuTCYmKCRfKHRoaXMsZSksZT0odD1lKS5VKSxlLkM9ITEsci5DPSEwLFZfKHRoaXMscikpLGU9dC5VO3RoaXMuXy5DPSExfSxyZW1vdmU6ZnVuY3Rpb24odCl7dC5OJiYodC5OLlA9dC5QKSx0LlAmJih0LlAuTj10Lk4pLHQuTj10LlA9bnVsbDt2YXIgbixlLHIsaT10LlUsbz10LkwsYT10LlI7aWYoZT1vP2E/V18oYSk6bzphLGk/aS5MPT09dD9pLkw9ZTppLlI9ZTp0aGlzLl89ZSxvJiZhPyhyPWUuQyxlLkM9dC5DLGUuTD1vLG8uVT1lLGUhPT1hPyhpPWUuVSxlLlU9dC5VLHQ9ZS5SLGkuTD10LGUuUj1hLGEuVT1lKTooZS5VPWksaT1lLHQ9ZS5SKSk6KHI9dC5DLHQ9ZSksdCYmKHQuVT1pKSwhcilpZih0JiZ0LkMpdC5DPSExO2Vsc2V7ZG97aWYodD09PXRoaXMuXylicmVhaztpZih0PT09aS5MKXtpZigobj1pLlIpLkMmJihuLkM9ITEsaS5DPSEwLFZfKHRoaXMsaSksbj1pLlIpLG4uTCYmbi5MLkN8fG4uUiYmbi5SLkMpe24uUiYmbi5SLkN8fChuLkwuQz0hMSxuLkM9ITAsJF8odGhpcyxuKSxuPWkuUiksbi5DPWkuQyxpLkM9bi5SLkM9ITEsVl8odGhpcyxpKSx0PXRoaXMuXzticmVha319ZWxzZSBpZigobj1pLkwpLkMmJihuLkM9ITEsaS5DPSEwLCRfKHRoaXMsaSksbj1pLkwpLG4uTCYmbi5MLkN8fG4uUiYmbi5SLkMpe24uTCYmbi5MLkN8fChuLlIuQz0hMSxuLkM9ITAsVl8odGhpcyxuKSxuPWkuTCksbi5DPWkuQyxpLkM9bi5MLkM9ITEsJF8odGhpcyxpKSx0PXRoaXMuXzticmVha31uLkM9ITAsdD1pLGk9aS5VfXdoaWxlKCF0LkMpO3QmJih0LkM9ITEpfX19O3ZhciBpYixvYj1bXTtmdW5jdGlvbiBhYigpe0dfKHRoaXMpLHRoaXMueD10aGlzLnk9dGhpcy5hcmM9dGhpcy5zaXRlPXRoaXMuY3k9bnVsbH1mdW5jdGlvbiB1Yih0KXt2YXIgbj10LlAsZT10Lk47aWYobiYmZSl7dmFyIHI9bi5zaXRlLGk9dC5zaXRlLG89ZS5zaXRlO2lmKHIhPT1vKXt2YXIgYT1pWzBdLHU9aVsxXSxjPXJbMF0tYSxmPXJbMV0tdSxzPW9bMF0tYSxsPW9bMV0tdSxoPTIqKGMqbC1mKnMpO2lmKCEoaD49LXdiKSl7dmFyIGQ9YypjK2YqZixwPXMqcytsKmwsdj0obCpkLWYqcCkvaCxnPShjKnAtcypkKS9oLHk9b2IucG9wKCl8fG5ldyBhYjt5LmFyYz10LHkuc2l0ZT1pLHkueD12K2EseS55PSh5LmN5PWcrdSkrTWF0aC5zcXJ0KHYqditnKmcpLHQuY2lyY2xlPXk7Zm9yKHZhciBfPW51bGwsYj1iYi5fO2I7KWlmKHkueTxiLnl8fHkueT09PWIueSYmeS54PD1iLngpe2lmKCFiLkwpe189Yi5QO2JyZWFrfWI9Yi5MfWVsc2V7aWYoIWIuUil7Xz1iO2JyZWFrfWI9Yi5SfWJiLmluc2VydChfLHkpLF98fChpYj15KX19fX1mdW5jdGlvbiBjYih0KXt2YXIgbj10LmNpcmNsZTtuJiYobi5QfHwoaWI9bi5OKSxiYi5yZW1vdmUobiksb2IucHVzaChuKSxHXyhuKSx0LmNpcmNsZT1udWxsKX12YXIgZmI9W107ZnVuY3Rpb24gc2IoKXtHXyh0aGlzKSx0aGlzLmVkZ2U9dGhpcy5zaXRlPXRoaXMuY2lyY2xlPW51bGx9ZnVuY3Rpb24gbGIodCl7dmFyIG49ZmIucG9wKCl8fG5ldyBzYjtyZXR1cm4gbi5zaXRlPXQsbn1mdW5jdGlvbiBoYih0KXtjYih0KSx5Yi5yZW1vdmUodCksZmIucHVzaCh0KSxHXyh0KX1mdW5jdGlvbiBkYih0KXt2YXIgbj10LmNpcmNsZSxlPW4ueCxyPW4uY3ksaT1bZSxyXSxvPXQuUCxhPXQuTix1PVt0XTtoYih0KTtmb3IodmFyIGM9bztjLmNpcmNsZSYmTWF0aC5hYnMoZS1jLmNpcmNsZS54KTx4YiYmTWF0aC5hYnMoci1jLmNpcmNsZS5jeSk8eGI7KW89Yy5QLHUudW5zaGlmdChjKSxoYihjKSxjPW87dS51bnNoaWZ0KGMpLGNiKGMpO2Zvcih2YXIgZj1hO2YuY2lyY2xlJiZNYXRoLmFicyhlLWYuY2lyY2xlLngpPHhiJiZNYXRoLmFicyhyLWYuY2lyY2xlLmN5KTx4YjspYT1mLk4sdS5wdXNoKGYpLGhiKGYpLGY9YTt1LnB1c2goZiksY2IoZik7dmFyIHMsbD11Lmxlbmd0aDtmb3Iocz0xO3M8bDsrK3MpZj11W3NdLGM9dVtzLTFdLEpfKGYuZWRnZSxjLnNpdGUsZi5zaXRlLGkpO2M9dVswXSwoZj11W2wtMV0pLmVkZ2U9Wl8oYy5zaXRlLGYuc2l0ZSxudWxsLGkpLHViKGMpLHViKGYpfWZ1bmN0aW9uIHBiKHQpe2Zvcih2YXIgbixlLHIsaSxvPXRbMF0sYT10WzFdLHU9eWIuXzt1OylpZigocj12Yih1LGEpLW8pPnhiKXU9dS5MO2Vsc2V7aWYoISgoaT1vLWdiKHUsYSkpPnhiKSl7cj4teGI/KG49dS5QLGU9dSk6aT4teGI/KG49dSxlPXUuTik6bj1lPXU7YnJlYWt9aWYoIXUuUil7bj11O2JyZWFrfXU9dS5SfSFmdW5jdGlvbih0KXtfYlt0LmluZGV4XT17c2l0ZTp0LGhhbGZlZGdlczpbXX19KHQpO3ZhciBjPWxiKHQpO2lmKHliLmluc2VydChuLGMpLG58fGUpe2lmKG49PT1lKXJldHVybiBjYihuKSxlPWxiKG4uc2l0ZSkseWIuaW5zZXJ0KGMsZSksYy5lZGdlPWUuZWRnZT1aXyhuLnNpdGUsYy5zaXRlKSx1YihuKSx2b2lkIHViKGUpO2lmKGUpe2NiKG4pLGNiKGUpO3ZhciBmPW4uc2l0ZSxzPWZbMF0sbD1mWzFdLGg9dFswXS1zLGQ9dFsxXS1sLHA9ZS5zaXRlLHY9cFswXS1zLGc9cFsxXS1sLHk9MiooaCpnLWQqdiksXz1oKmgrZCpkLGI9dip2K2cqZyxtPVsoZypfLWQqYikveStzLChoKmItdipfKS95K2xdO0pfKGUuZWRnZSxmLHAsbSksYy5lZGdlPVpfKGYsdCxudWxsLG0pLGUuZWRnZT1aXyh0LHAsbnVsbCxtKSx1YihuKSx1YihlKX1lbHNlIGMuZWRnZT1aXyhuLnNpdGUsYy5zaXRlKX19ZnVuY3Rpb24gdmIodCxuKXt2YXIgZT10LnNpdGUscj1lWzBdLGk9ZVsxXSxvPWktbjtpZighbylyZXR1cm4gcjt2YXIgYT10LlA7aWYoIWEpcmV0dXJuLTEvMDt2YXIgdT0oZT1hLnNpdGUpWzBdLGM9ZVsxXSxmPWMtbjtpZighZilyZXR1cm4gdTt2YXIgcz11LXIsbD0xL28tMS9mLGg9cy9mO3JldHVybiBsPygtaCtNYXRoLnNxcnQoaCpoLTIqbCoocypzLygtMipmKS1jK2YvMitpLW8vMikpKS9sK3I6KHIrdSkvMn1mdW5jdGlvbiBnYih0LG4pe3ZhciBlPXQuTjtpZihlKXJldHVybiB2YihlLG4pO3ZhciByPXQuc2l0ZTtyZXR1cm4gclsxXT09PW4/clswXToxLzB9dmFyIHliLF9iLGJiLG1iLHhiPTFlLTYsd2I9MWUtMTI7ZnVuY3Rpb24gTWIodCxuKXtyZXR1cm4gblsxXS10WzFdfHxuWzBdLXRbMF19ZnVuY3Rpb24gTmIodCxuKXt2YXIgZSxyLGksbz10LnNvcnQoTWIpLnBvcCgpO2ZvcihtYj1bXSxfYj1uZXcgQXJyYXkodC5sZW5ndGgpLHliPW5ldyBYXyxiYj1uZXcgWF87OylpZihpPWliLG8mJighaXx8b1sxXTxpLnl8fG9bMV09PT1pLnkmJm9bMF08aS54KSlvWzBdPT09ZSYmb1sxXT09PXJ8fChwYihvKSxlPW9bMF0scj1vWzFdKSxvPXQucG9wKCk7ZWxzZXtpZighaSlicmVhaztkYihpLmFyYyl9aWYoZnVuY3Rpb24oKXtmb3IodmFyIHQsbixlLHIsaT0wLG89X2IubGVuZ3RoO2k8bzsrK2kpaWYoKHQ9X2JbaV0pJiYocj0obj10LmhhbGZlZGdlcykubGVuZ3RoKSl7dmFyIGE9bmV3IEFycmF5KHIpLHU9bmV3IEFycmF5KHIpO2ZvcihlPTA7ZTxyOysrZSlhW2VdPWUsdVtlXT1uYih0LG1iW25bZV1dKTtmb3IoYS5zb3J0KGZ1bmN0aW9uKHQsbil7cmV0dXJuIHVbbl0tdVt0XX0pLGU9MDtlPHI7KytlKXVbZV09blthW2VdXTtmb3IoZT0wO2U8cjsrK2UpbltlXT11W2VdfX0oKSxuKXt2YXIgYT0rblswXVswXSx1PStuWzBdWzFdLGM9K25bMV1bMF0sZj0rblsxXVsxXTshZnVuY3Rpb24odCxuLGUscil7Zm9yKHZhciBpLG89bWIubGVuZ3RoO28tLTspdGIoaT1tYltvXSx0LG4sZSxyKSYmS18oaSx0LG4sZSxyKSYmKE1hdGguYWJzKGlbMF1bMF0taVsxXVswXSk+eGJ8fE1hdGguYWJzKGlbMF1bMV0taVsxXVsxXSk+eGIpfHxkZWxldGUgbWJbb119KGEsdSxjLGYpLGZ1bmN0aW9uKHQsbixlLHIpe3ZhciBpLG8sYSx1LGMsZixzLGwsaCxkLHAsdixnPV9iLmxlbmd0aCx5PSEwO2ZvcihpPTA7aTxnOysraSlpZihvPV9iW2ldKXtmb3IoYT1vLnNpdGUsdT0oYz1vLmhhbGZlZGdlcykubGVuZ3RoO3UtLTspbWJbY1t1XV18fGMuc3BsaWNlKHUsMSk7Zm9yKHU9MCxmPWMubGVuZ3RoO3U8ZjspcD0oZD1yYihvLG1iW2NbdV1dKSlbMF0sdj1kWzFdLGw9KHM9ZWIobyxtYltjWysrdSVmXV0pKVswXSxoPXNbMV0sKE1hdGguYWJzKHAtbCk+eGJ8fE1hdGguYWJzKHYtaCk+eGIpJiYoYy5zcGxpY2UodSwwLG1iLnB1c2goUV8oYSxkLE1hdGguYWJzKHAtdCk8eGImJnItdj54Yj9bdCxNYXRoLmFicyhsLXQpPHhiP2g6cl06TWF0aC5hYnModi1yKTx4YiYmZS1wPnhiP1tNYXRoLmFicyhoLXIpPHhiP2w6ZSxyXTpNYXRoLmFicyhwLWUpPHhiJiZ2LW4+eGI/W2UsTWF0aC5hYnMobC1lKTx4Yj9oOm5dOk1hdGguYWJzKHYtbik8eGImJnAtdD54Yj9bTWF0aC5hYnMoaC1uKTx4Yj9sOnQsbl06bnVsbCkpLTEpLCsrZik7ZiYmKHk9ITEpfWlmKHkpe3ZhciBfLGIsbSx4PTEvMDtmb3IoaT0wLHk9bnVsbDtpPGc7KytpKShvPV9iW2ldKSYmKG09KF89KGE9by5zaXRlKVswXS10KSpfKyhiPWFbMV0tbikqYik8eCYmKHg9bSx5PW8pO2lmKHkpe3ZhciB3PVt0LG5dLE09W3Qscl0sTj1bZSxyXSxBPVtlLG5dO3kuaGFsZmVkZ2VzLnB1c2gobWIucHVzaChRXyhhPXkuc2l0ZSx3LE0pKS0xLG1iLnB1c2goUV8oYSxNLE4pKS0xLG1iLnB1c2goUV8oYSxOLEEpKS0xLG1iLnB1c2goUV8oYSxBLHcpKS0xKX19Zm9yKGk9MDtpPGc7KytpKShvPV9iW2ldKSYmKG8uaGFsZmVkZ2VzLmxlbmd0aHx8ZGVsZXRlIF9iW2ldKX0oYSx1LGMsZil9dGhpcy5lZGdlcz1tYix0aGlzLmNlbGxzPV9iLHliPWJiPW1iPV9iPW51bGx9ZnVuY3Rpb24gQWIodCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHR9fWZ1bmN0aW9uIFRiKHQsbixlKXt0aGlzLnRhcmdldD10LHRoaXMudHlwZT1uLHRoaXMudHJhbnNmb3JtPWV9ZnVuY3Rpb24gU2IodCxuLGUpe3RoaXMuaz10LHRoaXMueD1uLHRoaXMueT1lfU5iLnByb3RvdHlwZT17Y29uc3RydWN0b3I6TmIscG9seWdvbnM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmVkZ2VzO3JldHVybiB0aGlzLmNlbGxzLm1hcChmdW5jdGlvbihuKXt2YXIgZT1uLmhhbGZlZGdlcy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGViKG4sdFtlXSl9KTtyZXR1cm4gZS5kYXRhPW4uc2l0ZS5kYXRhLGV9KX0sdHJpYW5nbGVzOmZ1bmN0aW9uKCl7dmFyIHQ9W10sbj10aGlzLmVkZ2VzO3JldHVybiB0aGlzLmNlbGxzLmZvckVhY2goZnVuY3Rpb24oZSxyKXtpZihvPShpPWUuaGFsZmVkZ2VzKS5sZW5ndGgpZm9yKHZhciBpLG8sYSx1LGMsZixzPWUuc2l0ZSxsPS0xLGg9bltpW28tMV1dLGQ9aC5sZWZ0PT09cz9oLnJpZ2h0OmgubGVmdDsrK2w8bzspYT1kLGQ9KGg9bltpW2xdXSkubGVmdD09PXM/aC5yaWdodDpoLmxlZnQsYSYmZCYmcjxhLmluZGV4JiZyPGQuaW5kZXgmJihjPWEsZj1kLCgodT1zKVswXS1mWzBdKSooY1sxXS11WzFdKS0odVswXS1jWzBdKSooZlsxXS11WzFdKTwwKSYmdC5wdXNoKFtzLmRhdGEsYS5kYXRhLGQuZGF0YV0pfSksdH0sbGlua3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lZGdlcy5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHQucmlnaHR9KS5tYXAoZnVuY3Rpb24odCl7cmV0dXJue3NvdXJjZTp0LmxlZnQuZGF0YSx0YXJnZXQ6dC5yaWdodC5kYXRhfX0pfSxmaW5kOmZ1bmN0aW9uKHQsbixlKXtmb3IodmFyIHIsaSxvPXRoaXMsYT1vLl9mb3VuZHx8MCx1PW8uY2VsbHMubGVuZ3RoOyEoaT1vLmNlbGxzW2FdKTspaWYoKythPj11KXJldHVybiBudWxsO3ZhciBjPXQtaS5zaXRlWzBdLGY9bi1pLnNpdGVbMV0scz1jKmMrZipmO2Rve2k9by5jZWxsc1tyPWFdLGE9bnVsbCxpLmhhbGZlZGdlcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciByPW8uZWRnZXNbZV0sdT1yLmxlZnQ7aWYodSE9PWkuc2l0ZSYmdXx8KHU9ci5yaWdodCkpe3ZhciBjPXQtdVswXSxmPW4tdVsxXSxsPWMqYytmKmY7bDxzJiYocz1sLGE9dS5pbmRleCl9fSl9d2hpbGUobnVsbCE9PWEpO3JldHVybiBvLl9mb3VuZD1yLG51bGw9PWV8fHM8PWUqZT9pLnNpdGU6bnVsbH19LFNiLnByb3RvdHlwZT17Y29uc3RydWN0b3I6U2Isc2NhbGU6ZnVuY3Rpb24odCl7cmV0dXJuIDE9PT10P3RoaXM6bmV3IFNiKHRoaXMuayp0LHRoaXMueCx0aGlzLnkpfSx0cmFuc2xhdGU6ZnVuY3Rpb24odCxuKXtyZXR1cm4gMD09PXQmMD09PW4/dGhpczpuZXcgU2IodGhpcy5rLHRoaXMueCt0aGlzLmsqdCx0aGlzLnkrdGhpcy5rKm4pfSxhcHBseTpmdW5jdGlvbih0KXtyZXR1cm5bdFswXSp0aGlzLmsrdGhpcy54LHRbMV0qdGhpcy5rK3RoaXMueV19LGFwcGx5WDpmdW5jdGlvbih0KXtyZXR1cm4gdCp0aGlzLmsrdGhpcy54fSxhcHBseVk6ZnVuY3Rpb24odCl7cmV0dXJuIHQqdGhpcy5rK3RoaXMueX0saW52ZXJ0OmZ1bmN0aW9uKHQpe3JldHVyblsodFswXS10aGlzLngpL3RoaXMuaywodFsxXS10aGlzLnkpL3RoaXMua119LGludmVydFg6ZnVuY3Rpb24odCl7cmV0dXJuKHQtdGhpcy54KS90aGlzLmt9LGludmVydFk6ZnVuY3Rpb24odCl7cmV0dXJuKHQtdGhpcy55KS90aGlzLmt9LHJlc2NhbGVYOmZ1bmN0aW9uKHQpe3JldHVybiB0LmNvcHkoKS5kb21haW4odC5yYW5nZSgpLm1hcCh0aGlzLmludmVydFgsdGhpcykubWFwKHQuaW52ZXJ0LHQpKX0scmVzY2FsZVk6ZnVuY3Rpb24odCl7cmV0dXJuIHQuY29weSgpLmRvbWFpbih0LnJhbmdlKCkubWFwKHRoaXMuaW52ZXJ0WSx0aGlzKS5tYXAodC5pbnZlcnQsdCkpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiJ0cmFuc2xhdGUoIit0aGlzLngrIiwiK3RoaXMueSsiKSBzY2FsZSgiK3RoaXMuaysiKSJ9fTt2YXIga2I9bmV3IFNiKDEsMCwwKTtmdW5jdGlvbiBFYih0KXtyZXR1cm4gdC5fX3pvb218fGtifWZ1bmN0aW9uIENiKCl7dC5ldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKX1mdW5jdGlvbiBQYigpe3QuZXZlbnQucHJldmVudERlZmF1bHQoKSx0LmV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpfWZ1bmN0aW9uIHpiKCl7cmV0dXJuIXQuZXZlbnQuYnV0dG9ufWZ1bmN0aW9uIFJiKCl7dmFyIHQsbixlPXRoaXM7cmV0dXJuIGUgaW5zdGFuY2VvZiBTVkdFbGVtZW50Pyh0PShlPWUub3duZXJTVkdFbGVtZW50fHxlKS53aWR0aC5iYXNlVmFsLnZhbHVlLG49ZS5oZWlnaHQuYmFzZVZhbC52YWx1ZSk6KHQ9ZS5jbGllbnRXaWR0aCxuPWUuY2xpZW50SGVpZ2h0KSxbWzAsMF0sW3Qsbl1dfWZ1bmN0aW9uIERiKCl7cmV0dXJuIHRoaXMuX196b29tfHxrYn1mdW5jdGlvbiBxYigpe3JldHVybi10LmV2ZW50LmRlbHRhWSoodC5ldmVudC5kZWx0YU1vZGU/MTIwOjEpLzUwMH1mdW5jdGlvbiBMYigpe3JldHVybiJvbnRvdWNoc3RhcnQiaW4gdGhpc31mdW5jdGlvbiBVYih0LG4sZSl7dmFyIHI9dC5pbnZlcnRYKG5bMF1bMF0pLWVbMF1bMF0saT10LmludmVydFgoblsxXVswXSktZVsxXVswXSxvPXQuaW52ZXJ0WShuWzBdWzFdKS1lWzBdWzFdLGE9dC5pbnZlcnRZKG5bMV1bMV0pLWVbMV1bMV07cmV0dXJuIHQudHJhbnNsYXRlKGk+cj8ocitpKS8yOk1hdGgubWluKDAscil8fE1hdGgubWF4KDAsaSksYT5vPyhvK2EpLzI6TWF0aC5taW4oMCxvKXx8TWF0aC5tYXgoMCxhKSl9RWIucHJvdG90eXBlPVNiLnByb3RvdHlwZSx0LnZlcnNpb249IjUuOS4yIix0LmJpc2VjdD1pLHQuYmlzZWN0UmlnaHQ9aSx0LmJpc2VjdExlZnQ9byx0LmFzY2VuZGluZz1uLHQuYmlzZWN0b3I9ZSx0LmNyb3NzPWZ1bmN0aW9uKHQsbixlKXt2YXIgcixpLG8sdSxjPXQubGVuZ3RoLGY9bi5sZW5ndGgscz1uZXcgQXJyYXkoYypmKTtmb3IobnVsbD09ZSYmKGU9YSkscj1vPTA7cjxjOysrcilmb3IodT10W3JdLGk9MDtpPGY7KytpLCsrbylzW29dPWUodSxuW2ldKTtyZXR1cm4gc30sdC5kZXNjZW5kaW5nPWZ1bmN0aW9uKHQsbil7cmV0dXJuIG48dD8tMTpuPnQ/MTpuPj10PzA6TmFOfSx0LmRldmlhdGlvbj1mLHQuZXh0ZW50PXMsdC5oaXN0b2dyYW09ZnVuY3Rpb24oKXt2YXIgdD12LG49cyxlPU07ZnVuY3Rpb24gcihyKXt2YXIgbyxhLHU9ci5sZW5ndGgsYz1uZXcgQXJyYXkodSk7Zm9yKG89MDtvPHU7KytvKWNbb109dChyW29dLG8scik7dmFyIGY9bihjKSxzPWZbMF0sbD1mWzFdLGg9ZShjLHMsbCk7QXJyYXkuaXNBcnJheShoKXx8KGg9dyhzLGwsaCksaD1nKE1hdGguY2VpbChzL2gpKmgsbCxoKSk7Zm9yKHZhciBkPWgubGVuZ3RoO2hbMF08PXM7KWguc2hpZnQoKSwtLWQ7Zm9yKDtoW2QtMV0+bDspaC5wb3AoKSwtLWQ7dmFyIHAsdj1uZXcgQXJyYXkoZCsxKTtmb3Iobz0wO288PWQ7KytvKShwPXZbb109W10pLngwPW8+MD9oW28tMV06cyxwLngxPW88ZD9oW29dOmw7Zm9yKG89MDtvPHU7KytvKXM8PShhPWNbb10pJiZhPD1sJiZ2W2koaCxhLDAsZCldLnB1c2gocltvXSk7cmV0dXJuIHZ9cmV0dXJuIHIudmFsdWU9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHQ9ImZ1bmN0aW9uIj09dHlwZW9mIG4/bjpwKG4pLHIpOnR9LHIuZG9tYWluPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhuPSJmdW5jdGlvbiI9PXR5cGVvZiB0P3Q6cChbdFswXSx0WzFdXSkscik6bn0sci50aHJlc2hvbGRzPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhlPSJmdW5jdGlvbiI9PXR5cGVvZiB0P3Q6QXJyYXkuaXNBcnJheSh0KT9wKGguY2FsbCh0KSk6cCh0KSxyKTplfSxyfSx0LnRocmVzaG9sZEZyZWVkbWFuRGlhY29uaXM9ZnVuY3Rpb24odCxlLHIpe3JldHVybiB0PWQuY2FsbCh0LHUpLnNvcnQobiksTWF0aC5jZWlsKChyLWUpLygyKihOKHQsLjc1KS1OKHQsLjI1KSkqTWF0aC5wb3codC5sZW5ndGgsLTEvMykpKX0sdC50aHJlc2hvbGRTY290dD1mdW5jdGlvbih0LG4sZSl7cmV0dXJuIE1hdGguY2VpbCgoZS1uKS8oMy41KmYodCkqTWF0aC5wb3codC5sZW5ndGgsLTEvMykpKX0sdC50aHJlc2hvbGRTdHVyZ2VzPU0sdC5tYXg9QSx0Lm1lYW49ZnVuY3Rpb24odCxuKXt2YXIgZSxyPXQubGVuZ3RoLGk9cixvPS0xLGE9MDtpZihudWxsPT1uKWZvcig7KytvPHI7KWlzTmFOKGU9dSh0W29dKSk/LS1pOmErPWU7ZWxzZSBmb3IoOysrbzxyOylpc05hTihlPXUobih0W29dLG8sdCkpKT8tLWk6YSs9ZTtpZihpKXJldHVybiBhL2l9LHQubWVkaWFuPWZ1bmN0aW9uKHQsZSl7dmFyIHIsaT10Lmxlbmd0aCxvPS0xLGE9W107aWYobnVsbD09ZSlmb3IoOysrbzxpOylpc05hTihyPXUodFtvXSkpfHxhLnB1c2gocik7ZWxzZSBmb3IoOysrbzxpOylpc05hTihyPXUoZSh0W29dLG8sdCkpKXx8YS5wdXNoKHIpO3JldHVybiBOKGEuc29ydChuKSwuNSl9LHQubWVyZ2U9VCx0Lm1pbj1TLHQucGFpcnM9ZnVuY3Rpb24odCxuKXtudWxsPT1uJiYobj1hKTtmb3IodmFyIGU9MCxyPXQubGVuZ3RoLTEsaT10WzBdLG89bmV3IEFycmF5KHI8MD8wOnIpO2U8cjspb1tlXT1uKGksaT10WysrZV0pO3JldHVybiBvfSx0LnBlcm11dGU9ZnVuY3Rpb24odCxuKXtmb3IodmFyIGU9bi5sZW5ndGgscj1uZXcgQXJyYXkoZSk7ZS0tOylyW2VdPXRbbltlXV07cmV0dXJuIHJ9LHQucXVhbnRpbGU9Tix0LnJhbmdlPWcsdC5zY2FuPWZ1bmN0aW9uKHQsZSl7aWYocj10Lmxlbmd0aCl7dmFyIHIsaSxvPTAsYT0wLHU9dFthXTtmb3IobnVsbD09ZSYmKGU9bik7KytvPHI7KShlKGk9dFtvXSx1KTwwfHwwIT09ZSh1LHUpKSYmKHU9aSxhPW8pO3JldHVybiAwPT09ZSh1LHUpP2E6dm9pZCAwfX0sdC5zaHVmZmxlPWZ1bmN0aW9uKHQsbixlKXtmb3IodmFyIHIsaSxvPShudWxsPT1lP3QubGVuZ3RoOmUpLShuPW51bGw9PW4/MDorbik7bzspaT1NYXRoLnJhbmRvbSgpKm8tLXwwLHI9dFtvK25dLHRbbytuXT10W2krbl0sdFtpK25dPXI7cmV0dXJuIHR9LHQuc3VtPWZ1bmN0aW9uKHQsbil7dmFyIGUscj10Lmxlbmd0aCxpPS0xLG89MDtpZihudWxsPT1uKWZvcig7KytpPHI7KShlPSt0W2ldKSYmKG8rPWUpO2Vsc2UgZm9yKDsrK2k8cjspKGU9K24odFtpXSxpLHQpKSYmKG8rPWUpO3JldHVybiBvfSx0LnRpY2tzPW0sdC50aWNrSW5jcmVtZW50PXgsdC50aWNrU3RlcD13LHQudHJhbnNwb3NlPWssdC52YXJpYW5jZT1jLHQuemlwPWZ1bmN0aW9uKCl7cmV0dXJuIGsoYXJndW1lbnRzKX0sdC5heGlzVG9wPWZ1bmN0aW9uKHQpe3JldHVybiBZKHosdCl9LHQuYXhpc1JpZ2h0PWZ1bmN0aW9uKHQpe3JldHVybiBZKFIsdCl9LHQuYXhpc0JvdHRvbT1mdW5jdGlvbih0KXtyZXR1cm4gWShELHQpfSx0LmF4aXNMZWZ0PWZ1bmN0aW9uKHQpe3JldHVybiBZKHEsdCl9LHQuYnJ1c2g9ZnVuY3Rpb24oKXtyZXR1cm4gUGkobWkpfSx0LmJydXNoWD1mdW5jdGlvbigpe3JldHVybiBQaShfaSl9LHQuYnJ1c2hZPWZ1bmN0aW9uKCl7cmV0dXJuIFBpKGJpKX0sdC5icnVzaFNlbGVjdGlvbj1mdW5jdGlvbih0KXt2YXIgbj10Ll9fYnJ1c2g7cmV0dXJuIG4/bi5kaW0ub3V0cHV0KG4uc2VsZWN0aW9uKTpudWxsfSx0LmNob3JkPWZ1bmN0aW9uKCl7dmFyIHQ9MCxuPW51bGwsZT1udWxsLHI9bnVsbDtmdW5jdGlvbiBpKGkpe3ZhciBvLGEsdSxjLGYscyxsPWkubGVuZ3RoLGg9W10sZD1nKGwpLHA9W10sdj1bXSx5PXYuZ3JvdXBzPW5ldyBBcnJheShsKSxfPW5ldyBBcnJheShsKmwpO2ZvcihvPTAsZj0tMTsrK2Y8bDspe2ZvcihhPTAscz0tMTsrK3M8bDspYSs9aVtmXVtzXTtoLnB1c2goYSkscC5wdXNoKGcobCkpLG8rPWF9Zm9yKG4mJmQuc29ydChmdW5jdGlvbih0LGUpe3JldHVybiBuKGhbdF0saFtlXSl9KSxlJiZwLmZvckVhY2goZnVuY3Rpb24odCxuKXt0LnNvcnQoZnVuY3Rpb24odCxyKXtyZXR1cm4gZShpW25dW3RdLGlbbl1bcl0pfSl9KSxjPShvPVVpKDAsTGktdCpsKS9vKT90OkxpL2wsYT0wLGY9LTE7KytmPGw7KXtmb3IodT1hLHM9LTE7KytzPGw7KXt2YXIgYj1kW2ZdLG09cFtiXVtzXSx4PWlbYl1bbV0sdz1hLE09YSs9eCpvO19bbSpsK2JdPXtpbmRleDpiLHN1YmluZGV4Om0sc3RhcnRBbmdsZTp3LGVuZEFuZ2xlOk0sdmFsdWU6eH19eVtiXT17aW5kZXg6YixzdGFydEFuZ2xlOnUsZW5kQW5nbGU6YSx2YWx1ZTpoW2JdfSxhKz1jfWZvcihmPS0xOysrZjxsOylmb3Iocz1mLTE7KytzPGw7KXt2YXIgTj1fW3MqbCtmXSxBPV9bZipsK3NdOyhOLnZhbHVlfHxBLnZhbHVlKSYmdi5wdXNoKE4udmFsdWU8QS52YWx1ZT97c291cmNlOkEsdGFyZ2V0Ok59Ontzb3VyY2U6Tix0YXJnZXQ6QX0pfXJldHVybiByP3Yuc29ydChyKTp2fXJldHVybiBpLnBhZEFuZ2xlPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0PVVpKDAsbiksaSk6dH0saS5zb3J0R3JvdXBzPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhuPXQsaSk6bn0saS5zb3J0U3ViZ3JvdXBzPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhlPXQsaSk6ZX0saS5zb3J0Q2hvcmRzPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhudWxsPT10P3I9bnVsbDoobj10LHI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbih0LnNvdXJjZS52YWx1ZSt0LnRhcmdldC52YWx1ZSxlLnNvdXJjZS52YWx1ZStlLnRhcmdldC52YWx1ZSl9KS5fPXQsaSk6ciYmci5fO3ZhciBufSxpfSx0LnJpYmJvbj1mdW5jdGlvbigpe3ZhciB0PVhpLG49R2ksZT1WaSxyPSRpLGk9V2ksbz1udWxsO2Z1bmN0aW9uIGEoKXt2YXIgYSx1PU9pLmNhbGwoYXJndW1lbnRzKSxjPXQuYXBwbHkodGhpcyx1KSxmPW4uYXBwbHkodGhpcyx1KSxzPStlLmFwcGx5KHRoaXMsKHVbMF09Yyx1KSksbD1yLmFwcGx5KHRoaXMsdSktcWksaD1pLmFwcGx5KHRoaXMsdSktcWksZD1zKnppKGwpLHA9cypSaShsKSx2PStlLmFwcGx5KHRoaXMsKHVbMF09Zix1KSksZz1yLmFwcGx5KHRoaXMsdSktcWkseT1pLmFwcGx5KHRoaXMsdSktcWk7aWYob3x8KG89YT1IaSgpKSxvLm1vdmVUbyhkLHApLG8uYXJjKDAsMCxzLGwsaCksbD09PWcmJmg9PT15fHwoby5xdWFkcmF0aWNDdXJ2ZVRvKDAsMCx2KnppKGcpLHYqUmkoZykpLG8uYXJjKDAsMCx2LGcseSkpLG8ucXVhZHJhdGljQ3VydmVUbygwLDAsZCxwKSxvLmNsb3NlUGF0aCgpLGEpcmV0dXJuIG89bnVsbCxhKyIifHxudWxsfXJldHVybiBhLnJhZGl1cz1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZT0iZnVuY3Rpb24iPT10eXBlb2YgdD90OkJpKCt0KSxhKTplfSxhLnN0YXJ0QW5nbGU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHI9ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDpCaSgrdCksYSk6cn0sYS5lbmRBbmdsZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oaT0iZnVuY3Rpb24iPT10eXBlb2YgdD90OkJpKCt0KSxhKTppfSxhLnNvdXJjZT1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odD1uLGEpOnR9LGEudGFyZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhuPXQsYSk6bn0sYS5jb250ZXh0PWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhvPW51bGw9PXQ/bnVsbDp0LGEpOm99LGF9LHQubmVzdD1mdW5jdGlvbigpe3ZhciB0LG4sZSxyPVtdLGk9W107ZnVuY3Rpb24gbyhlLGksYSx1KXtpZihpPj1yLmxlbmd0aClyZXR1cm4gbnVsbCE9dCYmZS5zb3J0KHQpLG51bGwhPW4/bihlKTplO2Zvcih2YXIgYyxmLHMsbD0tMSxoPWUubGVuZ3RoLGQ9cltpKytdLHA9UWkoKSx2PWEoKTsrK2w8aDspKHM9cC5nZXQoYz1kKGY9ZVtsXSkrIiIpKT9zLnB1c2goZik6cC5zZXQoYyxbZl0pO3JldHVybiBwLmVhY2goZnVuY3Rpb24odCxuKXt1KHYsbixvKHQsaSxhLHUpKX0pLHZ9cmV0dXJuIGU9e29iamVjdDpmdW5jdGlvbih0KXtyZXR1cm4gbyh0LDAsSmksS2kpfSxtYXA6ZnVuY3Rpb24odCl7cmV0dXJuIG8odCwwLHRvLG5vKX0sZW50cmllczpmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24gdChlLG8pe2lmKCsrbz5yLmxlbmd0aClyZXR1cm4gZTt2YXIgYSx1PWlbby0xXTtyZXR1cm4gbnVsbCE9biYmbz49ci5sZW5ndGg/YT1lLmVudHJpZXMoKTooYT1bXSxlLmVhY2goZnVuY3Rpb24obixlKXthLnB1c2goe2tleTplLHZhbHVlczp0KG4sbyl9KX0pKSxudWxsIT11P2Euc29ydChmdW5jdGlvbih0LG4pe3JldHVybiB1KHQua2V5LG4ua2V5KX0pOmF9KG8odCwwLHRvLG5vKSwwKX0sa2V5OmZ1bmN0aW9uKHQpe3JldHVybiByLnB1c2godCksZX0sc29ydEtleXM6ZnVuY3Rpb24odCl7cmV0dXJuIGlbci5sZW5ndGgtMV09dCxlfSxzb3J0VmFsdWVzOmZ1bmN0aW9uKG4pe3JldHVybiB0PW4sZX0scm9sbHVwOmZ1bmN0aW9uKHQpe3JldHVybiBuPXQsZX19fSx0LnNldD1pbyx0Lm1hcD1RaSx0LmtleXM9ZnVuY3Rpb24odCl7dmFyIG49W107Zm9yKHZhciBlIGluIHQpbi5wdXNoKGUpO3JldHVybiBufSx0LnZhbHVlcz1mdW5jdGlvbih0KXt2YXIgbj1bXTtmb3IodmFyIGUgaW4gdCluLnB1c2godFtlXSk7cmV0dXJuIG59LHQuZW50cmllcz1mdW5jdGlvbih0KXt2YXIgbj1bXTtmb3IodmFyIGUgaW4gdCluLnB1c2goe2tleTplLHZhbHVlOnRbZV19KTtyZXR1cm4gbn0sdC5jb2xvcj1obix0LnJnYj1nbix0LmhzbD1tbix0LmxhYj1Sbix0LmhjbD1Zbix0LmxjaD1mdW5jdGlvbih0LG4sZSxyKXtyZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/Qm4odCk6bmV3IEZuKGUsbix0LG51bGw9PXI/MTpyKX0sdC5ncmF5PWZ1bmN0aW9uKHQsbil7cmV0dXJuIG5ldyBEbih0LDAsMCxudWxsPT1uPzE6bil9LHQuY3ViZWhlbGl4PVpuLHQuY29udG91cnM9cG8sdC5jb250b3VyRGVuc2l0eT1mdW5jdGlvbigpe3ZhciB0PXlvLG49X28sZT1ibyxyPTk2MCxpPTUwMCxvPTIwLGE9Mix1PTMqbyxjPXIrMip1Pj5hLGY9aSsyKnU+PmEscz11bygyMCk7ZnVuY3Rpb24gbChyKXt2YXIgaT1uZXcgRmxvYXQzMkFycmF5KGMqZiksbD1uZXcgRmxvYXQzMkFycmF5KGMqZik7ci5mb3JFYWNoKGZ1bmN0aW9uKHIsbyxzKXt2YXIgbD0rdChyLG8scykrdT4+YSxoPStuKHIsbyxzKSt1Pj5hLGQ9K2UocixvLHMpO2w+PTAmJmw8YyYmaD49MCYmaDxmJiYoaVtsK2gqY10rPWQpfSksdm8oe3dpZHRoOmMsaGVpZ2h0OmYsZGF0YTppfSx7d2lkdGg6YyxoZWlnaHQ6ZixkYXRhOmx9LG8+PmEpLGdvKHt3aWR0aDpjLGhlaWdodDpmLGRhdGE6bH0se3dpZHRoOmMsaGVpZ2h0OmYsZGF0YTppfSxvPj5hKSx2byh7d2lkdGg6YyxoZWlnaHQ6ZixkYXRhOml9LHt3aWR0aDpjLGhlaWdodDpmLGRhdGE6bH0sbz4+YSksZ28oe3dpZHRoOmMsaGVpZ2h0OmYsZGF0YTpsfSx7d2lkdGg6YyxoZWlnaHQ6ZixkYXRhOml9LG8+PmEpLHZvKHt3aWR0aDpjLGhlaWdodDpmLGRhdGE6aX0se3dpZHRoOmMsaGVpZ2h0OmYsZGF0YTpsfSxvPj5hKSxnbyh7d2lkdGg6YyxoZWlnaHQ6ZixkYXRhOmx9LHt3aWR0aDpjLGhlaWdodDpmLGRhdGE6aX0sbz4+YSk7dmFyIGQ9cyhpKTtpZighQXJyYXkuaXNBcnJheShkKSl7dmFyIHA9QShpKTtkPXcoMCxwLGQpLChkPWcoMCxNYXRoLmZsb29yKHAvZCkqZCxkKSkuc2hpZnQoKX1yZXR1cm4gcG8oKS50aHJlc2hvbGRzKGQpLnNpemUoW2MsZl0pKGkpLm1hcChoKX1mdW5jdGlvbiBoKHQpe3JldHVybiB0LnZhbHVlKj1NYXRoLnBvdygyLC0yKmEpLHQuY29vcmRpbmF0ZXMuZm9yRWFjaChkKSx0fWZ1bmN0aW9uIGQodCl7dC5mb3JFYWNoKHApfWZ1bmN0aW9uIHAodCl7dC5mb3JFYWNoKHYpfWZ1bmN0aW9uIHYodCl7dFswXT10WzBdKk1hdGgucG93KDIsYSktdSx0WzFdPXRbMV0qTWF0aC5wb3coMixhKS11fWZ1bmN0aW9uIHkoKXtyZXR1cm4gYz1yKzIqKHU9MypvKT4+YSxmPWkrMip1Pj5hLGx9cmV0dXJuIGwueD1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odD0iZnVuY3Rpb24iPT10eXBlb2Ygbj9uOnVvKCtuKSxsKTp0fSxsLnk9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG49ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDp1bygrdCksbCk6bn0sbC53ZWlnaHQ9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGU9ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDp1bygrdCksbCk6ZX0sbC5zaXplPWZ1bmN0aW9uKHQpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybltyLGldO3ZhciBuPU1hdGguY2VpbCh0WzBdKSxlPU1hdGguY2VpbCh0WzFdKTtpZighKG4+PTB8fG4+PTApKXRocm93IG5ldyBFcnJvcigiaW52YWxpZCBzaXplIik7cmV0dXJuIHI9bixpPWUseSgpfSxsLmNlbGxTaXplPWZ1bmN0aW9uKHQpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiAxPDxhO2lmKCEoKHQ9K3QpPj0xKSl0aHJvdyBuZXcgRXJyb3IoImludmFsaWQgY2VsbCBzaXplIik7cmV0dXJuIGE9TWF0aC5mbG9vcihNYXRoLmxvZyh0KS9NYXRoLkxOMikseSgpfSxsLnRocmVzaG9sZHM9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHM9ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDpBcnJheS5pc0FycmF5KHQpP3VvKG9vLmNhbGwodCkpOnVvKHQpLGwpOnN9LGwuYmFuZHdpZHRoPWZ1bmN0aW9uKHQpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiBNYXRoLnNxcnQobyoobysxKSk7aWYoISgodD0rdCk+PTApKXRocm93IG5ldyBFcnJvcigiaW52YWxpZCBiYW5kd2lkdGgiKTtyZXR1cm4gbz1NYXRoLnJvdW5kKChNYXRoLnNxcnQoNCp0KnQrMSktMSkvMikseSgpfSxsfSx0LmRpc3BhdGNoPUksdC5kcmFnPWZ1bmN0aW9uKCl7dmFyIG4sZSxyLGksbz1HdCxhPVZ0LHU9JHQsYz1XdCxmPXt9LHM9SSgic3RhcnQiLCJkcmFnIiwiZW5kIiksbD0wLGg9MDtmdW5jdGlvbiBkKHQpe3Qub24oIm1vdXNlZG93bi5kcmFnIixwKS5maWx0ZXIoYykub24oInRvdWNoc3RhcnQuZHJhZyIseSkub24oInRvdWNobW92ZS5kcmFnIixfKS5vbigidG91Y2hlbmQuZHJhZyB0b3VjaGNhbmNlbC5kcmFnIixiKS5zdHlsZSgidG91Y2gtYWN0aW9uIiwibm9uZSIpLnN0eWxlKCItd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3IiLCJyZ2JhKDAsMCwwLDApIil9ZnVuY3Rpb24gcCgpe2lmKCFpJiZvLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl7dmFyIHU9bSgibW91c2UiLGEuYXBwbHkodGhpcyxhcmd1bWVudHMpLE90LHRoaXMsYXJndW1lbnRzKTt1JiYoenQodC5ldmVudC52aWV3KS5vbigibW91c2Vtb3ZlLmRyYWciLHYsITApLm9uKCJtb3VzZXVwLmRyYWciLGcsITApLEl0KHQuZXZlbnQudmlldyksWXQoKSxyPSExLG49dC5ldmVudC5jbGllbnRYLGU9dC5ldmVudC5jbGllbnRZLHUoInN0YXJ0IikpfX1mdW5jdGlvbiB2KCl7aWYoRnQoKSwhcil7dmFyIGk9dC5ldmVudC5jbGllbnRYLW4sbz10LmV2ZW50LmNsaWVudFktZTtyPWkqaStvKm8+aH1mLm1vdXNlKCJkcmFnIil9ZnVuY3Rpb24gZygpe3p0KHQuZXZlbnQudmlldykub24oIm1vdXNlbW92ZS5kcmFnIG1vdXNldXAuZHJhZyIsbnVsbCksanQodC5ldmVudC52aWV3LHIpLEZ0KCksZi5tb3VzZSgiZW5kIil9ZnVuY3Rpb24geSgpe2lmKG8uYXBwbHkodGhpcyxhcmd1bWVudHMpKXt2YXIgbixlLHI9dC5ldmVudC5jaGFuZ2VkVG91Y2hlcyxpPWEuYXBwbHkodGhpcyxhcmd1bWVudHMpLHU9ci5sZW5ndGg7Zm9yKG49MDtuPHU7KytuKShlPW0ocltuXS5pZGVudGlmaWVyLGksQnQsdGhpcyxhcmd1bWVudHMpKSYmKFl0KCksZSgic3RhcnQiKSl9fWZ1bmN0aW9uIF8oKXt2YXIgbixlLHI9dC5ldmVudC5jaGFuZ2VkVG91Y2hlcyxpPXIubGVuZ3RoO2ZvcihuPTA7bjxpOysrbikoZT1mW3Jbbl0uaWRlbnRpZmllcl0pJiYoRnQoKSxlKCJkcmFnIikpfWZ1bmN0aW9uIGIoKXt2YXIgbixlLHI9dC5ldmVudC5jaGFuZ2VkVG91Y2hlcyxvPXIubGVuZ3RoO2ZvcihpJiZjbGVhclRpbWVvdXQoaSksaT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aT1udWxsfSw1MDApLG49MDtuPG87KytuKShlPWZbcltuXS5pZGVudGlmaWVyXSkmJihZdCgpLGUoImVuZCIpKX1mdW5jdGlvbiBtKG4sZSxyLGksbyl7dmFyIGEsYyxoLHA9cihlLG4pLHY9cy5jb3B5KCk7aWYoU3QobmV3IFh0KGQsImJlZm9yZXN0YXJ0IixhLG4sbCxwWzBdLHBbMV0sMCwwLHYpLGZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPSh0LmV2ZW50LnN1YmplY3Q9YT11LmFwcGx5KGksbykpJiYoYz1hLngtcFswXXx8MCxoPWEueS1wWzFdfHwwLCEwKX0pKXJldHVybiBmdW5jdGlvbiB0KHUpe3ZhciBzLGc9cDtzd2l0Y2godSl7Y2FzZSJzdGFydCI6ZltuXT10LHM9bCsrO2JyZWFrO2Nhc2UiZW5kIjpkZWxldGUgZltuXSwtLWw7Y2FzZSJkcmFnIjpwPXIoZSxuKSxzPWx9U3QobmV3IFh0KGQsdSxhLG4scyxwWzBdK2MscFsxXStoLHBbMF0tZ1swXSxwWzFdLWdbMV0sdiksdi5hcHBseSx2LFt1LGksb10pfX1yZXR1cm4gZC5maWx0ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG89ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDpIdCghIXQpLGQpOm99LGQuY29udGFpbmVyPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhhPSJmdW5jdGlvbiI9PXR5cGVvZiB0P3Q6SHQodCksZCk6YX0sZC5zdWJqZWN0PWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh1PSJmdW5jdGlvbiI9PXR5cGVvZiB0P3Q6SHQodCksZCk6dX0sZC50b3VjaGFibGU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGM9ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDpIdCghIXQpLGQpOmN9LGQub249ZnVuY3Rpb24oKXt2YXIgdD1zLm9uLmFwcGx5KHMsYXJndW1lbnRzKTtyZXR1cm4gdD09PXM/ZDp0fSxkLmNsaWNrRGlzdGFuY2U9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGg9KHQ9K3QpKnQsZCk6TWF0aC5zcXJ0KGgpfSxkfSx0LmRyYWdEaXNhYmxlPUl0LHQuZHJhZ0VuYWJsZT1qdCx0LmRzdkZvcm1hdD1Fbyx0LmNzdlBhcnNlPVBvLHQuY3N2UGFyc2VSb3dzPXpvLHQuY3N2Rm9ybWF0PVJvLHQuY3N2Rm9ybWF0Qm9keT1Ebyx0LmNzdkZvcm1hdFJvd3M9cW8sdC50c3ZQYXJzZT1Vbyx0LnRzdlBhcnNlUm93cz1Pbyx0LnRzdkZvcm1hdD1Cbyx0LnRzdkZvcm1hdEJvZHk9WW8sdC50c3ZGb3JtYXRSb3dzPUZvLHQuYXV0b1R5cGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBuIGluIHQpe3ZhciBlLHI9dFtuXS50cmltKCk7aWYocilpZigidHJ1ZSI9PT1yKXI9ITA7ZWxzZSBpZigiZmFsc2UiPT09cilyPSExO2Vsc2UgaWYoIk5hTiI9PT1yKXI9TmFOO2Vsc2UgaWYoaXNOYU4oZT0rcikpe2lmKCEvXihbLStdXGR7Mn0pP1xkezR9KC1cZHsyfSgtXGR7Mn0pPyk/KFRcZHsyfTpcZHsyfSg6XGR7Mn0oXC5cZHszfSk/KT8oWnxbLStdXGR7Mn06XGR7Mn0pPyk/JC8udGVzdChyKSljb250aW51ZTtyPW5ldyBEYXRlKHIpfWVsc2Ugcj1lO2Vsc2Ugcj1udWxsO3Rbbl09cn1yZXR1cm4gdH0sdC5lYXNlTGluZWFyPWZ1bmN0aW9uKHQpe3JldHVybit0fSx0LmVhc2VRdWFkPVJyLHQuZWFzZVF1YWRJbj1mdW5jdGlvbih0KXtyZXR1cm4gdCp0fSx0LmVhc2VRdWFkT3V0PWZ1bmN0aW9uKHQpe3JldHVybiB0KigyLXQpfSx0LmVhc2VRdWFkSW5PdXQ9UnIsdC5lYXNlQ3ViaWM9RHIsdC5lYXNlQ3ViaWNJbj1mdW5jdGlvbih0KXtyZXR1cm4gdCp0KnR9LHQuZWFzZUN1YmljT3V0PWZ1bmN0aW9uKHQpe3JldHVybi0tdCp0KnQrMX0sdC5lYXNlQ3ViaWNJbk91dD1Ecix0LmVhc2VQb2x5PVVyLHQuZWFzZVBvbHlJbj1xcix0LmVhc2VQb2x5T3V0PUxyLHQuZWFzZVBvbHlJbk91dD1Vcix0LmVhc2VTaW49WXIsdC5lYXNlU2luSW49ZnVuY3Rpb24odCl7cmV0dXJuIDEtTWF0aC5jb3ModCpCcil9LHQuZWFzZVNpbk91dD1mdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5zaW4odCpCcil9LHQuZWFzZVNpbkluT3V0PVlyLHQuZWFzZUV4cD1Gcix0LmVhc2VFeHBJbj1mdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5wb3coMiwxMCp0LTEwKX0sdC5lYXNlRXhwT3V0PWZ1bmN0aW9uKHQpe3JldHVybiAxLU1hdGgucG93KDIsLTEwKnQpfSx0LmVhc2VFeHBJbk91dD1Gcix0LmVhc2VDaXJjbGU9SXIsdC5lYXNlQ2lyY2xlSW49ZnVuY3Rpb24odCl7cmV0dXJuIDEtTWF0aC5zcXJ0KDEtdCp0KX0sdC5lYXNlQ2lyY2xlT3V0PWZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLnNxcnQoMS0gLS10KnQpfSx0LmVhc2VDaXJjbGVJbk91dD1Jcix0LmVhc2VCb3VuY2U9S3IsdC5lYXNlQm91bmNlSW49ZnVuY3Rpb24odCl7cmV0dXJuIDEtS3IoMS10KX0sdC5lYXNlQm91bmNlT3V0PUtyLHQuZWFzZUJvdW5jZUluT3V0PWZ1bmN0aW9uKHQpe3JldHVybigodCo9Mik8PTE/MS1LcigxLXQpOktyKHQtMSkrMSkvMn0sdC5lYXNlQmFjaz1laSx0LmVhc2VCYWNrSW49dGksdC5lYXNlQmFja091dD1uaSx0LmVhc2VCYWNrSW5PdXQ9ZWksdC5lYXNlRWxhc3RpYz1vaSx0LmVhc2VFbGFzdGljSW49aWksdC5lYXNlRWxhc3RpY091dD1vaSx0LmVhc2VFbGFzdGljSW5PdXQ9YWksdC5ibG9iPWZ1bmN0aW9uKHQsbil7cmV0dXJuIGZldGNoKHQsbikudGhlbihJbyl9LHQuYnVmZmVyPWZ1bmN0aW9uKHQsbil7cmV0dXJuIGZldGNoKHQsbikudGhlbihqbyl9LHQuZHN2PWZ1bmN0aW9uKHQsbixlLHIpezM9PT1hcmd1bWVudHMubGVuZ3RoJiYiZnVuY3Rpb24iPT10eXBlb2YgZSYmKHI9ZSxlPXZvaWQgMCk7dmFyIGk9RW8odCk7cmV0dXJuIFhvKG4sZSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gaS5wYXJzZSh0LHIpfSl9LHQuY3N2PVZvLHQudHN2PSRvLHQuaW1hZ2U9ZnVuY3Rpb24odCxuKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oZSxyKXt2YXIgaT1uZXcgSW1hZ2U7Zm9yKHZhciBvIGluIG4paVtvXT1uW29dO2kub25lcnJvcj1yLGkub25sb2FkPWZ1bmN0aW9uKCl7ZShpKX0saS5zcmM9dH0pfSx0Lmpzb249ZnVuY3Rpb24odCxuKXtyZXR1cm4gZmV0Y2godCxuKS50aGVuKFdvKX0sdC50ZXh0PVhvLHQueG1sPVFvLHQuaHRtbD1Kbyx0LnN2Zz1Lbyx0LmZvcmNlQ2VudGVyPWZ1bmN0aW9uKHQsbil7dmFyIGU7ZnVuY3Rpb24gcigpe3ZhciByLGksbz1lLmxlbmd0aCxhPTAsdT0wO2ZvcihyPTA7cjxvOysrcilhKz0oaT1lW3JdKS54LHUrPWkueTtmb3IoYT1hL28tdCx1PXUvby1uLHI9MDtyPG87KytyKShpPWVbcl0pLngtPWEsaS55LT11fXJldHVybiBudWxsPT10JiYodD0wKSxudWxsPT1uJiYobj0wKSxyLmluaXRpYWxpemU9ZnVuY3Rpb24odCl7ZT10fSxyLng9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHQ9K24scik6dH0sci55PWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhuPSt0LHIpOm59LHJ9LHQuZm9yY2VDb2xsaWRlPWZ1bmN0aW9uKHQpe3ZhciBuLGUscj0xLGk9MTtmdW5jdGlvbiBvKCl7Zm9yKHZhciB0LG8sdSxjLGYscyxsLGg9bi5sZW5ndGgsZD0wO2Q8aTsrK2QpZm9yKG89YWEobixzYSxsYSkudmlzaXRBZnRlcihhKSx0PTA7dDxoOysrdCl1PW5bdF0scz1lW3UuaW5kZXhdLGw9cypzLGM9dS54K3UudngsZj11LnkrdS52eSxvLnZpc2l0KHApO2Z1bmN0aW9uIHAodCxuLGUsaSxvKXt2YXIgYT10LmRhdGEsaD10LnIsZD1zK2g7aWYoIWEpcmV0dXJuIG4+YytkfHxpPGMtZHx8ZT5mK2R8fG88Zi1kO2lmKGEuaW5kZXg+dS5pbmRleCl7dmFyIHA9Yy1hLngtYS52eCx2PWYtYS55LWEudnksZz1wKnArdip2O2c8ZCpkJiYoMD09PXAmJihnKz0ocD1uYSgpKSpwKSwwPT09diYmKGcrPSh2PW5hKCkpKnYpLGc9KGQtKGc9TWF0aC5zcXJ0KGcpKSkvZypyLHUudngrPShwKj1nKSooZD0oaCo9aCkvKGwraCkpLHUudnkrPSh2Kj1nKSpkLGEudngtPXAqKGQ9MS1kKSxhLnZ5LT12KmQpfX19ZnVuY3Rpb24gYSh0KXtpZih0LmRhdGEpcmV0dXJuIHQucj1lW3QuZGF0YS5pbmRleF07Zm9yKHZhciBuPXQucj0wO248NDsrK24pdFtuXSYmdFtuXS5yPnQuciYmKHQucj10W25dLnIpfWZ1bmN0aW9uIHUoKXtpZihuKXt2YXIgcixpLG89bi5sZW5ndGg7Zm9yKGU9bmV3IEFycmF5KG8pLHI9MDtyPG87KytyKWk9bltyXSxlW2kuaW5kZXhdPSt0KGkscixuKX19cmV0dXJuImZ1bmN0aW9uIiE9dHlwZW9mIHQmJih0PXRhKG51bGw9PXQ/MTordCkpLG8uaW5pdGlhbGl6ZT1mdW5jdGlvbih0KXtuPXQsdSgpfSxvLml0ZXJhdGlvbnM9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGk9K3Qsbyk6aX0sby5zdHJlbmd0aD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocj0rdCxvKTpyfSxvLnJhZGl1cz1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odD0iZnVuY3Rpb24iPT10eXBlb2Ygbj9uOnRhKCtuKSx1KCksbyk6dH0sb30sdC5mb3JjZUxpbms9ZnVuY3Rpb24odCl7dmFyIG4sZSxyLGksbyxhPWhhLHU9ZnVuY3Rpb24odCl7cmV0dXJuIDEvTWF0aC5taW4oaVt0LnNvdXJjZS5pbmRleF0saVt0LnRhcmdldC5pbmRleF0pfSxjPXRhKDMwKSxmPTE7ZnVuY3Rpb24gcyhyKXtmb3IodmFyIGk9MCxhPXQubGVuZ3RoO2k8ZjsrK2kpZm9yKHZhciB1LGMscyxsLGgsZCxwLHY9MDt2PGE7Kyt2KWM9KHU9dFt2XSkuc291cmNlLGw9KHM9dS50YXJnZXQpLngrcy52eC1jLngtYy52eHx8bmEoKSxoPXMueStzLnZ5LWMueS1jLnZ5fHxuYSgpLGwqPWQ9KChkPU1hdGguc3FydChsKmwraCpoKSktZVt2XSkvZCpyKm5bdl0saCo9ZCxzLnZ4LT1sKihwPW9bdl0pLHMudnktPWgqcCxjLnZ4Kz1sKihwPTEtcCksYy52eSs9aCpwfWZ1bmN0aW9uIGwoKXtpZihyKXt2YXIgdSxjLGY9ci5sZW5ndGgscz10Lmxlbmd0aCxsPVFpKHIsYSk7Zm9yKHU9MCxpPW5ldyBBcnJheShmKTt1PHM7Kyt1KShjPXRbdV0pLmluZGV4PXUsIm9iamVjdCIhPXR5cGVvZiBjLnNvdXJjZSYmKGMuc291cmNlPWRhKGwsYy5zb3VyY2UpKSwib2JqZWN0IiE9dHlwZW9mIGMudGFyZ2V0JiYoYy50YXJnZXQ9ZGEobCxjLnRhcmdldCkpLGlbYy5zb3VyY2UuaW5kZXhdPShpW2Muc291cmNlLmluZGV4XXx8MCkrMSxpW2MudGFyZ2V0LmluZGV4XT0oaVtjLnRhcmdldC5pbmRleF18fDApKzE7Zm9yKHU9MCxvPW5ldyBBcnJheShzKTt1PHM7Kyt1KWM9dFt1XSxvW3VdPWlbYy5zb3VyY2UuaW5kZXhdLyhpW2Muc291cmNlLmluZGV4XStpW2MudGFyZ2V0LmluZGV4XSk7bj1uZXcgQXJyYXkocyksaCgpLGU9bmV3IEFycmF5KHMpLGQoKX19ZnVuY3Rpb24gaCgpe2lmKHIpZm9yKHZhciBlPTAsaT10Lmxlbmd0aDtlPGk7KytlKW5bZV09K3UodFtlXSxlLHQpfWZ1bmN0aW9uIGQoKXtpZihyKWZvcih2YXIgbj0wLGk9dC5sZW5ndGg7bjxpOysrbillW25dPStjKHRbbl0sbix0KX1yZXR1cm4gbnVsbD09dCYmKHQ9W10pLHMuaW5pdGlhbGl6ZT1mdW5jdGlvbih0KXtyPXQsbCgpfSxzLmxpbmtzPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0PW4sbCgpLHMpOnR9LHMuaWQ9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGE9dCxzKTphfSxzLml0ZXJhdGlvbnM9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGY9K3Qscyk6Zn0scy5zdHJlbmd0aD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odT0iZnVuY3Rpb24iPT10eXBlb2YgdD90OnRhKCt0KSxoKCkscyk6dX0scy5kaXN0YW5jZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oYz0iZnVuY3Rpb24iPT10eXBlb2YgdD90OnRhKCt0KSxkKCkscyk6Y30sc30sdC5mb3JjZU1hbnlCb2R5PWZ1bmN0aW9uKCl7dmFyIHQsbixlLHIsaT10YSgtMzApLG89MSxhPTEvMCx1PS44MTtmdW5jdGlvbiBjKHIpe3ZhciBpLG89dC5sZW5ndGgsYT1hYSh0LHBhLHZhKS52aXNpdEFmdGVyKHMpO2ZvcihlPXIsaT0wO2k8bzsrK2kpbj10W2ldLGEudmlzaXQobCl9ZnVuY3Rpb24gZigpe2lmKHQpe3ZhciBuLGUsbz10Lmxlbmd0aDtmb3Iocj1uZXcgQXJyYXkobyksbj0wO248bzsrK24pZT10W25dLHJbZS5pbmRleF09K2koZSxuLHQpfX1mdW5jdGlvbiBzKHQpe3ZhciBuLGUsaSxvLGEsdT0wLGM9MDtpZih0Lmxlbmd0aCl7Zm9yKGk9bz1hPTA7YTw0OysrYSkobj10W2FdKSYmKGU9TWF0aC5hYnMobi52YWx1ZSkpJiYodSs9bi52YWx1ZSxjKz1lLGkrPWUqbi54LG8rPWUqbi55KTt0Lng9aS9jLHQueT1vL2N9ZWxzZXsobj10KS54PW4uZGF0YS54LG4ueT1uLmRhdGEueTtkb3t1Kz1yW24uZGF0YS5pbmRleF19d2hpbGUobj1uLm5leHQpfXQudmFsdWU9dX1mdW5jdGlvbiBsKHQsaSxjLGYpe2lmKCF0LnZhbHVlKXJldHVybiEwO3ZhciBzPXQueC1uLngsbD10Lnktbi55LGg9Zi1pLGQ9cypzK2wqbDtpZihoKmgvdTxkKXJldHVybiBkPGEmJigwPT09cyYmKGQrPShzPW5hKCkpKnMpLDA9PT1sJiYoZCs9KGw9bmEoKSkqbCksZDxvJiYoZD1NYXRoLnNxcnQobypkKSksbi52eCs9cyp0LnZhbHVlKmUvZCxuLnZ5Kz1sKnQudmFsdWUqZS9kKSwhMDtpZighKHQubGVuZ3RofHxkPj1hKSl7KHQuZGF0YSE9PW58fHQubmV4dCkmJigwPT09cyYmKGQrPShzPW5hKCkpKnMpLDA9PT1sJiYoZCs9KGw9bmEoKSkqbCksZDxvJiYoZD1NYXRoLnNxcnQobypkKSkpO2Rve3QuZGF0YSE9PW4mJihoPXJbdC5kYXRhLmluZGV4XSplL2Qsbi52eCs9cypoLG4udnkrPWwqaCl9d2hpbGUodD10Lm5leHQpfX1yZXR1cm4gYy5pbml0aWFsaXplPWZ1bmN0aW9uKG4pe3Q9bixmKCl9LGMuc3RyZW5ndGg9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGk9ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDp0YSgrdCksZigpLGMpOml9LGMuZGlzdGFuY2VNaW49ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG89dCp0LGMpOk1hdGguc3FydChvKX0sYy5kaXN0YW5jZU1heD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oYT10KnQsYyk6TWF0aC5zcXJ0KGEpfSxjLnRoZXRhPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh1PXQqdCxjKTpNYXRoLnNxcnQodSl9LGN9LHQuZm9yY2VSYWRpYWw9ZnVuY3Rpb24odCxuLGUpe3ZhciByLGksbyxhPXRhKC4xKTtmdW5jdGlvbiB1KHQpe2Zvcih2YXIgYT0wLHU9ci5sZW5ndGg7YTx1OysrYSl7dmFyIGM9clthXSxmPWMueC1ufHwxZS02LHM9Yy55LWV8fDFlLTYsbD1NYXRoLnNxcnQoZipmK3MqcyksaD0ob1thXS1sKSppW2FdKnQvbDtjLnZ4Kz1mKmgsYy52eSs9cypofX1mdW5jdGlvbiBjKCl7aWYocil7dmFyIG4sZT1yLmxlbmd0aDtmb3IoaT1uZXcgQXJyYXkoZSksbz1uZXcgQXJyYXkoZSksbj0wO248ZTsrK24pb1tuXT0rdChyW25dLG4sciksaVtuXT1pc05hTihvW25dKT8wOithKHJbbl0sbixyKX19cmV0dXJuImZ1bmN0aW9uIiE9dHlwZW9mIHQmJih0PXRhKCt0KSksbnVsbD09biYmKG49MCksbnVsbD09ZSYmKGU9MCksdS5pbml0aWFsaXplPWZ1bmN0aW9uKHQpe3I9dCxjKCl9LHUuc3RyZW5ndGg9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGE9ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDp0YSgrdCksYygpLHUpOmF9LHUucmFkaXVzPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0PSJmdW5jdGlvbiI9PXR5cGVvZiBuP246dGEoK24pLGMoKSx1KTp0fSx1Lng9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG49K3QsdSk6bn0sdS55PWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhlPSt0LHUpOmV9LHV9LHQuZm9yY2VTaW11bGF0aW9uPWZ1bmN0aW9uKHQpe3ZhciBuLGU9MSxyPS4wMDEsaT0xLU1hdGgucG93KHIsMS8zMDApLG89MCxhPS42LHU9UWkoKSxjPWlyKHMpLGY9SSgidGljayIsImVuZCIpO2Z1bmN0aW9uIHMoKXtsKCksZi5jYWxsKCJ0aWNrIixuKSxlPHImJihjLnN0b3AoKSxmLmNhbGwoImVuZCIsbikpfWZ1bmN0aW9uIGwocil7dmFyIGMsZixzPXQubGVuZ3RoO3ZvaWQgMD09PXImJihyPTEpO2Zvcih2YXIgbD0wO2w8cjsrK2wpZm9yKGUrPShvLWUpKmksdS5lYWNoKGZ1bmN0aW9uKHQpe3QoZSl9KSxjPTA7YzxzOysrYyludWxsPT0oZj10W2NdKS5meD9mLngrPWYudngqPWE6KGYueD1mLmZ4LGYudng9MCksbnVsbD09Zi5meT9mLnkrPWYudnkqPWE6KGYueT1mLmZ5LGYudnk9MCk7cmV0dXJuIG59ZnVuY3Rpb24gaCgpe2Zvcih2YXIgbixlPTAscj10Lmxlbmd0aDtlPHI7KytlKXtpZigobj10W2VdKS5pbmRleD1lLG51bGwhPW4uZngmJihuLng9bi5meCksbnVsbCE9bi5meSYmKG4ueT1uLmZ5KSxpc05hTihuLngpfHxpc05hTihuLnkpKXt2YXIgaT1nYSpNYXRoLnNxcnQoZSksbz1lKnlhO24ueD1pKk1hdGguY29zKG8pLG4ueT1pKk1hdGguc2luKG8pfShpc05hTihuLnZ4KXx8aXNOYU4obi52eSkpJiYobi52eD1uLnZ5PTApfX1mdW5jdGlvbiBkKG4pe3JldHVybiBuLmluaXRpYWxpemUmJm4uaW5pdGlhbGl6ZSh0KSxufXJldHVybiBudWxsPT10JiYodD1bXSksaCgpLG49e3RpY2s6bCxyZXN0YXJ0OmZ1bmN0aW9uKCl7cmV0dXJuIGMucmVzdGFydChzKSxufSxzdG9wOmZ1bmN0aW9uKCl7cmV0dXJuIGMuc3RvcCgpLG59LG5vZGVzOmZ1bmN0aW9uKGUpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0PWUsaCgpLHUuZWFjaChkKSxuKTp0fSxhbHBoYTpmdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZT0rdCxuKTplfSxhbHBoYU1pbjpmdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocj0rdCxuKTpyfSxhbHBoYURlY2F5OmZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhpPSt0LG4pOitpfSxhbHBoYVRhcmdldDpmdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8obz0rdCxuKTpvfSx2ZWxvY2l0eURlY2F5OmZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhhPTEtdCxuKToxLWF9LGZvcmNlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MT8obnVsbD09ZT91LnJlbW92ZSh0KTp1LnNldCh0LGQoZSkpLG4pOnUuZ2V0KHQpfSxmaW5kOmZ1bmN0aW9uKG4sZSxyKXt2YXIgaSxvLGEsdSxjLGY9MCxzPXQubGVuZ3RoO2ZvcihudWxsPT1yP3I9MS8wOnIqPXIsZj0wO2Y8czsrK2YpKGE9KGk9bi0odT10W2ZdKS54KSppKyhvPWUtdS55KSpvKTxyJiYoYz11LHI9YSk7cmV0dXJuIGN9LG9uOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MT8oZi5vbih0LGUpLG4pOmYub24odCl9fX0sdC5mb3JjZVg9ZnVuY3Rpb24odCl7dmFyIG4sZSxyLGk9dGEoLjEpO2Z1bmN0aW9uIG8odCl7Zm9yKHZhciBpLG89MCxhPW4ubGVuZ3RoO288YTsrK28pKGk9bltvXSkudngrPShyW29dLWkueCkqZVtvXSp0fWZ1bmN0aW9uIGEoKXtpZihuKXt2YXIgbyxhPW4ubGVuZ3RoO2ZvcihlPW5ldyBBcnJheShhKSxyPW5ldyBBcnJheShhKSxvPTA7bzxhOysrbyllW29dPWlzTmFOKHJbb109K3QobltvXSxvLG4pKT8wOitpKG5bb10sbyxuKX19cmV0dXJuImZ1bmN0aW9uIiE9dHlwZW9mIHQmJih0PXRhKG51bGw9PXQ/MDordCkpLG8uaW5pdGlhbGl6ZT1mdW5jdGlvbih0KXtuPXQsYSgpfSxvLnN0cmVuZ3RoPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhpPSJmdW5jdGlvbiI9PXR5cGVvZiB0P3Q6dGEoK3QpLGEoKSxvKTppfSxvLng9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHQ9ImZ1bmN0aW9uIj09dHlwZW9mIG4/bjp0YSgrbiksYSgpLG8pOnR9LG99LHQuZm9yY2VZPWZ1bmN0aW9uKHQpe3ZhciBuLGUscixpPXRhKC4xKTtmdW5jdGlvbiBvKHQpe2Zvcih2YXIgaSxvPTAsYT1uLmxlbmd0aDtvPGE7KytvKShpPW5bb10pLnZ5Kz0ocltvXS1pLnkpKmVbb10qdH1mdW5jdGlvbiBhKCl7aWYobil7dmFyIG8sYT1uLmxlbmd0aDtmb3IoZT1uZXcgQXJyYXkoYSkscj1uZXcgQXJyYXkoYSksbz0wO288YTsrK28pZVtvXT1pc05hTihyW29dPSt0KG5bb10sbyxuKSk/MDoraShuW29dLG8sbil9fXJldHVybiJmdW5jdGlvbiIhPXR5cGVvZiB0JiYodD10YShudWxsPT10PzA6K3QpKSxvLmluaXRpYWxpemU9ZnVuY3Rpb24odCl7bj10LGEoKX0sby5zdHJlbmd0aD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oaT0iZnVuY3Rpb24iPT10eXBlb2YgdD90OnRhKCt0KSxhKCksbyk6aX0sby55PWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0PSJmdW5jdGlvbiI9PXR5cGVvZiBuP246dGEoK24pLGEoKSxvKTp0fSxvfSx0LmZvcm1hdERlZmF1bHRMb2NhbGU9Q2EsdC5mb3JtYXRMb2NhbGU9RWEsdC5mb3JtYXRTcGVjaWZpZXI9d2EsdC5wcmVjaXNpb25GaXhlZD1QYSx0LnByZWNpc2lvblByZWZpeD16YSx0LnByZWNpc2lvblJvdW5kPVJhLHQuZ2VvQXJlYT1mdW5jdGlvbih0KXtyZXR1cm4gbXUucmVzZXQoKSxkdSh0LHh1KSwyKm11fSx0Lmdlb0JvdW5kcz1mdW5jdGlvbih0KXt2YXIgbixlLHIsaSxvLGEsdTtpZihMdT1xdT0tKFJ1PUR1PTEvMCksRnU9W10sZHUodCxhYyksZT1GdS5sZW5ndGgpe2ZvcihGdS5zb3J0KHZjKSxuPTEsbz1bcj1GdVswXV07bjxlOysrbilnYyhyLChpPUZ1W25dKVswXSl8fGdjKHIsaVsxXSk/KHBjKHJbMF0saVsxXSk+cGMoclswXSxyWzFdKSYmKHJbMV09aVsxXSkscGMoaVswXSxyWzFdKT5wYyhyWzBdLHJbMV0pJiYoclswXT1pWzBdKSk6by5wdXNoKHI9aSk7Zm9yKGE9LTEvMCxuPTAscj1vW2U9by5sZW5ndGgtMV07bjw9ZTtyPWksKytuKWk9b1tuXSwodT1wYyhyWzFdLGlbMF0pKT5hJiYoYT11LFJ1PWlbMF0scXU9clsxXSl9cmV0dXJuIEZ1PUl1PW51bGwsUnU9PT0xLzB8fER1PT09MS8wP1tbTmFOLE5hTl0sW05hTixOYU5dXTpbW1J1LER1XSxbcXUsTHVdXX0sdC5nZW9DZW50cm9pZD1mdW5jdGlvbih0KXtqdT1IdT1YdT1HdT1WdT0kdT1XdT1adT1RdT1KdT1LdT0wLGR1KHQseWMpO3ZhciBuPVF1LGU9SnUscj1LdSxpPW4qbitlKmUrcipyO3JldHVybiBpPEJhJiYobj0kdSxlPVd1LHI9WnUsSHU8T2EmJihuPVh1LGU9R3Uscj1WdSksKGk9bipuK2UqZStyKnIpPEJhKT9bTmFOLE5hTl06WyRhKGUsbikqSGEsb3Uoci9ldShpKSkqSGFdfSx0Lmdlb0NpcmNsZT1mdW5jdGlvbigpe3ZhciB0LG4sZT1rYyhbMCwwXSkscj1rYyg5MCksaT1rYyg2KSxvPXtwb2ludDpmdW5jdGlvbihlLHIpe3QucHVzaChlPW4oZSxyKSksZVswXSo9SGEsZVsxXSo9SGF9fTtmdW5jdGlvbiBhKCl7dmFyIGE9ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdT1yLmFwcGx5KHRoaXMsYXJndW1lbnRzKSpYYSxjPWkuYXBwbHkodGhpcyxhcmd1bWVudHMpKlhhO3JldHVybiB0PVtdLG49UGMoLWFbMF0qWGEsLWFbMV0qWGEsMCkuaW52ZXJ0LExjKG8sdSxjLDEpLGE9e3R5cGU6IlBvbHlnb24iLGNvb3JkaW5hdGVzOlt0XX0sdD1uPW51bGwsYX1yZXR1cm4gYS5jZW50ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGU9ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDprYyhbK3RbMF0sK3RbMV1dKSxhKTplfSxhLnJhZGl1cz1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocj0iZnVuY3Rpb24iPT10eXBlb2YgdD90OmtjKCt0KSxhKTpyfSxhLnByZWNpc2lvbj1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oaT0iZnVuY3Rpb24iPT10eXBlb2YgdD90OmtjKCt0KSxhKTppfSxhfSx0Lmdlb0NsaXBBbnRpbWVyaWRpYW49JGMsdC5nZW9DbGlwQ2lyY2xlPVdjLHQuZ2VvQ2xpcEV4dGVudD1mdW5jdGlvbigpe3ZhciB0LG4sZSxyPTAsaT0wLG89OTYwLGE9NTAwO3JldHVybiBlPXtzdHJlYW06ZnVuY3Rpb24oZSl7cmV0dXJuIHQmJm49PT1lP3Q6dD1KYyhyLGksbyxhKShuPWUpfSxleHRlbnQ6ZnVuY3Rpb24odSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHI9K3VbMF1bMF0saT0rdVswXVsxXSxvPSt1WzFdWzBdLGE9K3VbMV1bMV0sdD1uPW51bGwsZSk6W1tyLGldLFtvLGFdXX19fSx0Lmdlb0NsaXBSZWN0YW5nbGU9SmMsdC5nZW9Db250YWlucz1mdW5jdGlvbih0LG4pe3JldHVybih0JiZoZi5oYXNPd25Qcm9wZXJ0eSh0LnR5cGUpP2hmW3QudHlwZV06cGYpKHQsbil9LHQuZ2VvRGlzdGFuY2U9bGYsdC5nZW9HcmF0aWN1bGU9d2YsdC5nZW9HcmF0aWN1bGUxMD1mdW5jdGlvbigpe3JldHVybiB3ZigpKCl9LHQuZ2VvSW50ZXJwb2xhdGU9ZnVuY3Rpb24odCxuKXt2YXIgZT10WzBdKlhhLHI9dFsxXSpYYSxpPW5bMF0qWGEsbz1uWzFdKlhhLGE9V2EociksdT10dShyKSxjPVdhKG8pLGY9dHUobykscz1hKldhKGUpLGw9YSp0dShlKSxoPWMqV2EoaSksZD1jKnR1KGkpLHA9MipvdShldShhdShvLXIpK2EqYyphdShpLWUpKSksdj10dShwKSxnPXA/ZnVuY3Rpb24odCl7dmFyIG49dHUodCo9cCkvdixlPXR1KHAtdCkvdixyPWUqcytuKmgsaT1lKmwrbipkLG89ZSp1K24qZjtyZXR1cm5bJGEoaSxyKSpIYSwkYShvLGV1KHIqcitpKmkpKSpIYV19OmZ1bmN0aW9uKCl7cmV0dXJuW2UqSGEscipIYV19O3JldHVybiBnLmRpc3RhbmNlPXAsZ30sdC5nZW9MZW5ndGg9Y2YsdC5nZW9QYXRoPWZ1bmN0aW9uKHQsbil7dmFyIGUscixpPTQuNTtmdW5jdGlvbiBvKHQpe3JldHVybiB0JiYoImZ1bmN0aW9uIj09dHlwZW9mIGkmJnIucG9pbnRSYWRpdXMoK2kuYXBwbHkodGhpcyxhcmd1bWVudHMpKSxkdSh0LGUocikpKSxyLnJlc3VsdCgpfXJldHVybiBvLmFyZWE9ZnVuY3Rpb24odCl7cmV0dXJuIGR1KHQsZShDZikpLENmLnJlc3VsdCgpfSxvLm1lYXN1cmU9ZnVuY3Rpb24odCl7cmV0dXJuIGR1KHQsZShncykpLGdzLnJlc3VsdCgpfSxvLmJvdW5kcz1mdW5jdGlvbih0KXtyZXR1cm4gZHUodCxlKEJmKSksQmYucmVzdWx0KCl9LG8uY2VudHJvaWQ9ZnVuY3Rpb24odCl7cmV0dXJuIGR1KHQsZShLZikpLEtmLnJlc3VsdCgpfSxvLnByb2plY3Rpb249ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGU9bnVsbD09bj8odD1udWxsLE1mKToodD1uKS5zdHJlYW0sbyk6dH0sby5jb250ZXh0PWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhyPW51bGw9PXQ/KG49bnVsbCxuZXcgYnMpOm5ldyBmcyhuPXQpLCJmdW5jdGlvbiIhPXR5cGVvZiBpJiZyLnBvaW50UmFkaXVzKGkpLG8pOm59LG8ucG9pbnRSYWRpdXM9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGk9ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDooci5wb2ludFJhZGl1cygrdCksK3QpLG8pOml9LG8ucHJvamVjdGlvbih0KS5jb250ZXh0KG4pfSx0Lmdlb0FsYmVycz1Pcyx0Lmdlb0FsYmVyc1VzYT1mdW5jdGlvbigpe3ZhciB0LG4sZSxyLGksbyxhPU9zKCksdT1VcygpLnJvdGF0ZShbMTU0LDBdKS5jZW50ZXIoWy0yLDU4LjVdKS5wYXJhbGxlbHMoWzU1LDY1XSksYz1VcygpLnJvdGF0ZShbMTU3LDBdKS5jZW50ZXIoWy0zLDE5LjldKS5wYXJhbGxlbHMoWzgsMThdKSxmPXtwb2ludDpmdW5jdGlvbih0LG4pe289W3Qsbl19fTtmdW5jdGlvbiBzKHQpe3ZhciBuPXRbMF0sYT10WzFdO3JldHVybiBvPW51bGwsZS5wb2ludChuLGEpLG98fChyLnBvaW50KG4sYSksbyl8fChpLnBvaW50KG4sYSksbyl9ZnVuY3Rpb24gbCgpe3JldHVybiB0PW49bnVsbCxzfXJldHVybiBzLmludmVydD1mdW5jdGlvbih0KXt2YXIgbj1hLnNjYWxlKCksZT1hLnRyYW5zbGF0ZSgpLHI9KHRbMF0tZVswXSkvbixpPSh0WzFdLWVbMV0pL247cmV0dXJuKGk+PS4xMiYmaTwuMjM0JiZyPj0tLjQyNSYmcjwtLjIxND91Omk+PS4xNjYmJmk8LjIzNCYmcj49LS4yMTQmJnI8LS4xMTU/YzphKS5pbnZlcnQodCl9LHMuc3RyZWFtPWZ1bmN0aW9uKGUpe3JldHVybiB0JiZuPT09ZT90OihyPVthLnN0cmVhbShuPWUpLHUuc3RyZWFtKGUpLGMuc3RyZWFtKGUpXSxpPXIubGVuZ3RoLHQ9e3BvaW50OmZ1bmN0aW9uKHQsbil7Zm9yKHZhciBlPS0xOysrZTxpOylyW2VdLnBvaW50KHQsbil9LHNwaGVyZTpmdW5jdGlvbigpe2Zvcih2YXIgdD0tMTsrK3Q8aTspclt0XS5zcGhlcmUoKX0sbGluZVN0YXJ0OmZ1bmN0aW9uKCl7Zm9yKHZhciB0PS0xOysrdDxpOylyW3RdLmxpbmVTdGFydCgpfSxsaW5lRW5kOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PS0xOysrdDxpOylyW3RdLmxpbmVFbmQoKX0scG9seWdvblN0YXJ0OmZ1bmN0aW9uKCl7Zm9yKHZhciB0PS0xOysrdDxpOylyW3RdLnBvbHlnb25TdGFydCgpfSxwb2x5Z29uRW5kOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PS0xOysrdDxpOylyW3RdLnBvbHlnb25FbmQoKX19KTt2YXIgcixpfSxzLnByZWNpc2lvbj1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oYS5wcmVjaXNpb24odCksdS5wcmVjaXNpb24odCksYy5wcmVjaXNpb24odCksbCgpKTphLnByZWNpc2lvbigpfSxzLnNjYWxlPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhhLnNjYWxlKHQpLHUuc2NhbGUoLjM1KnQpLGMuc2NhbGUodCkscy50cmFuc2xhdGUoYS50cmFuc2xhdGUoKSkpOmEuc2NhbGUoKX0scy50cmFuc2xhdGU9ZnVuY3Rpb24odCl7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGEudHJhbnNsYXRlKCk7dmFyIG49YS5zY2FsZSgpLG89K3RbMF0scz0rdFsxXTtyZXR1cm4gZT1hLnRyYW5zbGF0ZSh0KS5jbGlwRXh0ZW50KFtbby0uNDU1Km4scy0uMjM4Km5dLFtvKy40NTUqbixzKy4yMzgqbl1dKS5zdHJlYW0oZikscj11LnRyYW5zbGF0ZShbby0uMzA3Km4scysuMjAxKm5dKS5jbGlwRXh0ZW50KFtbby0uNDI1Km4rT2EscysuMTIqbitPYV0sW28tLjIxNCpuLU9hLHMrLjIzNCpuLU9hXV0pLnN0cmVhbShmKSxpPWMudHJhbnNsYXRlKFtvLS4yMDUqbixzKy4yMTIqbl0pLmNsaXBFeHRlbnQoW1tvLS4yMTQqbitPYSxzKy4xNjYqbitPYV0sW28tLjExNSpuLU9hLHMrLjIzNCpuLU9hXV0pLnN0cmVhbShmKSxsKCl9LHMuZml0RXh0ZW50PWZ1bmN0aW9uKHQsbil7cmV0dXJuIE5zKHMsdCxuKX0scy5maXRTaXplPWZ1bmN0aW9uKHQsbil7cmV0dXJuIEFzKHMsdCxuKX0scy5maXRXaWR0aD1mdW5jdGlvbih0LG4pe3JldHVybiBUcyhzLHQsbil9LHMuZml0SGVpZ2h0PWZ1bmN0aW9uKHQsbil7cmV0dXJuIFNzKHMsdCxuKX0scy5zY2FsZSgxMDcwKX0sdC5nZW9BemltdXRoYWxFcXVhbEFyZWE9ZnVuY3Rpb24oKXtyZXR1cm4gUnMoRnMpLnNjYWxlKDEyNC43NSkuY2xpcEFuZ2xlKDE3OS45OTkpfSx0Lmdlb0F6aW11dGhhbEVxdWFsQXJlYVJhdz1Gcyx0Lmdlb0F6aW11dGhhbEVxdWlkaXN0YW50PWZ1bmN0aW9uKCl7cmV0dXJuIFJzKElzKS5zY2FsZSg3OS40MTg4KS5jbGlwQW5nbGUoMTc5Ljk5OSl9LHQuZ2VvQXppbXV0aGFsRXF1aWRpc3RhbnRSYXc9SXMsdC5nZW9Db25pY0NvbmZvcm1hbD1mdW5jdGlvbigpe3JldHVybiBxcyhHcykuc2NhbGUoMTA5LjUpLnBhcmFsbGVscyhbMzAsMzBdKX0sdC5nZW9Db25pY0NvbmZvcm1hbFJhdz1Hcyx0Lmdlb0NvbmljRXF1YWxBcmVhPVVzLHQuZ2VvQ29uaWNFcXVhbEFyZWFSYXc9THMsdC5nZW9Db25pY0VxdWlkaXN0YW50PWZ1bmN0aW9uKCl7cmV0dXJuIHFzKCRzKS5zY2FsZSgxMzEuMTU0KS5jZW50ZXIoWzAsMTMuOTM4OV0pfSx0Lmdlb0NvbmljRXF1aWRpc3RhbnRSYXc9JHMsdC5nZW9FcXVhbEVhcnRoPWZ1bmN0aW9uKCl7cmV0dXJuIFJzKHRsKS5zY2FsZSgxNzcuMTU4KX0sdC5nZW9FcXVhbEVhcnRoUmF3PXRsLHQuZ2VvRXF1aXJlY3Rhbmd1bGFyPWZ1bmN0aW9uKCl7cmV0dXJuIFJzKFZzKS5zY2FsZSgxNTIuNjMpfSx0Lmdlb0VxdWlyZWN0YW5ndWxhclJhdz1Wcyx0Lmdlb0dub21vbmljPWZ1bmN0aW9uKCl7cmV0dXJuIFJzKG5sKS5zY2FsZSgxNDQuMDQ5KS5jbGlwQW5nbGUoNjApfSx0Lmdlb0dub21vbmljUmF3PW5sLHQuZ2VvSWRlbnRpdHk9ZnVuY3Rpb24oKXt2YXIgdCxuLGUscixpLG8sYT0xLHU9MCxjPTAsZj0xLHM9MSxsPU1mLGg9bnVsbCxkPU1mO2Z1bmN0aW9uIHAoKXtyZXR1cm4gcj1pPW51bGwsb31yZXR1cm4gbz17c3RyZWFtOmZ1bmN0aW9uKHQpe3JldHVybiByJiZpPT09dD9yOnI9bChkKGk9dCkpfSxwb3N0Y2xpcDpmdW5jdGlvbihyKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZD1yLGg9dD1uPWU9bnVsbCxwKCkpOmR9LGNsaXBFeHRlbnQ6ZnVuY3Rpb24ocil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGQ9bnVsbD09cj8oaD10PW49ZT1udWxsLE1mKTpKYyhoPStyWzBdWzBdLHQ9K3JbMF1bMV0sbj0rclsxXVswXSxlPStyWzFdWzFdKSxwKCkpOm51bGw9PWg/bnVsbDpbW2gsdF0sW24sZV1dfSxzY2FsZTpmdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8obD1lbCgoYT0rdCkqZixhKnMsdSxjKSxwKCkpOmF9LHRyYW5zbGF0ZTpmdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8obD1lbChhKmYsYSpzLHU9K3RbMF0sYz0rdFsxXSkscCgpKTpbdSxjXX0scmVmbGVjdFg6ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGw9ZWwoYSooZj10Py0xOjEpLGEqcyx1LGMpLHAoKSk6ZjwwfSxyZWZsZWN0WTpmdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8obD1lbChhKmYsYSoocz10Py0xOjEpLHUsYykscCgpKTpzPDB9LGZpdEV4dGVudDpmdW5jdGlvbih0LG4pe3JldHVybiBOcyhvLHQsbil9LGZpdFNpemU6ZnVuY3Rpb24odCxuKXtyZXR1cm4gQXMobyx0LG4pfSxmaXRXaWR0aDpmdW5jdGlvbih0LG4pe3JldHVybiBUcyhvLHQsbil9LGZpdEhlaWdodDpmdW5jdGlvbih0LG4pe3JldHVybiBTcyhvLHQsbil9fX0sdC5nZW9Qcm9qZWN0aW9uPVJzLHQuZ2VvUHJvamVjdGlvbk11dGF0b3I9RHMsdC5nZW9NZXJjYXRvcj1mdW5jdGlvbigpe3JldHVybiBIcyhqcykuc2NhbGUoOTYxL2phKX0sdC5nZW9NZXJjYXRvclJhdz1qcyx0Lmdlb05hdHVyYWxFYXJ0aDE9ZnVuY3Rpb24oKXtyZXR1cm4gUnMocmwpLnNjYWxlKDE3NS4yOTUpfSx0Lmdlb05hdHVyYWxFYXJ0aDFSYXc9cmwsdC5nZW9PcnRob2dyYXBoaWM9ZnVuY3Rpb24oKXtyZXR1cm4gUnMoaWwpLnNjYWxlKDI0OS41KS5jbGlwQW5nbGUoOTArT2EpfSx0Lmdlb09ydGhvZ3JhcGhpY1Jhdz1pbCx0Lmdlb1N0ZXJlb2dyYXBoaWM9ZnVuY3Rpb24oKXtyZXR1cm4gUnMob2wpLnNjYWxlKDI1MCkuY2xpcEFuZ2xlKDE0Mil9LHQuZ2VvU3RlcmVvZ3JhcGhpY1Jhdz1vbCx0Lmdlb1RyYW5zdmVyc2VNZXJjYXRvcj1mdW5jdGlvbigpe3ZhciB0PUhzKGFsKSxuPXQuY2VudGVyLGU9dC5yb3RhdGU7cmV0dXJuIHQuY2VudGVyPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoP24oWy10WzFdLHRbMF1dKTpbKHQ9bigpKVsxXSwtdFswXV19LHQucm90YXRlPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoP2UoW3RbMF0sdFsxXSx0Lmxlbmd0aD4yP3RbMl0rOTA6OTBdKTpbKHQ9ZSgpKVswXSx0WzFdLHRbMl0tOTBdfSxlKFswLDAsOTBdKS5zY2FsZSgxNTkuMTU1KX0sdC5nZW9UcmFuc3ZlcnNlTWVyY2F0b3JSYXc9YWwsdC5nZW9Sb3RhdGlvbj1xYyx0Lmdlb1N0cmVhbT1kdSx0Lmdlb1RyYW5zZm9ybT1mdW5jdGlvbih0KXtyZXR1cm57c3RyZWFtOnhzKHQpfX0sdC5jbHVzdGVyPWZ1bmN0aW9uKCl7dmFyIHQ9dWwsbj0xLGU9MSxyPSExO2Z1bmN0aW9uIGkoaSl7dmFyIG8sYT0wO2kuZWFjaEFmdGVyKGZ1bmN0aW9uKG4pe3ZhciBlPW4uY2hpbGRyZW47ZT8obi54PWZ1bmN0aW9uKHQpe3JldHVybiB0LnJlZHVjZShjbCwwKS90Lmxlbmd0aH0oZSksbi55PWZ1bmN0aW9uKHQpe3JldHVybiAxK3QucmVkdWNlKGZsLDApfShlKSk6KG4ueD1vP2ErPXQobixvKTowLG4ueT0wLG89bil9KTt2YXIgdT1mdW5jdGlvbih0KXtmb3IodmFyIG47bj10LmNoaWxkcmVuOyl0PW5bMF07cmV0dXJuIHR9KGkpLGM9ZnVuY3Rpb24odCl7Zm9yKHZhciBuO249dC5jaGlsZHJlbjspdD1uW24ubGVuZ3RoLTFdO3JldHVybiB0fShpKSxmPXUueC10KHUsYykvMixzPWMueCt0KGMsdSkvMjtyZXR1cm4gaS5lYWNoQWZ0ZXIocj9mdW5jdGlvbih0KXt0Lng9KHQueC1pLngpKm4sdC55PShpLnktdC55KSplfTpmdW5jdGlvbih0KXt0Lng9KHQueC1mKS8ocy1mKSpuLHQueT0oMS0oaS55P3QueS9pLnk6MSkpKmV9KX1yZXR1cm4gaS5zZXBhcmF0aW9uPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0PW4saSk6dH0saS5zaXplPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhyPSExLG49K3RbMF0sZT0rdFsxXSxpKTpyP251bGw6W24sZV19LGkubm9kZVNpemU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHI9ITAsbj0rdFswXSxlPSt0WzFdLGkpOnI/W24sZV06bnVsbH0saX0sdC5oaWVyYXJjaHk9bGwsdC5wYWNrPWZ1bmN0aW9uKCl7dmFyIHQ9bnVsbCxuPTEsZT0xLHI9UGw7ZnVuY3Rpb24gaShpKXtyZXR1cm4gaS54PW4vMixpLnk9ZS8yLHQ/aS5lYWNoQmVmb3JlKERsKHQpKS5lYWNoQWZ0ZXIocWwociwuNSkpLmVhY2hCZWZvcmUoTGwoMSkpOmkuZWFjaEJlZm9yZShEbChSbCkpLmVhY2hBZnRlcihxbChQbCwxKSkuZWFjaEFmdGVyKHFsKHIsaS5yL01hdGgubWluKG4sZSkpKS5lYWNoQmVmb3JlKExsKE1hdGgubWluKG4sZSkvKDIqaS5yKSkpLGl9cmV0dXJuIGkucmFkaXVzPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0PW51bGw9PShlPW4pP251bGw6Q2woZSksaSk6dDt2YXIgZX0saS5zaXplPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhuPSt0WzBdLGU9K3RbMV0saSk6W24sZV19LGkucGFkZGluZz1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocj0iZnVuY3Rpb24iPT10eXBlb2YgdD90OnpsKCt0KSxpKTpyfSxpfSx0LnBhY2tTaWJsaW5ncz1mdW5jdGlvbih0KXtyZXR1cm4gRWwodCksdH0sdC5wYWNrRW5jbG9zZT15bCx0LnBhcnRpdGlvbj1mdW5jdGlvbigpe3ZhciB0PTEsbj0xLGU9MCxyPSExO2Z1bmN0aW9uIGkoaSl7dmFyIG89aS5oZWlnaHQrMTtyZXR1cm4gaS54MD1pLnkwPWUsaS54MT10LGkueTE9bi9vLGkuZWFjaEJlZm9yZShmdW5jdGlvbih0LG4pe3JldHVybiBmdW5jdGlvbihyKXtyLmNoaWxkcmVuJiZPbChyLHIueDAsdCooci5kZXB0aCsxKS9uLHIueDEsdCooci5kZXB0aCsyKS9uKTt2YXIgaT1yLngwLG89ci55MCxhPXIueDEtZSx1PXIueTEtZTthPGkmJihpPWE9KGkrYSkvMiksdTxvJiYobz11PShvK3UpLzIpLHIueDA9aSxyLnkwPW8sci54MT1hLHIueTE9dX19KG4sbykpLHImJmkuZWFjaEJlZm9yZShVbCksaX1yZXR1cm4gaS5yb3VuZD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocj0hIXQsaSk6cn0saS5zaXplPWZ1bmN0aW9uKGUpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0PStlWzBdLG49K2VbMV0saSk6W3Qsbl19LGkucGFkZGluZz1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZT0rdCxpKTplfSxpfSx0LnN0cmF0aWZ5PWZ1bmN0aW9uKCl7dmFyIHQ9SWwsbj1qbDtmdW5jdGlvbiBlKGUpe3ZhciByLGksbyxhLHUsYyxmLHM9ZS5sZW5ndGgsbD1uZXcgQXJyYXkocyksaD17fTtmb3IoaT0wO2k8czsrK2kpcj1lW2ldLHU9bFtpXT1uZXcgdmwociksbnVsbCE9KGM9dChyLGksZSkpJiYoYys9IiIpJiYoaFtmPUJsKyh1LmlkPWMpXT1mIGluIGg/Rmw6dSk7Zm9yKGk9MDtpPHM7KytpKWlmKHU9bFtpXSxudWxsIT0oYz1uKGVbaV0saSxlKSkmJihjKz0iIikpe2lmKCEoYT1oW0JsK2NdKSl0aHJvdyBuZXcgRXJyb3IoIm1pc3Npbmc6ICIrYyk7aWYoYT09PUZsKXRocm93IG5ldyBFcnJvcigiYW1iaWd1b3VzOiAiK2MpO2EuY2hpbGRyZW4/YS5jaGlsZHJlbi5wdXNoKHUpOmEuY2hpbGRyZW49W3VdLHUucGFyZW50PWF9ZWxzZXtpZihvKXRocm93IG5ldyBFcnJvcigibXVsdGlwbGUgcm9vdHMiKTtvPXV9aWYoIW8pdGhyb3cgbmV3IEVycm9yKCJubyByb290Iik7aWYoby5wYXJlbnQ9WWwsby5lYWNoQmVmb3JlKGZ1bmN0aW9uKHQpe3QuZGVwdGg9dC5wYXJlbnQuZGVwdGgrMSwtLXN9KS5lYWNoQmVmb3JlKHBsKSxvLnBhcmVudD1udWxsLHM+MCl0aHJvdyBuZXcgRXJyb3IoImN5Y2xlIik7cmV0dXJuIG99cmV0dXJuIGUuaWQ9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHQ9Q2wobiksZSk6dH0sZS5wYXJlbnRJZD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8obj1DbCh0KSxlKTpufSxlfSx0LnRyZWU9ZnVuY3Rpb24oKXt2YXIgdD1IbCxuPTEsZT0xLHI9bnVsbDtmdW5jdGlvbiBpKGkpe3ZhciBjPWZ1bmN0aW9uKHQpe2Zvcih2YXIgbixlLHIsaSxvLGE9bmV3IFdsKHQsMCksdT1bYV07bj11LnBvcCgpOylpZihyPW4uXy5jaGlsZHJlbilmb3Iobi5jaGlsZHJlbj1uZXcgQXJyYXkobz1yLmxlbmd0aCksaT1vLTE7aT49MDstLWkpdS5wdXNoKGU9bi5jaGlsZHJlbltpXT1uZXcgV2wocltpXSxpKSksZS5wYXJlbnQ9bjtyZXR1cm4oYS5wYXJlbnQ9bmV3IFdsKG51bGwsMCkpLmNoaWxkcmVuPVthXSxhfShpKTtpZihjLmVhY2hBZnRlcihvKSxjLnBhcmVudC5tPS1jLnosYy5lYWNoQmVmb3JlKGEpLHIpaS5lYWNoQmVmb3JlKHUpO2Vsc2V7dmFyIGY9aSxzPWksbD1pO2kuZWFjaEJlZm9yZShmdW5jdGlvbih0KXt0Lng8Zi54JiYoZj10KSx0Lng+cy54JiYocz10KSx0LmRlcHRoPmwuZGVwdGgmJihsPXQpfSk7dmFyIGg9Zj09PXM/MTp0KGYscykvMixkPWgtZi54LHA9bi8ocy54K2grZCksdj1lLyhsLmRlcHRofHwxKTtpLmVhY2hCZWZvcmUoZnVuY3Rpb24odCl7dC54PSh0LngrZCkqcCx0Lnk9dC5kZXB0aCp2fSl9cmV0dXJuIGl9ZnVuY3Rpb24gbyhuKXt2YXIgZT1uLmNoaWxkcmVuLHI9bi5wYXJlbnQuY2hpbGRyZW4saT1uLmk/cltuLmktMV06bnVsbDtpZihlKXshZnVuY3Rpb24odCl7Zm9yKHZhciBuLGU9MCxyPTAsaT10LmNoaWxkcmVuLG89aS5sZW5ndGg7LS1vPj0wOykobj1pW29dKS56Kz1lLG4ubSs9ZSxlKz1uLnMrKHIrPW4uYyl9KG4pO3ZhciBvPShlWzBdLnorZVtlLmxlbmd0aC0xXS56KS8yO2k/KG4uej1pLnordChuLl8saS5fKSxuLm09bi56LW8pOm4uej1vfWVsc2UgaSYmKG4uej1pLnordChuLl8saS5fKSk7bi5wYXJlbnQuQT1mdW5jdGlvbihuLGUscil7aWYoZSl7Zm9yKHZhciBpLG89bixhPW4sdT1lLGM9by5wYXJlbnQuY2hpbGRyZW5bMF0sZj1vLm0scz1hLm0sbD11Lm0saD1jLm07dT1HbCh1KSxvPVhsKG8pLHUmJm87KWM9WGwoYyksKGE9R2woYSkpLmE9biwoaT11LnorbC1vLnotZit0KHUuXyxvLl8pKT4wJiYoVmwoJGwodSxuLHIpLG4saSksZis9aSxzKz1pKSxsKz11Lm0sZis9by5tLGgrPWMubSxzKz1hLm07dSYmIUdsKGEpJiYoYS50PXUsYS5tKz1sLXMpLG8mJiFYbChjKSYmKGMudD1vLGMubSs9Zi1oLHI9bil9cmV0dXJuIHJ9KG4saSxuLnBhcmVudC5BfHxyWzBdKX1mdW5jdGlvbiBhKHQpe3QuXy54PXQueit0LnBhcmVudC5tLHQubSs9dC5wYXJlbnQubX1mdW5jdGlvbiB1KHQpe3QueCo9bix0Lnk9dC5kZXB0aCplfXJldHVybiBpLnNlcGFyYXRpb249ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHQ9bixpKTp0fSxpLnNpemU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHI9ITEsbj0rdFswXSxlPSt0WzFdLGkpOnI/bnVsbDpbbixlXX0saS5ub2RlU2l6ZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocj0hMCxuPSt0WzBdLGU9K3RbMV0saSk6cj9bbixlXTpudWxsfSxpfSx0LnRyZWVtYXA9ZnVuY3Rpb24oKXt2YXIgdD1LbCxuPSExLGU9MSxyPTEsaT1bMF0sbz1QbCxhPVBsLHU9UGwsYz1QbCxmPVBsO2Z1bmN0aW9uIHModCl7cmV0dXJuIHQueDA9dC55MD0wLHQueDE9ZSx0LnkxPXIsdC5lYWNoQmVmb3JlKGwpLGk9WzBdLG4mJnQuZWFjaEJlZm9yZShVbCksdH1mdW5jdGlvbiBsKG4pe3ZhciBlPWlbbi5kZXB0aF0scj1uLngwK2Uscz1uLnkwK2UsbD1uLngxLWUsaD1uLnkxLWU7bDxyJiYocj1sPShyK2wpLzIpLGg8cyYmKHM9aD0ocytoKS8yKSxuLngwPXIsbi55MD1zLG4ueDE9bCxuLnkxPWgsbi5jaGlsZHJlbiYmKGU9aVtuLmRlcHRoKzFdPW8obikvMixyKz1mKG4pLWUscys9YShuKS1lLChsLT11KG4pLWUpPHImJihyPWw9KHIrbCkvMiksKGgtPWMobiktZSk8cyYmKHM9aD0ocytoKS8yKSx0KG4scixzLGwsaCkpfXJldHVybiBzLnJvdW5kPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhuPSEhdCxzKTpufSxzLnNpemU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGU9K3RbMF0scj0rdFsxXSxzKTpbZSxyXX0scy50aWxlPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0PUNsKG4pLHMpOnR9LHMucGFkZGluZz1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD9zLnBhZGRpbmdJbm5lcih0KS5wYWRkaW5nT3V0ZXIodCk6cy5wYWRkaW5nSW5uZXIoKX0scy5wYWRkaW5nSW5uZXI9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG89ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDp6bCgrdCkscyk6b30scy5wYWRkaW5nT3V0ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/cy5wYWRkaW5nVG9wKHQpLnBhZGRpbmdSaWdodCh0KS5wYWRkaW5nQm90dG9tKHQpLnBhZGRpbmdMZWZ0KHQpOnMucGFkZGluZ1RvcCgpfSxzLnBhZGRpbmdUb3A9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGE9ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDp6bCgrdCkscyk6YX0scy5wYWRkaW5nUmlnaHQ9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHU9ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDp6bCgrdCkscyk6dX0scy5wYWRkaW5nQm90dG9tPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhjPSJmdW5jdGlvbiI9PXR5cGVvZiB0P3Q6emwoK3QpLHMpOmN9LHMucGFkZGluZ0xlZnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGY9ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDp6bCgrdCkscyk6Zn0sc30sdC50cmVlbWFwQmluYXJ5PWZ1bmN0aW9uKHQsbixlLHIsaSl7dmFyIG8sYSx1PXQuY2hpbGRyZW4sYz11Lmxlbmd0aCxmPW5ldyBBcnJheShjKzEpO2ZvcihmWzBdPWE9bz0wO288YzsrK28pZltvKzFdPWErPXVbb10udmFsdWU7IWZ1bmN0aW9uIHQobixlLHIsaSxvLGEsYyl7aWYobj49ZS0xKXt2YXIgcz11W25dO3JldHVybiBzLngwPWkscy55MD1vLHMueDE9YSx2b2lkKHMueTE9Yyl9Zm9yKHZhciBsPWZbbl0saD1yLzIrbCxkPW4rMSxwPWUtMTtkPHA7KXt2YXIgdj1kK3A+Pj4xO2Zbdl08aD9kPXYrMTpwPXZ9aC1mW2QtMV08ZltkXS1oJiZuKzE8ZCYmLS1kO3ZhciBnPWZbZF0tbCx5PXItZztpZihhLWk+Yy1vKXt2YXIgXz0oaSp5K2EqZykvcjt0KG4sZCxnLGksbyxfLGMpLHQoZCxlLHksXyxvLGEsYyl9ZWxzZXt2YXIgYj0obyp5K2MqZykvcjt0KG4sZCxnLGksbyxhLGIpLHQoZCxlLHksaSxiLGEsYyl9fSgwLGMsdC52YWx1ZSxuLGUscixpKX0sdC50cmVlbWFwRGljZT1PbCx0LnRyZWVtYXBTbGljZT1abCx0LnRyZWVtYXBTbGljZURpY2U9ZnVuY3Rpb24odCxuLGUscixpKXsoMSZ0LmRlcHRoP1psOk9sKSh0LG4sZSxyLGkpfSx0LnRyZWVtYXBTcXVhcmlmeT1LbCx0LnRyZWVtYXBSZXNxdWFyaWZ5PXRoLHQuaW50ZXJwb2xhdGU9eWUsdC5pbnRlcnBvbGF0ZUFycmF5PXNlLHQuaW50ZXJwb2xhdGVCYXNpcz1Lbix0LmludGVycG9sYXRlQmFzaXNDbG9zZWQ9dGUsdC5pbnRlcnBvbGF0ZURhdGU9bGUsdC5pbnRlcnBvbGF0ZURpc2NyZXRlPWZ1bmN0aW9uKHQpe3ZhciBuPXQubGVuZ3RoO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gdFtNYXRoLm1heCgwLE1hdGgubWluKG4tMSxNYXRoLmZsb29yKGUqbikpKV19fSx0LmludGVycG9sYXRlSHVlPWZ1bmN0aW9uKHQsbil7dmFyIGU9cmUoK3QsK24pO3JldHVybiBmdW5jdGlvbih0KXt2YXIgbj1lKHQpO3JldHVybiBuLTM2MCpNYXRoLmZsb29yKG4vMzYwKX19LHQuaW50ZXJwb2xhdGVOdW1iZXI9aGUsdC5pbnRlcnBvbGF0ZU9iamVjdD1kZSx0LmludGVycG9sYXRlUm91bmQ9X2UsdC5pbnRlcnBvbGF0ZVN0cmluZz1nZSx0LmludGVycG9sYXRlVHJhbnNmb3JtQ3NzPVNlLHQuaW50ZXJwb2xhdGVUcmFuc2Zvcm1Tdmc9a2UsdC5pbnRlcnBvbGF0ZVpvb209RGUsdC5pbnRlcnBvbGF0ZVJnYj1hZSx0LmludGVycG9sYXRlUmdiQmFzaXM9Y2UsdC5pbnRlcnBvbGF0ZVJnYkJhc2lzQ2xvc2VkPWZlLHQuaW50ZXJwb2xhdGVIc2w9TGUsdC5pbnRlcnBvbGF0ZUhzbExvbmc9VWUsdC5pbnRlcnBvbGF0ZUxhYj1mdW5jdGlvbih0LG4pe3ZhciBlPW9lKCh0PVJuKHQpKS5sLChuPVJuKG4pKS5sKSxyPW9lKHQuYSxuLmEpLGk9b2UodC5iLG4uYiksbz1vZSh0Lm9wYWNpdHksbi5vcGFjaXR5KTtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHQubD1lKG4pLHQuYT1yKG4pLHQuYj1pKG4pLHQub3BhY2l0eT1vKG4pLHQrIiJ9fSx0LmludGVycG9sYXRlSGNsPUJlLHQuaW50ZXJwb2xhdGVIY2xMb25nPVllLHQuaW50ZXJwb2xhdGVDdWJlaGVsaXg9SWUsdC5pbnRlcnBvbGF0ZUN1YmVoZWxpeExvbmc9amUsdC5waWVjZXdpc2U9ZnVuY3Rpb24odCxuKXtmb3IodmFyIGU9MCxyPW4ubGVuZ3RoLTEsaT1uWzBdLG89bmV3IEFycmF5KHI8MD8wOnIpO2U8cjspb1tlXT10KGksaT1uWysrZV0pO3JldHVybiBmdW5jdGlvbih0KXt2YXIgbj1NYXRoLm1heCgwLE1hdGgubWluKHItMSxNYXRoLmZsb29yKHQqPXIpKSk7cmV0dXJuIG9bbl0odC1uKX19LHQucXVhbnRpemU9ZnVuY3Rpb24odCxuKXtmb3IodmFyIGU9bmV3IEFycmF5KG4pLHI9MDtyPG47KytyKWVbcl09dChyLyhuLTEpKTtyZXR1cm4gZX0sdC5wYXRoPUhpLHQucG9seWdvbkFyZWE9ZnVuY3Rpb24odCl7Zm9yKHZhciBuLGU9LTEscj10Lmxlbmd0aCxpPXRbci0xXSxvPTA7KytlPHI7KW49aSxpPXRbZV0sbys9blsxXSppWzBdLW5bMF0qaVsxXTtyZXR1cm4gby8yfSx0LnBvbHlnb25DZW50cm9pZD1mdW5jdGlvbih0KXtmb3IodmFyIG4sZSxyPS0xLGk9dC5sZW5ndGgsbz0wLGE9MCx1PXRbaS0xXSxjPTA7KytyPGk7KW49dSx1PXRbcl0sYys9ZT1uWzBdKnVbMV0tdVswXSpuWzFdLG8rPShuWzBdK3VbMF0pKmUsYSs9KG5bMV0rdVsxXSkqZTtyZXR1cm5bby8oYyo9MyksYS9jXX0sdC5wb2x5Z29uSHVsbD1mdW5jdGlvbih0KXtpZigoZT10Lmxlbmd0aCk8MylyZXR1cm4gbnVsbDt2YXIgbixlLHI9bmV3IEFycmF5KGUpLGk9bmV3IEFycmF5KGUpO2ZvcihuPTA7bjxlOysrbilyW25dPVsrdFtuXVswXSwrdFtuXVsxXSxuXTtmb3Ioci5zb3J0KG5oKSxuPTA7bjxlOysrbilpW25dPVtyW25dWzBdLC1yW25dWzFdXTt2YXIgbz1laChyKSxhPWVoKGkpLHU9YVswXT09PW9bMF0sYz1hW2EubGVuZ3RoLTFdPT09b1tvLmxlbmd0aC0xXSxmPVtdO2ZvcihuPW8ubGVuZ3RoLTE7bj49MDstLW4pZi5wdXNoKHRbcltvW25dXVsyXV0pO2ZvcihuPSt1O248YS5sZW5ndGgtYzsrK24pZi5wdXNoKHRbclthW25dXVsyXV0pO3JldHVybiBmfSx0LnBvbHlnb25Db250YWlucz1mdW5jdGlvbih0LG4pe2Zvcih2YXIgZSxyLGk9dC5sZW5ndGgsbz10W2ktMV0sYT1uWzBdLHU9blsxXSxjPW9bMF0sZj1vWzFdLHM9ITEsbD0wO2w8aTsrK2wpZT0obz10W2xdKVswXSwocj1vWzFdKT51IT1mPnUmJmE8KGMtZSkqKHUtcikvKGYtcikrZSYmKHM9IXMpLGM9ZSxmPXI7cmV0dXJuIHN9LHQucG9seWdvbkxlbmd0aD1mdW5jdGlvbih0KXtmb3IodmFyIG4sZSxyPS0xLGk9dC5sZW5ndGgsbz10W2ktMV0sYT1vWzBdLHU9b1sxXSxjPTA7KytyPGk7KW49YSxlPXUsbi09YT0obz10W3JdKVswXSxlLT11PW9bMV0sYys9TWF0aC5zcXJ0KG4qbitlKmUpO3JldHVybiBjfSx0LnF1YWR0cmVlPWFhLHQucmFuZG9tVW5pZm9ybT1paCx0LnJhbmRvbU5vcm1hbD1vaCx0LnJhbmRvbUxvZ05vcm1hbD1haCx0LnJhbmRvbUJhdGVzPWNoLHQucmFuZG9tSXJ3aW5IYWxsPXVoLHQucmFuZG9tRXhwb25lbnRpYWw9ZmgsdC5zY2FsZUJhbmQ9eWgsdC5zY2FsZVBvaW50PWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uIHQobil7dmFyIGU9bi5jb3B5O3JldHVybiBuLnBhZGRpbmc9bi5wYWRkaW5nT3V0ZXIsZGVsZXRlIG4ucGFkZGluZ0lubmVyLGRlbGV0ZSBuLnBhZGRpbmdPdXRlcixuLmNvcHk9ZnVuY3Rpb24oKXtyZXR1cm4gdChlKCkpfSxufSh5aC5hcHBseShudWxsLGFyZ3VtZW50cykucGFkZGluZ0lubmVyKDEpKX0sdC5zY2FsZUlkZW50aXR5PWZ1bmN0aW9uIHQobil7dmFyIGU7ZnVuY3Rpb24gcih0KXtyZXR1cm4gaXNOYU4odD0rdCk/ZTp0fXJldHVybiByLmludmVydD1yLHIuZG9tYWluPXIucmFuZ2U9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG49ZGguY2FsbCh0LF9oKSxyKTpuLnNsaWNlKCl9LHIudW5rbm93bj1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZT10LHIpOmV9LHIuY29weT1mdW5jdGlvbigpe3JldHVybiB0KG4pLnVua25vd24oZSl9LG49YXJndW1lbnRzLmxlbmd0aD9kaC5jYWxsKG4sX2gpOlswLDFdLEVoKHIpfSx0LnNjYWxlTGluZWFyPWZ1bmN0aW9uIHQoKXt2YXIgbj1TaChtaCxtaCk7cmV0dXJuIG4uY29weT1mdW5jdGlvbigpe3JldHVybiBBaChuLHQoKSl9LHNoLmFwcGx5KG4sYXJndW1lbnRzKSxFaChuKX0sdC5zY2FsZUxvZz1mdW5jdGlvbiB0KCl7dmFyIG49VWgoVGgoKSkuZG9tYWluKFsxLDEwXSk7cmV0dXJuIG4uY29weT1mdW5jdGlvbigpe3JldHVybiBBaChuLHQoKSkuYmFzZShuLmJhc2UoKSl9LHNoLmFwcGx5KG4sYXJndW1lbnRzKSxufSx0LnNjYWxlU3ltbG9nPWZ1bmN0aW9uIHQoKXt2YXIgbj1ZaChUaCgpKTtyZXR1cm4gbi5jb3B5PWZ1bmN0aW9uKCl7cmV0dXJuIEFoKG4sdCgpKS5jb25zdGFudChuLmNvbnN0YW50KCkpfSxzaC5hcHBseShuLGFyZ3VtZW50cyl9LHQuc2NhbGVPcmRpbmFsPWdoLHQuc2NhbGVJbXBsaWNpdD12aCx0LnNjYWxlUG93PVhoLHQuc2NhbGVTcXJ0PWZ1bmN0aW9uKCl7cmV0dXJuIFhoLmFwcGx5KG51bGwsYXJndW1lbnRzKS5leHBvbmVudCguNSl9LHQuc2NhbGVRdWFudGlsZT1mdW5jdGlvbiB0KCl7dmFyIGUscj1bXSxvPVtdLGE9W107ZnVuY3Rpb24gdSgpe3ZhciB0PTAsbj1NYXRoLm1heCgxLG8ubGVuZ3RoKTtmb3IoYT1uZXcgQXJyYXkobi0xKTsrK3Q8bjspYVt0LTFdPU4ocix0L24pO3JldHVybiBjfWZ1bmN0aW9uIGModCl7cmV0dXJuIGlzTmFOKHQ9K3QpP2U6b1tpKGEsdCldfXJldHVybiBjLmludmVydEV4dGVudD1mdW5jdGlvbih0KXt2YXIgbj1vLmluZGV4T2YodCk7cmV0dXJuIG48MD9bTmFOLE5hTl06W24+MD9hW24tMV06clswXSxuPGEubGVuZ3RoP2Fbbl06cltyLmxlbmd0aC0xXV19LGMuZG9tYWluPWZ1bmN0aW9uKHQpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiByLnNsaWNlKCk7cj1bXTtmb3IodmFyIGUsaT0wLG89dC5sZW5ndGg7aTxvOysraSludWxsPT0oZT10W2ldKXx8aXNOYU4oZT0rZSl8fHIucHVzaChlKTtyZXR1cm4gci5zb3J0KG4pLHUoKX0sYy5yYW5nZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8obz1waC5jYWxsKHQpLHUoKSk6by5zbGljZSgpfSxjLnVua25vd249ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGU9dCxjKTplfSxjLnF1YW50aWxlcz1mdW5jdGlvbigpe3JldHVybiBhLnNsaWNlKCl9LGMuY29weT1mdW5jdGlvbigpe3JldHVybiB0KCkuZG9tYWluKHIpLnJhbmdlKG8pLnVua25vd24oZSl9LHNoLmFwcGx5KGMsYXJndW1lbnRzKX0sdC5zY2FsZVF1YW50aXplPWZ1bmN0aW9uIHQoKXt2YXIgbixlPTAscj0xLG89MSxhPVsuNV0sdT1bMCwxXTtmdW5jdGlvbiBjKHQpe3JldHVybiB0PD10P3VbaShhLHQsMCxvKV06bn1mdW5jdGlvbiBmKCl7dmFyIHQ9LTE7Zm9yKGE9bmV3IEFycmF5KG8pOysrdDxvOylhW3RdPSgodCsxKSpyLSh0LW8pKmUpLyhvKzEpO3JldHVybiBjfXJldHVybiBjLmRvbWFpbj1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZT0rdFswXSxyPSt0WzFdLGYoKSk6W2Uscl19LGMucmFuZ2U9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG89KHU9cGguY2FsbCh0KSkubGVuZ3RoLTEsZigpKTp1LnNsaWNlKCl9LGMuaW52ZXJ0RXh0ZW50PWZ1bmN0aW9uKHQpe3ZhciBuPXUuaW5kZXhPZih0KTtyZXR1cm4gbjwwP1tOYU4sTmFOXTpuPDE/W2UsYVswXV06bj49bz9bYVtvLTFdLHJdOlthW24tMV0sYVtuXV19LGMudW5rbm93bj1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8obj10LGMpOmN9LGMudGhyZXNob2xkcz1mdW5jdGlvbigpe3JldHVybiBhLnNsaWNlKCl9LGMuY29weT1mdW5jdGlvbigpe3JldHVybiB0KCkuZG9tYWluKFtlLHJdKS5yYW5nZSh1KS51bmtub3duKG4pfSxzaC5hcHBseShFaChjKSxhcmd1bWVudHMpfSx0LnNjYWxlVGhyZXNob2xkPWZ1bmN0aW9uIHQoKXt2YXIgbixlPVsuNV0scj1bMCwxXSxvPTE7ZnVuY3Rpb24gYSh0KXtyZXR1cm4gdDw9dD9yW2koZSx0LDAsbyldOm59cmV0dXJuIGEuZG9tYWluPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhlPXBoLmNhbGwodCksbz1NYXRoLm1pbihlLmxlbmd0aCxyLmxlbmd0aC0xKSxhKTplLnNsaWNlKCl9LGEucmFuZ2U9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHI9cGguY2FsbCh0KSxvPU1hdGgubWluKGUubGVuZ3RoLHIubGVuZ3RoLTEpLGEpOnIuc2xpY2UoKX0sYS5pbnZlcnRFeHRlbnQ9ZnVuY3Rpb24odCl7dmFyIG49ci5pbmRleE9mKHQpO3JldHVybltlW24tMV0sZVtuXV19LGEudW5rbm93bj1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8obj10LGEpOm59LGEuY29weT1mdW5jdGlvbigpe3JldHVybiB0KCkuZG9tYWluKGUpLnJhbmdlKHIpLnVua25vd24obil9LHNoLmFwcGx5KGEsYXJndW1lbnRzKX0sdC5zY2FsZVRpbWU9ZnVuY3Rpb24oKXtyZXR1cm4gc2guYXBwbHkoTnYoTmQsd2QsY2Qsb2QscmQsbmQsS2gsV2gsdC50aW1lRm9ybWF0KS5kb21haW4oW25ldyBEYXRlKDJlMywwLDEpLG5ldyBEYXRlKDJlMywwLDIpXSksYXJndW1lbnRzKX0sdC5zY2FsZVV0Yz1mdW5jdGlvbigpe3JldHVybiBzaC5hcHBseShOdihXZCxWZCxSZCxDZCxrZCxUZCxLaCxXaCx0LnV0Y0Zvcm1hdCkuZG9tYWluKFtEYXRlLlVUQygyZTMsMCwxKSxEYXRlLlVUQygyZTMsMCwyKV0pLGFyZ3VtZW50cyl9LHQuc2NhbGVTZXF1ZW50aWFsPWZ1bmN0aW9uIHQoKXt2YXIgbj1FaChBdigpKG1oKSk7cmV0dXJuIG4uY29weT1mdW5jdGlvbigpe3JldHVybiBUdihuLHQoKSl9LGxoLmFwcGx5KG4sYXJndW1lbnRzKX0sdC5zY2FsZVNlcXVlbnRpYWxMb2c9ZnVuY3Rpb24gdCgpe3ZhciBuPVVoKEF2KCkpLmRvbWFpbihbMSwxMF0pO3JldHVybiBuLmNvcHk9ZnVuY3Rpb24oKXtyZXR1cm4gVHYobix0KCkpLmJhc2Uobi5iYXNlKCkpfSxsaC5hcHBseShuLGFyZ3VtZW50cyl9LHQuc2NhbGVTZXF1ZW50aWFsUG93PVN2LHQuc2NhbGVTZXF1ZW50aWFsU3FydD1mdW5jdGlvbigpe3JldHVybiBTdi5hcHBseShudWxsLGFyZ3VtZW50cykuZXhwb25lbnQoLjUpfSx0LnNjYWxlU2VxdWVudGlhbFN5bWxvZz1mdW5jdGlvbiB0KCl7dmFyIG49WWgoQXYoKSk7cmV0dXJuIG4uY29weT1mdW5jdGlvbigpe3JldHVybiBUdihuLHQoKSkuY29uc3RhbnQobi5jb25zdGFudCgpKX0sbGguYXBwbHkobixhcmd1bWVudHMpfSx0LnNjYWxlU2VxdWVudGlhbFF1YW50aWxlPWZ1bmN0aW9uIHQoKXt2YXIgZT1bXSxyPW1oO2Z1bmN0aW9uIG8odCl7aWYoIWlzTmFOKHQ9K3QpKXJldHVybiByKChpKGUsdCktMSkvKGUubGVuZ3RoLTEpKX1yZXR1cm4gby5kb21haW49ZnVuY3Rpb24odCl7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGUuc2xpY2UoKTtlPVtdO2Zvcih2YXIgcixpPTAsYT10Lmxlbmd0aDtpPGE7KytpKW51bGw9PShyPXRbaV0pfHxpc05hTihyPStyKXx8ZS5wdXNoKHIpO3JldHVybiBlLnNvcnQobiksb30sby5pbnRlcnBvbGF0b3I9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHI9dCxvKTpyfSxvLmNvcHk9ZnVuY3Rpb24oKXtyZXR1cm4gdChyKS5kb21haW4oZSl9LGxoLmFwcGx5KG8sYXJndW1lbnRzKX0sdC5zY2FsZURpdmVyZ2luZz1mdW5jdGlvbiB0KCl7dmFyIG49RWgoa3YoKShtaCkpO3JldHVybiBuLmNvcHk9ZnVuY3Rpb24oKXtyZXR1cm4gVHYobix0KCkpfSxsaC5hcHBseShuLGFyZ3VtZW50cyl9LHQuc2NhbGVEaXZlcmdpbmdMb2c9ZnVuY3Rpb24gdCgpe3ZhciBuPVVoKGt2KCkpLmRvbWFpbihbLjEsMSwxMF0pO3JldHVybiBuLmNvcHk9ZnVuY3Rpb24oKXtyZXR1cm4gVHYobix0KCkpLmJhc2Uobi5iYXNlKCkpfSxsaC5hcHBseShuLGFyZ3VtZW50cyl9LHQuc2NhbGVEaXZlcmdpbmdQb3c9RXYsdC5zY2FsZURpdmVyZ2luZ1NxcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gRXYuYXBwbHkobnVsbCxhcmd1bWVudHMpLmV4cG9uZW50KC41KX0sdC5zY2FsZURpdmVyZ2luZ1N5bWxvZz1mdW5jdGlvbiB0KCl7dmFyIG49WWgoa3YoKSk7cmV0dXJuIG4uY29weT1mdW5jdGlvbigpe3JldHVybiBUdihuLHQoKSkuY29uc3RhbnQobi5jb25zdGFudCgpKX0sbGguYXBwbHkobixhcmd1bWVudHMpfSx0LnRpY2tGb3JtYXQ9a2gsdC5zY2hlbWVDYXRlZ29yeTEwPVB2LHQuc2NoZW1lQWNjZW50PXp2LHQuc2NoZW1lRGFyazI9UnYsdC5zY2hlbWVQYWlyZWQ9RHYsdC5zY2hlbWVQYXN0ZWwxPXF2LHQuc2NoZW1lUGFzdGVsMj1Mdix0LnNjaGVtZVNldDE9VXYsdC5zY2hlbWVTZXQyPU92LHQuc2NoZW1lU2V0Mz1Cdix0LmludGVycG9sYXRlQnJCRz1Jdix0LnNjaGVtZUJyQkc9RnYsdC5pbnRlcnBvbGF0ZVBSR249SHYsdC5zY2hlbWVQUkduPWp2LHQuaW50ZXJwb2xhdGVQaVlHPUd2LHQuc2NoZW1lUGlZRz1Ydix0LmludGVycG9sYXRlUHVPcj0kdix0LnNjaGVtZVB1T3I9VnYsdC5pbnRlcnBvbGF0ZVJkQnU9WnYsdC5zY2hlbWVSZEJ1PVd2LHQuaW50ZXJwb2xhdGVSZEd5PUp2LHQuc2NoZW1lUmRHeT1Rdix0LmludGVycG9sYXRlUmRZbEJ1PXRnLHQuc2NoZW1lUmRZbEJ1PUt2LHQuaW50ZXJwb2xhdGVSZFlsR249ZWcsdC5zY2hlbWVSZFlsR249bmcsdC5pbnRlcnBvbGF0ZVNwZWN0cmFsPWlnLHQuc2NoZW1lU3BlY3RyYWw9cmcsdC5pbnRlcnBvbGF0ZUJ1R249YWcsdC5zY2hlbWVCdUduPW9nLHQuaW50ZXJwb2xhdGVCdVB1PWNnLHQuc2NoZW1lQnVQdT11Zyx0LmludGVycG9sYXRlR25CdT1zZyx0LnNjaGVtZUduQnU9ZmcsdC5pbnRlcnBvbGF0ZU9yUmQ9aGcsdC5zY2hlbWVPclJkPWxnLHQuaW50ZXJwb2xhdGVQdUJ1R249cGcsdC5zY2hlbWVQdUJ1R249ZGcsdC5pbnRlcnBvbGF0ZVB1QnU9Z2csdC5zY2hlbWVQdUJ1PXZnLHQuaW50ZXJwb2xhdGVQdVJkPV9nLHQuc2NoZW1lUHVSZD15Zyx0LmludGVycG9sYXRlUmRQdT1tZyx0LnNjaGVtZVJkUHU9YmcsdC5pbnRlcnBvbGF0ZVlsR25CdT13Zyx0LnNjaGVtZVlsR25CdT14Zyx0LmludGVycG9sYXRlWWxHbj1OZyx0LnNjaGVtZVlsR249TWcsdC5pbnRlcnBvbGF0ZVlsT3JCcj1UZyx0LnNjaGVtZVlsT3JCcj1BZyx0LmludGVycG9sYXRlWWxPclJkPWtnLHQuc2NoZW1lWWxPclJkPVNnLHQuaW50ZXJwb2xhdGVCbHVlcz1DZyx0LnNjaGVtZUJsdWVzPUVnLHQuaW50ZXJwb2xhdGVHcmVlbnM9emcsdC5zY2hlbWVHcmVlbnM9UGcsdC5pbnRlcnBvbGF0ZUdyZXlzPURnLHQuc2NoZW1lR3JleXM9UmcsdC5pbnRlcnBvbGF0ZVB1cnBsZXM9TGcsdC5zY2hlbWVQdXJwbGVzPXFnLHQuaW50ZXJwb2xhdGVSZWRzPU9nLHQuc2NoZW1lUmVkcz1VZyx0LmludGVycG9sYXRlT3Jhbmdlcz1ZZyx0LnNjaGVtZU9yYW5nZXM9QmcsdC5pbnRlcnBvbGF0ZUN1YmVoZWxpeERlZmF1bHQ9RmcsdC5pbnRlcnBvbGF0ZVJhaW5ib3c9ZnVuY3Rpb24odCl7KHQ8MHx8dD4xKSYmKHQtPU1hdGguZmxvb3IodCkpO3ZhciBuPU1hdGguYWJzKHQtLjUpO3JldHVybiBIZy5oPTM2MCp0LTEwMCxIZy5zPTEuNS0xLjUqbixIZy5sPS44LS45Km4sSGcrIiJ9LHQuaW50ZXJwb2xhdGVXYXJtPUlnLHQuaW50ZXJwb2xhdGVDb29sPWpnLHQuaW50ZXJwb2xhdGVTaW5lYm93PWZ1bmN0aW9uKHQpe3ZhciBuO3JldHVybiB0PSguNS10KSpNYXRoLlBJLFhnLnI9MjU1KihuPU1hdGguc2luKHQpKSpuLFhnLmc9MjU1KihuPU1hdGguc2luKHQrR2cpKSpuLFhnLmI9MjU1KihuPU1hdGguc2luKHQrVmcpKSpuLFhnKyIifSx0LmludGVycG9sYXRlVmlyaWRpcz1XZyx0LmludGVycG9sYXRlTWFnbWE9WmcsdC5pbnRlcnBvbGF0ZUluZmVybm89UWcsdC5pbnRlcnBvbGF0ZVBsYXNtYT1KZyx0LmNyZWF0ZT1mdW5jdGlvbih0KXtyZXR1cm4genQoVyh0KS5jYWxsKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkpfSx0LmNyZWF0b3I9Vyx0LmxvY2FsPUR0LHQubWF0Y2hlcj10dCx0Lm1vdXNlPU90LHQubmFtZXNwYWNlPSQsdC5uYW1lc3BhY2VzPVYsdC5jbGllbnRQb2ludD1VdCx0LnNlbGVjdD16dCx0LnNlbGVjdEFsbD1mdW5jdGlvbih0KXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQ/bmV3IEN0KFtkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHQpXSxbZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50XSk6bmV3IEN0KFtudWxsPT10P1tdOnRdLEV0KX0sdC5zZWxlY3Rpb249UHQsdC5zZWxlY3Rvcj1RLHQuc2VsZWN0b3JBbGw9Syx0LnN0eWxlPWN0LHQudG91Y2g9QnQsdC50b3VjaGVzPWZ1bmN0aW9uKHQsbil7bnVsbD09biYmKG49THQoKS50b3VjaGVzKTtmb3IodmFyIGU9MCxyPW4/bi5sZW5ndGg6MCxpPW5ldyBBcnJheShyKTtlPHI7KytlKWlbZV09VXQodCxuW2VdKTtyZXR1cm4gaX0sdC53aW5kb3c9dXQsdC5jdXN0b21FdmVudD1TdCx0LmFyYz1mdW5jdGlvbigpe3ZhciB0PWh5LG49ZHksZT1LZygwKSxyPW51bGwsaT1weSxvPXZ5LGE9Z3ksdT1udWxsO2Z1bmN0aW9uIGMoKXt2YXIgYyxmLHMsbD0rdC5hcHBseSh0aGlzLGFyZ3VtZW50cyksaD0rbi5hcHBseSh0aGlzLGFyZ3VtZW50cyksZD1pLmFwcGx5KHRoaXMsYXJndW1lbnRzKS1meSxwPW8uYXBwbHkodGhpcyxhcmd1bWVudHMpLWZ5LHY9dHkocC1kKSxnPXA+ZDtpZih1fHwodT1jPUhpKCkpLGg8bCYmKGY9aCxoPWwsbD1mKSxoPnV5KWlmKHY+c3ktdXkpdS5tb3ZlVG8oaCpleShkKSxoKm95KGQpKSx1LmFyYygwLDAsaCxkLHAsIWcpLGw+dXkmJih1Lm1vdmVUbyhsKmV5KHApLGwqb3kocCkpLHUuYXJjKDAsMCxsLHAsZCxnKSk7ZWxzZXt2YXIgeSxfLGI9ZCxtPXAseD1kLHc9cCxNPXYsTj12LEE9YS5hcHBseSh0aGlzLGFyZ3VtZW50cykvMixUPUE+dXkmJihyPytyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTpheShsKmwraCpoKSksUz1peSh0eShoLWwpLzIsK2UuYXBwbHkodGhpcyxhcmd1bWVudHMpKSxrPVMsRT1TO2lmKFQ+dXkpe3ZhciBDPWx5KFQvbCpveShBKSksUD1seShUL2gqb3koQSkpOyhNLT0yKkMpPnV5Pyh4Kz1DKj1nPzE6LTEsdy09Qyk6KE09MCx4PXc9KGQrcCkvMiksKE4tPTIqUCk+dXk/KGIrPVAqPWc/MTotMSxtLT1QKTooTj0wLGI9bT0oZCtwKS8yKX12YXIgej1oKmV5KGIpLFI9aCpveShiKSxEPWwqZXkodykscT1sKm95KHcpO2lmKFM+dXkpe3ZhciBMLFU9aCpleShtKSxPPWgqb3kobSksQj1sKmV5KHgpLFk9bCpveSh4KTtpZih2PGN5JiYoTD1mdW5jdGlvbih0LG4sZSxyLGksbyxhLHUpe3ZhciBjPWUtdCxmPXItbixzPWEtaSxsPXUtbyxoPWwqYy1zKmY7aWYoIShoKmg8dXkpKXJldHVyblt0KyhoPShzKihuLW8pLWwqKHQtaSkpL2gpKmMsbitoKmZdfSh6LFIsQixZLFUsTyxELHEpKSl7dmFyIEY9ei1MWzBdLEk9Ui1MWzFdLGo9VS1MWzBdLEg9Ty1MWzFdLFg9MS9veSgoKHM9KEYqaitJKkgpLyhheShGKkYrSSpJKSpheShqKmorSCpIKSkpPjE/MDpzPC0xP2N5Ok1hdGguYWNvcyhzKSkvMiksRz1heShMWzBdKkxbMF0rTFsxXSpMWzFdKTtrPWl5KFMsKGwtRykvKFgtMSkpLEU9aXkoUywoaC1HKS8oWCsxKSl9fU4+dXk/RT51eT8oeT15eShCLFkseixSLGgsRSxnKSxfPXl5KFUsTyxELHEsaCxFLGcpLHUubW92ZVRvKHkuY3greS54MDEseS5jeSt5LnkwMSksRTxTP3UuYXJjKHkuY3gseS5jeSxFLG55KHkueTAxLHkueDAxKSxueShfLnkwMSxfLngwMSksIWcpOih1LmFyYyh5LmN4LHkuY3ksRSxueSh5LnkwMSx5LngwMSksbnkoeS55MTEseS54MTEpLCFnKSx1LmFyYygwLDAsaCxueSh5LmN5K3kueTExLHkuY3greS54MTEpLG55KF8uY3krXy55MTEsXy5jeCtfLngxMSksIWcpLHUuYXJjKF8uY3gsXy5jeSxFLG55KF8ueTExLF8ueDExKSxueShfLnkwMSxfLngwMSksIWcpKSk6KHUubW92ZVRvKHosUiksdS5hcmMoMCwwLGgsYixtLCFnKSk6dS5tb3ZlVG8oeixSKSxsPnV5JiZNPnV5P2s+dXk/KHk9eXkoRCxxLFUsTyxsLC1rLGcpLF89eXkoeixSLEIsWSxsLC1rLGcpLHUubGluZVRvKHkuY3greS54MDEseS5jeSt5LnkwMSksazxTP3UuYXJjKHkuY3gseS5jeSxrLG55KHkueTAxLHkueDAxKSxueShfLnkwMSxfLngwMSksIWcpOih1LmFyYyh5LmN4LHkuY3ksayxueSh5LnkwMSx5LngwMSksbnkoeS55MTEseS54MTEpLCFnKSx1LmFyYygwLDAsbCxueSh5LmN5K3kueTExLHkuY3greS54MTEpLG55KF8uY3krXy55MTEsXy5jeCtfLngxMSksZyksdS5hcmMoXy5jeCxfLmN5LGssbnkoXy55MTEsXy54MTEpLG55KF8ueTAxLF8ueDAxKSwhZykpKTp1LmFyYygwLDAsbCx3LHgsZyk6dS5saW5lVG8oRCxxKX1lbHNlIHUubW92ZVRvKDAsMCk7aWYodS5jbG9zZVBhdGgoKSxjKXJldHVybiB1PW51bGwsYysiInx8bnVsbH1yZXR1cm4gYy5jZW50cm9pZD1mdW5jdGlvbigpe3ZhciBlPSgrdC5hcHBseSh0aGlzLGFyZ3VtZW50cykrICtuLmFwcGx5KHRoaXMsYXJndW1lbnRzKSkvMixyPSgraS5hcHBseSh0aGlzLGFyZ3VtZW50cykrICtvLmFwcGx5KHRoaXMsYXJndW1lbnRzKSkvMi1jeS8yO3JldHVybltleShyKSplLG95KHIpKmVdfSxjLmlubmVyUmFkaXVzPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0PSJmdW5jdGlvbiI9PXR5cGVvZiBuP246S2coK24pLGMpOnR9LGMub3V0ZXJSYWRpdXM9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG49ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDpLZygrdCksYyk6bn0sYy5jb3JuZXJSYWRpdXM9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGU9ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDpLZygrdCksYyk6ZX0sYy5wYWRSYWRpdXM9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHI9bnVsbD09dD9udWxsOiJmdW5jdGlvbiI9PXR5cGVvZiB0P3Q6S2coK3QpLGMpOnJ9LGMuc3RhcnRBbmdsZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oaT0iZnVuY3Rpb24iPT10eXBlb2YgdD90OktnKCt0KSxjKTppfSxjLmVuZEFuZ2xlPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhvPSJmdW5jdGlvbiI9PXR5cGVvZiB0P3Q6S2coK3QpLGMpOm99LGMucGFkQW5nbGU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGE9ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDpLZygrdCksYyk6YX0sYy5jb250ZXh0PWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh1PW51bGw9PXQ/bnVsbDp0LGMpOnV9LGN9LHQuYXJlYT1NeSx0LmxpbmU9d3ksdC5waWU9ZnVuY3Rpb24oKXt2YXIgdD1BeSxuPU55LGU9bnVsbCxyPUtnKDApLGk9S2coc3kpLG89S2coMCk7ZnVuY3Rpb24gYShhKXt2YXIgdSxjLGYscyxsLGg9YS5sZW5ndGgsZD0wLHA9bmV3IEFycmF5KGgpLHY9bmV3IEFycmF5KGgpLGc9K3IuYXBwbHkodGhpcyxhcmd1bWVudHMpLHk9TWF0aC5taW4oc3ksTWF0aC5tYXgoLXN5LGkuYXBwbHkodGhpcyxhcmd1bWVudHMpLWcpKSxfPU1hdGgubWluKE1hdGguYWJzKHkpL2gsby5hcHBseSh0aGlzLGFyZ3VtZW50cykpLGI9XyooeTwwPy0xOjEpO2Zvcih1PTA7dTxoOysrdSkobD12W3BbdV09dV09K3QoYVt1XSx1LGEpKT4wJiYoZCs9bCk7Zm9yKG51bGwhPW4/cC5zb3J0KGZ1bmN0aW9uKHQsZSl7cmV0dXJuIG4odlt0XSx2W2VdKX0pOm51bGwhPWUmJnAuc29ydChmdW5jdGlvbih0LG4pe3JldHVybiBlKGFbdF0sYVtuXSl9KSx1PTAsZj1kPyh5LWgqYikvZDowO3U8aDsrK3UsZz1zKWM9cFt1XSxzPWcrKChsPXZbY10pPjA/bCpmOjApK2IsdltjXT17ZGF0YTphW2NdLGluZGV4OnUsdmFsdWU6bCxzdGFydEFuZ2xlOmcsZW5kQW5nbGU6cyxwYWRBbmdsZTpffTtyZXR1cm4gdn1yZXR1cm4gYS52YWx1ZT1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odD0iZnVuY3Rpb24iPT10eXBlb2Ygbj9uOktnKCtuKSxhKTp0fSxhLnNvcnRWYWx1ZXM9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG49dCxlPW51bGwsYSk6bn0sYS5zb3J0PWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhlPXQsbj1udWxsLGEpOmV9LGEuc3RhcnRBbmdsZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocj0iZnVuY3Rpb24iPT10eXBlb2YgdD90OktnKCt0KSxhKTpyfSxhLmVuZEFuZ2xlPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhpPSJmdW5jdGlvbiI9PXR5cGVvZiB0P3Q6S2coK3QpLGEpOml9LGEucGFkQW5nbGU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG89ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDpLZygrdCksYSk6b30sYX0sdC5hcmVhUmFkaWFsPVB5LHQucmFkaWFsQXJlYT1QeSx0LmxpbmVSYWRpYWw9Q3ksdC5yYWRpYWxMaW5lPUN5LHQucG9pbnRSYWRpYWw9enksdC5saW5rSG9yaXpvbnRhbD1mdW5jdGlvbigpe3JldHVybiBMeShVeSl9LHQubGlua1ZlcnRpY2FsPWZ1bmN0aW9uKCl7cmV0dXJuIEx5KE95KX0sdC5saW5rUmFkaWFsPWZ1bmN0aW9uKCl7dmFyIHQ9THkoQnkpO3JldHVybiB0LmFuZ2xlPXQueCxkZWxldGUgdC54LHQucmFkaXVzPXQueSxkZWxldGUgdC55LHR9LHQuc3ltYm9sPWZ1bmN0aW9uKCl7dmFyIHQ9S2coWXkpLG49S2coNjQpLGU9bnVsbDtmdW5jdGlvbiByKCl7dmFyIHI7aWYoZXx8KGU9cj1IaSgpKSx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKS5kcmF3KGUsK24uYXBwbHkodGhpcyxhcmd1bWVudHMpKSxyKXJldHVybiBlPW51bGwscisiInx8bnVsbH1yZXR1cm4gci50eXBlPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0PSJmdW5jdGlvbiI9PXR5cGVvZiBuP246S2cobikscik6dH0sci5zaXplPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhuPSJmdW5jdGlvbiI9PXR5cGVvZiB0P3Q6S2coK3QpLHIpOm59LHIuY29udGV4dD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZT1udWxsPT10P251bGw6dCxyKTplfSxyfSx0LnN5bWJvbHM9ZV8sdC5zeW1ib2xDaXJjbGU9WXksdC5zeW1ib2xDcm9zcz1GeSx0LnN5bWJvbERpYW1vbmQ9SHksdC5zeW1ib2xTcXVhcmU9V3ksdC5zeW1ib2xTdGFyPSR5LHQuc3ltYm9sVHJpYW5nbGU9UXksdC5zeW1ib2xXeWU9bl8sdC5jdXJ2ZUJhc2lzQ2xvc2VkPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgYV8odCl9LHQuY3VydmVCYXNpc09wZW49ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyB1Xyh0KX0sdC5jdXJ2ZUJhc2lzPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgb18odCl9LHQuY3VydmVCdW5kbGU9Zl8sdC5jdXJ2ZUNhcmRpbmFsQ2xvc2VkPXBfLHQuY3VydmVDYXJkaW5hbE9wZW49Z18sdC5jdXJ2ZUNhcmRpbmFsPWhfLHQuY3VydmVDYXRtdWxsUm9tQ2xvc2VkPXhfLHQuY3VydmVDYXRtdWxsUm9tT3Blbj1NXyx0LmN1cnZlQ2F0bXVsbFJvbT1iXyx0LmN1cnZlTGluZWFyQ2xvc2VkPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgTl8odCl9LHQuY3VydmVMaW5lYXI9YnksdC5jdXJ2ZU1vbm90b25lWD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IEVfKHQpfSx0LmN1cnZlTW9ub3RvbmVZPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgQ18odCl9LHQuY3VydmVOYXR1cmFsPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgel8odCl9LHQuY3VydmVTdGVwPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgRF8odCwuNSl9LHQuY3VydmVTdGVwQWZ0ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBEXyh0LDEpfSx0LmN1cnZlU3RlcEJlZm9yZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IERfKHQsMCl9LHQuc3RhY2s9ZnVuY3Rpb24oKXt2YXIgdD1LZyhbXSksbj1MXyxlPXFfLHI9VV87ZnVuY3Rpb24gaShpKXt2YXIgbyxhLHU9dC5hcHBseSh0aGlzLGFyZ3VtZW50cyksYz1pLmxlbmd0aCxmPXUubGVuZ3RoLHM9bmV3IEFycmF5KGYpO2ZvcihvPTA7bzxmOysrbyl7Zm9yKHZhciBsLGg9dVtvXSxkPXNbb109bmV3IEFycmF5KGMpLHA9MDtwPGM7KytwKWRbcF09bD1bMCwrcihpW3BdLGgscCxpKV0sbC5kYXRhPWlbcF07ZC5rZXk9aH1mb3Iobz0wLGE9bihzKTtvPGY7KytvKXNbYVtvXV0uaW5kZXg9bztyZXR1cm4gZShzLGEpLHN9cmV0dXJuIGkua2V5cz1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odD0iZnVuY3Rpb24iPT10eXBlb2Ygbj9uOktnKFJ5LmNhbGwobikpLGkpOnR9LGkudmFsdWU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHI9ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDpLZygrdCksaSk6cn0saS5vcmRlcj1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8obj1udWxsPT10P0xfOiJmdW5jdGlvbiI9PXR5cGVvZiB0P3Q6S2coUnkuY2FsbCh0KSksaSk6bn0saS5vZmZzZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGU9bnVsbD09dD9xXzp0LGkpOmV9LGl9LHQuc3RhY2tPZmZzZXRFeHBhbmQ9ZnVuY3Rpb24odCxuKXtpZigocj10Lmxlbmd0aCk+MCl7Zm9yKHZhciBlLHIsaSxvPTAsYT10WzBdLmxlbmd0aDtvPGE7KytvKXtmb3IoaT1lPTA7ZTxyOysrZSlpKz10W2VdW29dWzFdfHwwO2lmKGkpZm9yKGU9MDtlPHI7KytlKXRbZV1bb11bMV0vPWl9cV8odCxuKX19LHQuc3RhY2tPZmZzZXREaXZlcmdpbmc9ZnVuY3Rpb24odCxuKXtpZigodT10Lmxlbmd0aCk+MSlmb3IodmFyIGUscixpLG8sYSx1LGM9MCxmPXRbblswXV0ubGVuZ3RoO2M8ZjsrK2MpZm9yKG89YT0wLGU9MDtlPHU7KytlKShpPShyPXRbbltlXV1bY10pWzFdLXJbMF0pPj0wPyhyWzBdPW8sclsxXT1vKz1pKTppPDA/KHJbMV09YSxyWzBdPWErPWkpOnJbMF09b30sdC5zdGFja09mZnNldE5vbmU9cV8sdC5zdGFja09mZnNldFNpbGhvdWV0dGU9ZnVuY3Rpb24odCxuKXtpZigoZT10Lmxlbmd0aCk+MCl7Zm9yKHZhciBlLHI9MCxpPXRbblswXV0sbz1pLmxlbmd0aDtyPG87KytyKXtmb3IodmFyIGE9MCx1PTA7YTxlOysrYSl1Kz10W2FdW3JdWzFdfHwwO2lbcl1bMV0rPWlbcl1bMF09LXUvMn1xXyh0LG4pfX0sdC5zdGFja09mZnNldFdpZ2dsZT1mdW5jdGlvbih0LG4pe2lmKChpPXQubGVuZ3RoKT4wJiYocj0oZT10W25bMF1dKS5sZW5ndGgpPjApe2Zvcih2YXIgZSxyLGksbz0wLGE9MTthPHI7KythKXtmb3IodmFyIHU9MCxjPTAsZj0wO3U8aTsrK3Upe2Zvcih2YXIgcz10W25bdV1dLGw9c1thXVsxXXx8MCxoPShsLShzW2EtMV1bMV18fDApKS8yLGQ9MDtkPHU7KytkKXt2YXIgcD10W25bZF1dO2grPShwW2FdWzFdfHwwKS0ocFthLTFdWzFdfHwwKX1jKz1sLGYrPWgqbH1lW2EtMV1bMV0rPWVbYS0xXVswXT1vLGMmJihvLT1mL2MpfWVbYS0xXVsxXSs9ZVthLTFdWzBdPW8scV8odCxuKX19LHQuc3RhY2tPcmRlckFwcGVhcmFuY2U9T18sdC5zdGFja09yZGVyQXNjZW5kaW5nPVlfLHQuc3RhY2tPcmRlckRlc2NlbmRpbmc9ZnVuY3Rpb24odCl7cmV0dXJuIFlfKHQpLnJldmVyc2UoKX0sdC5zdGFja09yZGVySW5zaWRlT3V0PWZ1bmN0aW9uKHQpe3ZhciBuLGUscj10Lmxlbmd0aCxpPXQubWFwKEZfKSxvPU9fKHQpLGE9MCx1PTAsYz1bXSxmPVtdO2ZvcihuPTA7bjxyOysrbillPW9bbl0sYTx1PyhhKz1pW2VdLGMucHVzaChlKSk6KHUrPWlbZV0sZi5wdXNoKGUpKTtyZXR1cm4gZi5yZXZlcnNlKCkuY29uY2F0KGMpfSx0LnN0YWNrT3JkZXJOb25lPUxfLHQuc3RhY2tPcmRlclJldmVyc2U9ZnVuY3Rpb24odCl7cmV0dXJuIExfKHQpLnJldmVyc2UoKX0sdC50aW1lSW50ZXJ2YWw9JGgsdC50aW1lTWlsbGlzZWNvbmQ9V2gsdC50aW1lTWlsbGlzZWNvbmRzPVpoLHQudXRjTWlsbGlzZWNvbmQ9V2gsdC51dGNNaWxsaXNlY29uZHM9WmgsdC50aW1lU2Vjb25kPUtoLHQudGltZVNlY29uZHM9dGQsdC51dGNTZWNvbmQ9S2gsdC51dGNTZWNvbmRzPXRkLHQudGltZU1pbnV0ZT1uZCx0LnRpbWVNaW51dGVzPWVkLHQudGltZUhvdXI9cmQsdC50aW1lSG91cnM9aWQsdC50aW1lRGF5PW9kLHQudGltZURheXM9YWQsdC50aW1lV2Vlaz1jZCx0LnRpbWVXZWVrcz12ZCx0LnRpbWVTdW5kYXk9Y2QsdC50aW1lU3VuZGF5cz12ZCx0LnRpbWVNb25kYXk9ZmQsdC50aW1lTW9uZGF5cz1nZCx0LnRpbWVUdWVzZGF5PXNkLHQudGltZVR1ZXNkYXlzPXlkLHQudGltZVdlZG5lc2RheT1sZCx0LnRpbWVXZWRuZXNkYXlzPV9kLHQudGltZVRodXJzZGF5PWhkLHQudGltZVRodXJzZGF5cz1iZCx0LnRpbWVGcmlkYXk9ZGQsdC50aW1lRnJpZGF5cz1tZCx0LnRpbWVTYXR1cmRheT1wZCx0LnRpbWVTYXR1cmRheXM9eGQsdC50aW1lTW9udGg9d2QsdC50aW1lTW9udGhzPU1kLHQudGltZVllYXI9TmQsdC50aW1lWWVhcnM9QWQsdC51dGNNaW51dGU9VGQsdC51dGNNaW51dGVzPVNkLHQudXRjSG91cj1rZCx0LnV0Y0hvdXJzPUVkLHQudXRjRGF5PUNkLHQudXRjRGF5cz1QZCx0LnV0Y1dlZWs9UmQsdC51dGNXZWVrcz1ZZCx0LnV0Y1N1bmRheT1SZCx0LnV0Y1N1bmRheXM9WWQsdC51dGNNb25kYXk9RGQsdC51dGNNb25kYXlzPUZkLHQudXRjVHVlc2RheT1xZCx0LnV0Y1R1ZXNkYXlzPUlkLHQudXRjV2VkbmVzZGF5PUxkLHQudXRjV2VkbmVzZGF5cz1qZCx0LnV0Y1RodXJzZGF5PVVkLHQudXRjVGh1cnNkYXlzPUhkLHQudXRjRnJpZGF5PU9kLHQudXRjRnJpZGF5cz1YZCx0LnV0Y1NhdHVyZGF5PUJkLHQudXRjU2F0dXJkYXlzPUdkLHQudXRjTW9udGg9VmQsdC51dGNNb250aHM9JGQsdC51dGNZZWFyPVdkLHQudXRjWWVhcnM9WmQsdC50aW1lRm9ybWF0RGVmYXVsdExvY2FsZT1odix0LnRpbWVGb3JtYXRMb2NhbGU9dHAsdC5pc29Gb3JtYXQ9ZHYsdC5pc29QYXJzZT1wdix0Lm5vdz1ucix0LnRpbWVyPWlyLHQudGltZXJGbHVzaD1vcix0LnRpbWVvdXQ9ZnIsdC5pbnRlcnZhbD1mdW5jdGlvbih0LG4sZSl7dmFyIHI9bmV3IHJyLGk9bjtyZXR1cm4gbnVsbD09bj8oci5yZXN0YXJ0KHQsbixlKSxyKToobj0rbixlPW51bGw9PWU/bnIoKTorZSxyLnJlc3RhcnQoZnVuY3Rpb24gbyhhKXthKz1pLHIucmVzdGFydChvLGkrPW4sZSksdChhKX0sbixlKSxyKX0sdC50cmFuc2l0aW9uPUNyLHQuYWN0aXZlPWZ1bmN0aW9uKHQsbil7dmFyIGUscixpPXQuX190cmFuc2l0aW9uO2lmKGkpZm9yKHIgaW4gbj1udWxsPT1uP251bGw6bisiIixpKWlmKChlPWlbcl0pLnN0YXRlPmRyJiZlLm5hbWU9PT1uKXJldHVybiBuZXcgRXIoW1t0XV0sZmksbiwrcik7cmV0dXJuIG51bGx9LHQuaW50ZXJydXB0PU1yLHQudm9yb25vaT1mdW5jdGlvbigpe3ZhciB0PWpfLG49SF8sZT1udWxsO2Z1bmN0aW9uIHIocil7cmV0dXJuIG5ldyBOYihyLm1hcChmdW5jdGlvbihlLGkpe3ZhciBvPVtNYXRoLnJvdW5kKHQoZSxpLHIpL3hiKSp4YixNYXRoLnJvdW5kKG4oZSxpLHIpL3hiKSp4Yl07cmV0dXJuIG8uaW5kZXg9aSxvLmRhdGE9ZSxvfSksZSl9cmV0dXJuIHIucG9seWdvbnM9ZnVuY3Rpb24odCl7cmV0dXJuIHIodCkucG9seWdvbnMoKX0sci5saW5rcz1mdW5jdGlvbih0KXtyZXR1cm4gcih0KS5saW5rcygpfSxyLnRyaWFuZ2xlcz1mdW5jdGlvbih0KXtyZXR1cm4gcih0KS50cmlhbmdsZXMoKX0sci54PWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0PSJmdW5jdGlvbiI9PXR5cGVvZiBuP246SV8oK24pLHIpOnR9LHIueT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8obj0iZnVuY3Rpb24iPT10eXBlb2YgdD90OklfKCt0KSxyKTpufSxyLmV4dGVudD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZT1udWxsPT10P251bGw6W1srdFswXVswXSwrdFswXVsxXV0sWyt0WzFdWzBdLCt0WzFdWzFdXV0scik6ZSYmW1tlWzBdWzBdLGVbMF1bMV1dLFtlWzFdWzBdLGVbMV1bMV1dXX0sci5zaXplPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhlPW51bGw9PXQ/bnVsbDpbWzAsMF0sWyt0WzBdLCt0WzFdXV0scik6ZSYmW2VbMV1bMF0tZVswXVswXSxlWzFdWzFdLWVbMF1bMV1dfSxyfSx0Lnpvb209ZnVuY3Rpb24oKXt2YXIgbixlLHI9emIsaT1SYixvPVViLGE9cWIsdT1MYixjPVswLDEvMF0sZj1bWy0xLzAsLTEvMF0sWzEvMCwxLzBdXSxzPTI1MCxsPURlLGg9W10sZD1JKCJzdGFydCIsInpvb20iLCJlbmQiKSxwPTUwMCx2PTE1MCxnPTA7ZnVuY3Rpb24geSh0KXt0LnByb3BlcnR5KCJfX3pvb20iLERiKS5vbigid2hlZWwuem9vbSIsTikub24oIm1vdXNlZG93bi56b29tIixBKS5vbigiZGJsY2xpY2suem9vbSIsVCkuZmlsdGVyKHUpLm9uKCJ0b3VjaHN0YXJ0Lnpvb20iLFMpLm9uKCJ0b3VjaG1vdmUuem9vbSIsaykub24oInRvdWNoZW5kLnpvb20gdG91Y2hjYW5jZWwuem9vbSIsRSkuc3R5bGUoInRvdWNoLWFjdGlvbiIsIm5vbmUiKS5zdHlsZSgiLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yIiwicmdiYSgwLDAsMCwwKSIpfWZ1bmN0aW9uIF8odCxuKXtyZXR1cm4obj1NYXRoLm1heChjWzBdLE1hdGgubWluKGNbMV0sbikpKT09PXQuaz90Om5ldyBTYihuLHQueCx0LnkpfWZ1bmN0aW9uIGIodCxuLGUpe3ZhciByPW5bMF0tZVswXSp0LmssaT1uWzFdLWVbMV0qdC5rO3JldHVybiByPT09dC54JiZpPT09dC55P3Q6bmV3IFNiKHQuayxyLGkpfWZ1bmN0aW9uIG0odCl7cmV0dXJuWygrdFswXVswXSsgK3RbMV1bMF0pLzIsKCt0WzBdWzFdKyArdFsxXVsxXSkvMl19ZnVuY3Rpb24geCh0LG4sZSl7dC5vbigic3RhcnQuem9vbSIsZnVuY3Rpb24oKXt3KHRoaXMsYXJndW1lbnRzKS5zdGFydCgpfSkub24oImludGVycnVwdC56b29tIGVuZC56b29tIixmdW5jdGlvbigpe3codGhpcyxhcmd1bWVudHMpLmVuZCgpfSkudHdlZW4oInpvb20iLGZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLHI9dyh0aGlzLHQpLG89aS5hcHBseSh0aGlzLHQpLGE9ZXx8bShvKSx1PU1hdGgubWF4KG9bMV1bMF0tb1swXVswXSxvWzFdWzFdLW9bMF1bMV0pLGM9dGhpcy5fX3pvb20sZj0iZnVuY3Rpb24iPT10eXBlb2Ygbj9uLmFwcGx5KHRoaXMsdCk6bixzPWwoYy5pbnZlcnQoYSkuY29uY2F0KHUvYy5rKSxmLmludmVydChhKS5jb25jYXQodS9mLmspKTtyZXR1cm4gZnVuY3Rpb24odCl7aWYoMT09PXQpdD1mO2Vsc2V7dmFyIG49cyh0KSxlPXUvblsyXTt0PW5ldyBTYihlLGFbMF0tblswXSplLGFbMV0tblsxXSplKX1yLnpvb20obnVsbCx0KX19KX1mdW5jdGlvbiB3KHQsbil7Zm9yKHZhciBlLHI9MCxpPWgubGVuZ3RoO3I8aTsrK3IpaWYoKGU9aFtyXSkudGhhdD09PXQpcmV0dXJuIGU7cmV0dXJuIG5ldyBNKHQsbil9ZnVuY3Rpb24gTSh0LG4pe3RoaXMudGhhdD10LHRoaXMuYXJncz1uLHRoaXMuaW5kZXg9LTEsdGhpcy5hY3RpdmU9MCx0aGlzLmV4dGVudD1pLmFwcGx5KHQsbil9ZnVuY3Rpb24gTigpe2lmKHIuYXBwbHkodGhpcyxhcmd1bWVudHMpKXt2YXIgdD13KHRoaXMsYXJndW1lbnRzKSxuPXRoaXMuX196b29tLGU9TWF0aC5tYXgoY1swXSxNYXRoLm1pbihjWzFdLG4uaypNYXRoLnBvdygyLGEuYXBwbHkodGhpcyxhcmd1bWVudHMpKSkpLGk9T3QodGhpcyk7aWYodC53aGVlbCl0Lm1vdXNlWzBdWzBdPT09aVswXSYmdC5tb3VzZVswXVsxXT09PWlbMV18fCh0Lm1vdXNlWzFdPW4uaW52ZXJ0KHQubW91c2VbMF09aSkpLGNsZWFyVGltZW91dCh0LndoZWVsKTtlbHNle2lmKG4uaz09PWUpcmV0dXJuO3QubW91c2U9W2ksbi5pbnZlcnQoaSldLE1yKHRoaXMpLHQuc3RhcnQoKX1QYigpLHQud2hlZWw9c2V0VGltZW91dChmdW5jdGlvbigpe3Qud2hlZWw9bnVsbCx0LmVuZCgpfSx2KSx0Lnpvb20oIm1vdXNlIixvKGIoXyhuLGUpLHQubW91c2VbMF0sdC5tb3VzZVsxXSksdC5leHRlbnQsZikpfX1mdW5jdGlvbiBBKCl7aWYoIWUmJnIuYXBwbHkodGhpcyxhcmd1bWVudHMpKXt2YXIgbj13KHRoaXMsYXJndW1lbnRzKSxpPXp0KHQuZXZlbnQudmlldykub24oIm1vdXNlbW92ZS56b29tIixmdW5jdGlvbigpe2lmKFBiKCksIW4ubW92ZWQpe3ZhciBlPXQuZXZlbnQuY2xpZW50WC11LHI9dC5ldmVudC5jbGllbnRZLWM7bi5tb3ZlZD1lKmUrcipyPmd9bi56b29tKCJtb3VzZSIsbyhiKG4udGhhdC5fX3pvb20sbi5tb3VzZVswXT1PdChuLnRoYXQpLG4ubW91c2VbMV0pLG4uZXh0ZW50LGYpKX0sITApLm9uKCJtb3VzZXVwLnpvb20iLGZ1bmN0aW9uKCl7aS5vbigibW91c2Vtb3ZlLnpvb20gbW91c2V1cC56b29tIixudWxsKSxqdCh0LmV2ZW50LnZpZXcsbi5tb3ZlZCksUGIoKSxuLmVuZCgpfSwhMCksYT1PdCh0aGlzKSx1PXQuZXZlbnQuY2xpZW50WCxjPXQuZXZlbnQuY2xpZW50WTtJdCh0LmV2ZW50LnZpZXcpLENiKCksbi5tb3VzZT1bYSx0aGlzLl9fem9vbS5pbnZlcnQoYSldLE1yKHRoaXMpLG4uc3RhcnQoKX19ZnVuY3Rpb24gVCgpe2lmKHIuYXBwbHkodGhpcyxhcmd1bWVudHMpKXt2YXIgbj10aGlzLl9fem9vbSxlPU90KHRoaXMpLGE9bi5pbnZlcnQoZSksdT1uLmsqKHQuZXZlbnQuc2hpZnRLZXk/LjU6MiksYz1vKGIoXyhuLHUpLGUsYSksaS5hcHBseSh0aGlzLGFyZ3VtZW50cyksZik7UGIoKSxzPjA/enQodGhpcykudHJhbnNpdGlvbigpLmR1cmF0aW9uKHMpLmNhbGwoeCxjLGUpOnp0KHRoaXMpLmNhbGwoeS50cmFuc2Zvcm0sYyl9fWZ1bmN0aW9uIFMoKXtpZihyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl7dmFyIGUsaSxvLGEsdT13KHRoaXMsYXJndW1lbnRzKSxjPXQuZXZlbnQuY2hhbmdlZFRvdWNoZXMsZj1jLmxlbmd0aDtmb3IoQ2IoKSxpPTA7aTxmOysraSlhPVthPUJ0KHRoaXMsYywobz1jW2ldKS5pZGVudGlmaWVyKSx0aGlzLl9fem9vbS5pbnZlcnQoYSksby5pZGVudGlmaWVyXSx1LnRvdWNoMD91LnRvdWNoMXx8KHUudG91Y2gxPWEpOih1LnRvdWNoMD1hLGU9ITApO2lmKG4mJihuPWNsZWFyVGltZW91dChuKSwhdS50b3VjaDEpKXJldHVybiB1LmVuZCgpLHZvaWQoKGE9enQodGhpcykub24oImRibGNsaWNrLnpvb20iKSkmJmEuYXBwbHkodGhpcyxhcmd1bWVudHMpKTtlJiYobj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bj1udWxsfSxwKSxNcih0aGlzKSx1LnN0YXJ0KCkpfX1mdW5jdGlvbiBrKCl7dmFyIGUscixpLGEsdT13KHRoaXMsYXJndW1lbnRzKSxjPXQuZXZlbnQuY2hhbmdlZFRvdWNoZXMscz1jLmxlbmd0aDtmb3IoUGIoKSxuJiYobj1jbGVhclRpbWVvdXQobikpLGU9MDtlPHM7KytlKWk9QnQodGhpcyxjLChyPWNbZV0pLmlkZW50aWZpZXIpLHUudG91Y2gwJiZ1LnRvdWNoMFsyXT09PXIuaWRlbnRpZmllcj91LnRvdWNoMFswXT1pOnUudG91Y2gxJiZ1LnRvdWNoMVsyXT09PXIuaWRlbnRpZmllciYmKHUudG91Y2gxWzBdPWkpO2lmKHI9dS50aGF0Ll9fem9vbSx1LnRvdWNoMSl7dmFyIGw9dS50b3VjaDBbMF0saD11LnRvdWNoMFsxXSxkPXUudG91Y2gxWzBdLHA9dS50b3VjaDFbMV0sdj0odj1kWzBdLWxbMF0pKnYrKHY9ZFsxXS1sWzFdKSp2LGc9KGc9cFswXS1oWzBdKSpnKyhnPXBbMV0taFsxXSkqZztyPV8ocixNYXRoLnNxcnQodi9nKSksaT1bKGxbMF0rZFswXSkvMiwobFsxXStkWzFdKS8yXSxhPVsoaFswXStwWzBdKS8yLChoWzFdK3BbMV0pLzJdfWVsc2V7aWYoIXUudG91Y2gwKXJldHVybjtpPXUudG91Y2gwWzBdLGE9dS50b3VjaDBbMV19dS56b29tKCJ0b3VjaCIsbyhiKHIsaSxhKSx1LmV4dGVudCxmKSl9ZnVuY3Rpb24gRSgpe3ZhciBuLHIsaT13KHRoaXMsYXJndW1lbnRzKSxvPXQuZXZlbnQuY2hhbmdlZFRvdWNoZXMsYT1vLmxlbmd0aDtmb3IoQ2IoKSxlJiZjbGVhclRpbWVvdXQoZSksZT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZT1udWxsfSxwKSxuPTA7bjxhOysrbilyPW9bbl0saS50b3VjaDAmJmkudG91Y2gwWzJdPT09ci5pZGVudGlmaWVyP2RlbGV0ZSBpLnRvdWNoMDppLnRvdWNoMSYmaS50b3VjaDFbMl09PT1yLmlkZW50aWZpZXImJmRlbGV0ZSBpLnRvdWNoMTtpLnRvdWNoMSYmIWkudG91Y2gwJiYoaS50b3VjaDA9aS50b3VjaDEsZGVsZXRlIGkudG91Y2gxKSxpLnRvdWNoMD9pLnRvdWNoMFsxXT10aGlzLl9fem9vbS5pbnZlcnQoaS50b3VjaDBbMF0pOmkuZW5kKCl9cmV0dXJuIHkudHJhbnNmb3JtPWZ1bmN0aW9uKHQsbil7dmFyIGU9dC5zZWxlY3Rpb24/dC5zZWxlY3Rpb24oKTp0O2UucHJvcGVydHkoIl9fem9vbSIsRGIpLHQhPT1lP3godCxuKTplLmludGVycnVwdCgpLmVhY2goZnVuY3Rpb24oKXt3KHRoaXMsYXJndW1lbnRzKS5zdGFydCgpLnpvb20obnVsbCwiZnVuY3Rpb24iPT10eXBlb2Ygbj9uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTpuKS5lbmQoKX0pfSx5LnNjYWxlQnk9ZnVuY3Rpb24odCxuKXt5LnNjYWxlVG8odCxmdW5jdGlvbigpe3JldHVybiB0aGlzLl9fem9vbS5rKigiZnVuY3Rpb24iPT10eXBlb2Ygbj9uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTpuKX0pfSx5LnNjYWxlVG89ZnVuY3Rpb24odCxuKXt5LnRyYW5zZm9ybSh0LGZ1bmN0aW9uKCl7dmFyIHQ9aS5hcHBseSh0aGlzLGFyZ3VtZW50cyksZT10aGlzLl9fem9vbSxyPW0odCksYT1lLmludmVydChyKSx1PSJmdW5jdGlvbiI9PXR5cGVvZiBuP24uYXBwbHkodGhpcyxhcmd1bWVudHMpOm47cmV0dXJuIG8oYihfKGUsdSkscixhKSx0LGYpfSl9LHkudHJhbnNsYXRlQnk9ZnVuY3Rpb24odCxuLGUpe3kudHJhbnNmb3JtKHQsZnVuY3Rpb24oKXtyZXR1cm4gbyh0aGlzLl9fem9vbS50cmFuc2xhdGUoImZ1bmN0aW9uIj09dHlwZW9mIG4/bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk6biwiZnVuY3Rpb24iPT10eXBlb2YgZT9lLmFwcGx5KHRoaXMsYXJndW1lbnRzKTplKSxpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxmKX0pfSx5LnRyYW5zbGF0ZVRvPWZ1bmN0aW9uKHQsbixlKXt5LnRyYW5zZm9ybSh0LGZ1bmN0aW9uKCl7dmFyIHQ9aS5hcHBseSh0aGlzLGFyZ3VtZW50cykscj10aGlzLl9fem9vbSxhPW0odCk7cmV0dXJuIG8oa2IudHJhbnNsYXRlKGFbMF0sYVsxXSkuc2NhbGUoci5rKS50cmFuc2xhdGUoImZ1bmN0aW9uIj09dHlwZW9mIG4/LW4uYXBwbHkodGhpcyxhcmd1bWVudHMpOi1uLCJmdW5jdGlvbiI9PXR5cGVvZiBlPy1lLmFwcGx5KHRoaXMsYXJndW1lbnRzKTotZSksdCxmKX0pfSxNLnByb3RvdHlwZT17c3RhcnQ6ZnVuY3Rpb24oKXtyZXR1cm4gMT09Kyt0aGlzLmFjdGl2ZSYmKHRoaXMuaW5kZXg9aC5wdXNoKHRoaXMpLTEsdGhpcy5lbWl0KCJzdGFydCIpKSx0aGlzfSx6b29tOmZ1bmN0aW9uKHQsbil7cmV0dXJuIHRoaXMubW91c2UmJiJtb3VzZSIhPT10JiYodGhpcy5tb3VzZVsxXT1uLmludmVydCh0aGlzLm1vdXNlWzBdKSksdGhpcy50b3VjaDAmJiJ0b3VjaCIhPT10JiYodGhpcy50b3VjaDBbMV09bi5pbnZlcnQodGhpcy50b3VjaDBbMF0pKSx0aGlzLnRvdWNoMSYmInRvdWNoIiE9PXQmJih0aGlzLnRvdWNoMVsxXT1uLmludmVydCh0aGlzLnRvdWNoMVswXSkpLHRoaXMudGhhdC5fX3pvb209bix0aGlzLmVtaXQoInpvb20iKSx0aGlzfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gMD09LS10aGlzLmFjdGl2ZSYmKGguc3BsaWNlKHRoaXMuaW5kZXgsMSksdGhpcy5pbmRleD0tMSx0aGlzLmVtaXQoImVuZCIpKSx0aGlzfSxlbWl0OmZ1bmN0aW9uKHQpe1N0KG5ldyBUYih5LHQsdGhpcy50aGF0Ll9fem9vbSksZC5hcHBseSxkLFt0LHRoaXMudGhhdCx0aGlzLmFyZ3NdKX19LHkud2hlZWxEZWx0YT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oYT0iZnVuY3Rpb24iPT10eXBlb2YgdD90OkFiKCt0KSx5KTphfSx5LmZpbHRlcj1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocj0iZnVuY3Rpb24iPT10eXBlb2YgdD90OkFiKCEhdCkseSk6cn0seS50b3VjaGFibGU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHU9ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDpBYighIXQpLHkpOnV9LHkuZXh0ZW50PWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhpPSJmdW5jdGlvbiI9PXR5cGVvZiB0P3Q6QWIoW1srdFswXVswXSwrdFswXVsxXV0sWyt0WzFdWzBdLCt0WzFdWzFdXV0pLHkpOml9LHkuc2NhbGVFeHRlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGNbMF09K3RbMF0sY1sxXT0rdFsxXSx5KTpbY1swXSxjWzFdXX0seS50cmFuc2xhdGVFeHRlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGZbMF1bMF09K3RbMF1bMF0sZlsxXVswXT0rdFsxXVswXSxmWzBdWzFdPSt0WzBdWzFdLGZbMV1bMV09K3RbMV1bMV0seSk6W1tmWzBdWzBdLGZbMF1bMV1dLFtmWzFdWzBdLGZbMV1bMV1dXX0seS5jb25zdHJhaW49ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG89dCx5KTpvfSx5LmR1cmF0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhzPSt0LHkpOnN9LHkuaW50ZXJwb2xhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGw9dCx5KTpsfSx5Lm9uPWZ1bmN0aW9uKCl7dmFyIHQ9ZC5vbi5hcHBseShkLGFyZ3VtZW50cyk7cmV0dXJuIHQ9PT1kP3k6dH0seS5jbGlja0Rpc3RhbmNlPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhnPSh0PSt0KSp0LHkpOk1hdGguc3FydChnKX0seX0sdC56b29tVHJhbnNmb3JtPUViLHQuem9vbUlkZW50aXR5PWtiLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KX0pOwo="></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">Introduction to bipartiteD3</h1>
<h4 class="author">Chris Terry</h4>
<h4 class="date">2021-10-20</h4>



<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(r2d3)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bipartite )</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr) </span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr) </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr) </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bipartiteD3)</span></code></pre></div>
<div id="background" class="section level1">
<h1>Background</h1>
<p>Bipartite networks describe the interactions between two discrete sets of nodes, for example plants and their pollinators or parasitoids and their hosts. The analysis of bipartite networks within ecology is commonly done with the bipartite package (Dormann et al.) which includes routines for a wide variety of network analyses.</p>
<p>Bipartite networks are often highly complex and visualising their structure is a considerable challenge. It is very common that bipartite networks include so many overlapping interactions that it becomes challenging to interpret. Furthermore there has recently been concerted effort within ecology to compare multiple networks simultaneously across time, space of interaction type.</p>
<p>Recent developments to improve the connections between R code and other coding languages make it possible to smoothly relate the data-analysis power and familiarity of R to languages and packages that are well suited to interactive plots. The D3 (Data-Driven Documents) is a JavaScript library for visualising and interacting with data, that is now supported within RStudio. However, coding in JavaScript is significantly different to R coding and for most ecologists it would not be a worthwhile investment in time to learn how to use an additional language</p>
<p>This package is designed to provide a smooth interface from R and data formats used in the bipartite package to make html widgets containing bipartite graphs that can be explored interactively.</p>
<p>These can either be viewed in RStudio v1.2+ or in a browser. The <code>r2D3</code> package also provides the <code>save_d3_png</code> and <code>save_d3_html</code> functions to directly save d3 objects. When used together gist.github.com and bl.ocks.org together provide a route to straightforward free public hosting of D3 widgets, which can be useful for sharing.</p>
</div>
<div id="basic-example-and-comparison" class="section level1">
<h1>Basic example and comparison</h1>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>testdata <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">higher =</span> <span class="fu">c</span>(<span class="st">&quot;bee1&quot;</span>,<span class="st">&quot;bee1&quot;</span>,<span class="st">&quot;bee1&quot;</span>,<span class="st">&quot;bee2&quot;</span>,<span class="st">&quot;bee1&quot;</span>,<span class="st">&quot;bee3&quot;</span>), </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="at">lower =</span> <span class="fu">c</span>(<span class="st">&quot;plant1&quot;</span>,<span class="st">&quot;plant2&quot;</span>,<span class="st">&quot;plant1&quot;</span>,<span class="st">&quot;plant2&quot;</span>,<span class="st">&quot;plant3&quot;</span>,<span class="st">&quot;plant4&quot;</span>), </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="at">webID =</span> <span class="fu">c</span>(<span class="st">&quot;meadow&quot;</span>,<span class="st">&quot;meadow&quot;</span>,<span class="st">&quot;meadow&quot;</span>,<span class="st">&quot;meadow&quot;</span>,<span class="st">&quot;meadow&quot;</span>,<span class="st">&quot;meadow&quot;</span>), <span class="at">freq=</span><span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">9</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">7</span>))</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>bipartite<span class="sc">::</span><span class="fu">frame2webs</span>(testdata)<span class="ot">-&gt;</span> SmallTestWeb</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>SmallTestWeb</span></code></pre></div>
<pre><code>## $meadow
##         higher
## lower    bee1 bee2 bee3
##   plant1    6    0    0
##   plant2    9    2    0
##   plant3    3    0    0
##   plant4    0    0    7</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>bipartite<span class="sc">::</span><span class="fu">plotweb</span>(SmallTestWeb<span class="sc">$</span>meadow)</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAAAclBMVEUAAAAAADoAAGYAOpAAZrYaGho6AAA6AGY6Ojo6OpA6ZmY6ZrY6kNtmAABmAGZmOpBmZjpmkNtmtv+QOgCQOjqQOmaQZgCQkLaQ2/+2ZgC2Zjq2kJC2///MzMzbkDrbtmbb////tmb/25D//7b//9v///+xp4WhAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAFh0lEQVR4nO3d4XLaRhSG4U1CnTi20xY3TWhtAhjd/y1WwoIR0q7eFWCo0fv9YIa19uicRxiD7RlCYXoTLt3A/z0CQQSCCAQRCCIQRCCIQBCBIAJBBIIIBBEIIhBEIIhAEIEgAkEEgggEEQgiEEQgiEAQgSACQQSCCAQRCCIQRCCIQBCBIAJBBIIIBBEIIhBEIIhAEIEgAkEEgggEEQgiEEQgiEAQgSACQQSCCAQRCCIQRCCIQBCBIAJBBIIIBBEI8tZAq7vu2su3p6MqrB9D+LToPccshOmAc/TkAkDL8PE4oOWkFJjCEcOuQjpvDvT1IUw2V/S+vl3/WH8fBNSpUGU+hSPeDdDnp/JqV9d8Xt+W3yLDgCIVNg+i3iNmNeTReXOgP8tp7uehTH07GChSYTahI0qm0wi9OdDtorq6m2aXdcsDgToV1o9TOKK6fS9AX27q54fyx8rr7VCgToXZ7lGSPEd5O0mXHBJfB0EEgggEORQonCux8w1t4SJAv50nIXK+MLAFgTJrCAQ1BIIaAkENgaCGQFBDIKghENQQCGoIBDUEghoCQQ2BoIZAUEMgqCEQ1BAIaggENQSCGgJBDYGghkBQ47xA50rsfENbuAjQM4WPyNkUIucLuS20agiUKnpNQAmhiI9AzekE2m4SCDYJRLPEha4S6BChBFDMR6DGeAL17BKoNUxMSKDGMBGgqI9A8SWBBIJhBKJhukIC7Q3TBYoPK9BuLT6sQLu1+LCjBerUFqg1jEAwTGtjwkeg3VJi1ncPlD9Be5j9jQJ1hhEIhhEIhtnbmPIRaLuSGnWcQJE/YqRGFaheSI0q0Ov95KQCvd5PTjpmoMZWgaLTCATTCATT7LamfcYNtNsrUGIagWCaUQAd/mZMIJym3trjM3Kgeq9AyWkEgmkEgmkEomlC20cggQaNIxCMIxCNE/Z9fCUtkEACDenuaKAitICu7leuRwM1V7uTXgHQca8UBaJxBIJxBIJxOkDX9s8LJ3i3uluMjCpQczEyqkDNxcioAjUXI7MK1FyMzDp2oJiPQM8CZc8TBWoOK1BjKTbsyIHiPgI9C5Q5zziAjvgxlgBKvJfNKCgQFLwyoJSPQAIN3xi6XxZIoAEbBepuTPsIREDRt/vciUDQiUDQiUDQyXUB9fkI1AZKCY0W6DkIRDvHA3TY99j+rzcE6uxs/f4nISTQtoxA7Z0CwU6BYGe7SlxIoDTFewDK/NCqYZ+VlaiSu9rbybmBMj/27NgPagvRIvHV/k4Egk4Egk4Egk4Egk4Egk4Egk4Egk4Egk4Egk4Egk4Egk4Egk4Egk4Egk4Egk4Egk4Egk4Egk4Egk4Egk4Egk4Egk7ODZT516j8P171VMld7e3kzECjiUAQgSACQY4Fevn2tHf/30V3LWvb+jGET4vsk8xCmEIbxfye2sjIiYFefl8Uy/BxKFC5bTkpitl0wNF7i5E2yj4uC7T6+hBe2yyv5qRYfbkpHwGzMFn/WH/vAUptq7427wD1HF2bJI9Y3f66MNDnsqdp2dnqrlj/9XN1uyhvN5euHyi5rVhOBhw9qx8fqSPKleWFge7Kke6rSzcP4cPP6u4/OUDJbbOuT8/R26eY1BHz6hXiCYRO8AgqG60uXS5QYtv6MfYElDq6enDUQMk2iks/grbf/Kub8OGPad3ZQ/mTKO85qLXt7+gVT55k84TT38bFge7OsI2PPrCN7AgE8ZU0RCCIQBCBIAJBBIIIBBEIIhBEIIhAEIEgAkEEgggEEQgiEEQgiEAQgSACQQSCCAQRCCIQRCCIQBCBIAJBBIIIBBEIIhBEIIhAEIEgAkEEgggEEQgiEEQgiEAQgSACQQSCCAQRCCIQRCCIQBCBIAJBBIIIBBEIIhBEIIhAkP8A7PZzebggPKsAAAAASUVORK5CYII=" /><!-- --></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If nothing appears then either update RStudio to version 1.2 or open in a modern web browser</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">bipartite_D3</span>(SmallTestWeb)</span></code></pre></div>
<pre><code>## Command for sourcing the URL:
##   downloader::source_url(&quot;http://vizjs.org/viz.v1.1.0.min.js&quot;, sha=&quot;295e915d475fdf1c0d7db13668b6b0b526a8e910&quot;)</code></pre>
<div id="htmlwidget-ac48216aeb243a027165" style="width:700px;height:700px;" class="r2d3 html-widget"></div>
<script type="application/json" data-for="htmlwidget-ac48216aeb243a027165">{"x":{"data":null,"type":"logical","container":"svg","options":null,"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n/* R2D3 Source File:  vizjs.js */\n!function(){function t(t){for(;t>o;)t-=o;for(;0>t;)t+=o;return t}function n(t,n,e,r,a,i){if(0>=a||0>=r)return 0;var u=t.concat().sort(d3.ascending),o=r-u.length*n+(i?n:0),s=[],c=0,d=0;return d3.range(u.length).forEach(function(t){d=(o-e*t)/(a-=u[t-1]||0),c+=u[t]*d<=e?1:0,s.push(d)}),s[c]}function e(t,e,r,a,i){var u=a,o=d3.sum(t),s=n(t,e,r,i-a,o,!1),c=t.map(function(t){var n=s*t,a=(r>n?r:n)/2;return u+=2*a+e,{c:u-a,v:n,w:a,value:t,percent:t/(o||1)}});return c}function r(t){function n(t,n){return[t*Math.cos(n),t*Math.sin(n)]}var e=n(t[0],t[2]),r=n(t[0],t[3]),a=n(t[1],t[2]),i=n(t[1],t[3]);return[\"M\",e,\"A\",t[0],t[0],\"0\",t[3]-t[2]>s?1:0,\"1\",r,\"L\",i,\"A\",t[1],t[1],\"0\",t[3]-t[2]>s?1:0,\"0\",a,\"z\"].join(\" \")}function a(t,n,e,r,a,i){function u(t,n,e){return\"A\"+t+\",\"+t+\" 0 \"+ +(e>s)+\",1 \"+n}function c(t,n){return[t*Math.cos(n),t*Math.sin(n)]}function d(t,n,e,r){e+=n>e?o:0;var a=e-n,i=1-(a>s?o-a:a)/s;i=Math.pow(i,5);var u=(e+n)/2-(e-n>s?s:0);return\"Q\"+i*r*Math.cos(u)+\",\"+i*r*Math.sin(u)+\" \"+t}var f=c(t,n),l=c(t,e),g=c(r,a),p=c(r,i);return\"M\"+f+u(t,l,e-n)+(n==a&&e==i?d(f,n,e,r):d(g,e,a,r)+u(r,p,i-a)+d(f,n,i,t))+\"Z\"}function i(t,n){ret=[];for(var e=n;e>n-t;e--)ret.push(0>e?e+t:e);return ret}var u={version:\"1.1.0\"},o=2*Math.PI,s=Math.PI,c=Math.PI/2;u.bP=function(){function t(i){y=i,i.each(function(){var i=d3.select(this),u=t.bars(),o=i.selectAll(\".subBars\").data(u.subBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"subBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);\"undefined\"!=typeof h&&o.style(\"fill\",function(t){return h(t)});var s=i.selectAll(\".edges\").data(u.edges).enter().append(\"path\").attr(\"class\",\"edges\").attr(\"d\",function(t){return t.path}).style(\"fill-opacity\",t.edgeOpacity());\"undefined\"!=typeof h&&s.style(\"fill\",function(t){return h(t)}),i.selectAll(\".mainBars\").data(u.mainBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"mainBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a).style(\"fill-opacity\",0).on(\"mouseover\",t.mouseover).on(\"mouseout\",t.mouseout)})}function n(t){return-t.width}function e(t){return-t.height}function r(t){return 2*t.width}function a(t){return 2*t.height}var i,u,o,s,c,d,f,l,g,p,h,y,m,v,A,x,k;return t.data=function(n){return arguments.length?(p=n,t):p},t.fill=function(n){return arguments.length?(h=n,t):h},t.keyPrimary=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:function(t){return t[0]}},t.sortPrimary=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:d3.ascending},t.keySecondary=function(n){return arguments.length?(u=n,t):\"undefined\"!=typeof u?u:function(t){return t[1]}},t.sortSecondary=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:d3.ascending},t.value=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:function(t){return t[2]}},t.width=function(n){return arguments.length?(s=n,t):\"undefined\"!=typeof s?s:400},t.height=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:600},t.barSize=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:35},t.min=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:0},t.orient=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:\"vertical\"},t.pad=function(n){return arguments.length?(g=n,t):\"undefined\"!=typeof g?g:0},t.duration=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:500},t.edgeOpacity=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:.4},t.edgeMode=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:\"curved\"},t.bars=function(n){function e(t,e){return\"undefined\"==typeof n||n.part===e||d[n.part](t)===n.key}function r(){var n=t.min()/2;s.primary.forEach(function(t){t.height<n&&(t.height=n)}),s.secondary.forEach(function(t){t.height<n&&(t.height=n)})}function a(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data()),i=o(a,t.pad(),t.min(),0,\"vertical\"==f?t.height():t.width()),u=t.barSize();a.forEach(function(e,r){s[n].push({x:\"horizontal\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.width()-u/2,y:\"vertical\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.height()-u/2,height:\"vertical\"==f?(i[r].e-i[r].s)/2:u/2,width:\"horizontal\"==f?(i[r].e-i[r].s)/2:u/2,part:n,key:e.key,value:e.value,percent:i[r].p})})}function i(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.map(s[n],function(t){return t.key}),i=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).key(\"secondary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"secondary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data());i.forEach(function(e){var r=a.get(e.key),i=o(e.values,0,0,\"vertical\"==f?r.y-r.height:r.x-r.width,\"vertical\"==f?r.y+r.height:r.x+r.width),u=t.barSize();e.values.forEach(function(a,o){c[n].push({x:\"vertical\"==f?\"primary\"==n?u/2:t.width()-u/2:(i[o].s+i[o].e)/2,y:\"horizontal\"==f?\"primary\"==n?u/2:t.height()-u/2:(i[o].s+i[o].e)/2,height:(\"vertical\"==f?i[o].e-i[o].s:u)/2,width:(\"horizontal\"==f?i[o].e-i[o].s:u)/2,part:n,primary:\"primary\"==n?e.key:a.key,secondary:\"primary\"==n?a.key:e.key,value:a.value,percent:i[o].p*r.percent,index:\"primary\"==n?e.key+\"|\"+a.key:a.key+\"|\"+e.key})})})}function u(){function n(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(t+e)/2,d=(i+o)/2;return[\"M\",t,\",\",n,\"C\",c,\",\",n,\" \",c,\",\",r,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",d,\",\",u,\" \",d,\",\",s,\",\",o,\",\",s,\"z\"].join(\"\")}function e(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(n+r)/2,d=(u+s)/2;return[\"M\",t,\",\",n,\"C\",t,\",\",c,\" \",e,\",\",c,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",i,\",\",d,\" \",o,\",\",d,\",\",o,\",\",s,\"z\"].join(\"\")}var r=d3.map(c.secondary,function(t){return t.index}),a=t.edgeMode();return c.primary.map(function(t){var a=r.get(t.index);return{path:\"vertical\"===f?n(t.x+t.width,t.y+t.height,a.x-a.width,a.y+a.height,a.x-a.width,a.y-a.height,t.x+t.width,t.y-t.height):e(t.x-t.width,t.y+t.height,a.x-a.width,a.y-a.height,a.x+a.width,a.y-a.height,t.x+t.width,t.y+t.height),primary:t.primary,secondary:t.secondary,value:t.value,percent:t.percent}})}function o(t,n,e,r,a){var i=e/(a-r-2*t.length*n),u=0,o=0,s=d3.sum(t,function(t){return t.value});t.forEach(function(t){t.value<i*s&&(u+=1,o+=t.value)});var c=1e-5>s?0:(a-r-2*t.length*n-u*e)/(s-o),d=r,f=[];return t.forEach(function(t){var r=t.value*c;f.push({s:d+n+(e>r?.5*(e-r):0),e:d+n+(e>r?.5*(e+r):r),p:1e-5>s?0:t.value/s}),d+=2*n+(e>r?e:r)}),f}var s={primary:[],secondary:[]},c={primary:[],secondary:[]},d={primary:t.keyPrimary(),secondary:t.keySecondary()},f=t.orient();return a(\"primary\"),a(\"secondary\"),i(\"primary\"),i(\"secondary\"),r(),{mainBars:s.primary.concat(s.secondary),subBars:c.primary.concat(c.secondary),edges:u()}},t.mouseover=function(i){var u=t.bars(i);y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",1),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);var o=y.selectAll(\".edges\").data(u.edges);o.filter(function(t){return t[i.part]===i.key}).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),o.filter(function(t){return t[i.part]!==i.key}).transition().duration(t.duration()).style(\"fill-opacity\",0).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t.mouseout=function(i){var u=t.bars();y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",0),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a),y.selectAll(\".edges\").data(u.edges).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t},u.gg=function(){function t(n){g=n,n.each(function(){var n=d3.select(this),e=t.scale(),r=t.minorTickStart(),a=t.minorTickEnd(),i=t.majorTickStart(),u=t.majorTickEnd(),o=t.ticks(),c=t.majorTicks(),d=t.labelLocation(),f=t.outerRadius();n.append(\"circle\").attr(\"r\",f).style(\"fill\",\"url(#vizgg3\"+p+\")\").attr(\"class\",\"face\"),n.append(\"circle\").attr(\"r\",t.innerRadius()).style(\"fill\",\"url(#vizgg2\"+p+\")\").style(\"filter\",\"url(#vizgg5\"+p+\")\").attr(\"class\",\"innerFace\");var l=n.append(\"g\");l.selectAll(\"line\").data(o).enter().append(\"line\").attr(\"class\",function(t){return c(t)?\"majorTicks\":\"minorTicks\"}).attr(\"x1\",function(t){return f*(c(t)?i:r)*Math.cos(e(t))}).attr(\"y1\",function(t){return f*(c(t)?i:r)*Math.sin(e(t))}).attr(\"x2\",function(t){return f*(c(t)?u:a)*Math.cos(e(t))}).attr(\"y2\",function(t){return f*(c(t)?u:a)*Math.sin(e(t))}),n.selectAll(\"text\").data(o.filter(c)).enter().append(\"text\").attr(\"class\",\"label\").attr(\"x\",function(t){return f*d*Math.cos(e(t))}).attr(\"y\",function(t){return f*d*Math.sin(e(t))}).attr(\"dy\",3).text(function(t){return t});var g=t.outerRadius()/b.outerRadius,h=180*t.scale()(t.value())/s+90;n.append(\"g\").attr(\"transform\",\"translate(1,1)\").selectAll(\".needleshadow\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needleshadow\").append(\"path\").attr(\"d\",[\"m 0\",-130*g,5*g,175*g,-10*g,\"0,z\"].join(\",\")).style(\"filter\",\"url(#vizgg6\"+p+\")\"),n.selectAll(\".needle\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needle\").append(\"polygon\").attr(\"points\",[-.5*g,-130*g,.5*g,-130*g,5*g,45*g,-5*g,45*g].join(\",\")).style(\"fill\",\"url(#vizgg4\"+p+\")\")})}var n,e,r,a,i,o,c,d,f,l,g,p,h,y,m,v,A,x,k,b={innerRadius:20,outerRadius:150,angleOffset:.7,startAngle:-1.5*s,endAngle:.5*s,minorTickStart:.9,minorTickEnd:.95,majorTickStart:.82,majorTickEnd:.95,needleColor:\"#de2c2c\",innerFaceColor:\"#999999\",faceColor:\"#666666\",domain:[0,100],duration:500,ease:\"cubicInOut\",ticks:d3.range(0,101,2),majorTicks:function(t){return t%10===0},labelLocation:.7};return t.scale=function(){return d3.scale.linear().domain(t.domain()).range([b.startAngle+t.angleOffset(),b.endAngle-t.angleOffset()])},t.innerRadius=function(e){return arguments.length?(n=e,t):\"undefined\"!=typeof n?n:b.innerRadius},t.outerRadius=function(n){return arguments.length?(e=n,t):\"undefined\"!=typeof e?e:b.outerRadius},t.angleOffset=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:b.angleOffset},t.labelLocation=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:b.labelLocation},t.ticks=function(n){return arguments.length?(h=n,t):\"undefined\"!=typeof h?h:b.ticks},t.majorTicks=function(n){return arguments.length?(y=n,t):\"undefined\"!=typeof y?y:b.majorTicks},t.minorTickStart=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:b.minorTickStart},t.minorTickEnd=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:b.minorTickEnd},t.majorTickStart=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:b.majorTickStart},t.majorTickEnd=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:b.majorTickEnd},t.needleColor=function(n){return arguments.length?(r=n,t):\"undefined\"!=typeof r?r:b.needleColor},t.innerFaceColor=function(n){return arguments.length?(a=n,t):\"undefined\"!=typeof a?a:b.innerFaceColor},t.faceColor=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:b.faceColor},t.domain=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:b.domain},t.duration=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:b.duration},t.ease=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:b.ease},t.value=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:.5*(b.domain[0]+b.domain[1])},t.defs=function(n,e){var r=n.append(\"defs\");p=e;var a=t.needleColor(),i=t.innerFaceColor(),o=t.faceColor(),s=u.defs(r).lG().id(\"vizgg1\"+e).sel();u.defs(s).stop().offset(\"0\").stopColor(a),u.defs(s).stop().offset(\"1\").stopColor(d3.rgb(a).darker(1));var c=u.defs(r).rG().id(\"vizgg2\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(c).stop().offset(\"0\").stopColor(i),u.defs(c).stop().offset(\"1\").stopColor(d3.rgb(i).darker(2));var d=u.defs(r).rG().id(\"vizgg3\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(d).stop().offset(\"0\").stopColor(o),u.defs(d).stop().offset(\"1\").stopColor(d3.rgb(o).darker(2)),u.defs(r).lG().id(\"vizgg4\"+e).gradientUnits(\"userSpaceOnUse\").y1(\"80\").x1(\"-10\").y2(\"80\").x2(\"10\").xlink(\"#vizgg1\"+e);var f=u.defs(r).filter().id(\"vizgg5\"+e).sel();u.defs(f).feFlood().result(\"flood\").floodColor(\"rgb(0,0,0)\").floodOpacity(\"0.6\"),u.defs(f).feComposite().result(\"composite1\").operator(\"in\").in2(\"SourceGraphic\")[\"in\"](\"flood\"),u.defs(f).feGaussianBlur().result(\"blur\").stdDeviation(\"2\")[\"in\"](\"composite1\"),u.defs(f).feOffset().result(\"offset\").dy(\"2\").dx(\"2\"),u.defs(f).feComposite().result(\"composite2\").operator(\"over\").in2(\"offset\")[\"in\"](\"SourceGraphic\");var l=u.defs(r).filter().x(\"-0.3\").y(\"-0.3\").height(\"1.8\").width(\"1.8\").id(\"vizgg6\"+e).sel();u.defs(l).feGaussianBlur().stdDeviation(\"2\")},t.setNeedle=function(n){function e(t,n){return d3.interpolateString(\"rotate(\"+t+\")\",\"rotate(\"+n+\")\")}var r=180*t.scale()(n)/s+90,a=180*t.scale()(t.value())/s+90,i=t.ease();g.selectAll(\".needle\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i),g.selectAll(\".needleshadow\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i).each(\"end\",function(){angle=n}),t.value(n)},t},u.ch=function(){function u(t){function n(t){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}p=t,k||f(),t.each(function(){var t=d3.select(this),r=t.selectAll(\".groups\").data(x).enter().append(\"g\").attr(\"class\",\"groups\").on(\"mouseover\",u.mouseover).on(\"mouseout\",u.mouseout),a=r.append(\"text\").attr(\"class\",\"label\"),i=(1+u.labelPadding())*u.outerRadius(),s=u.valueFormat();a.filter(function(t){return\"g\"==t.type}).attr(\"x\",function(t){return i*Math.cos(d(t))}).attr(\"y\",function(t){return i*Math.sin(d(t))}).text(function(t){return t.source+\" (\"+s(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"}).each(function(t){this._current=t}),r.append(\"path\").style(\"fill\",function(t){return y(t.source)}).style(\"stroke\",function(t){return y(t.source)}).attr(\"d\",n).each(function(t){this._current=t}).filter(function(t){return\"g\"==t.type}),t.append(\"g\").attr(\"class\",\"chords\").selectAll(\".chord\").data(k).enter().append(\"g\").attr(\"class\",\"chord\").append(\"path\").each(function(t){this._current=t}).attr(\"d\",e).style(\"fill\",function(t){return y(t.target)}).style(\"opacity\",u.chordOpacity()).style(\"stroke\",function(t){return y(t.target)}).style(\"display\",function(t){return t.display?\"inline\":\"none\"})})}function s(t){function n(t,n){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}function i(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return e(n(t))}}function s(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return n(e(t),t)}}function f(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.cos(d(n(t)))}}function l(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.sin(d(n(t)))}}var g=p.selectAll(\".groups\").data(t?b:u.groups()),h=(1+u.labelPadding())*u.outerRadius(),y=u.valueFormat();g.select(\"path\").transition().duration(L).attrTween(\"d\",s),g.select(\".label\").filter(function(t){return\"g\"==t.type}).transition().duration(L).attrTween(\"x\",f).attrTween(\"y\",l).text(function(t){return t.source+\" (\"+y(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"});var m=u.chordOpacity();p.select(\".chords\").selectAll(\".chord\").data(t?w:u.chords()).select(\"path\").transition().duration(L).attrTween(\"d\",i).style(\"opacity\",function(t){return t.display?m:0})}function d(n){return t((n.startAngle+n.endAngle)/2)}function f(){m=[],h.forEach(function(t){-1==m.indexOf(E(t))&&m.push(E(t)),-1==m.indexOf(M(t))&&m.push(M(t))}),m=m.sort(T),v={},A={},m.forEach(function(t){v[t]={},A[t]={},m.forEach(function(n){v[t][n]=0,A[t][n]=!1})}),h.forEach(function(t){var n=E(t),e=M(t);v[n][e]+=S(t),A[n][e]=!0}),x=[],m.forEach(function(t,n){x.push({source:t,type:\"gs\",value:0,skipPad:!0,index:n}),x.push({source:t,type:\"g\",value:d3.sum(m,function(n){return v[t][n]}),skipPad:!1,index:n})}),g(x,z,R,void 0,P),k=[],x.filter(function(t){return\"g\"==t.type}).forEach(function(t,n){var r=i(m.length,n),a=e(r.map(function(n){return v[t.source][m[n]]}),0,0,t.startAngle,t.endAngle);r.forEach(function(e,r){var i=a[r];k.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:t.source,target:m[e],type:\"c\",display:A[t.source][m[e]],index:n,subindex:e,indexsubindex:n+\"-\"+e})})});var t=d3.map(k,function(t){return t.indexsubindex});k.forEach(function(n){if(n.subindex==n.index)return n.endStartAngle=n.startAngle,void(n.endEndAngle=n.startAngle);var e=t.get(n.subindex+\"-\"+n.index);n.endStartAngle=e.startAngle,n.endEndAngle=e.startAngle}),F=!1}function l(t){function n(t){return t.endAngle+t.startAngle}var r=x.filter(function(n){return n.source==t&&\"g\"==n.type})[0];b=[],m.forEach(function(n,e){b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"gs\",value:n==t?v[n][n]:0,skipPad:n==t&&A[n][n]?!1:!0,index:e}),n==t?b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"g\",value:r.value,skipPad:!1,index:e}):b.push({source:n,type:\"g\",value:v[t][n],skipPad:!1,index:e})}),g(b,z,R,t,P);var a=n(r);x.forEach(function(t,e){var r=b[e],i=n(t)<a;r.startAngle-=i?o:0,r.endAngle-=i?o:0}),w=[],b.filter(function(t){return\"g\"==t.type}).forEach(function(n,r){var a=i(m.length,r),u=a.map(function(e){var r=m[e];return n.source==t?v[n.source][r]:r==t?v[r][n.source]:0}),o=e(u,0,0,n.startAngle,n.endAngle);a.forEach(function(e,a){var i=o[a];w.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:n.source,target:m[e],type:\"c\",display:n.source===t,index:r,subindex:e,indexsubindex:r+\"-\"+e})})});var u=d3.map(w.map(function(t){return{startAngle:t.startAngle,endAngle:t.endAngle,indexsubindex:t.indexsubindex}}),function(t){return t.indexsubindex}),s=d3.map(b.filter(function(t){return\"gs\"==t.type}),function(t){return t.source});w.forEach(function(n){if(n.subindex==n.index){var e=s.get(n.source);return n.endStartAngle=e.startAngle,void(n.endEndAngle=e.endAngle)}var r=u.get(n.subindex+\"-\"+n.index);n.endStartAngle=r.startAngle,n.endEndAngle=r.endAngle,n.source!==t&&(n.startAngle=n.endAngle,n.endEndAngle=n.endStartAngle)})}function g(t,e,r,a,i){var u=void 0!==a,o=0;if(u){for(var s=!1;o<t.length;o++)if(t[o].source==a&&\"g\"==t[o].type){s=!0;break}s||console.log(\"The fixed source '\"+a+\"' is not a valid key\")}var c=d3.range(t.length);u&&(c=c.slice(o).concat(c.slice(0,o)));var d=t.filter(function(t){return!(u&&t.source===a&&\"g\"==t.type||t.skipPad)}).map(function(t){return t.value}),f=2*Math.PI-(u?t[o].endAngle-t[o].startAngle+2*e:0),l=u?t[o].endAngle+e:i,g=d3.sum(d),p=n(d,e,r,0>=f?0:f,g,u?!0:!1);c.slice(u?1:0).forEach(function(n){var a=p*t[n].value,i=(r>a?r-a:0)/2;t[n].startAngle=l,t[n].endAngle=l+a,t[n].padAngle=i,t[n].percent=t[n].value/(g||1),l+=a+i+(t[n].skipPad?0:e)})}var p,h,y,m,v,A,x,k,b,w,E=function(t){return t[0]},M=function(t){return t[1]},S=function(t){return t[2]},C=function(t){return t},T=d3.ascending,z=.03,P=0,B=180,O=200,j=.7,G=.02,R=0,L=500,F=!0;return u.data=function(t){return arguments.length?(h=t,F=!0,u):h},u.fill=function(t){return arguments.length?(y=t,u):y},u.duration=function(t){return arguments.length?(L=t,u):L},u.chordOpacity=function(t){return arguments.length?(j=t,u):j},u.innerRadius=function(t){return arguments.length?(B=t,F=!0,u):B},u.outerRadius=function(t){return arguments.length?(O=t,F=!0,u):O},u.source=function(t){return arguments.length?(E=t,F=!0,u):E},u.target=function(t){return arguments.length?(M=t,F=!0,u):M},u.value=function(t){return arguments.length?(S=t,F=!0,u):S},u.padding=function(t){return arguments.length?(z=t,F=!0,u):z},u.labelPadding=function(t){return arguments.length?(G=t,u):G},u.sort=function(t){return arguments.length?(T=t,F=!0,u):T},u.startAngle=function(t){return arguments.length?(P=t,F=!0,u):P},u.chords=function(){return F&&f(),k},u.groups=function(){return F&&f(),x},u.valueFormat=function(t){return arguments.length?(C=t,u):C},u.mouseover=function(t){l(t.source),s(1)},u.mouseout=function(t){s(0)},u},u.defs=function(t){var n={},e=t;return n.sel=function(){return e},n.lG=function(){return e=e.append(\"linearGradient\"),n},n.rG=function(){return e=e.append(\"radialGradient\"),n},n.stop=function(){return e=e.append(\"stop\"),n},n.filter=function(){return e=e.append(\"filter\"),n},n.feFlood=function(){return e=e.append(\"feFlood\"),n},n.feComposite=function(){return e=e.append(\"feComposite\"),n},n.feOffset=function(){return e=e.append(\"feOffset\"),n},n.feGaussianBlur=function(){return e=e.append(\"feGaussianBlur\"),n},n.result=function(t){return e=e.attr(\"result\",t),n},n.floodColor=function(t){return e=e.attr(\"flood-color\",t),n},n.floodOpacity=function(t){return e=e.attr(\"flood-opacity\",t),n},n.stdDeviation=function(t){return e=e.attr(\"stdDeviation\",t),n},n.operator=function(t){return e=e.attr(\"operator\",t),n},n.height=function(t){return e=e.attr(\"height\",t),n},n.width=function(t){return e=e.attr(\"width\",t),n},n[\"in\"]=function(t){return e=e.attr(\"in\",t),n},n.in2=function(t){return e=e.attr(\"in2\",t),n},n.id=function(t){return e=e.attr(\"id\",t),n},n.fx=function(t){return e=e.attr(\"fx\",t),n},n.fy=function(t){return e=e.attr(\"fy\",t),n},n.dx=function(t){return e=e.attr(\"dx\",t),n},n.dy=function(t){return e=e.attr(\"dy\",t),n},n.x1=function(t){return e=e.attr(\"x1\",t),n},n.y1=function(t){return e=e.attr(\"y1\",t),n},n.x2=function(t){return e=e.attr(\"x2\",t),n},n.y2=function(t){return e=e.attr(\"y2\",t),n},n.x=function(t){return e=e.attr(\"x\",t),n},n.y=function(t){return e=e.attr(\"y\",t),n},n.r=function(t){return e=e.attr(\"r\",t),n},n.spreadMethod=function(t){return e=e.attr(\"spreadMethod\",t),n},n.gradientUnits=function(t){return e=e.attr(\"gradientUnits\",t),n},n.xlink=function(t){return e=e.attr(\"xlink:href\",t),n},n.offset=function(t){return e=e.attr(\"offset\",t),n},n.stopColor=function(t){return e=e.attr(\"stop-color\",t),n},n.path=function(){return e=e.append(\"path\"),n},n.d=function(t){return e=e.attr(\"d\",t),n},n},this.viz=u}();\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  bipartiteD3Script.js */\nvar data=[[\"plant1\",\"bee1\",6],\n[\"plant2\",\"bee1\",9],\n[\"plant3\",\"bee1\",3],\n[\"plant4\",\"bee1\",0],\n[\"plant1\",\"bee2\",0],\n[\"plant2\",\"bee2\",2],\n[\"plant3\",\"bee2\",0],\n[\"plant4\",\"bee2\",0],\n[\"plant1\",\"bee3\",0],\n[\"plant2\",\"bee3\",0],\n[\"plant3\",\"bee3\",0],\n[\"plant4\",\"bee3\",7]]\n\n\n\n function sort(sortOrder){\n                    return function(a,b){ return d3.ascending(sortOrder.indexOf(a),sortOrder.indexOf(b)) }\n                  }\nvar color = {'Unlinked':'#3366CC','bee1':'rgb(56,43,61)','bee2':'rgb(56,43,61)','bee3':'rgb(56,43,61)'};\n\n\n\n\nvar g1 = svg.append(\"g\").attr(\"transform\",\"translate(188,50)\");\n                         var bp1=viz.bP()\n                         .data(data)\n                         .value(d=>d[2])\n                         .min(10)\n                         .pad(1)\n                         .height(400)\n                         .width(200)\n                         .barSize(35)\n                         .fill(d=>color[d.secondary])\n.orient(\"vertical\");\n\ng1.call(bp1);g1.append(\"text\")\n                        .attr(\"x\",-50).attr(\"y\",-8)\n                        .style(\"text-anchor\",\"middle\")\n                        .text(\"Primary\");\n                        g1.append(\"text\")\n                        .attr(\"x\", 250)\n                        .attr(\"y\",-8).style(\"text-anchor\",\"middle\")\n                        .text(\"Secondary\");\n                        g1.append(\"text\")\n                        .attr(\"x\",100).attr(\"y\",-25)\n                        .style(\"text-anchor\",\"middle\")\n                        .attr(\"class\",\"header\")\n                        .text(\"meadow\");\n\n g1.selectAll(\".mainBars\")\n                        .on(\"mouseover\",mouseover)\n                        .on(\"mouseout\",mouseout);\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"label\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -27.2:24.8))\n                        .attr(\"y\",d=>+6)\n                        .text(d=>d.key)\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\"));\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"perc\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -141:144))\n                        .attr(\"y\",d=>+6)\n                        .text(function(d){ return d3.format(\"0.0%\")(d.percent)})\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\")); \n\nfunction mouseover(d){\nbp1.mouseover(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\n}\n\n                     function mouseout(d){\nbp1.mouseout(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\n}\n\n\n};","style":"/* R2D3 Source File:  bipartiteD3Script.css */\n .mainBars{\n    shape-rendering: auto;\n    fill-opacity: 1;\n    stroke-width: 0.5px;\n    stroke: rgb(0, 0, 0);\n    stroke-opacity: 0;\n  }\n    .subBars{\n    shape-rendering:crispEdges;\n    }\n    .edges{\n    stroke:none;\n    fill-opacity:0.3;\n    }\n    .label{\n    color:#000000;\n    }","version":5,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div id="simultaneous-webs" class="section level1">
<h1>Simultaneous Webs</h1>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>Doubletestdata <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">higher =</span> <span class="fu">c</span>(<span class="st">&quot;bee1&quot;</span>,<span class="st">&quot;bee1&quot;</span>,<span class="st">&quot;bee1&quot;</span>,<span class="st">&quot;bee2&quot;</span>,<span class="st">&quot;bee1&quot;</span>,<span class="st">&quot;bee3&quot;</span>, <span class="st">&quot;bee1&quot;</span>,<span class="st">&quot;bee1&quot;</span>,<span class="st">&quot;bee1&quot;</span>,<span class="st">&quot;bee2&quot;</span>,<span class="st">&quot;bee1&quot;</span>,<span class="st">&quot;bee3&quot;</span>), </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="at">lower =</span> <span class="fu">c</span>(<span class="st">&quot;plant1&quot;</span>,<span class="st">&quot;plant2&quot;</span>,<span class="st">&quot;plant1&quot;</span>,<span class="st">&quot;plant2&quot;</span>,<span class="st">&quot;plant3&quot;</span>,<span class="st">&quot;plant4&quot;</span>,<span class="st">&quot;plant2&quot;</span>,<span class="st">&quot;plant1&quot;</span>,<span class="st">&quot;plant2&quot;</span>,<span class="st">&quot;plant3&quot;</span>,<span class="st">&quot;plant4&quot;</span>, <span class="st">&#39;plant5&#39;</span>), </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="at">webID =</span> <span class="fu">c</span>(<span class="st">&quot;meadow&quot;</span>,<span class="st">&quot;meadow&quot;</span>,<span class="st">&quot;meadow&quot;</span>,<span class="st">&quot;meadow&quot;</span>,<span class="st">&quot;meadow&quot;</span>,<span class="st">&quot;meadow&quot;</span>,<span class="st">&quot;bog&quot;</span>,<span class="st">&quot;bog&quot;</span>,<span class="st">&quot;bog&quot;</span>,<span class="st">&quot;bog&quot;</span>,<span class="st">&quot;bog&quot;</span>,<span class="st">&quot;bog&quot;</span>), <span class="at">freq=</span><span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">9</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">7</span>, <span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">7</span>,<span class="dv">4</span>,<span class="dv">2</span>))</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>bipartite<span class="sc">::</span><span class="fu">frame2webs</span>(Doubletestdata)<span class="ot">-&gt;</span> DoubleTestWeb</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="fu">bipartite_D3</span>(<span class="at">data =</span>DoubleTestWeb, <span class="at">colouroption =</span> <span class="st">&#39;brewer&#39;</span>, <span class="at">filename =</span> <span class="st">&#39;demo1&#39;</span>)</span></code></pre></div>
<pre><code>## Warning in bipartite_D3(data = DoubleTestWeb, colouroption = &quot;brewer&quot;, filename
## = &quot;demo1&quot;): Making too few facets. Guessing you want 1 row</code></pre>
<div id="htmlwidget-e336f38fa3181890a849" style="width:1400px;height:700px;" class="r2d3 html-widget"></div>
<script type="application/json" data-for="htmlwidget-e336f38fa3181890a849">{"x":{"data":null,"type":"logical","container":"svg","options":null,"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n/* R2D3 Source File:  vizjs.js */\n!function(){function t(t){for(;t>o;)t-=o;for(;0>t;)t+=o;return t}function n(t,n,e,r,a,i){if(0>=a||0>=r)return 0;var u=t.concat().sort(d3.ascending),o=r-u.length*n+(i?n:0),s=[],c=0,d=0;return d3.range(u.length).forEach(function(t){d=(o-e*t)/(a-=u[t-1]||0),c+=u[t]*d<=e?1:0,s.push(d)}),s[c]}function e(t,e,r,a,i){var u=a,o=d3.sum(t),s=n(t,e,r,i-a,o,!1),c=t.map(function(t){var n=s*t,a=(r>n?r:n)/2;return u+=2*a+e,{c:u-a,v:n,w:a,value:t,percent:t/(o||1)}});return c}function r(t){function n(t,n){return[t*Math.cos(n),t*Math.sin(n)]}var e=n(t[0],t[2]),r=n(t[0],t[3]),a=n(t[1],t[2]),i=n(t[1],t[3]);return[\"M\",e,\"A\",t[0],t[0],\"0\",t[3]-t[2]>s?1:0,\"1\",r,\"L\",i,\"A\",t[1],t[1],\"0\",t[3]-t[2]>s?1:0,\"0\",a,\"z\"].join(\" \")}function a(t,n,e,r,a,i){function u(t,n,e){return\"A\"+t+\",\"+t+\" 0 \"+ +(e>s)+\",1 \"+n}function c(t,n){return[t*Math.cos(n),t*Math.sin(n)]}function d(t,n,e,r){e+=n>e?o:0;var a=e-n,i=1-(a>s?o-a:a)/s;i=Math.pow(i,5);var u=(e+n)/2-(e-n>s?s:0);return\"Q\"+i*r*Math.cos(u)+\",\"+i*r*Math.sin(u)+\" \"+t}var f=c(t,n),l=c(t,e),g=c(r,a),p=c(r,i);return\"M\"+f+u(t,l,e-n)+(n==a&&e==i?d(f,n,e,r):d(g,e,a,r)+u(r,p,i-a)+d(f,n,i,t))+\"Z\"}function i(t,n){ret=[];for(var e=n;e>n-t;e--)ret.push(0>e?e+t:e);return ret}var u={version:\"1.1.0\"},o=2*Math.PI,s=Math.PI,c=Math.PI/2;u.bP=function(){function t(i){y=i,i.each(function(){var i=d3.select(this),u=t.bars(),o=i.selectAll(\".subBars\").data(u.subBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"subBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);\"undefined\"!=typeof h&&o.style(\"fill\",function(t){return h(t)});var s=i.selectAll(\".edges\").data(u.edges).enter().append(\"path\").attr(\"class\",\"edges\").attr(\"d\",function(t){return t.path}).style(\"fill-opacity\",t.edgeOpacity());\"undefined\"!=typeof h&&s.style(\"fill\",function(t){return h(t)}),i.selectAll(\".mainBars\").data(u.mainBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"mainBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a).style(\"fill-opacity\",0).on(\"mouseover\",t.mouseover).on(\"mouseout\",t.mouseout)})}function n(t){return-t.width}function e(t){return-t.height}function r(t){return 2*t.width}function a(t){return 2*t.height}var i,u,o,s,c,d,f,l,g,p,h,y,m,v,A,x,k;return t.data=function(n){return arguments.length?(p=n,t):p},t.fill=function(n){return arguments.length?(h=n,t):h},t.keyPrimary=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:function(t){return t[0]}},t.sortPrimary=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:d3.ascending},t.keySecondary=function(n){return arguments.length?(u=n,t):\"undefined\"!=typeof u?u:function(t){return t[1]}},t.sortSecondary=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:d3.ascending},t.value=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:function(t){return t[2]}},t.width=function(n){return arguments.length?(s=n,t):\"undefined\"!=typeof s?s:400},t.height=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:600},t.barSize=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:35},t.min=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:0},t.orient=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:\"vertical\"},t.pad=function(n){return arguments.length?(g=n,t):\"undefined\"!=typeof g?g:0},t.duration=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:500},t.edgeOpacity=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:.4},t.edgeMode=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:\"curved\"},t.bars=function(n){function e(t,e){return\"undefined\"==typeof n||n.part===e||d[n.part](t)===n.key}function r(){var n=t.min()/2;s.primary.forEach(function(t){t.height<n&&(t.height=n)}),s.secondary.forEach(function(t){t.height<n&&(t.height=n)})}function a(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data()),i=o(a,t.pad(),t.min(),0,\"vertical\"==f?t.height():t.width()),u=t.barSize();a.forEach(function(e,r){s[n].push({x:\"horizontal\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.width()-u/2,y:\"vertical\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.height()-u/2,height:\"vertical\"==f?(i[r].e-i[r].s)/2:u/2,width:\"horizontal\"==f?(i[r].e-i[r].s)/2:u/2,part:n,key:e.key,value:e.value,percent:i[r].p})})}function i(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.map(s[n],function(t){return t.key}),i=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).key(\"secondary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"secondary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data());i.forEach(function(e){var r=a.get(e.key),i=o(e.values,0,0,\"vertical\"==f?r.y-r.height:r.x-r.width,\"vertical\"==f?r.y+r.height:r.x+r.width),u=t.barSize();e.values.forEach(function(a,o){c[n].push({x:\"vertical\"==f?\"primary\"==n?u/2:t.width()-u/2:(i[o].s+i[o].e)/2,y:\"horizontal\"==f?\"primary\"==n?u/2:t.height()-u/2:(i[o].s+i[o].e)/2,height:(\"vertical\"==f?i[o].e-i[o].s:u)/2,width:(\"horizontal\"==f?i[o].e-i[o].s:u)/2,part:n,primary:\"primary\"==n?e.key:a.key,secondary:\"primary\"==n?a.key:e.key,value:a.value,percent:i[o].p*r.percent,index:\"primary\"==n?e.key+\"|\"+a.key:a.key+\"|\"+e.key})})})}function u(){function n(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(t+e)/2,d=(i+o)/2;return[\"M\",t,\",\",n,\"C\",c,\",\",n,\" \",c,\",\",r,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",d,\",\",u,\" \",d,\",\",s,\",\",o,\",\",s,\"z\"].join(\"\")}function e(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(n+r)/2,d=(u+s)/2;return[\"M\",t,\",\",n,\"C\",t,\",\",c,\" \",e,\",\",c,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",i,\",\",d,\" \",o,\",\",d,\",\",o,\",\",s,\"z\"].join(\"\")}var r=d3.map(c.secondary,function(t){return t.index}),a=t.edgeMode();return c.primary.map(function(t){var a=r.get(t.index);return{path:\"vertical\"===f?n(t.x+t.width,t.y+t.height,a.x-a.width,a.y+a.height,a.x-a.width,a.y-a.height,t.x+t.width,t.y-t.height):e(t.x-t.width,t.y+t.height,a.x-a.width,a.y-a.height,a.x+a.width,a.y-a.height,t.x+t.width,t.y+t.height),primary:t.primary,secondary:t.secondary,value:t.value,percent:t.percent}})}function o(t,n,e,r,a){var i=e/(a-r-2*t.length*n),u=0,o=0,s=d3.sum(t,function(t){return t.value});t.forEach(function(t){t.value<i*s&&(u+=1,o+=t.value)});var c=1e-5>s?0:(a-r-2*t.length*n-u*e)/(s-o),d=r,f=[];return t.forEach(function(t){var r=t.value*c;f.push({s:d+n+(e>r?.5*(e-r):0),e:d+n+(e>r?.5*(e+r):r),p:1e-5>s?0:t.value/s}),d+=2*n+(e>r?e:r)}),f}var s={primary:[],secondary:[]},c={primary:[],secondary:[]},d={primary:t.keyPrimary(),secondary:t.keySecondary()},f=t.orient();return a(\"primary\"),a(\"secondary\"),i(\"primary\"),i(\"secondary\"),r(),{mainBars:s.primary.concat(s.secondary),subBars:c.primary.concat(c.secondary),edges:u()}},t.mouseover=function(i){var u=t.bars(i);y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",1),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);var o=y.selectAll(\".edges\").data(u.edges);o.filter(function(t){return t[i.part]===i.key}).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),o.filter(function(t){return t[i.part]!==i.key}).transition().duration(t.duration()).style(\"fill-opacity\",0).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t.mouseout=function(i){var u=t.bars();y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",0),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a),y.selectAll(\".edges\").data(u.edges).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t},u.gg=function(){function t(n){g=n,n.each(function(){var n=d3.select(this),e=t.scale(),r=t.minorTickStart(),a=t.minorTickEnd(),i=t.majorTickStart(),u=t.majorTickEnd(),o=t.ticks(),c=t.majorTicks(),d=t.labelLocation(),f=t.outerRadius();n.append(\"circle\").attr(\"r\",f).style(\"fill\",\"url(#vizgg3\"+p+\")\").attr(\"class\",\"face\"),n.append(\"circle\").attr(\"r\",t.innerRadius()).style(\"fill\",\"url(#vizgg2\"+p+\")\").style(\"filter\",\"url(#vizgg5\"+p+\")\").attr(\"class\",\"innerFace\");var l=n.append(\"g\");l.selectAll(\"line\").data(o).enter().append(\"line\").attr(\"class\",function(t){return c(t)?\"majorTicks\":\"minorTicks\"}).attr(\"x1\",function(t){return f*(c(t)?i:r)*Math.cos(e(t))}).attr(\"y1\",function(t){return f*(c(t)?i:r)*Math.sin(e(t))}).attr(\"x2\",function(t){return f*(c(t)?u:a)*Math.cos(e(t))}).attr(\"y2\",function(t){return f*(c(t)?u:a)*Math.sin(e(t))}),n.selectAll(\"text\").data(o.filter(c)).enter().append(\"text\").attr(\"class\",\"label\").attr(\"x\",function(t){return f*d*Math.cos(e(t))}).attr(\"y\",function(t){return f*d*Math.sin(e(t))}).attr(\"dy\",3).text(function(t){return t});var g=t.outerRadius()/b.outerRadius,h=180*t.scale()(t.value())/s+90;n.append(\"g\").attr(\"transform\",\"translate(1,1)\").selectAll(\".needleshadow\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needleshadow\").append(\"path\").attr(\"d\",[\"m 0\",-130*g,5*g,175*g,-10*g,\"0,z\"].join(\",\")).style(\"filter\",\"url(#vizgg6\"+p+\")\"),n.selectAll(\".needle\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needle\").append(\"polygon\").attr(\"points\",[-.5*g,-130*g,.5*g,-130*g,5*g,45*g,-5*g,45*g].join(\",\")).style(\"fill\",\"url(#vizgg4\"+p+\")\")})}var n,e,r,a,i,o,c,d,f,l,g,p,h,y,m,v,A,x,k,b={innerRadius:20,outerRadius:150,angleOffset:.7,startAngle:-1.5*s,endAngle:.5*s,minorTickStart:.9,minorTickEnd:.95,majorTickStart:.82,majorTickEnd:.95,needleColor:\"#de2c2c\",innerFaceColor:\"#999999\",faceColor:\"#666666\",domain:[0,100],duration:500,ease:\"cubicInOut\",ticks:d3.range(0,101,2),majorTicks:function(t){return t%10===0},labelLocation:.7};return t.scale=function(){return d3.scale.linear().domain(t.domain()).range([b.startAngle+t.angleOffset(),b.endAngle-t.angleOffset()])},t.innerRadius=function(e){return arguments.length?(n=e,t):\"undefined\"!=typeof n?n:b.innerRadius},t.outerRadius=function(n){return arguments.length?(e=n,t):\"undefined\"!=typeof e?e:b.outerRadius},t.angleOffset=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:b.angleOffset},t.labelLocation=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:b.labelLocation},t.ticks=function(n){return arguments.length?(h=n,t):\"undefined\"!=typeof h?h:b.ticks},t.majorTicks=function(n){return arguments.length?(y=n,t):\"undefined\"!=typeof y?y:b.majorTicks},t.minorTickStart=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:b.minorTickStart},t.minorTickEnd=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:b.minorTickEnd},t.majorTickStart=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:b.majorTickStart},t.majorTickEnd=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:b.majorTickEnd},t.needleColor=function(n){return arguments.length?(r=n,t):\"undefined\"!=typeof r?r:b.needleColor},t.innerFaceColor=function(n){return arguments.length?(a=n,t):\"undefined\"!=typeof a?a:b.innerFaceColor},t.faceColor=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:b.faceColor},t.domain=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:b.domain},t.duration=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:b.duration},t.ease=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:b.ease},t.value=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:.5*(b.domain[0]+b.domain[1])},t.defs=function(n,e){var r=n.append(\"defs\");p=e;var a=t.needleColor(),i=t.innerFaceColor(),o=t.faceColor(),s=u.defs(r).lG().id(\"vizgg1\"+e).sel();u.defs(s).stop().offset(\"0\").stopColor(a),u.defs(s).stop().offset(\"1\").stopColor(d3.rgb(a).darker(1));var c=u.defs(r).rG().id(\"vizgg2\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(c).stop().offset(\"0\").stopColor(i),u.defs(c).stop().offset(\"1\").stopColor(d3.rgb(i).darker(2));var d=u.defs(r).rG().id(\"vizgg3\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(d).stop().offset(\"0\").stopColor(o),u.defs(d).stop().offset(\"1\").stopColor(d3.rgb(o).darker(2)),u.defs(r).lG().id(\"vizgg4\"+e).gradientUnits(\"userSpaceOnUse\").y1(\"80\").x1(\"-10\").y2(\"80\").x2(\"10\").xlink(\"#vizgg1\"+e);var f=u.defs(r).filter().id(\"vizgg5\"+e).sel();u.defs(f).feFlood().result(\"flood\").floodColor(\"rgb(0,0,0)\").floodOpacity(\"0.6\"),u.defs(f).feComposite().result(\"composite1\").operator(\"in\").in2(\"SourceGraphic\")[\"in\"](\"flood\"),u.defs(f).feGaussianBlur().result(\"blur\").stdDeviation(\"2\")[\"in\"](\"composite1\"),u.defs(f).feOffset().result(\"offset\").dy(\"2\").dx(\"2\"),u.defs(f).feComposite().result(\"composite2\").operator(\"over\").in2(\"offset\")[\"in\"](\"SourceGraphic\");var l=u.defs(r).filter().x(\"-0.3\").y(\"-0.3\").height(\"1.8\").width(\"1.8\").id(\"vizgg6\"+e).sel();u.defs(l).feGaussianBlur().stdDeviation(\"2\")},t.setNeedle=function(n){function e(t,n){return d3.interpolateString(\"rotate(\"+t+\")\",\"rotate(\"+n+\")\")}var r=180*t.scale()(n)/s+90,a=180*t.scale()(t.value())/s+90,i=t.ease();g.selectAll(\".needle\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i),g.selectAll(\".needleshadow\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i).each(\"end\",function(){angle=n}),t.value(n)},t},u.ch=function(){function u(t){function n(t){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}p=t,k||f(),t.each(function(){var t=d3.select(this),r=t.selectAll(\".groups\").data(x).enter().append(\"g\").attr(\"class\",\"groups\").on(\"mouseover\",u.mouseover).on(\"mouseout\",u.mouseout),a=r.append(\"text\").attr(\"class\",\"label\"),i=(1+u.labelPadding())*u.outerRadius(),s=u.valueFormat();a.filter(function(t){return\"g\"==t.type}).attr(\"x\",function(t){return i*Math.cos(d(t))}).attr(\"y\",function(t){return i*Math.sin(d(t))}).text(function(t){return t.source+\" (\"+s(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"}).each(function(t){this._current=t}),r.append(\"path\").style(\"fill\",function(t){return y(t.source)}).style(\"stroke\",function(t){return y(t.source)}).attr(\"d\",n).each(function(t){this._current=t}).filter(function(t){return\"g\"==t.type}),t.append(\"g\").attr(\"class\",\"chords\").selectAll(\".chord\").data(k).enter().append(\"g\").attr(\"class\",\"chord\").append(\"path\").each(function(t){this._current=t}).attr(\"d\",e).style(\"fill\",function(t){return y(t.target)}).style(\"opacity\",u.chordOpacity()).style(\"stroke\",function(t){return y(t.target)}).style(\"display\",function(t){return t.display?\"inline\":\"none\"})})}function s(t){function n(t,n){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}function i(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return e(n(t))}}function s(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return n(e(t),t)}}function f(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.cos(d(n(t)))}}function l(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.sin(d(n(t)))}}var g=p.selectAll(\".groups\").data(t?b:u.groups()),h=(1+u.labelPadding())*u.outerRadius(),y=u.valueFormat();g.select(\"path\").transition().duration(L).attrTween(\"d\",s),g.select(\".label\").filter(function(t){return\"g\"==t.type}).transition().duration(L).attrTween(\"x\",f).attrTween(\"y\",l).text(function(t){return t.source+\" (\"+y(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"});var m=u.chordOpacity();p.select(\".chords\").selectAll(\".chord\").data(t?w:u.chords()).select(\"path\").transition().duration(L).attrTween(\"d\",i).style(\"opacity\",function(t){return t.display?m:0})}function d(n){return t((n.startAngle+n.endAngle)/2)}function f(){m=[],h.forEach(function(t){-1==m.indexOf(E(t))&&m.push(E(t)),-1==m.indexOf(M(t))&&m.push(M(t))}),m=m.sort(T),v={},A={},m.forEach(function(t){v[t]={},A[t]={},m.forEach(function(n){v[t][n]=0,A[t][n]=!1})}),h.forEach(function(t){var n=E(t),e=M(t);v[n][e]+=S(t),A[n][e]=!0}),x=[],m.forEach(function(t,n){x.push({source:t,type:\"gs\",value:0,skipPad:!0,index:n}),x.push({source:t,type:\"g\",value:d3.sum(m,function(n){return v[t][n]}),skipPad:!1,index:n})}),g(x,z,R,void 0,P),k=[],x.filter(function(t){return\"g\"==t.type}).forEach(function(t,n){var r=i(m.length,n),a=e(r.map(function(n){return v[t.source][m[n]]}),0,0,t.startAngle,t.endAngle);r.forEach(function(e,r){var i=a[r];k.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:t.source,target:m[e],type:\"c\",display:A[t.source][m[e]],index:n,subindex:e,indexsubindex:n+\"-\"+e})})});var t=d3.map(k,function(t){return t.indexsubindex});k.forEach(function(n){if(n.subindex==n.index)return n.endStartAngle=n.startAngle,void(n.endEndAngle=n.startAngle);var e=t.get(n.subindex+\"-\"+n.index);n.endStartAngle=e.startAngle,n.endEndAngle=e.startAngle}),F=!1}function l(t){function n(t){return t.endAngle+t.startAngle}var r=x.filter(function(n){return n.source==t&&\"g\"==n.type})[0];b=[],m.forEach(function(n,e){b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"gs\",value:n==t?v[n][n]:0,skipPad:n==t&&A[n][n]?!1:!0,index:e}),n==t?b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"g\",value:r.value,skipPad:!1,index:e}):b.push({source:n,type:\"g\",value:v[t][n],skipPad:!1,index:e})}),g(b,z,R,t,P);var a=n(r);x.forEach(function(t,e){var r=b[e],i=n(t)<a;r.startAngle-=i?o:0,r.endAngle-=i?o:0}),w=[],b.filter(function(t){return\"g\"==t.type}).forEach(function(n,r){var a=i(m.length,r),u=a.map(function(e){var r=m[e];return n.source==t?v[n.source][r]:r==t?v[r][n.source]:0}),o=e(u,0,0,n.startAngle,n.endAngle);a.forEach(function(e,a){var i=o[a];w.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:n.source,target:m[e],type:\"c\",display:n.source===t,index:r,subindex:e,indexsubindex:r+\"-\"+e})})});var u=d3.map(w.map(function(t){return{startAngle:t.startAngle,endAngle:t.endAngle,indexsubindex:t.indexsubindex}}),function(t){return t.indexsubindex}),s=d3.map(b.filter(function(t){return\"gs\"==t.type}),function(t){return t.source});w.forEach(function(n){if(n.subindex==n.index){var e=s.get(n.source);return n.endStartAngle=e.startAngle,void(n.endEndAngle=e.endAngle)}var r=u.get(n.subindex+\"-\"+n.index);n.endStartAngle=r.startAngle,n.endEndAngle=r.endAngle,n.source!==t&&(n.startAngle=n.endAngle,n.endEndAngle=n.endStartAngle)})}function g(t,e,r,a,i){var u=void 0!==a,o=0;if(u){for(var s=!1;o<t.length;o++)if(t[o].source==a&&\"g\"==t[o].type){s=!0;break}s||console.log(\"The fixed source '\"+a+\"' is not a valid key\")}var c=d3.range(t.length);u&&(c=c.slice(o).concat(c.slice(0,o)));var d=t.filter(function(t){return!(u&&t.source===a&&\"g\"==t.type||t.skipPad)}).map(function(t){return t.value}),f=2*Math.PI-(u?t[o].endAngle-t[o].startAngle+2*e:0),l=u?t[o].endAngle+e:i,g=d3.sum(d),p=n(d,e,r,0>=f?0:f,g,u?!0:!1);c.slice(u?1:0).forEach(function(n){var a=p*t[n].value,i=(r>a?r-a:0)/2;t[n].startAngle=l,t[n].endAngle=l+a,t[n].padAngle=i,t[n].percent=t[n].value/(g||1),l+=a+i+(t[n].skipPad?0:e)})}var p,h,y,m,v,A,x,k,b,w,E=function(t){return t[0]},M=function(t){return t[1]},S=function(t){return t[2]},C=function(t){return t},T=d3.ascending,z=.03,P=0,B=180,O=200,j=.7,G=.02,R=0,L=500,F=!0;return u.data=function(t){return arguments.length?(h=t,F=!0,u):h},u.fill=function(t){return arguments.length?(y=t,u):y},u.duration=function(t){return arguments.length?(L=t,u):L},u.chordOpacity=function(t){return arguments.length?(j=t,u):j},u.innerRadius=function(t){return arguments.length?(B=t,F=!0,u):B},u.outerRadius=function(t){return arguments.length?(O=t,F=!0,u):O},u.source=function(t){return arguments.length?(E=t,F=!0,u):E},u.target=function(t){return arguments.length?(M=t,F=!0,u):M},u.value=function(t){return arguments.length?(S=t,F=!0,u):S},u.padding=function(t){return arguments.length?(z=t,F=!0,u):z},u.labelPadding=function(t){return arguments.length?(G=t,u):G},u.sort=function(t){return arguments.length?(T=t,F=!0,u):T},u.startAngle=function(t){return arguments.length?(P=t,F=!0,u):P},u.chords=function(){return F&&f(),k},u.groups=function(){return F&&f(),x},u.valueFormat=function(t){return arguments.length?(C=t,u):C},u.mouseover=function(t){l(t.source),s(1)},u.mouseout=function(t){s(0)},u},u.defs=function(t){var n={},e=t;return n.sel=function(){return e},n.lG=function(){return e=e.append(\"linearGradient\"),n},n.rG=function(){return e=e.append(\"radialGradient\"),n},n.stop=function(){return e=e.append(\"stop\"),n},n.filter=function(){return e=e.append(\"filter\"),n},n.feFlood=function(){return e=e.append(\"feFlood\"),n},n.feComposite=function(){return e=e.append(\"feComposite\"),n},n.feOffset=function(){return e=e.append(\"feOffset\"),n},n.feGaussianBlur=function(){return e=e.append(\"feGaussianBlur\"),n},n.result=function(t){return e=e.attr(\"result\",t),n},n.floodColor=function(t){return e=e.attr(\"flood-color\",t),n},n.floodOpacity=function(t){return e=e.attr(\"flood-opacity\",t),n},n.stdDeviation=function(t){return e=e.attr(\"stdDeviation\",t),n},n.operator=function(t){return e=e.attr(\"operator\",t),n},n.height=function(t){return e=e.attr(\"height\",t),n},n.width=function(t){return e=e.attr(\"width\",t),n},n[\"in\"]=function(t){return e=e.attr(\"in\",t),n},n.in2=function(t){return e=e.attr(\"in2\",t),n},n.id=function(t){return e=e.attr(\"id\",t),n},n.fx=function(t){return e=e.attr(\"fx\",t),n},n.fy=function(t){return e=e.attr(\"fy\",t),n},n.dx=function(t){return e=e.attr(\"dx\",t),n},n.dy=function(t){return e=e.attr(\"dy\",t),n},n.x1=function(t){return e=e.attr(\"x1\",t),n},n.y1=function(t){return e=e.attr(\"y1\",t),n},n.x2=function(t){return e=e.attr(\"x2\",t),n},n.y2=function(t){return e=e.attr(\"y2\",t),n},n.x=function(t){return e=e.attr(\"x\",t),n},n.y=function(t){return e=e.attr(\"y\",t),n},n.r=function(t){return e=e.attr(\"r\",t),n},n.spreadMethod=function(t){return e=e.attr(\"spreadMethod\",t),n},n.gradientUnits=function(t){return e=e.attr(\"gradientUnits\",t),n},n.xlink=function(t){return e=e.attr(\"xlink:href\",t),n},n.offset=function(t){return e=e.attr(\"offset\",t),n},n.stopColor=function(t){return e=e.attr(\"stop-color\",t),n},n.path=function(){return e=e.append(\"path\"),n},n.d=function(t){return e=e.attr(\"d\",t),n},n},this.viz=u}();\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  demo1.js */\nvar data=[[\"plant1\",\"bee1\",3,6],\n[\"plant2\",\"bee1\",6,9],\n[\"plant3\",\"bee1\",0,3],\n[\"plant4\",\"bee1\",4,0],\n[\"plant5\",\"bee1\",0,0],\n[\"plant1\",\"bee2\",0,0],\n[\"plant2\",\"bee2\",0,2],\n[\"plant3\",\"bee2\",7,0],\n[\"plant4\",\"bee2\",0,0],\n[\"plant5\",\"bee2\",0,0],\n[\"plant1\",\"bee3\",0,0],\n[\"plant2\",\"bee3\",0,0],\n[\"plant3\",\"bee3\",0,0],\n[\"plant4\",\"bee3\",0,7],\n[\"plant5\",\"bee3\",2,0]]\n\n\n\n function sort(sortOrder){\n                    return function(a,b){ return d3.ascending(sortOrder.indexOf(a),sortOrder.indexOf(b)) }\n                  }\nvar color = {'Unlinked ':'#3366CC','bee1':'#7FC97F','bee2':'#BEAED4','bee3':'#FDC086'};\n\n\n\n\nvar g1 = svg.append(\"g\").attr(\"transform\",\"translate(188,50)\");\n                         var bp1=viz.bP()\n                         .data(data)\n                         .value(d=>d[2])\n                         .min(10)\n                         .pad(1)\n                         .height(400)\n                         .width(200)\n                         .barSize(35)\n                         .fill(d=>color[d.secondary])\n.orient(\"vertical\");\n\ng1.call(bp1);g1.append(\"text\")\n                        .attr(\"x\",-50).attr(\"y\",-8)\n                        .style(\"text-anchor\",\"middle\")\n                        .text(\"Primary\");\n                        g1.append(\"text\")\n                        .attr(\"x\", 250)\n                        .attr(\"y\",-8).style(\"text-anchor\",\"middle\")\n                        .text(\"Secondary\");\n                        g1.append(\"text\")\n                        .attr(\"x\",100).attr(\"y\",-25)\n                        .style(\"text-anchor\",\"middle\")\n                        .attr(\"class\",\"header\")\n                        .text(\"bog\");\n\n g1.selectAll(\".mainBars\")\n                        .on(\"mouseover\",mouseover)\n                        .on(\"mouseout\",mouseout);\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"label\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -27.2:24.8))\n                        .attr(\"y\",d=>+6)\n                        .text(d=>d.key)\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\"));\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"perc\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -141:144))\n                        .attr(\"y\",d=>+6)\n                        .text(function(d){ return d3.format(\"0.0%\")(d.percent)})\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\")); \n\n\nvar g2 = svg.append(\"g\").attr(\"transform\",\"translate(794,50)\");\n                         var bp2=viz.bP()\n                         .data(data)\n                         .value(d=>d[3])\n                         .min(10)\n                         .pad(1)\n                         .height(400)\n                         .width(200)\n                         .barSize(35)\n                         .fill(d=>color[d.secondary])\n.orient(\"vertical\");\n\ng2.call(bp2);g2.append(\"text\")\n                        .attr(\"x\",-50).attr(\"y\",-8)\n                        .style(\"text-anchor\",\"middle\")\n                        .text(\"Primary\");\n                        g2.append(\"text\")\n                        .attr(\"x\", 250)\n                        .attr(\"y\",-8).style(\"text-anchor\",\"middle\")\n                        .text(\"Secondary\");\n                        g2.append(\"text\")\n                        .attr(\"x\",100).attr(\"y\",-25)\n                        .style(\"text-anchor\",\"middle\")\n                        .attr(\"class\",\"header\")\n                        .text(\"meadow\");\n\n g2.selectAll(\".mainBars\")\n                        .on(\"mouseover\",mouseover)\n                        .on(\"mouseout\",mouseout);\n\n g2.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"label\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -27.2:24.8))\n                        .attr(\"y\",d=>+6)\n                        .text(d=>d.key)\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\"));\n\n g2.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"perc\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -141:144))\n                        .attr(\"y\",d=>+6)\n                        .text(function(d){ return d3.format(\"0.0%\")(d.percent)})\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\")); \n\nfunction mouseover(d){\nbp1.mouseover(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\nbp2.mouseover(d);\n                            g2.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\n}\n\n                     function mouseout(d){\nbp1.mouseout(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\nbp2.mouseout(d);\n                            g2.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\n}\n\n\n};","style":"/* R2D3 Source File:  demo1.css */\n .mainBars{\n    shape-rendering: auto;\n    fill-opacity: 1;\n    stroke-width: 0.5px;\n    stroke: rgb(0, 0, 0);\n    stroke-opacity: 0;\n  }\n    .subBars{\n    shape-rendering:crispEdges;\n    }\n    .edges{\n    stroke:none;\n    fill-opacity:0.3;\n    }\n    .label{\n    color:#000000;\n    }","version":5,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div id="data-format" class="section level1">
<h1>Data format</h1>
<p>The core function bipartite_D3() can take in the matrix formats used by bipartite, either as a discrete matrix, a list of matrices or an array, as may be output by frame2webs() or webs2array(). Its native format however is a data frame where each row is an interaction. The first column details the name of the primary level species, the second column the secondary level species and the third the strength of the link. Additional webs can be added by adding fourth and subsequent columns, each named to indicate the site. Hence:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">List2DF</span>(DoubleTestWeb)</span></code></pre></div>
<pre><code>##    Primary Secondary bog meadow
## 1   plant1      bee1   3      6
## 2   plant2      bee1   6      9
## 3   plant3      bee1   0      3
## 4   plant4      bee1   4      0
## 5   plant5      bee1   0      0
## 6   plant1      bee2   0      0
## 7   plant2      bee2   0      2
## 8   plant3      bee2   7      0
## 9   plant4      bee2   0      0
## 10  plant5      bee2   0      0
## 11  plant1      bee3   0      0
## 12  plant2      bee3   0      0
## 13  plant3      bee3   0      0
## 14  plant4      bee3   0      7
## 15  plant5      bee3   2      0</code></pre>
</div>
<div id="customisation-options" class="section level1">
<h1>Customisation Options</h1>
<p>It is worth noting that many options can be set directly using the CSS file, but here is not really the place to describe that.</p>
<p>##Colour</p>
<div id="which-level-to-colour-by" class="section level3">
<h3>Which level to colour by?</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bipartite_D3</span>(SmallTestWeb, <span class="at">colouroption =</span> <span class="st">&#39;brewer&#39;</span>, <span class="at">ColourBy =</span> <span class="dv">1</span>, <span class="at">filename =</span> <span class="st">&#39;demo2&#39;</span>)</span></code></pre></div>
<div id="htmlwidget-57f7069dc3cd8263174c" style="width:700px;height:700px;" class="r2d3 html-widget"></div>
<script type="application/json" data-for="htmlwidget-57f7069dc3cd8263174c">{"x":{"data":null,"type":"logical","container":"svg","options":null,"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n/* R2D3 Source File:  vizjs.js */\n!function(){function t(t){for(;t>o;)t-=o;for(;0>t;)t+=o;return t}function n(t,n,e,r,a,i){if(0>=a||0>=r)return 0;var u=t.concat().sort(d3.ascending),o=r-u.length*n+(i?n:0),s=[],c=0,d=0;return d3.range(u.length).forEach(function(t){d=(o-e*t)/(a-=u[t-1]||0),c+=u[t]*d<=e?1:0,s.push(d)}),s[c]}function e(t,e,r,a,i){var u=a,o=d3.sum(t),s=n(t,e,r,i-a,o,!1),c=t.map(function(t){var n=s*t,a=(r>n?r:n)/2;return u+=2*a+e,{c:u-a,v:n,w:a,value:t,percent:t/(o||1)}});return c}function r(t){function n(t,n){return[t*Math.cos(n),t*Math.sin(n)]}var e=n(t[0],t[2]),r=n(t[0],t[3]),a=n(t[1],t[2]),i=n(t[1],t[3]);return[\"M\",e,\"A\",t[0],t[0],\"0\",t[3]-t[2]>s?1:0,\"1\",r,\"L\",i,\"A\",t[1],t[1],\"0\",t[3]-t[2]>s?1:0,\"0\",a,\"z\"].join(\" \")}function a(t,n,e,r,a,i){function u(t,n,e){return\"A\"+t+\",\"+t+\" 0 \"+ +(e>s)+\",1 \"+n}function c(t,n){return[t*Math.cos(n),t*Math.sin(n)]}function d(t,n,e,r){e+=n>e?o:0;var a=e-n,i=1-(a>s?o-a:a)/s;i=Math.pow(i,5);var u=(e+n)/2-(e-n>s?s:0);return\"Q\"+i*r*Math.cos(u)+\",\"+i*r*Math.sin(u)+\" \"+t}var f=c(t,n),l=c(t,e),g=c(r,a),p=c(r,i);return\"M\"+f+u(t,l,e-n)+(n==a&&e==i?d(f,n,e,r):d(g,e,a,r)+u(r,p,i-a)+d(f,n,i,t))+\"Z\"}function i(t,n){ret=[];for(var e=n;e>n-t;e--)ret.push(0>e?e+t:e);return ret}var u={version:\"1.1.0\"},o=2*Math.PI,s=Math.PI,c=Math.PI/2;u.bP=function(){function t(i){y=i,i.each(function(){var i=d3.select(this),u=t.bars(),o=i.selectAll(\".subBars\").data(u.subBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"subBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);\"undefined\"!=typeof h&&o.style(\"fill\",function(t){return h(t)});var s=i.selectAll(\".edges\").data(u.edges).enter().append(\"path\").attr(\"class\",\"edges\").attr(\"d\",function(t){return t.path}).style(\"fill-opacity\",t.edgeOpacity());\"undefined\"!=typeof h&&s.style(\"fill\",function(t){return h(t)}),i.selectAll(\".mainBars\").data(u.mainBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"mainBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a).style(\"fill-opacity\",0).on(\"mouseover\",t.mouseover).on(\"mouseout\",t.mouseout)})}function n(t){return-t.width}function e(t){return-t.height}function r(t){return 2*t.width}function a(t){return 2*t.height}var i,u,o,s,c,d,f,l,g,p,h,y,m,v,A,x,k;return t.data=function(n){return arguments.length?(p=n,t):p},t.fill=function(n){return arguments.length?(h=n,t):h},t.keyPrimary=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:function(t){return t[0]}},t.sortPrimary=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:d3.ascending},t.keySecondary=function(n){return arguments.length?(u=n,t):\"undefined\"!=typeof u?u:function(t){return t[1]}},t.sortSecondary=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:d3.ascending},t.value=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:function(t){return t[2]}},t.width=function(n){return arguments.length?(s=n,t):\"undefined\"!=typeof s?s:400},t.height=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:600},t.barSize=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:35},t.min=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:0},t.orient=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:\"vertical\"},t.pad=function(n){return arguments.length?(g=n,t):\"undefined\"!=typeof g?g:0},t.duration=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:500},t.edgeOpacity=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:.4},t.edgeMode=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:\"curved\"},t.bars=function(n){function e(t,e){return\"undefined\"==typeof n||n.part===e||d[n.part](t)===n.key}function r(){var n=t.min()/2;s.primary.forEach(function(t){t.height<n&&(t.height=n)}),s.secondary.forEach(function(t){t.height<n&&(t.height=n)})}function a(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data()),i=o(a,t.pad(),t.min(),0,\"vertical\"==f?t.height():t.width()),u=t.barSize();a.forEach(function(e,r){s[n].push({x:\"horizontal\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.width()-u/2,y:\"vertical\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.height()-u/2,height:\"vertical\"==f?(i[r].e-i[r].s)/2:u/2,width:\"horizontal\"==f?(i[r].e-i[r].s)/2:u/2,part:n,key:e.key,value:e.value,percent:i[r].p})})}function i(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.map(s[n],function(t){return t.key}),i=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).key(\"secondary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"secondary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data());i.forEach(function(e){var r=a.get(e.key),i=o(e.values,0,0,\"vertical\"==f?r.y-r.height:r.x-r.width,\"vertical\"==f?r.y+r.height:r.x+r.width),u=t.barSize();e.values.forEach(function(a,o){c[n].push({x:\"vertical\"==f?\"primary\"==n?u/2:t.width()-u/2:(i[o].s+i[o].e)/2,y:\"horizontal\"==f?\"primary\"==n?u/2:t.height()-u/2:(i[o].s+i[o].e)/2,height:(\"vertical\"==f?i[o].e-i[o].s:u)/2,width:(\"horizontal\"==f?i[o].e-i[o].s:u)/2,part:n,primary:\"primary\"==n?e.key:a.key,secondary:\"primary\"==n?a.key:e.key,value:a.value,percent:i[o].p*r.percent,index:\"primary\"==n?e.key+\"|\"+a.key:a.key+\"|\"+e.key})})})}function u(){function n(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(t+e)/2,d=(i+o)/2;return[\"M\",t,\",\",n,\"C\",c,\",\",n,\" \",c,\",\",r,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",d,\",\",u,\" \",d,\",\",s,\",\",o,\",\",s,\"z\"].join(\"\")}function e(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(n+r)/2,d=(u+s)/2;return[\"M\",t,\",\",n,\"C\",t,\",\",c,\" \",e,\",\",c,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",i,\",\",d,\" \",o,\",\",d,\",\",o,\",\",s,\"z\"].join(\"\")}var r=d3.map(c.secondary,function(t){return t.index}),a=t.edgeMode();return c.primary.map(function(t){var a=r.get(t.index);return{path:\"vertical\"===f?n(t.x+t.width,t.y+t.height,a.x-a.width,a.y+a.height,a.x-a.width,a.y-a.height,t.x+t.width,t.y-t.height):e(t.x-t.width,t.y+t.height,a.x-a.width,a.y-a.height,a.x+a.width,a.y-a.height,t.x+t.width,t.y+t.height),primary:t.primary,secondary:t.secondary,value:t.value,percent:t.percent}})}function o(t,n,e,r,a){var i=e/(a-r-2*t.length*n),u=0,o=0,s=d3.sum(t,function(t){return t.value});t.forEach(function(t){t.value<i*s&&(u+=1,o+=t.value)});var c=1e-5>s?0:(a-r-2*t.length*n-u*e)/(s-o),d=r,f=[];return t.forEach(function(t){var r=t.value*c;f.push({s:d+n+(e>r?.5*(e-r):0),e:d+n+(e>r?.5*(e+r):r),p:1e-5>s?0:t.value/s}),d+=2*n+(e>r?e:r)}),f}var s={primary:[],secondary:[]},c={primary:[],secondary:[]},d={primary:t.keyPrimary(),secondary:t.keySecondary()},f=t.orient();return a(\"primary\"),a(\"secondary\"),i(\"primary\"),i(\"secondary\"),r(),{mainBars:s.primary.concat(s.secondary),subBars:c.primary.concat(c.secondary),edges:u()}},t.mouseover=function(i){var u=t.bars(i);y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",1),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);var o=y.selectAll(\".edges\").data(u.edges);o.filter(function(t){return t[i.part]===i.key}).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),o.filter(function(t){return t[i.part]!==i.key}).transition().duration(t.duration()).style(\"fill-opacity\",0).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t.mouseout=function(i){var u=t.bars();y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",0),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a),y.selectAll(\".edges\").data(u.edges).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t},u.gg=function(){function t(n){g=n,n.each(function(){var n=d3.select(this),e=t.scale(),r=t.minorTickStart(),a=t.minorTickEnd(),i=t.majorTickStart(),u=t.majorTickEnd(),o=t.ticks(),c=t.majorTicks(),d=t.labelLocation(),f=t.outerRadius();n.append(\"circle\").attr(\"r\",f).style(\"fill\",\"url(#vizgg3\"+p+\")\").attr(\"class\",\"face\"),n.append(\"circle\").attr(\"r\",t.innerRadius()).style(\"fill\",\"url(#vizgg2\"+p+\")\").style(\"filter\",\"url(#vizgg5\"+p+\")\").attr(\"class\",\"innerFace\");var l=n.append(\"g\");l.selectAll(\"line\").data(o).enter().append(\"line\").attr(\"class\",function(t){return c(t)?\"majorTicks\":\"minorTicks\"}).attr(\"x1\",function(t){return f*(c(t)?i:r)*Math.cos(e(t))}).attr(\"y1\",function(t){return f*(c(t)?i:r)*Math.sin(e(t))}).attr(\"x2\",function(t){return f*(c(t)?u:a)*Math.cos(e(t))}).attr(\"y2\",function(t){return f*(c(t)?u:a)*Math.sin(e(t))}),n.selectAll(\"text\").data(o.filter(c)).enter().append(\"text\").attr(\"class\",\"label\").attr(\"x\",function(t){return f*d*Math.cos(e(t))}).attr(\"y\",function(t){return f*d*Math.sin(e(t))}).attr(\"dy\",3).text(function(t){return t});var g=t.outerRadius()/b.outerRadius,h=180*t.scale()(t.value())/s+90;n.append(\"g\").attr(\"transform\",\"translate(1,1)\").selectAll(\".needleshadow\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needleshadow\").append(\"path\").attr(\"d\",[\"m 0\",-130*g,5*g,175*g,-10*g,\"0,z\"].join(\",\")).style(\"filter\",\"url(#vizgg6\"+p+\")\"),n.selectAll(\".needle\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needle\").append(\"polygon\").attr(\"points\",[-.5*g,-130*g,.5*g,-130*g,5*g,45*g,-5*g,45*g].join(\",\")).style(\"fill\",\"url(#vizgg4\"+p+\")\")})}var n,e,r,a,i,o,c,d,f,l,g,p,h,y,m,v,A,x,k,b={innerRadius:20,outerRadius:150,angleOffset:.7,startAngle:-1.5*s,endAngle:.5*s,minorTickStart:.9,minorTickEnd:.95,majorTickStart:.82,majorTickEnd:.95,needleColor:\"#de2c2c\",innerFaceColor:\"#999999\",faceColor:\"#666666\",domain:[0,100],duration:500,ease:\"cubicInOut\",ticks:d3.range(0,101,2),majorTicks:function(t){return t%10===0},labelLocation:.7};return t.scale=function(){return d3.scale.linear().domain(t.domain()).range([b.startAngle+t.angleOffset(),b.endAngle-t.angleOffset()])},t.innerRadius=function(e){return arguments.length?(n=e,t):\"undefined\"!=typeof n?n:b.innerRadius},t.outerRadius=function(n){return arguments.length?(e=n,t):\"undefined\"!=typeof e?e:b.outerRadius},t.angleOffset=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:b.angleOffset},t.labelLocation=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:b.labelLocation},t.ticks=function(n){return arguments.length?(h=n,t):\"undefined\"!=typeof h?h:b.ticks},t.majorTicks=function(n){return arguments.length?(y=n,t):\"undefined\"!=typeof y?y:b.majorTicks},t.minorTickStart=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:b.minorTickStart},t.minorTickEnd=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:b.minorTickEnd},t.majorTickStart=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:b.majorTickStart},t.majorTickEnd=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:b.majorTickEnd},t.needleColor=function(n){return arguments.length?(r=n,t):\"undefined\"!=typeof r?r:b.needleColor},t.innerFaceColor=function(n){return arguments.length?(a=n,t):\"undefined\"!=typeof a?a:b.innerFaceColor},t.faceColor=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:b.faceColor},t.domain=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:b.domain},t.duration=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:b.duration},t.ease=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:b.ease},t.value=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:.5*(b.domain[0]+b.domain[1])},t.defs=function(n,e){var r=n.append(\"defs\");p=e;var a=t.needleColor(),i=t.innerFaceColor(),o=t.faceColor(),s=u.defs(r).lG().id(\"vizgg1\"+e).sel();u.defs(s).stop().offset(\"0\").stopColor(a),u.defs(s).stop().offset(\"1\").stopColor(d3.rgb(a).darker(1));var c=u.defs(r).rG().id(\"vizgg2\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(c).stop().offset(\"0\").stopColor(i),u.defs(c).stop().offset(\"1\").stopColor(d3.rgb(i).darker(2));var d=u.defs(r).rG().id(\"vizgg3\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(d).stop().offset(\"0\").stopColor(o),u.defs(d).stop().offset(\"1\").stopColor(d3.rgb(o).darker(2)),u.defs(r).lG().id(\"vizgg4\"+e).gradientUnits(\"userSpaceOnUse\").y1(\"80\").x1(\"-10\").y2(\"80\").x2(\"10\").xlink(\"#vizgg1\"+e);var f=u.defs(r).filter().id(\"vizgg5\"+e).sel();u.defs(f).feFlood().result(\"flood\").floodColor(\"rgb(0,0,0)\").floodOpacity(\"0.6\"),u.defs(f).feComposite().result(\"composite1\").operator(\"in\").in2(\"SourceGraphic\")[\"in\"](\"flood\"),u.defs(f).feGaussianBlur().result(\"blur\").stdDeviation(\"2\")[\"in\"](\"composite1\"),u.defs(f).feOffset().result(\"offset\").dy(\"2\").dx(\"2\"),u.defs(f).feComposite().result(\"composite2\").operator(\"over\").in2(\"offset\")[\"in\"](\"SourceGraphic\");var l=u.defs(r).filter().x(\"-0.3\").y(\"-0.3\").height(\"1.8\").width(\"1.8\").id(\"vizgg6\"+e).sel();u.defs(l).feGaussianBlur().stdDeviation(\"2\")},t.setNeedle=function(n){function e(t,n){return d3.interpolateString(\"rotate(\"+t+\")\",\"rotate(\"+n+\")\")}var r=180*t.scale()(n)/s+90,a=180*t.scale()(t.value())/s+90,i=t.ease();g.selectAll(\".needle\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i),g.selectAll(\".needleshadow\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i).each(\"end\",function(){angle=n}),t.value(n)},t},u.ch=function(){function u(t){function n(t){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}p=t,k||f(),t.each(function(){var t=d3.select(this),r=t.selectAll(\".groups\").data(x).enter().append(\"g\").attr(\"class\",\"groups\").on(\"mouseover\",u.mouseover).on(\"mouseout\",u.mouseout),a=r.append(\"text\").attr(\"class\",\"label\"),i=(1+u.labelPadding())*u.outerRadius(),s=u.valueFormat();a.filter(function(t){return\"g\"==t.type}).attr(\"x\",function(t){return i*Math.cos(d(t))}).attr(\"y\",function(t){return i*Math.sin(d(t))}).text(function(t){return t.source+\" (\"+s(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"}).each(function(t){this._current=t}),r.append(\"path\").style(\"fill\",function(t){return y(t.source)}).style(\"stroke\",function(t){return y(t.source)}).attr(\"d\",n).each(function(t){this._current=t}).filter(function(t){return\"g\"==t.type}),t.append(\"g\").attr(\"class\",\"chords\").selectAll(\".chord\").data(k).enter().append(\"g\").attr(\"class\",\"chord\").append(\"path\").each(function(t){this._current=t}).attr(\"d\",e).style(\"fill\",function(t){return y(t.target)}).style(\"opacity\",u.chordOpacity()).style(\"stroke\",function(t){return y(t.target)}).style(\"display\",function(t){return t.display?\"inline\":\"none\"})})}function s(t){function n(t,n){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}function i(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return e(n(t))}}function s(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return n(e(t),t)}}function f(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.cos(d(n(t)))}}function l(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.sin(d(n(t)))}}var g=p.selectAll(\".groups\").data(t?b:u.groups()),h=(1+u.labelPadding())*u.outerRadius(),y=u.valueFormat();g.select(\"path\").transition().duration(L).attrTween(\"d\",s),g.select(\".label\").filter(function(t){return\"g\"==t.type}).transition().duration(L).attrTween(\"x\",f).attrTween(\"y\",l).text(function(t){return t.source+\" (\"+y(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"});var m=u.chordOpacity();p.select(\".chords\").selectAll(\".chord\").data(t?w:u.chords()).select(\"path\").transition().duration(L).attrTween(\"d\",i).style(\"opacity\",function(t){return t.display?m:0})}function d(n){return t((n.startAngle+n.endAngle)/2)}function f(){m=[],h.forEach(function(t){-1==m.indexOf(E(t))&&m.push(E(t)),-1==m.indexOf(M(t))&&m.push(M(t))}),m=m.sort(T),v={},A={},m.forEach(function(t){v[t]={},A[t]={},m.forEach(function(n){v[t][n]=0,A[t][n]=!1})}),h.forEach(function(t){var n=E(t),e=M(t);v[n][e]+=S(t),A[n][e]=!0}),x=[],m.forEach(function(t,n){x.push({source:t,type:\"gs\",value:0,skipPad:!0,index:n}),x.push({source:t,type:\"g\",value:d3.sum(m,function(n){return v[t][n]}),skipPad:!1,index:n})}),g(x,z,R,void 0,P),k=[],x.filter(function(t){return\"g\"==t.type}).forEach(function(t,n){var r=i(m.length,n),a=e(r.map(function(n){return v[t.source][m[n]]}),0,0,t.startAngle,t.endAngle);r.forEach(function(e,r){var i=a[r];k.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:t.source,target:m[e],type:\"c\",display:A[t.source][m[e]],index:n,subindex:e,indexsubindex:n+\"-\"+e})})});var t=d3.map(k,function(t){return t.indexsubindex});k.forEach(function(n){if(n.subindex==n.index)return n.endStartAngle=n.startAngle,void(n.endEndAngle=n.startAngle);var e=t.get(n.subindex+\"-\"+n.index);n.endStartAngle=e.startAngle,n.endEndAngle=e.startAngle}),F=!1}function l(t){function n(t){return t.endAngle+t.startAngle}var r=x.filter(function(n){return n.source==t&&\"g\"==n.type})[0];b=[],m.forEach(function(n,e){b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"gs\",value:n==t?v[n][n]:0,skipPad:n==t&&A[n][n]?!1:!0,index:e}),n==t?b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"g\",value:r.value,skipPad:!1,index:e}):b.push({source:n,type:\"g\",value:v[t][n],skipPad:!1,index:e})}),g(b,z,R,t,P);var a=n(r);x.forEach(function(t,e){var r=b[e],i=n(t)<a;r.startAngle-=i?o:0,r.endAngle-=i?o:0}),w=[],b.filter(function(t){return\"g\"==t.type}).forEach(function(n,r){var a=i(m.length,r),u=a.map(function(e){var r=m[e];return n.source==t?v[n.source][r]:r==t?v[r][n.source]:0}),o=e(u,0,0,n.startAngle,n.endAngle);a.forEach(function(e,a){var i=o[a];w.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:n.source,target:m[e],type:\"c\",display:n.source===t,index:r,subindex:e,indexsubindex:r+\"-\"+e})})});var u=d3.map(w.map(function(t){return{startAngle:t.startAngle,endAngle:t.endAngle,indexsubindex:t.indexsubindex}}),function(t){return t.indexsubindex}),s=d3.map(b.filter(function(t){return\"gs\"==t.type}),function(t){return t.source});w.forEach(function(n){if(n.subindex==n.index){var e=s.get(n.source);return n.endStartAngle=e.startAngle,void(n.endEndAngle=e.endAngle)}var r=u.get(n.subindex+\"-\"+n.index);n.endStartAngle=r.startAngle,n.endEndAngle=r.endAngle,n.source!==t&&(n.startAngle=n.endAngle,n.endEndAngle=n.endStartAngle)})}function g(t,e,r,a,i){var u=void 0!==a,o=0;if(u){for(var s=!1;o<t.length;o++)if(t[o].source==a&&\"g\"==t[o].type){s=!0;break}s||console.log(\"The fixed source '\"+a+\"' is not a valid key\")}var c=d3.range(t.length);u&&(c=c.slice(o).concat(c.slice(0,o)));var d=t.filter(function(t){return!(u&&t.source===a&&\"g\"==t.type||t.skipPad)}).map(function(t){return t.value}),f=2*Math.PI-(u?t[o].endAngle-t[o].startAngle+2*e:0),l=u?t[o].endAngle+e:i,g=d3.sum(d),p=n(d,e,r,0>=f?0:f,g,u?!0:!1);c.slice(u?1:0).forEach(function(n){var a=p*t[n].value,i=(r>a?r-a:0)/2;t[n].startAngle=l,t[n].endAngle=l+a,t[n].padAngle=i,t[n].percent=t[n].value/(g||1),l+=a+i+(t[n].skipPad?0:e)})}var p,h,y,m,v,A,x,k,b,w,E=function(t){return t[0]},M=function(t){return t[1]},S=function(t){return t[2]},C=function(t){return t},T=d3.ascending,z=.03,P=0,B=180,O=200,j=.7,G=.02,R=0,L=500,F=!0;return u.data=function(t){return arguments.length?(h=t,F=!0,u):h},u.fill=function(t){return arguments.length?(y=t,u):y},u.duration=function(t){return arguments.length?(L=t,u):L},u.chordOpacity=function(t){return arguments.length?(j=t,u):j},u.innerRadius=function(t){return arguments.length?(B=t,F=!0,u):B},u.outerRadius=function(t){return arguments.length?(O=t,F=!0,u):O},u.source=function(t){return arguments.length?(E=t,F=!0,u):E},u.target=function(t){return arguments.length?(M=t,F=!0,u):M},u.value=function(t){return arguments.length?(S=t,F=!0,u):S},u.padding=function(t){return arguments.length?(z=t,F=!0,u):z},u.labelPadding=function(t){return arguments.length?(G=t,u):G},u.sort=function(t){return arguments.length?(T=t,F=!0,u):T},u.startAngle=function(t){return arguments.length?(P=t,F=!0,u):P},u.chords=function(){return F&&f(),k},u.groups=function(){return F&&f(),x},u.valueFormat=function(t){return arguments.length?(C=t,u):C},u.mouseover=function(t){l(t.source),s(1)},u.mouseout=function(t){s(0)},u},u.defs=function(t){var n={},e=t;return n.sel=function(){return e},n.lG=function(){return e=e.append(\"linearGradient\"),n},n.rG=function(){return e=e.append(\"radialGradient\"),n},n.stop=function(){return e=e.append(\"stop\"),n},n.filter=function(){return e=e.append(\"filter\"),n},n.feFlood=function(){return e=e.append(\"feFlood\"),n},n.feComposite=function(){return e=e.append(\"feComposite\"),n},n.feOffset=function(){return e=e.append(\"feOffset\"),n},n.feGaussianBlur=function(){return e=e.append(\"feGaussianBlur\"),n},n.result=function(t){return e=e.attr(\"result\",t),n},n.floodColor=function(t){return e=e.attr(\"flood-color\",t),n},n.floodOpacity=function(t){return e=e.attr(\"flood-opacity\",t),n},n.stdDeviation=function(t){return e=e.attr(\"stdDeviation\",t),n},n.operator=function(t){return e=e.attr(\"operator\",t),n},n.height=function(t){return e=e.attr(\"height\",t),n},n.width=function(t){return e=e.attr(\"width\",t),n},n[\"in\"]=function(t){return e=e.attr(\"in\",t),n},n.in2=function(t){return e=e.attr(\"in2\",t),n},n.id=function(t){return e=e.attr(\"id\",t),n},n.fx=function(t){return e=e.attr(\"fx\",t),n},n.fy=function(t){return e=e.attr(\"fy\",t),n},n.dx=function(t){return e=e.attr(\"dx\",t),n},n.dy=function(t){return e=e.attr(\"dy\",t),n},n.x1=function(t){return e=e.attr(\"x1\",t),n},n.y1=function(t){return e=e.attr(\"y1\",t),n},n.x2=function(t){return e=e.attr(\"x2\",t),n},n.y2=function(t){return e=e.attr(\"y2\",t),n},n.x=function(t){return e=e.attr(\"x\",t),n},n.y=function(t){return e=e.attr(\"y\",t),n},n.r=function(t){return e=e.attr(\"r\",t),n},n.spreadMethod=function(t){return e=e.attr(\"spreadMethod\",t),n},n.gradientUnits=function(t){return e=e.attr(\"gradientUnits\",t),n},n.xlink=function(t){return e=e.attr(\"xlink:href\",t),n},n.offset=function(t){return e=e.attr(\"offset\",t),n},n.stopColor=function(t){return e=e.attr(\"stop-color\",t),n},n.path=function(){return e=e.append(\"path\"),n},n.d=function(t){return e=e.attr(\"d\",t),n},n},this.viz=u}();\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  demo2.js */\nvar data=[[\"plant1\",\"bee1\",6],\n[\"plant2\",\"bee1\",9],\n[\"plant3\",\"bee1\",3],\n[\"plant4\",\"bee1\",0],\n[\"plant1\",\"bee2\",0],\n[\"plant2\",\"bee2\",2],\n[\"plant3\",\"bee2\",0],\n[\"plant4\",\"bee2\",0],\n[\"plant1\",\"bee3\",0],\n[\"plant2\",\"bee3\",0],\n[\"plant3\",\"bee3\",0],\n[\"plant4\",\"bee3\",7]]\n\n\n\n function sort(sortOrder){\n                    return function(a,b){ return d3.ascending(sortOrder.indexOf(a),sortOrder.indexOf(b)) }\n                  }\nvar color = {'Unlinked ':'#3366CC','plant1':'#7FC97F','plant2':'#BEAED4','plant3':'#FDC086','plant4':'#FFFF99'};\n\n\n\n\nvar g1 = svg.append(\"g\").attr(\"transform\",\"translate(188,50)\");\n                         var bp1=viz.bP()\n                         .data(data)\n                         .value(d=>d[2])\n                         .min(10)\n                         .pad(1)\n                         .height(400)\n                         .width(200)\n                         .barSize(35)\n                         .fill(d=>color[d.primary])\n.orient(\"vertical\");\n\ng1.call(bp1);g1.append(\"text\")\n                        .attr(\"x\",-50).attr(\"y\",-8)\n                        .style(\"text-anchor\",\"middle\")\n                        .text(\"Primary\");\n                        g1.append(\"text\")\n                        .attr(\"x\", 250)\n                        .attr(\"y\",-8).style(\"text-anchor\",\"middle\")\n                        .text(\"Secondary\");\n                        g1.append(\"text\")\n                        .attr(\"x\",100).attr(\"y\",-25)\n                        .style(\"text-anchor\",\"middle\")\n                        .attr(\"class\",\"header\")\n                        .text(\"meadow\");\n\n g1.selectAll(\".mainBars\")\n                        .on(\"mouseover\",mouseover)\n                        .on(\"mouseout\",mouseout);\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"label\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -27.2:24.8))\n                        .attr(\"y\",d=>+6)\n                        .text(d=>d.key)\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\"));\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"perc\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -141:144))\n                        .attr(\"y\",d=>+6)\n                        .text(function(d){ return d3.format(\"0.0%\")(d.percent)})\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\")); \n\nfunction mouseover(d){\nbp1.mouseover(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\n}\n\n                     function mouseout(d){\nbp1.mouseout(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\n}\n\n\n};","style":"/* R2D3 Source File:  demo2.css */\n .mainBars{\n    shape-rendering: auto;\n    fill-opacity: 1;\n    stroke-width: 0.5px;\n    stroke: rgb(0, 0, 0);\n    stroke-opacity: 0;\n  }\n    .subBars{\n    shape-rendering:crispEdges;\n    }\n    .edges{\n    stroke:none;\n    fill-opacity:0.3;\n    }\n    .label{\n    color:#000000;\n    }","version":5,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bipartite_D3</span>(SmallTestWeb, <span class="at">colouroption =</span> <span class="st">&#39;brewer&#39;</span>, <span class="at">ColourBy =</span> <span class="dv">2</span>, <span class="at">filename =</span> <span class="st">&#39;demo3&#39;</span>)</span></code></pre></div>
<div id="htmlwidget-628c41d2c42c207b1b52" style="width:700px;height:700px;" class="r2d3 html-widget"></div>
<script type="application/json" data-for="htmlwidget-628c41d2c42c207b1b52">{"x":{"data":null,"type":"logical","container":"svg","options":null,"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n/* R2D3 Source File:  vizjs.js */\n!function(){function t(t){for(;t>o;)t-=o;for(;0>t;)t+=o;return t}function n(t,n,e,r,a,i){if(0>=a||0>=r)return 0;var u=t.concat().sort(d3.ascending),o=r-u.length*n+(i?n:0),s=[],c=0,d=0;return d3.range(u.length).forEach(function(t){d=(o-e*t)/(a-=u[t-1]||0),c+=u[t]*d<=e?1:0,s.push(d)}),s[c]}function e(t,e,r,a,i){var u=a,o=d3.sum(t),s=n(t,e,r,i-a,o,!1),c=t.map(function(t){var n=s*t,a=(r>n?r:n)/2;return u+=2*a+e,{c:u-a,v:n,w:a,value:t,percent:t/(o||1)}});return c}function r(t){function n(t,n){return[t*Math.cos(n),t*Math.sin(n)]}var e=n(t[0],t[2]),r=n(t[0],t[3]),a=n(t[1],t[2]),i=n(t[1],t[3]);return[\"M\",e,\"A\",t[0],t[0],\"0\",t[3]-t[2]>s?1:0,\"1\",r,\"L\",i,\"A\",t[1],t[1],\"0\",t[3]-t[2]>s?1:0,\"0\",a,\"z\"].join(\" \")}function a(t,n,e,r,a,i){function u(t,n,e){return\"A\"+t+\",\"+t+\" 0 \"+ +(e>s)+\",1 \"+n}function c(t,n){return[t*Math.cos(n),t*Math.sin(n)]}function d(t,n,e,r){e+=n>e?o:0;var a=e-n,i=1-(a>s?o-a:a)/s;i=Math.pow(i,5);var u=(e+n)/2-(e-n>s?s:0);return\"Q\"+i*r*Math.cos(u)+\",\"+i*r*Math.sin(u)+\" \"+t}var f=c(t,n),l=c(t,e),g=c(r,a),p=c(r,i);return\"M\"+f+u(t,l,e-n)+(n==a&&e==i?d(f,n,e,r):d(g,e,a,r)+u(r,p,i-a)+d(f,n,i,t))+\"Z\"}function i(t,n){ret=[];for(var e=n;e>n-t;e--)ret.push(0>e?e+t:e);return ret}var u={version:\"1.1.0\"},o=2*Math.PI,s=Math.PI,c=Math.PI/2;u.bP=function(){function t(i){y=i,i.each(function(){var i=d3.select(this),u=t.bars(),o=i.selectAll(\".subBars\").data(u.subBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"subBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);\"undefined\"!=typeof h&&o.style(\"fill\",function(t){return h(t)});var s=i.selectAll(\".edges\").data(u.edges).enter().append(\"path\").attr(\"class\",\"edges\").attr(\"d\",function(t){return t.path}).style(\"fill-opacity\",t.edgeOpacity());\"undefined\"!=typeof h&&s.style(\"fill\",function(t){return h(t)}),i.selectAll(\".mainBars\").data(u.mainBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"mainBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a).style(\"fill-opacity\",0).on(\"mouseover\",t.mouseover).on(\"mouseout\",t.mouseout)})}function n(t){return-t.width}function e(t){return-t.height}function r(t){return 2*t.width}function a(t){return 2*t.height}var i,u,o,s,c,d,f,l,g,p,h,y,m,v,A,x,k;return t.data=function(n){return arguments.length?(p=n,t):p},t.fill=function(n){return arguments.length?(h=n,t):h},t.keyPrimary=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:function(t){return t[0]}},t.sortPrimary=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:d3.ascending},t.keySecondary=function(n){return arguments.length?(u=n,t):\"undefined\"!=typeof u?u:function(t){return t[1]}},t.sortSecondary=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:d3.ascending},t.value=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:function(t){return t[2]}},t.width=function(n){return arguments.length?(s=n,t):\"undefined\"!=typeof s?s:400},t.height=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:600},t.barSize=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:35},t.min=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:0},t.orient=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:\"vertical\"},t.pad=function(n){return arguments.length?(g=n,t):\"undefined\"!=typeof g?g:0},t.duration=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:500},t.edgeOpacity=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:.4},t.edgeMode=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:\"curved\"},t.bars=function(n){function e(t,e){return\"undefined\"==typeof n||n.part===e||d[n.part](t)===n.key}function r(){var n=t.min()/2;s.primary.forEach(function(t){t.height<n&&(t.height=n)}),s.secondary.forEach(function(t){t.height<n&&(t.height=n)})}function a(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data()),i=o(a,t.pad(),t.min(),0,\"vertical\"==f?t.height():t.width()),u=t.barSize();a.forEach(function(e,r){s[n].push({x:\"horizontal\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.width()-u/2,y:\"vertical\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.height()-u/2,height:\"vertical\"==f?(i[r].e-i[r].s)/2:u/2,width:\"horizontal\"==f?(i[r].e-i[r].s)/2:u/2,part:n,key:e.key,value:e.value,percent:i[r].p})})}function i(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.map(s[n],function(t){return t.key}),i=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).key(\"secondary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"secondary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data());i.forEach(function(e){var r=a.get(e.key),i=o(e.values,0,0,\"vertical\"==f?r.y-r.height:r.x-r.width,\"vertical\"==f?r.y+r.height:r.x+r.width),u=t.barSize();e.values.forEach(function(a,o){c[n].push({x:\"vertical\"==f?\"primary\"==n?u/2:t.width()-u/2:(i[o].s+i[o].e)/2,y:\"horizontal\"==f?\"primary\"==n?u/2:t.height()-u/2:(i[o].s+i[o].e)/2,height:(\"vertical\"==f?i[o].e-i[o].s:u)/2,width:(\"horizontal\"==f?i[o].e-i[o].s:u)/2,part:n,primary:\"primary\"==n?e.key:a.key,secondary:\"primary\"==n?a.key:e.key,value:a.value,percent:i[o].p*r.percent,index:\"primary\"==n?e.key+\"|\"+a.key:a.key+\"|\"+e.key})})})}function u(){function n(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(t+e)/2,d=(i+o)/2;return[\"M\",t,\",\",n,\"C\",c,\",\",n,\" \",c,\",\",r,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",d,\",\",u,\" \",d,\",\",s,\",\",o,\",\",s,\"z\"].join(\"\")}function e(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(n+r)/2,d=(u+s)/2;return[\"M\",t,\",\",n,\"C\",t,\",\",c,\" \",e,\",\",c,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",i,\",\",d,\" \",o,\",\",d,\",\",o,\",\",s,\"z\"].join(\"\")}var r=d3.map(c.secondary,function(t){return t.index}),a=t.edgeMode();return c.primary.map(function(t){var a=r.get(t.index);return{path:\"vertical\"===f?n(t.x+t.width,t.y+t.height,a.x-a.width,a.y+a.height,a.x-a.width,a.y-a.height,t.x+t.width,t.y-t.height):e(t.x-t.width,t.y+t.height,a.x-a.width,a.y-a.height,a.x+a.width,a.y-a.height,t.x+t.width,t.y+t.height),primary:t.primary,secondary:t.secondary,value:t.value,percent:t.percent}})}function o(t,n,e,r,a){var i=e/(a-r-2*t.length*n),u=0,o=0,s=d3.sum(t,function(t){return t.value});t.forEach(function(t){t.value<i*s&&(u+=1,o+=t.value)});var c=1e-5>s?0:(a-r-2*t.length*n-u*e)/(s-o),d=r,f=[];return t.forEach(function(t){var r=t.value*c;f.push({s:d+n+(e>r?.5*(e-r):0),e:d+n+(e>r?.5*(e+r):r),p:1e-5>s?0:t.value/s}),d+=2*n+(e>r?e:r)}),f}var s={primary:[],secondary:[]},c={primary:[],secondary:[]},d={primary:t.keyPrimary(),secondary:t.keySecondary()},f=t.orient();return a(\"primary\"),a(\"secondary\"),i(\"primary\"),i(\"secondary\"),r(),{mainBars:s.primary.concat(s.secondary),subBars:c.primary.concat(c.secondary),edges:u()}},t.mouseover=function(i){var u=t.bars(i);y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",1),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);var o=y.selectAll(\".edges\").data(u.edges);o.filter(function(t){return t[i.part]===i.key}).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),o.filter(function(t){return t[i.part]!==i.key}).transition().duration(t.duration()).style(\"fill-opacity\",0).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t.mouseout=function(i){var u=t.bars();y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",0),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a),y.selectAll(\".edges\").data(u.edges).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t},u.gg=function(){function t(n){g=n,n.each(function(){var n=d3.select(this),e=t.scale(),r=t.minorTickStart(),a=t.minorTickEnd(),i=t.majorTickStart(),u=t.majorTickEnd(),o=t.ticks(),c=t.majorTicks(),d=t.labelLocation(),f=t.outerRadius();n.append(\"circle\").attr(\"r\",f).style(\"fill\",\"url(#vizgg3\"+p+\")\").attr(\"class\",\"face\"),n.append(\"circle\").attr(\"r\",t.innerRadius()).style(\"fill\",\"url(#vizgg2\"+p+\")\").style(\"filter\",\"url(#vizgg5\"+p+\")\").attr(\"class\",\"innerFace\");var l=n.append(\"g\");l.selectAll(\"line\").data(o).enter().append(\"line\").attr(\"class\",function(t){return c(t)?\"majorTicks\":\"minorTicks\"}).attr(\"x1\",function(t){return f*(c(t)?i:r)*Math.cos(e(t))}).attr(\"y1\",function(t){return f*(c(t)?i:r)*Math.sin(e(t))}).attr(\"x2\",function(t){return f*(c(t)?u:a)*Math.cos(e(t))}).attr(\"y2\",function(t){return f*(c(t)?u:a)*Math.sin(e(t))}),n.selectAll(\"text\").data(o.filter(c)).enter().append(\"text\").attr(\"class\",\"label\").attr(\"x\",function(t){return f*d*Math.cos(e(t))}).attr(\"y\",function(t){return f*d*Math.sin(e(t))}).attr(\"dy\",3).text(function(t){return t});var g=t.outerRadius()/b.outerRadius,h=180*t.scale()(t.value())/s+90;n.append(\"g\").attr(\"transform\",\"translate(1,1)\").selectAll(\".needleshadow\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needleshadow\").append(\"path\").attr(\"d\",[\"m 0\",-130*g,5*g,175*g,-10*g,\"0,z\"].join(\",\")).style(\"filter\",\"url(#vizgg6\"+p+\")\"),n.selectAll(\".needle\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needle\").append(\"polygon\").attr(\"points\",[-.5*g,-130*g,.5*g,-130*g,5*g,45*g,-5*g,45*g].join(\",\")).style(\"fill\",\"url(#vizgg4\"+p+\")\")})}var n,e,r,a,i,o,c,d,f,l,g,p,h,y,m,v,A,x,k,b={innerRadius:20,outerRadius:150,angleOffset:.7,startAngle:-1.5*s,endAngle:.5*s,minorTickStart:.9,minorTickEnd:.95,majorTickStart:.82,majorTickEnd:.95,needleColor:\"#de2c2c\",innerFaceColor:\"#999999\",faceColor:\"#666666\",domain:[0,100],duration:500,ease:\"cubicInOut\",ticks:d3.range(0,101,2),majorTicks:function(t){return t%10===0},labelLocation:.7};return t.scale=function(){return d3.scale.linear().domain(t.domain()).range([b.startAngle+t.angleOffset(),b.endAngle-t.angleOffset()])},t.innerRadius=function(e){return arguments.length?(n=e,t):\"undefined\"!=typeof n?n:b.innerRadius},t.outerRadius=function(n){return arguments.length?(e=n,t):\"undefined\"!=typeof e?e:b.outerRadius},t.angleOffset=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:b.angleOffset},t.labelLocation=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:b.labelLocation},t.ticks=function(n){return arguments.length?(h=n,t):\"undefined\"!=typeof h?h:b.ticks},t.majorTicks=function(n){return arguments.length?(y=n,t):\"undefined\"!=typeof y?y:b.majorTicks},t.minorTickStart=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:b.minorTickStart},t.minorTickEnd=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:b.minorTickEnd},t.majorTickStart=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:b.majorTickStart},t.majorTickEnd=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:b.majorTickEnd},t.needleColor=function(n){return arguments.length?(r=n,t):\"undefined\"!=typeof r?r:b.needleColor},t.innerFaceColor=function(n){return arguments.length?(a=n,t):\"undefined\"!=typeof a?a:b.innerFaceColor},t.faceColor=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:b.faceColor},t.domain=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:b.domain},t.duration=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:b.duration},t.ease=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:b.ease},t.value=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:.5*(b.domain[0]+b.domain[1])},t.defs=function(n,e){var r=n.append(\"defs\");p=e;var a=t.needleColor(),i=t.innerFaceColor(),o=t.faceColor(),s=u.defs(r).lG().id(\"vizgg1\"+e).sel();u.defs(s).stop().offset(\"0\").stopColor(a),u.defs(s).stop().offset(\"1\").stopColor(d3.rgb(a).darker(1));var c=u.defs(r).rG().id(\"vizgg2\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(c).stop().offset(\"0\").stopColor(i),u.defs(c).stop().offset(\"1\").stopColor(d3.rgb(i).darker(2));var d=u.defs(r).rG().id(\"vizgg3\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(d).stop().offset(\"0\").stopColor(o),u.defs(d).stop().offset(\"1\").stopColor(d3.rgb(o).darker(2)),u.defs(r).lG().id(\"vizgg4\"+e).gradientUnits(\"userSpaceOnUse\").y1(\"80\").x1(\"-10\").y2(\"80\").x2(\"10\").xlink(\"#vizgg1\"+e);var f=u.defs(r).filter().id(\"vizgg5\"+e).sel();u.defs(f).feFlood().result(\"flood\").floodColor(\"rgb(0,0,0)\").floodOpacity(\"0.6\"),u.defs(f).feComposite().result(\"composite1\").operator(\"in\").in2(\"SourceGraphic\")[\"in\"](\"flood\"),u.defs(f).feGaussianBlur().result(\"blur\").stdDeviation(\"2\")[\"in\"](\"composite1\"),u.defs(f).feOffset().result(\"offset\").dy(\"2\").dx(\"2\"),u.defs(f).feComposite().result(\"composite2\").operator(\"over\").in2(\"offset\")[\"in\"](\"SourceGraphic\");var l=u.defs(r).filter().x(\"-0.3\").y(\"-0.3\").height(\"1.8\").width(\"1.8\").id(\"vizgg6\"+e).sel();u.defs(l).feGaussianBlur().stdDeviation(\"2\")},t.setNeedle=function(n){function e(t,n){return d3.interpolateString(\"rotate(\"+t+\")\",\"rotate(\"+n+\")\")}var r=180*t.scale()(n)/s+90,a=180*t.scale()(t.value())/s+90,i=t.ease();g.selectAll(\".needle\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i),g.selectAll(\".needleshadow\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i).each(\"end\",function(){angle=n}),t.value(n)},t},u.ch=function(){function u(t){function n(t){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}p=t,k||f(),t.each(function(){var t=d3.select(this),r=t.selectAll(\".groups\").data(x).enter().append(\"g\").attr(\"class\",\"groups\").on(\"mouseover\",u.mouseover).on(\"mouseout\",u.mouseout),a=r.append(\"text\").attr(\"class\",\"label\"),i=(1+u.labelPadding())*u.outerRadius(),s=u.valueFormat();a.filter(function(t){return\"g\"==t.type}).attr(\"x\",function(t){return i*Math.cos(d(t))}).attr(\"y\",function(t){return i*Math.sin(d(t))}).text(function(t){return t.source+\" (\"+s(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"}).each(function(t){this._current=t}),r.append(\"path\").style(\"fill\",function(t){return y(t.source)}).style(\"stroke\",function(t){return y(t.source)}).attr(\"d\",n).each(function(t){this._current=t}).filter(function(t){return\"g\"==t.type}),t.append(\"g\").attr(\"class\",\"chords\").selectAll(\".chord\").data(k).enter().append(\"g\").attr(\"class\",\"chord\").append(\"path\").each(function(t){this._current=t}).attr(\"d\",e).style(\"fill\",function(t){return y(t.target)}).style(\"opacity\",u.chordOpacity()).style(\"stroke\",function(t){return y(t.target)}).style(\"display\",function(t){return t.display?\"inline\":\"none\"})})}function s(t){function n(t,n){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}function i(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return e(n(t))}}function s(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return n(e(t),t)}}function f(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.cos(d(n(t)))}}function l(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.sin(d(n(t)))}}var g=p.selectAll(\".groups\").data(t?b:u.groups()),h=(1+u.labelPadding())*u.outerRadius(),y=u.valueFormat();g.select(\"path\").transition().duration(L).attrTween(\"d\",s),g.select(\".label\").filter(function(t){return\"g\"==t.type}).transition().duration(L).attrTween(\"x\",f).attrTween(\"y\",l).text(function(t){return t.source+\" (\"+y(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"});var m=u.chordOpacity();p.select(\".chords\").selectAll(\".chord\").data(t?w:u.chords()).select(\"path\").transition().duration(L).attrTween(\"d\",i).style(\"opacity\",function(t){return t.display?m:0})}function d(n){return t((n.startAngle+n.endAngle)/2)}function f(){m=[],h.forEach(function(t){-1==m.indexOf(E(t))&&m.push(E(t)),-1==m.indexOf(M(t))&&m.push(M(t))}),m=m.sort(T),v={},A={},m.forEach(function(t){v[t]={},A[t]={},m.forEach(function(n){v[t][n]=0,A[t][n]=!1})}),h.forEach(function(t){var n=E(t),e=M(t);v[n][e]+=S(t),A[n][e]=!0}),x=[],m.forEach(function(t,n){x.push({source:t,type:\"gs\",value:0,skipPad:!0,index:n}),x.push({source:t,type:\"g\",value:d3.sum(m,function(n){return v[t][n]}),skipPad:!1,index:n})}),g(x,z,R,void 0,P),k=[],x.filter(function(t){return\"g\"==t.type}).forEach(function(t,n){var r=i(m.length,n),a=e(r.map(function(n){return v[t.source][m[n]]}),0,0,t.startAngle,t.endAngle);r.forEach(function(e,r){var i=a[r];k.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:t.source,target:m[e],type:\"c\",display:A[t.source][m[e]],index:n,subindex:e,indexsubindex:n+\"-\"+e})})});var t=d3.map(k,function(t){return t.indexsubindex});k.forEach(function(n){if(n.subindex==n.index)return n.endStartAngle=n.startAngle,void(n.endEndAngle=n.startAngle);var e=t.get(n.subindex+\"-\"+n.index);n.endStartAngle=e.startAngle,n.endEndAngle=e.startAngle}),F=!1}function l(t){function n(t){return t.endAngle+t.startAngle}var r=x.filter(function(n){return n.source==t&&\"g\"==n.type})[0];b=[],m.forEach(function(n,e){b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"gs\",value:n==t?v[n][n]:0,skipPad:n==t&&A[n][n]?!1:!0,index:e}),n==t?b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"g\",value:r.value,skipPad:!1,index:e}):b.push({source:n,type:\"g\",value:v[t][n],skipPad:!1,index:e})}),g(b,z,R,t,P);var a=n(r);x.forEach(function(t,e){var r=b[e],i=n(t)<a;r.startAngle-=i?o:0,r.endAngle-=i?o:0}),w=[],b.filter(function(t){return\"g\"==t.type}).forEach(function(n,r){var a=i(m.length,r),u=a.map(function(e){var r=m[e];return n.source==t?v[n.source][r]:r==t?v[r][n.source]:0}),o=e(u,0,0,n.startAngle,n.endAngle);a.forEach(function(e,a){var i=o[a];w.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:n.source,target:m[e],type:\"c\",display:n.source===t,index:r,subindex:e,indexsubindex:r+\"-\"+e})})});var u=d3.map(w.map(function(t){return{startAngle:t.startAngle,endAngle:t.endAngle,indexsubindex:t.indexsubindex}}),function(t){return t.indexsubindex}),s=d3.map(b.filter(function(t){return\"gs\"==t.type}),function(t){return t.source});w.forEach(function(n){if(n.subindex==n.index){var e=s.get(n.source);return n.endStartAngle=e.startAngle,void(n.endEndAngle=e.endAngle)}var r=u.get(n.subindex+\"-\"+n.index);n.endStartAngle=r.startAngle,n.endEndAngle=r.endAngle,n.source!==t&&(n.startAngle=n.endAngle,n.endEndAngle=n.endStartAngle)})}function g(t,e,r,a,i){var u=void 0!==a,o=0;if(u){for(var s=!1;o<t.length;o++)if(t[o].source==a&&\"g\"==t[o].type){s=!0;break}s||console.log(\"The fixed source '\"+a+\"' is not a valid key\")}var c=d3.range(t.length);u&&(c=c.slice(o).concat(c.slice(0,o)));var d=t.filter(function(t){return!(u&&t.source===a&&\"g\"==t.type||t.skipPad)}).map(function(t){return t.value}),f=2*Math.PI-(u?t[o].endAngle-t[o].startAngle+2*e:0),l=u?t[o].endAngle+e:i,g=d3.sum(d),p=n(d,e,r,0>=f?0:f,g,u?!0:!1);c.slice(u?1:0).forEach(function(n){var a=p*t[n].value,i=(r>a?r-a:0)/2;t[n].startAngle=l,t[n].endAngle=l+a,t[n].padAngle=i,t[n].percent=t[n].value/(g||1),l+=a+i+(t[n].skipPad?0:e)})}var p,h,y,m,v,A,x,k,b,w,E=function(t){return t[0]},M=function(t){return t[1]},S=function(t){return t[2]},C=function(t){return t},T=d3.ascending,z=.03,P=0,B=180,O=200,j=.7,G=.02,R=0,L=500,F=!0;return u.data=function(t){return arguments.length?(h=t,F=!0,u):h},u.fill=function(t){return arguments.length?(y=t,u):y},u.duration=function(t){return arguments.length?(L=t,u):L},u.chordOpacity=function(t){return arguments.length?(j=t,u):j},u.innerRadius=function(t){return arguments.length?(B=t,F=!0,u):B},u.outerRadius=function(t){return arguments.length?(O=t,F=!0,u):O},u.source=function(t){return arguments.length?(E=t,F=!0,u):E},u.target=function(t){return arguments.length?(M=t,F=!0,u):M},u.value=function(t){return arguments.length?(S=t,F=!0,u):S},u.padding=function(t){return arguments.length?(z=t,F=!0,u):z},u.labelPadding=function(t){return arguments.length?(G=t,u):G},u.sort=function(t){return arguments.length?(T=t,F=!0,u):T},u.startAngle=function(t){return arguments.length?(P=t,F=!0,u):P},u.chords=function(){return F&&f(),k},u.groups=function(){return F&&f(),x},u.valueFormat=function(t){return arguments.length?(C=t,u):C},u.mouseover=function(t){l(t.source),s(1)},u.mouseout=function(t){s(0)},u},u.defs=function(t){var n={},e=t;return n.sel=function(){return e},n.lG=function(){return e=e.append(\"linearGradient\"),n},n.rG=function(){return e=e.append(\"radialGradient\"),n},n.stop=function(){return e=e.append(\"stop\"),n},n.filter=function(){return e=e.append(\"filter\"),n},n.feFlood=function(){return e=e.append(\"feFlood\"),n},n.feComposite=function(){return e=e.append(\"feComposite\"),n},n.feOffset=function(){return e=e.append(\"feOffset\"),n},n.feGaussianBlur=function(){return e=e.append(\"feGaussianBlur\"),n},n.result=function(t){return e=e.attr(\"result\",t),n},n.floodColor=function(t){return e=e.attr(\"flood-color\",t),n},n.floodOpacity=function(t){return e=e.attr(\"flood-opacity\",t),n},n.stdDeviation=function(t){return e=e.attr(\"stdDeviation\",t),n},n.operator=function(t){return e=e.attr(\"operator\",t),n},n.height=function(t){return e=e.attr(\"height\",t),n},n.width=function(t){return e=e.attr(\"width\",t),n},n[\"in\"]=function(t){return e=e.attr(\"in\",t),n},n.in2=function(t){return e=e.attr(\"in2\",t),n},n.id=function(t){return e=e.attr(\"id\",t),n},n.fx=function(t){return e=e.attr(\"fx\",t),n},n.fy=function(t){return e=e.attr(\"fy\",t),n},n.dx=function(t){return e=e.attr(\"dx\",t),n},n.dy=function(t){return e=e.attr(\"dy\",t),n},n.x1=function(t){return e=e.attr(\"x1\",t),n},n.y1=function(t){return e=e.attr(\"y1\",t),n},n.x2=function(t){return e=e.attr(\"x2\",t),n},n.y2=function(t){return e=e.attr(\"y2\",t),n},n.x=function(t){return e=e.attr(\"x\",t),n},n.y=function(t){return e=e.attr(\"y\",t),n},n.r=function(t){return e=e.attr(\"r\",t),n},n.spreadMethod=function(t){return e=e.attr(\"spreadMethod\",t),n},n.gradientUnits=function(t){return e=e.attr(\"gradientUnits\",t),n},n.xlink=function(t){return e=e.attr(\"xlink:href\",t),n},n.offset=function(t){return e=e.attr(\"offset\",t),n},n.stopColor=function(t){return e=e.attr(\"stop-color\",t),n},n.path=function(){return e=e.append(\"path\"),n},n.d=function(t){return e=e.attr(\"d\",t),n},n},this.viz=u}();\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  demo3.js */\nvar data=[[\"plant1\",\"bee1\",6],\n[\"plant2\",\"bee1\",9],\n[\"plant3\",\"bee1\",3],\n[\"plant4\",\"bee1\",0],\n[\"plant1\",\"bee2\",0],\n[\"plant2\",\"bee2\",2],\n[\"plant3\",\"bee2\",0],\n[\"plant4\",\"bee2\",0],\n[\"plant1\",\"bee3\",0],\n[\"plant2\",\"bee3\",0],\n[\"plant3\",\"bee3\",0],\n[\"plant4\",\"bee3\",7]]\n\n\n\n function sort(sortOrder){\n                    return function(a,b){ return d3.ascending(sortOrder.indexOf(a),sortOrder.indexOf(b)) }\n                  }\nvar color = {'Unlinked ':'#3366CC','bee1':'#7FC97F','bee2':'#BEAED4','bee3':'#FDC086'};\n\n\n\n\nvar g1 = svg.append(\"g\").attr(\"transform\",\"translate(188,50)\");\n                         var bp1=viz.bP()\n                         .data(data)\n                         .value(d=>d[2])\n                         .min(10)\n                         .pad(1)\n                         .height(400)\n                         .width(200)\n                         .barSize(35)\n                         .fill(d=>color[d.secondary])\n.orient(\"vertical\");\n\ng1.call(bp1);g1.append(\"text\")\n                        .attr(\"x\",-50).attr(\"y\",-8)\n                        .style(\"text-anchor\",\"middle\")\n                        .text(\"Primary\");\n                        g1.append(\"text\")\n                        .attr(\"x\", 250)\n                        .attr(\"y\",-8).style(\"text-anchor\",\"middle\")\n                        .text(\"Secondary\");\n                        g1.append(\"text\")\n                        .attr(\"x\",100).attr(\"y\",-25)\n                        .style(\"text-anchor\",\"middle\")\n                        .attr(\"class\",\"header\")\n                        .text(\"meadow\");\n\n g1.selectAll(\".mainBars\")\n                        .on(\"mouseover\",mouseover)\n                        .on(\"mouseout\",mouseout);\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"label\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -27.2:24.8))\n                        .attr(\"y\",d=>+6)\n                        .text(d=>d.key)\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\"));\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"perc\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -141:144))\n                        .attr(\"y\",d=>+6)\n                        .text(function(d){ return d3.format(\"0.0%\")(d.percent)})\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\")); \n\nfunction mouseover(d){\nbp1.mouseover(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\n}\n\n                     function mouseout(d){\nbp1.mouseout(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\n}\n\n\n};","style":"/* R2D3 Source File:  demo3.css */\n .mainBars{\n    shape-rendering: auto;\n    fill-opacity: 1;\n    stroke-width: 0.5px;\n    stroke: rgb(0, 0, 0);\n    stroke-opacity: 0;\n  }\n    .subBars{\n    shape-rendering:crispEdges;\n    }\n    .edges{\n    stroke:none;\n    fill-opacity:0.3;\n    }\n    .label{\n    color:#000000;\n    }","version":5,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div id="monochrome-with-highlighting" class="section level3">
<h3>Monochrome, with highlighting</h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bipartite_D3</span>(SmallTestWeb, <span class="at">monoChromeCol =</span> <span class="st">&#39;BLUE&#39;</span>,<span class="at">HighlightLab =</span> <span class="st">&#39;plant2&#39;</span>,</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">HighlightCol =</span> <span class="st">&#39;PINK&#39;</span>, <span class="at">ColourBy =</span> <span class="dv">1</span> , <span class="at">filename =</span> <span class="st">&#39;demo4&#39;</span>)</span></code></pre></div>
<div id="htmlwidget-72d96df9f6b44a17d2cd" style="width:700px;height:700px;" class="r2d3 html-widget"></div>
<script type="application/json" data-for="htmlwidget-72d96df9f6b44a17d2cd">{"x":{"data":null,"type":"logical","container":"svg","options":null,"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n/* R2D3 Source File:  vizjs.js */\n!function(){function t(t){for(;t>o;)t-=o;for(;0>t;)t+=o;return t}function n(t,n,e,r,a,i){if(0>=a||0>=r)return 0;var u=t.concat().sort(d3.ascending),o=r-u.length*n+(i?n:0),s=[],c=0,d=0;return d3.range(u.length).forEach(function(t){d=(o-e*t)/(a-=u[t-1]||0),c+=u[t]*d<=e?1:0,s.push(d)}),s[c]}function e(t,e,r,a,i){var u=a,o=d3.sum(t),s=n(t,e,r,i-a,o,!1),c=t.map(function(t){var n=s*t,a=(r>n?r:n)/2;return u+=2*a+e,{c:u-a,v:n,w:a,value:t,percent:t/(o||1)}});return c}function r(t){function n(t,n){return[t*Math.cos(n),t*Math.sin(n)]}var e=n(t[0],t[2]),r=n(t[0],t[3]),a=n(t[1],t[2]),i=n(t[1],t[3]);return[\"M\",e,\"A\",t[0],t[0],\"0\",t[3]-t[2]>s?1:0,\"1\",r,\"L\",i,\"A\",t[1],t[1],\"0\",t[3]-t[2]>s?1:0,\"0\",a,\"z\"].join(\" \")}function a(t,n,e,r,a,i){function u(t,n,e){return\"A\"+t+\",\"+t+\" 0 \"+ +(e>s)+\",1 \"+n}function c(t,n){return[t*Math.cos(n),t*Math.sin(n)]}function d(t,n,e,r){e+=n>e?o:0;var a=e-n,i=1-(a>s?o-a:a)/s;i=Math.pow(i,5);var u=(e+n)/2-(e-n>s?s:0);return\"Q\"+i*r*Math.cos(u)+\",\"+i*r*Math.sin(u)+\" \"+t}var f=c(t,n),l=c(t,e),g=c(r,a),p=c(r,i);return\"M\"+f+u(t,l,e-n)+(n==a&&e==i?d(f,n,e,r):d(g,e,a,r)+u(r,p,i-a)+d(f,n,i,t))+\"Z\"}function i(t,n){ret=[];for(var e=n;e>n-t;e--)ret.push(0>e?e+t:e);return ret}var u={version:\"1.1.0\"},o=2*Math.PI,s=Math.PI,c=Math.PI/2;u.bP=function(){function t(i){y=i,i.each(function(){var i=d3.select(this),u=t.bars(),o=i.selectAll(\".subBars\").data(u.subBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"subBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);\"undefined\"!=typeof h&&o.style(\"fill\",function(t){return h(t)});var s=i.selectAll(\".edges\").data(u.edges).enter().append(\"path\").attr(\"class\",\"edges\").attr(\"d\",function(t){return t.path}).style(\"fill-opacity\",t.edgeOpacity());\"undefined\"!=typeof h&&s.style(\"fill\",function(t){return h(t)}),i.selectAll(\".mainBars\").data(u.mainBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"mainBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a).style(\"fill-opacity\",0).on(\"mouseover\",t.mouseover).on(\"mouseout\",t.mouseout)})}function n(t){return-t.width}function e(t){return-t.height}function r(t){return 2*t.width}function a(t){return 2*t.height}var i,u,o,s,c,d,f,l,g,p,h,y,m,v,A,x,k;return t.data=function(n){return arguments.length?(p=n,t):p},t.fill=function(n){return arguments.length?(h=n,t):h},t.keyPrimary=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:function(t){return t[0]}},t.sortPrimary=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:d3.ascending},t.keySecondary=function(n){return arguments.length?(u=n,t):\"undefined\"!=typeof u?u:function(t){return t[1]}},t.sortSecondary=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:d3.ascending},t.value=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:function(t){return t[2]}},t.width=function(n){return arguments.length?(s=n,t):\"undefined\"!=typeof s?s:400},t.height=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:600},t.barSize=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:35},t.min=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:0},t.orient=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:\"vertical\"},t.pad=function(n){return arguments.length?(g=n,t):\"undefined\"!=typeof g?g:0},t.duration=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:500},t.edgeOpacity=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:.4},t.edgeMode=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:\"curved\"},t.bars=function(n){function e(t,e){return\"undefined\"==typeof n||n.part===e||d[n.part](t)===n.key}function r(){var n=t.min()/2;s.primary.forEach(function(t){t.height<n&&(t.height=n)}),s.secondary.forEach(function(t){t.height<n&&(t.height=n)})}function a(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data()),i=o(a,t.pad(),t.min(),0,\"vertical\"==f?t.height():t.width()),u=t.barSize();a.forEach(function(e,r){s[n].push({x:\"horizontal\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.width()-u/2,y:\"vertical\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.height()-u/2,height:\"vertical\"==f?(i[r].e-i[r].s)/2:u/2,width:\"horizontal\"==f?(i[r].e-i[r].s)/2:u/2,part:n,key:e.key,value:e.value,percent:i[r].p})})}function i(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.map(s[n],function(t){return t.key}),i=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).key(\"secondary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"secondary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data());i.forEach(function(e){var r=a.get(e.key),i=o(e.values,0,0,\"vertical\"==f?r.y-r.height:r.x-r.width,\"vertical\"==f?r.y+r.height:r.x+r.width),u=t.barSize();e.values.forEach(function(a,o){c[n].push({x:\"vertical\"==f?\"primary\"==n?u/2:t.width()-u/2:(i[o].s+i[o].e)/2,y:\"horizontal\"==f?\"primary\"==n?u/2:t.height()-u/2:(i[o].s+i[o].e)/2,height:(\"vertical\"==f?i[o].e-i[o].s:u)/2,width:(\"horizontal\"==f?i[o].e-i[o].s:u)/2,part:n,primary:\"primary\"==n?e.key:a.key,secondary:\"primary\"==n?a.key:e.key,value:a.value,percent:i[o].p*r.percent,index:\"primary\"==n?e.key+\"|\"+a.key:a.key+\"|\"+e.key})})})}function u(){function n(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(t+e)/2,d=(i+o)/2;return[\"M\",t,\",\",n,\"C\",c,\",\",n,\" \",c,\",\",r,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",d,\",\",u,\" \",d,\",\",s,\",\",o,\",\",s,\"z\"].join(\"\")}function e(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(n+r)/2,d=(u+s)/2;return[\"M\",t,\",\",n,\"C\",t,\",\",c,\" \",e,\",\",c,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",i,\",\",d,\" \",o,\",\",d,\",\",o,\",\",s,\"z\"].join(\"\")}var r=d3.map(c.secondary,function(t){return t.index}),a=t.edgeMode();return c.primary.map(function(t){var a=r.get(t.index);return{path:\"vertical\"===f?n(t.x+t.width,t.y+t.height,a.x-a.width,a.y+a.height,a.x-a.width,a.y-a.height,t.x+t.width,t.y-t.height):e(t.x-t.width,t.y+t.height,a.x-a.width,a.y-a.height,a.x+a.width,a.y-a.height,t.x+t.width,t.y+t.height),primary:t.primary,secondary:t.secondary,value:t.value,percent:t.percent}})}function o(t,n,e,r,a){var i=e/(a-r-2*t.length*n),u=0,o=0,s=d3.sum(t,function(t){return t.value});t.forEach(function(t){t.value<i*s&&(u+=1,o+=t.value)});var c=1e-5>s?0:(a-r-2*t.length*n-u*e)/(s-o),d=r,f=[];return t.forEach(function(t){var r=t.value*c;f.push({s:d+n+(e>r?.5*(e-r):0),e:d+n+(e>r?.5*(e+r):r),p:1e-5>s?0:t.value/s}),d+=2*n+(e>r?e:r)}),f}var s={primary:[],secondary:[]},c={primary:[],secondary:[]},d={primary:t.keyPrimary(),secondary:t.keySecondary()},f=t.orient();return a(\"primary\"),a(\"secondary\"),i(\"primary\"),i(\"secondary\"),r(),{mainBars:s.primary.concat(s.secondary),subBars:c.primary.concat(c.secondary),edges:u()}},t.mouseover=function(i){var u=t.bars(i);y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",1),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);var o=y.selectAll(\".edges\").data(u.edges);o.filter(function(t){return t[i.part]===i.key}).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),o.filter(function(t){return t[i.part]!==i.key}).transition().duration(t.duration()).style(\"fill-opacity\",0).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t.mouseout=function(i){var u=t.bars();y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",0),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a),y.selectAll(\".edges\").data(u.edges).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t},u.gg=function(){function t(n){g=n,n.each(function(){var n=d3.select(this),e=t.scale(),r=t.minorTickStart(),a=t.minorTickEnd(),i=t.majorTickStart(),u=t.majorTickEnd(),o=t.ticks(),c=t.majorTicks(),d=t.labelLocation(),f=t.outerRadius();n.append(\"circle\").attr(\"r\",f).style(\"fill\",\"url(#vizgg3\"+p+\")\").attr(\"class\",\"face\"),n.append(\"circle\").attr(\"r\",t.innerRadius()).style(\"fill\",\"url(#vizgg2\"+p+\")\").style(\"filter\",\"url(#vizgg5\"+p+\")\").attr(\"class\",\"innerFace\");var l=n.append(\"g\");l.selectAll(\"line\").data(o).enter().append(\"line\").attr(\"class\",function(t){return c(t)?\"majorTicks\":\"minorTicks\"}).attr(\"x1\",function(t){return f*(c(t)?i:r)*Math.cos(e(t))}).attr(\"y1\",function(t){return f*(c(t)?i:r)*Math.sin(e(t))}).attr(\"x2\",function(t){return f*(c(t)?u:a)*Math.cos(e(t))}).attr(\"y2\",function(t){return f*(c(t)?u:a)*Math.sin(e(t))}),n.selectAll(\"text\").data(o.filter(c)).enter().append(\"text\").attr(\"class\",\"label\").attr(\"x\",function(t){return f*d*Math.cos(e(t))}).attr(\"y\",function(t){return f*d*Math.sin(e(t))}).attr(\"dy\",3).text(function(t){return t});var g=t.outerRadius()/b.outerRadius,h=180*t.scale()(t.value())/s+90;n.append(\"g\").attr(\"transform\",\"translate(1,1)\").selectAll(\".needleshadow\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needleshadow\").append(\"path\").attr(\"d\",[\"m 0\",-130*g,5*g,175*g,-10*g,\"0,z\"].join(\",\")).style(\"filter\",\"url(#vizgg6\"+p+\")\"),n.selectAll(\".needle\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needle\").append(\"polygon\").attr(\"points\",[-.5*g,-130*g,.5*g,-130*g,5*g,45*g,-5*g,45*g].join(\",\")).style(\"fill\",\"url(#vizgg4\"+p+\")\")})}var n,e,r,a,i,o,c,d,f,l,g,p,h,y,m,v,A,x,k,b={innerRadius:20,outerRadius:150,angleOffset:.7,startAngle:-1.5*s,endAngle:.5*s,minorTickStart:.9,minorTickEnd:.95,majorTickStart:.82,majorTickEnd:.95,needleColor:\"#de2c2c\",innerFaceColor:\"#999999\",faceColor:\"#666666\",domain:[0,100],duration:500,ease:\"cubicInOut\",ticks:d3.range(0,101,2),majorTicks:function(t){return t%10===0},labelLocation:.7};return t.scale=function(){return d3.scale.linear().domain(t.domain()).range([b.startAngle+t.angleOffset(),b.endAngle-t.angleOffset()])},t.innerRadius=function(e){return arguments.length?(n=e,t):\"undefined\"!=typeof n?n:b.innerRadius},t.outerRadius=function(n){return arguments.length?(e=n,t):\"undefined\"!=typeof e?e:b.outerRadius},t.angleOffset=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:b.angleOffset},t.labelLocation=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:b.labelLocation},t.ticks=function(n){return arguments.length?(h=n,t):\"undefined\"!=typeof h?h:b.ticks},t.majorTicks=function(n){return arguments.length?(y=n,t):\"undefined\"!=typeof y?y:b.majorTicks},t.minorTickStart=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:b.minorTickStart},t.minorTickEnd=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:b.minorTickEnd},t.majorTickStart=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:b.majorTickStart},t.majorTickEnd=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:b.majorTickEnd},t.needleColor=function(n){return arguments.length?(r=n,t):\"undefined\"!=typeof r?r:b.needleColor},t.innerFaceColor=function(n){return arguments.length?(a=n,t):\"undefined\"!=typeof a?a:b.innerFaceColor},t.faceColor=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:b.faceColor},t.domain=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:b.domain},t.duration=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:b.duration},t.ease=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:b.ease},t.value=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:.5*(b.domain[0]+b.domain[1])},t.defs=function(n,e){var r=n.append(\"defs\");p=e;var a=t.needleColor(),i=t.innerFaceColor(),o=t.faceColor(),s=u.defs(r).lG().id(\"vizgg1\"+e).sel();u.defs(s).stop().offset(\"0\").stopColor(a),u.defs(s).stop().offset(\"1\").stopColor(d3.rgb(a).darker(1));var c=u.defs(r).rG().id(\"vizgg2\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(c).stop().offset(\"0\").stopColor(i),u.defs(c).stop().offset(\"1\").stopColor(d3.rgb(i).darker(2));var d=u.defs(r).rG().id(\"vizgg3\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(d).stop().offset(\"0\").stopColor(o),u.defs(d).stop().offset(\"1\").stopColor(d3.rgb(o).darker(2)),u.defs(r).lG().id(\"vizgg4\"+e).gradientUnits(\"userSpaceOnUse\").y1(\"80\").x1(\"-10\").y2(\"80\").x2(\"10\").xlink(\"#vizgg1\"+e);var f=u.defs(r).filter().id(\"vizgg5\"+e).sel();u.defs(f).feFlood().result(\"flood\").floodColor(\"rgb(0,0,0)\").floodOpacity(\"0.6\"),u.defs(f).feComposite().result(\"composite1\").operator(\"in\").in2(\"SourceGraphic\")[\"in\"](\"flood\"),u.defs(f).feGaussianBlur().result(\"blur\").stdDeviation(\"2\")[\"in\"](\"composite1\"),u.defs(f).feOffset().result(\"offset\").dy(\"2\").dx(\"2\"),u.defs(f).feComposite().result(\"composite2\").operator(\"over\").in2(\"offset\")[\"in\"](\"SourceGraphic\");var l=u.defs(r).filter().x(\"-0.3\").y(\"-0.3\").height(\"1.8\").width(\"1.8\").id(\"vizgg6\"+e).sel();u.defs(l).feGaussianBlur().stdDeviation(\"2\")},t.setNeedle=function(n){function e(t,n){return d3.interpolateString(\"rotate(\"+t+\")\",\"rotate(\"+n+\")\")}var r=180*t.scale()(n)/s+90,a=180*t.scale()(t.value())/s+90,i=t.ease();g.selectAll(\".needle\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i),g.selectAll(\".needleshadow\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i).each(\"end\",function(){angle=n}),t.value(n)},t},u.ch=function(){function u(t){function n(t){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}p=t,k||f(),t.each(function(){var t=d3.select(this),r=t.selectAll(\".groups\").data(x).enter().append(\"g\").attr(\"class\",\"groups\").on(\"mouseover\",u.mouseover).on(\"mouseout\",u.mouseout),a=r.append(\"text\").attr(\"class\",\"label\"),i=(1+u.labelPadding())*u.outerRadius(),s=u.valueFormat();a.filter(function(t){return\"g\"==t.type}).attr(\"x\",function(t){return i*Math.cos(d(t))}).attr(\"y\",function(t){return i*Math.sin(d(t))}).text(function(t){return t.source+\" (\"+s(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"}).each(function(t){this._current=t}),r.append(\"path\").style(\"fill\",function(t){return y(t.source)}).style(\"stroke\",function(t){return y(t.source)}).attr(\"d\",n).each(function(t){this._current=t}).filter(function(t){return\"g\"==t.type}),t.append(\"g\").attr(\"class\",\"chords\").selectAll(\".chord\").data(k).enter().append(\"g\").attr(\"class\",\"chord\").append(\"path\").each(function(t){this._current=t}).attr(\"d\",e).style(\"fill\",function(t){return y(t.target)}).style(\"opacity\",u.chordOpacity()).style(\"stroke\",function(t){return y(t.target)}).style(\"display\",function(t){return t.display?\"inline\":\"none\"})})}function s(t){function n(t,n){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}function i(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return e(n(t))}}function s(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return n(e(t),t)}}function f(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.cos(d(n(t)))}}function l(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.sin(d(n(t)))}}var g=p.selectAll(\".groups\").data(t?b:u.groups()),h=(1+u.labelPadding())*u.outerRadius(),y=u.valueFormat();g.select(\"path\").transition().duration(L).attrTween(\"d\",s),g.select(\".label\").filter(function(t){return\"g\"==t.type}).transition().duration(L).attrTween(\"x\",f).attrTween(\"y\",l).text(function(t){return t.source+\" (\"+y(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"});var m=u.chordOpacity();p.select(\".chords\").selectAll(\".chord\").data(t?w:u.chords()).select(\"path\").transition().duration(L).attrTween(\"d\",i).style(\"opacity\",function(t){return t.display?m:0})}function d(n){return t((n.startAngle+n.endAngle)/2)}function f(){m=[],h.forEach(function(t){-1==m.indexOf(E(t))&&m.push(E(t)),-1==m.indexOf(M(t))&&m.push(M(t))}),m=m.sort(T),v={},A={},m.forEach(function(t){v[t]={},A[t]={},m.forEach(function(n){v[t][n]=0,A[t][n]=!1})}),h.forEach(function(t){var n=E(t),e=M(t);v[n][e]+=S(t),A[n][e]=!0}),x=[],m.forEach(function(t,n){x.push({source:t,type:\"gs\",value:0,skipPad:!0,index:n}),x.push({source:t,type:\"g\",value:d3.sum(m,function(n){return v[t][n]}),skipPad:!1,index:n})}),g(x,z,R,void 0,P),k=[],x.filter(function(t){return\"g\"==t.type}).forEach(function(t,n){var r=i(m.length,n),a=e(r.map(function(n){return v[t.source][m[n]]}),0,0,t.startAngle,t.endAngle);r.forEach(function(e,r){var i=a[r];k.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:t.source,target:m[e],type:\"c\",display:A[t.source][m[e]],index:n,subindex:e,indexsubindex:n+\"-\"+e})})});var t=d3.map(k,function(t){return t.indexsubindex});k.forEach(function(n){if(n.subindex==n.index)return n.endStartAngle=n.startAngle,void(n.endEndAngle=n.startAngle);var e=t.get(n.subindex+\"-\"+n.index);n.endStartAngle=e.startAngle,n.endEndAngle=e.startAngle}),F=!1}function l(t){function n(t){return t.endAngle+t.startAngle}var r=x.filter(function(n){return n.source==t&&\"g\"==n.type})[0];b=[],m.forEach(function(n,e){b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"gs\",value:n==t?v[n][n]:0,skipPad:n==t&&A[n][n]?!1:!0,index:e}),n==t?b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"g\",value:r.value,skipPad:!1,index:e}):b.push({source:n,type:\"g\",value:v[t][n],skipPad:!1,index:e})}),g(b,z,R,t,P);var a=n(r);x.forEach(function(t,e){var r=b[e],i=n(t)<a;r.startAngle-=i?o:0,r.endAngle-=i?o:0}),w=[],b.filter(function(t){return\"g\"==t.type}).forEach(function(n,r){var a=i(m.length,r),u=a.map(function(e){var r=m[e];return n.source==t?v[n.source][r]:r==t?v[r][n.source]:0}),o=e(u,0,0,n.startAngle,n.endAngle);a.forEach(function(e,a){var i=o[a];w.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:n.source,target:m[e],type:\"c\",display:n.source===t,index:r,subindex:e,indexsubindex:r+\"-\"+e})})});var u=d3.map(w.map(function(t){return{startAngle:t.startAngle,endAngle:t.endAngle,indexsubindex:t.indexsubindex}}),function(t){return t.indexsubindex}),s=d3.map(b.filter(function(t){return\"gs\"==t.type}),function(t){return t.source});w.forEach(function(n){if(n.subindex==n.index){var e=s.get(n.source);return n.endStartAngle=e.startAngle,void(n.endEndAngle=e.endAngle)}var r=u.get(n.subindex+\"-\"+n.index);n.endStartAngle=r.startAngle,n.endEndAngle=r.endAngle,n.source!==t&&(n.startAngle=n.endAngle,n.endEndAngle=n.endStartAngle)})}function g(t,e,r,a,i){var u=void 0!==a,o=0;if(u){for(var s=!1;o<t.length;o++)if(t[o].source==a&&\"g\"==t[o].type){s=!0;break}s||console.log(\"The fixed source '\"+a+\"' is not a valid key\")}var c=d3.range(t.length);u&&(c=c.slice(o).concat(c.slice(0,o)));var d=t.filter(function(t){return!(u&&t.source===a&&\"g\"==t.type||t.skipPad)}).map(function(t){return t.value}),f=2*Math.PI-(u?t[o].endAngle-t[o].startAngle+2*e:0),l=u?t[o].endAngle+e:i,g=d3.sum(d),p=n(d,e,r,0>=f?0:f,g,u?!0:!1);c.slice(u?1:0).forEach(function(n){var a=p*t[n].value,i=(r>a?r-a:0)/2;t[n].startAngle=l,t[n].endAngle=l+a,t[n].padAngle=i,t[n].percent=t[n].value/(g||1),l+=a+i+(t[n].skipPad?0:e)})}var p,h,y,m,v,A,x,k,b,w,E=function(t){return t[0]},M=function(t){return t[1]},S=function(t){return t[2]},C=function(t){return t},T=d3.ascending,z=.03,P=0,B=180,O=200,j=.7,G=.02,R=0,L=500,F=!0;return u.data=function(t){return arguments.length?(h=t,F=!0,u):h},u.fill=function(t){return arguments.length?(y=t,u):y},u.duration=function(t){return arguments.length?(L=t,u):L},u.chordOpacity=function(t){return arguments.length?(j=t,u):j},u.innerRadius=function(t){return arguments.length?(B=t,F=!0,u):B},u.outerRadius=function(t){return arguments.length?(O=t,F=!0,u):O},u.source=function(t){return arguments.length?(E=t,F=!0,u):E},u.target=function(t){return arguments.length?(M=t,F=!0,u):M},u.value=function(t){return arguments.length?(S=t,F=!0,u):S},u.padding=function(t){return arguments.length?(z=t,F=!0,u):z},u.labelPadding=function(t){return arguments.length?(G=t,u):G},u.sort=function(t){return arguments.length?(T=t,F=!0,u):T},u.startAngle=function(t){return arguments.length?(P=t,F=!0,u):P},u.chords=function(){return F&&f(),k},u.groups=function(){return F&&f(),x},u.valueFormat=function(t){return arguments.length?(C=t,u):C},u.mouseover=function(t){l(t.source),s(1)},u.mouseout=function(t){s(0)},u},u.defs=function(t){var n={},e=t;return n.sel=function(){return e},n.lG=function(){return e=e.append(\"linearGradient\"),n},n.rG=function(){return e=e.append(\"radialGradient\"),n},n.stop=function(){return e=e.append(\"stop\"),n},n.filter=function(){return e=e.append(\"filter\"),n},n.feFlood=function(){return e=e.append(\"feFlood\"),n},n.feComposite=function(){return e=e.append(\"feComposite\"),n},n.feOffset=function(){return e=e.append(\"feOffset\"),n},n.feGaussianBlur=function(){return e=e.append(\"feGaussianBlur\"),n},n.result=function(t){return e=e.attr(\"result\",t),n},n.floodColor=function(t){return e=e.attr(\"flood-color\",t),n},n.floodOpacity=function(t){return e=e.attr(\"flood-opacity\",t),n},n.stdDeviation=function(t){return e=e.attr(\"stdDeviation\",t),n},n.operator=function(t){return e=e.attr(\"operator\",t),n},n.height=function(t){return e=e.attr(\"height\",t),n},n.width=function(t){return e=e.attr(\"width\",t),n},n[\"in\"]=function(t){return e=e.attr(\"in\",t),n},n.in2=function(t){return e=e.attr(\"in2\",t),n},n.id=function(t){return e=e.attr(\"id\",t),n},n.fx=function(t){return e=e.attr(\"fx\",t),n},n.fy=function(t){return e=e.attr(\"fy\",t),n},n.dx=function(t){return e=e.attr(\"dx\",t),n},n.dy=function(t){return e=e.attr(\"dy\",t),n},n.x1=function(t){return e=e.attr(\"x1\",t),n},n.y1=function(t){return e=e.attr(\"y1\",t),n},n.x2=function(t){return e=e.attr(\"x2\",t),n},n.y2=function(t){return e=e.attr(\"y2\",t),n},n.x=function(t){return e=e.attr(\"x\",t),n},n.y=function(t){return e=e.attr(\"y\",t),n},n.r=function(t){return e=e.attr(\"r\",t),n},n.spreadMethod=function(t){return e=e.attr(\"spreadMethod\",t),n},n.gradientUnits=function(t){return e=e.attr(\"gradientUnits\",t),n},n.xlink=function(t){return e=e.attr(\"xlink:href\",t),n},n.offset=function(t){return e=e.attr(\"offset\",t),n},n.stopColor=function(t){return e=e.attr(\"stop-color\",t),n},n.path=function(){return e=e.append(\"path\"),n},n.d=function(t){return e=e.attr(\"d\",t),n},n},this.viz=u}();\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  demo4.js */\nvar data=[[\"plant1\",\"bee1\",6],\n[\"plant2\",\"bee1\",9],\n[\"plant3\",\"bee1\",3],\n[\"plant4\",\"bee1\",0],\n[\"plant1\",\"bee2\",0],\n[\"plant2\",\"bee2\",2],\n[\"plant3\",\"bee2\",0],\n[\"plant4\",\"bee2\",0],\n[\"plant1\",\"bee3\",0],\n[\"plant2\",\"bee3\",0],\n[\"plant3\",\"bee3\",0],\n[\"plant4\",\"bee3\",7]]\n\n\n\n function sort(sortOrder){\n                    return function(a,b){ return d3.ascending(sortOrder.indexOf(a),sortOrder.indexOf(b)) }\n                  }\nvar color = {'plant2':'PINK','plant1':'BLUE','plant3':'BLUE','plant4':'BLUE'};\n\n\n\n\nvar g1 = svg.append(\"g\").attr(\"transform\",\"translate(188,50)\");\n                         var bp1=viz.bP()\n                         .data(data)\n                         .value(d=>d[2])\n                         .min(10)\n                         .pad(1)\n                         .height(400)\n                         .width(200)\n                         .barSize(35)\n                         .fill(d=>color[d.primary])\n.orient(\"vertical\");\n\ng1.call(bp1);g1.append(\"text\")\n                        .attr(\"x\",-50).attr(\"y\",-8)\n                        .style(\"text-anchor\",\"middle\")\n                        .text(\"Primary\");\n                        g1.append(\"text\")\n                        .attr(\"x\", 250)\n                        .attr(\"y\",-8).style(\"text-anchor\",\"middle\")\n                        .text(\"Secondary\");\n                        g1.append(\"text\")\n                        .attr(\"x\",100).attr(\"y\",-25)\n                        .style(\"text-anchor\",\"middle\")\n                        .attr(\"class\",\"header\")\n                        .text(\"meadow\");\n\n g1.selectAll(\".mainBars\")\n                        .on(\"mouseover\",mouseover)\n                        .on(\"mouseout\",mouseout);\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"label\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -27.2:24.8))\n                        .attr(\"y\",d=>+6)\n                        .text(d=>d.key)\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\"));\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"perc\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -141:144))\n                        .attr(\"y\",d=>+6)\n                        .text(function(d){ return d3.format(\"0.0%\")(d.percent)})\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\")); \n\nfunction mouseover(d){\nbp1.mouseover(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\n}\n\n                     function mouseout(d){\nbp1.mouseout(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\n}\n\n\n};","style":"/* R2D3 Source File:  demo4.css */\n .mainBars{\n    shape-rendering: auto;\n    fill-opacity: 1;\n    stroke-width: 0.5px;\n    stroke: rgb(0, 0, 0);\n    stroke-opacity: 0;\n  }\n    .subBars{\n    shape-rendering:crispEdges;\n    }\n    .edges{\n    stroke:none;\n    fill-opacity:0.3;\n    }\n    .label{\n    color:#000000;\n    }","version":5,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div id="rcolorbrewer" class="section level3">
<h3>RColorBrewer</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bipartite_D3</span>(SmallTestWeb,<span class="at">colouroption =</span> <span class="st">&#39;brewer&#39;</span>,<span class="at">BrewerPalette =</span><span class="st">&#39;Dark2&#39;</span>, <span class="at">filename =</span> <span class="st">&#39;demo5&#39;</span>)</span></code></pre></div>
<div id="htmlwidget-6da077b96d18f1f3a710" style="width:700px;height:700px;" class="r2d3 html-widget"></div>
<script type="application/json" data-for="htmlwidget-6da077b96d18f1f3a710">{"x":{"data":null,"type":"logical","container":"svg","options":null,"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n/* R2D3 Source File:  vizjs.js */\n!function(){function t(t){for(;t>o;)t-=o;for(;0>t;)t+=o;return t}function n(t,n,e,r,a,i){if(0>=a||0>=r)return 0;var u=t.concat().sort(d3.ascending),o=r-u.length*n+(i?n:0),s=[],c=0,d=0;return d3.range(u.length).forEach(function(t){d=(o-e*t)/(a-=u[t-1]||0),c+=u[t]*d<=e?1:0,s.push(d)}),s[c]}function e(t,e,r,a,i){var u=a,o=d3.sum(t),s=n(t,e,r,i-a,o,!1),c=t.map(function(t){var n=s*t,a=(r>n?r:n)/2;return u+=2*a+e,{c:u-a,v:n,w:a,value:t,percent:t/(o||1)}});return c}function r(t){function n(t,n){return[t*Math.cos(n),t*Math.sin(n)]}var e=n(t[0],t[2]),r=n(t[0],t[3]),a=n(t[1],t[2]),i=n(t[1],t[3]);return[\"M\",e,\"A\",t[0],t[0],\"0\",t[3]-t[2]>s?1:0,\"1\",r,\"L\",i,\"A\",t[1],t[1],\"0\",t[3]-t[2]>s?1:0,\"0\",a,\"z\"].join(\" \")}function a(t,n,e,r,a,i){function u(t,n,e){return\"A\"+t+\",\"+t+\" 0 \"+ +(e>s)+\",1 \"+n}function c(t,n){return[t*Math.cos(n),t*Math.sin(n)]}function d(t,n,e,r){e+=n>e?o:0;var a=e-n,i=1-(a>s?o-a:a)/s;i=Math.pow(i,5);var u=(e+n)/2-(e-n>s?s:0);return\"Q\"+i*r*Math.cos(u)+\",\"+i*r*Math.sin(u)+\" \"+t}var f=c(t,n),l=c(t,e),g=c(r,a),p=c(r,i);return\"M\"+f+u(t,l,e-n)+(n==a&&e==i?d(f,n,e,r):d(g,e,a,r)+u(r,p,i-a)+d(f,n,i,t))+\"Z\"}function i(t,n){ret=[];for(var e=n;e>n-t;e--)ret.push(0>e?e+t:e);return ret}var u={version:\"1.1.0\"},o=2*Math.PI,s=Math.PI,c=Math.PI/2;u.bP=function(){function t(i){y=i,i.each(function(){var i=d3.select(this),u=t.bars(),o=i.selectAll(\".subBars\").data(u.subBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"subBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);\"undefined\"!=typeof h&&o.style(\"fill\",function(t){return h(t)});var s=i.selectAll(\".edges\").data(u.edges).enter().append(\"path\").attr(\"class\",\"edges\").attr(\"d\",function(t){return t.path}).style(\"fill-opacity\",t.edgeOpacity());\"undefined\"!=typeof h&&s.style(\"fill\",function(t){return h(t)}),i.selectAll(\".mainBars\").data(u.mainBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"mainBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a).style(\"fill-opacity\",0).on(\"mouseover\",t.mouseover).on(\"mouseout\",t.mouseout)})}function n(t){return-t.width}function e(t){return-t.height}function r(t){return 2*t.width}function a(t){return 2*t.height}var i,u,o,s,c,d,f,l,g,p,h,y,m,v,A,x,k;return t.data=function(n){return arguments.length?(p=n,t):p},t.fill=function(n){return arguments.length?(h=n,t):h},t.keyPrimary=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:function(t){return t[0]}},t.sortPrimary=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:d3.ascending},t.keySecondary=function(n){return arguments.length?(u=n,t):\"undefined\"!=typeof u?u:function(t){return t[1]}},t.sortSecondary=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:d3.ascending},t.value=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:function(t){return t[2]}},t.width=function(n){return arguments.length?(s=n,t):\"undefined\"!=typeof s?s:400},t.height=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:600},t.barSize=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:35},t.min=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:0},t.orient=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:\"vertical\"},t.pad=function(n){return arguments.length?(g=n,t):\"undefined\"!=typeof g?g:0},t.duration=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:500},t.edgeOpacity=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:.4},t.edgeMode=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:\"curved\"},t.bars=function(n){function e(t,e){return\"undefined\"==typeof n||n.part===e||d[n.part](t)===n.key}function r(){var n=t.min()/2;s.primary.forEach(function(t){t.height<n&&(t.height=n)}),s.secondary.forEach(function(t){t.height<n&&(t.height=n)})}function a(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data()),i=o(a,t.pad(),t.min(),0,\"vertical\"==f?t.height():t.width()),u=t.barSize();a.forEach(function(e,r){s[n].push({x:\"horizontal\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.width()-u/2,y:\"vertical\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.height()-u/2,height:\"vertical\"==f?(i[r].e-i[r].s)/2:u/2,width:\"horizontal\"==f?(i[r].e-i[r].s)/2:u/2,part:n,key:e.key,value:e.value,percent:i[r].p})})}function i(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.map(s[n],function(t){return t.key}),i=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).key(\"secondary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"secondary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data());i.forEach(function(e){var r=a.get(e.key),i=o(e.values,0,0,\"vertical\"==f?r.y-r.height:r.x-r.width,\"vertical\"==f?r.y+r.height:r.x+r.width),u=t.barSize();e.values.forEach(function(a,o){c[n].push({x:\"vertical\"==f?\"primary\"==n?u/2:t.width()-u/2:(i[o].s+i[o].e)/2,y:\"horizontal\"==f?\"primary\"==n?u/2:t.height()-u/2:(i[o].s+i[o].e)/2,height:(\"vertical\"==f?i[o].e-i[o].s:u)/2,width:(\"horizontal\"==f?i[o].e-i[o].s:u)/2,part:n,primary:\"primary\"==n?e.key:a.key,secondary:\"primary\"==n?a.key:e.key,value:a.value,percent:i[o].p*r.percent,index:\"primary\"==n?e.key+\"|\"+a.key:a.key+\"|\"+e.key})})})}function u(){function n(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(t+e)/2,d=(i+o)/2;return[\"M\",t,\",\",n,\"C\",c,\",\",n,\" \",c,\",\",r,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",d,\",\",u,\" \",d,\",\",s,\",\",o,\",\",s,\"z\"].join(\"\")}function e(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(n+r)/2,d=(u+s)/2;return[\"M\",t,\",\",n,\"C\",t,\",\",c,\" \",e,\",\",c,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",i,\",\",d,\" \",o,\",\",d,\",\",o,\",\",s,\"z\"].join(\"\")}var r=d3.map(c.secondary,function(t){return t.index}),a=t.edgeMode();return c.primary.map(function(t){var a=r.get(t.index);return{path:\"vertical\"===f?n(t.x+t.width,t.y+t.height,a.x-a.width,a.y+a.height,a.x-a.width,a.y-a.height,t.x+t.width,t.y-t.height):e(t.x-t.width,t.y+t.height,a.x-a.width,a.y-a.height,a.x+a.width,a.y-a.height,t.x+t.width,t.y+t.height),primary:t.primary,secondary:t.secondary,value:t.value,percent:t.percent}})}function o(t,n,e,r,a){var i=e/(a-r-2*t.length*n),u=0,o=0,s=d3.sum(t,function(t){return t.value});t.forEach(function(t){t.value<i*s&&(u+=1,o+=t.value)});var c=1e-5>s?0:(a-r-2*t.length*n-u*e)/(s-o),d=r,f=[];return t.forEach(function(t){var r=t.value*c;f.push({s:d+n+(e>r?.5*(e-r):0),e:d+n+(e>r?.5*(e+r):r),p:1e-5>s?0:t.value/s}),d+=2*n+(e>r?e:r)}),f}var s={primary:[],secondary:[]},c={primary:[],secondary:[]},d={primary:t.keyPrimary(),secondary:t.keySecondary()},f=t.orient();return a(\"primary\"),a(\"secondary\"),i(\"primary\"),i(\"secondary\"),r(),{mainBars:s.primary.concat(s.secondary),subBars:c.primary.concat(c.secondary),edges:u()}},t.mouseover=function(i){var u=t.bars(i);y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",1),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);var o=y.selectAll(\".edges\").data(u.edges);o.filter(function(t){return t[i.part]===i.key}).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),o.filter(function(t){return t[i.part]!==i.key}).transition().duration(t.duration()).style(\"fill-opacity\",0).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t.mouseout=function(i){var u=t.bars();y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",0),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a),y.selectAll(\".edges\").data(u.edges).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t},u.gg=function(){function t(n){g=n,n.each(function(){var n=d3.select(this),e=t.scale(),r=t.minorTickStart(),a=t.minorTickEnd(),i=t.majorTickStart(),u=t.majorTickEnd(),o=t.ticks(),c=t.majorTicks(),d=t.labelLocation(),f=t.outerRadius();n.append(\"circle\").attr(\"r\",f).style(\"fill\",\"url(#vizgg3\"+p+\")\").attr(\"class\",\"face\"),n.append(\"circle\").attr(\"r\",t.innerRadius()).style(\"fill\",\"url(#vizgg2\"+p+\")\").style(\"filter\",\"url(#vizgg5\"+p+\")\").attr(\"class\",\"innerFace\");var l=n.append(\"g\");l.selectAll(\"line\").data(o).enter().append(\"line\").attr(\"class\",function(t){return c(t)?\"majorTicks\":\"minorTicks\"}).attr(\"x1\",function(t){return f*(c(t)?i:r)*Math.cos(e(t))}).attr(\"y1\",function(t){return f*(c(t)?i:r)*Math.sin(e(t))}).attr(\"x2\",function(t){return f*(c(t)?u:a)*Math.cos(e(t))}).attr(\"y2\",function(t){return f*(c(t)?u:a)*Math.sin(e(t))}),n.selectAll(\"text\").data(o.filter(c)).enter().append(\"text\").attr(\"class\",\"label\").attr(\"x\",function(t){return f*d*Math.cos(e(t))}).attr(\"y\",function(t){return f*d*Math.sin(e(t))}).attr(\"dy\",3).text(function(t){return t});var g=t.outerRadius()/b.outerRadius,h=180*t.scale()(t.value())/s+90;n.append(\"g\").attr(\"transform\",\"translate(1,1)\").selectAll(\".needleshadow\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needleshadow\").append(\"path\").attr(\"d\",[\"m 0\",-130*g,5*g,175*g,-10*g,\"0,z\"].join(\",\")).style(\"filter\",\"url(#vizgg6\"+p+\")\"),n.selectAll(\".needle\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needle\").append(\"polygon\").attr(\"points\",[-.5*g,-130*g,.5*g,-130*g,5*g,45*g,-5*g,45*g].join(\",\")).style(\"fill\",\"url(#vizgg4\"+p+\")\")})}var n,e,r,a,i,o,c,d,f,l,g,p,h,y,m,v,A,x,k,b={innerRadius:20,outerRadius:150,angleOffset:.7,startAngle:-1.5*s,endAngle:.5*s,minorTickStart:.9,minorTickEnd:.95,majorTickStart:.82,majorTickEnd:.95,needleColor:\"#de2c2c\",innerFaceColor:\"#999999\",faceColor:\"#666666\",domain:[0,100],duration:500,ease:\"cubicInOut\",ticks:d3.range(0,101,2),majorTicks:function(t){return t%10===0},labelLocation:.7};return t.scale=function(){return d3.scale.linear().domain(t.domain()).range([b.startAngle+t.angleOffset(),b.endAngle-t.angleOffset()])},t.innerRadius=function(e){return arguments.length?(n=e,t):\"undefined\"!=typeof n?n:b.innerRadius},t.outerRadius=function(n){return arguments.length?(e=n,t):\"undefined\"!=typeof e?e:b.outerRadius},t.angleOffset=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:b.angleOffset},t.labelLocation=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:b.labelLocation},t.ticks=function(n){return arguments.length?(h=n,t):\"undefined\"!=typeof h?h:b.ticks},t.majorTicks=function(n){return arguments.length?(y=n,t):\"undefined\"!=typeof y?y:b.majorTicks},t.minorTickStart=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:b.minorTickStart},t.minorTickEnd=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:b.minorTickEnd},t.majorTickStart=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:b.majorTickStart},t.majorTickEnd=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:b.majorTickEnd},t.needleColor=function(n){return arguments.length?(r=n,t):\"undefined\"!=typeof r?r:b.needleColor},t.innerFaceColor=function(n){return arguments.length?(a=n,t):\"undefined\"!=typeof a?a:b.innerFaceColor},t.faceColor=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:b.faceColor},t.domain=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:b.domain},t.duration=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:b.duration},t.ease=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:b.ease},t.value=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:.5*(b.domain[0]+b.domain[1])},t.defs=function(n,e){var r=n.append(\"defs\");p=e;var a=t.needleColor(),i=t.innerFaceColor(),o=t.faceColor(),s=u.defs(r).lG().id(\"vizgg1\"+e).sel();u.defs(s).stop().offset(\"0\").stopColor(a),u.defs(s).stop().offset(\"1\").stopColor(d3.rgb(a).darker(1));var c=u.defs(r).rG().id(\"vizgg2\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(c).stop().offset(\"0\").stopColor(i),u.defs(c).stop().offset(\"1\").stopColor(d3.rgb(i).darker(2));var d=u.defs(r).rG().id(\"vizgg3\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(d).stop().offset(\"0\").stopColor(o),u.defs(d).stop().offset(\"1\").stopColor(d3.rgb(o).darker(2)),u.defs(r).lG().id(\"vizgg4\"+e).gradientUnits(\"userSpaceOnUse\").y1(\"80\").x1(\"-10\").y2(\"80\").x2(\"10\").xlink(\"#vizgg1\"+e);var f=u.defs(r).filter().id(\"vizgg5\"+e).sel();u.defs(f).feFlood().result(\"flood\").floodColor(\"rgb(0,0,0)\").floodOpacity(\"0.6\"),u.defs(f).feComposite().result(\"composite1\").operator(\"in\").in2(\"SourceGraphic\")[\"in\"](\"flood\"),u.defs(f).feGaussianBlur().result(\"blur\").stdDeviation(\"2\")[\"in\"](\"composite1\"),u.defs(f).feOffset().result(\"offset\").dy(\"2\").dx(\"2\"),u.defs(f).feComposite().result(\"composite2\").operator(\"over\").in2(\"offset\")[\"in\"](\"SourceGraphic\");var l=u.defs(r).filter().x(\"-0.3\").y(\"-0.3\").height(\"1.8\").width(\"1.8\").id(\"vizgg6\"+e).sel();u.defs(l).feGaussianBlur().stdDeviation(\"2\")},t.setNeedle=function(n){function e(t,n){return d3.interpolateString(\"rotate(\"+t+\")\",\"rotate(\"+n+\")\")}var r=180*t.scale()(n)/s+90,a=180*t.scale()(t.value())/s+90,i=t.ease();g.selectAll(\".needle\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i),g.selectAll(\".needleshadow\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i).each(\"end\",function(){angle=n}),t.value(n)},t},u.ch=function(){function u(t){function n(t){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}p=t,k||f(),t.each(function(){var t=d3.select(this),r=t.selectAll(\".groups\").data(x).enter().append(\"g\").attr(\"class\",\"groups\").on(\"mouseover\",u.mouseover).on(\"mouseout\",u.mouseout),a=r.append(\"text\").attr(\"class\",\"label\"),i=(1+u.labelPadding())*u.outerRadius(),s=u.valueFormat();a.filter(function(t){return\"g\"==t.type}).attr(\"x\",function(t){return i*Math.cos(d(t))}).attr(\"y\",function(t){return i*Math.sin(d(t))}).text(function(t){return t.source+\" (\"+s(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"}).each(function(t){this._current=t}),r.append(\"path\").style(\"fill\",function(t){return y(t.source)}).style(\"stroke\",function(t){return y(t.source)}).attr(\"d\",n).each(function(t){this._current=t}).filter(function(t){return\"g\"==t.type}),t.append(\"g\").attr(\"class\",\"chords\").selectAll(\".chord\").data(k).enter().append(\"g\").attr(\"class\",\"chord\").append(\"path\").each(function(t){this._current=t}).attr(\"d\",e).style(\"fill\",function(t){return y(t.target)}).style(\"opacity\",u.chordOpacity()).style(\"stroke\",function(t){return y(t.target)}).style(\"display\",function(t){return t.display?\"inline\":\"none\"})})}function s(t){function n(t,n){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}function i(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return e(n(t))}}function s(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return n(e(t),t)}}function f(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.cos(d(n(t)))}}function l(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.sin(d(n(t)))}}var g=p.selectAll(\".groups\").data(t?b:u.groups()),h=(1+u.labelPadding())*u.outerRadius(),y=u.valueFormat();g.select(\"path\").transition().duration(L).attrTween(\"d\",s),g.select(\".label\").filter(function(t){return\"g\"==t.type}).transition().duration(L).attrTween(\"x\",f).attrTween(\"y\",l).text(function(t){return t.source+\" (\"+y(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"});var m=u.chordOpacity();p.select(\".chords\").selectAll(\".chord\").data(t?w:u.chords()).select(\"path\").transition().duration(L).attrTween(\"d\",i).style(\"opacity\",function(t){return t.display?m:0})}function d(n){return t((n.startAngle+n.endAngle)/2)}function f(){m=[],h.forEach(function(t){-1==m.indexOf(E(t))&&m.push(E(t)),-1==m.indexOf(M(t))&&m.push(M(t))}),m=m.sort(T),v={},A={},m.forEach(function(t){v[t]={},A[t]={},m.forEach(function(n){v[t][n]=0,A[t][n]=!1})}),h.forEach(function(t){var n=E(t),e=M(t);v[n][e]+=S(t),A[n][e]=!0}),x=[],m.forEach(function(t,n){x.push({source:t,type:\"gs\",value:0,skipPad:!0,index:n}),x.push({source:t,type:\"g\",value:d3.sum(m,function(n){return v[t][n]}),skipPad:!1,index:n})}),g(x,z,R,void 0,P),k=[],x.filter(function(t){return\"g\"==t.type}).forEach(function(t,n){var r=i(m.length,n),a=e(r.map(function(n){return v[t.source][m[n]]}),0,0,t.startAngle,t.endAngle);r.forEach(function(e,r){var i=a[r];k.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:t.source,target:m[e],type:\"c\",display:A[t.source][m[e]],index:n,subindex:e,indexsubindex:n+\"-\"+e})})});var t=d3.map(k,function(t){return t.indexsubindex});k.forEach(function(n){if(n.subindex==n.index)return n.endStartAngle=n.startAngle,void(n.endEndAngle=n.startAngle);var e=t.get(n.subindex+\"-\"+n.index);n.endStartAngle=e.startAngle,n.endEndAngle=e.startAngle}),F=!1}function l(t){function n(t){return t.endAngle+t.startAngle}var r=x.filter(function(n){return n.source==t&&\"g\"==n.type})[0];b=[],m.forEach(function(n,e){b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"gs\",value:n==t?v[n][n]:0,skipPad:n==t&&A[n][n]?!1:!0,index:e}),n==t?b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"g\",value:r.value,skipPad:!1,index:e}):b.push({source:n,type:\"g\",value:v[t][n],skipPad:!1,index:e})}),g(b,z,R,t,P);var a=n(r);x.forEach(function(t,e){var r=b[e],i=n(t)<a;r.startAngle-=i?o:0,r.endAngle-=i?o:0}),w=[],b.filter(function(t){return\"g\"==t.type}).forEach(function(n,r){var a=i(m.length,r),u=a.map(function(e){var r=m[e];return n.source==t?v[n.source][r]:r==t?v[r][n.source]:0}),o=e(u,0,0,n.startAngle,n.endAngle);a.forEach(function(e,a){var i=o[a];w.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:n.source,target:m[e],type:\"c\",display:n.source===t,index:r,subindex:e,indexsubindex:r+\"-\"+e})})});var u=d3.map(w.map(function(t){return{startAngle:t.startAngle,endAngle:t.endAngle,indexsubindex:t.indexsubindex}}),function(t){return t.indexsubindex}),s=d3.map(b.filter(function(t){return\"gs\"==t.type}),function(t){return t.source});w.forEach(function(n){if(n.subindex==n.index){var e=s.get(n.source);return n.endStartAngle=e.startAngle,void(n.endEndAngle=e.endAngle)}var r=u.get(n.subindex+\"-\"+n.index);n.endStartAngle=r.startAngle,n.endEndAngle=r.endAngle,n.source!==t&&(n.startAngle=n.endAngle,n.endEndAngle=n.endStartAngle)})}function g(t,e,r,a,i){var u=void 0!==a,o=0;if(u){for(var s=!1;o<t.length;o++)if(t[o].source==a&&\"g\"==t[o].type){s=!0;break}s||console.log(\"The fixed source '\"+a+\"' is not a valid key\")}var c=d3.range(t.length);u&&(c=c.slice(o).concat(c.slice(0,o)));var d=t.filter(function(t){return!(u&&t.source===a&&\"g\"==t.type||t.skipPad)}).map(function(t){return t.value}),f=2*Math.PI-(u?t[o].endAngle-t[o].startAngle+2*e:0),l=u?t[o].endAngle+e:i,g=d3.sum(d),p=n(d,e,r,0>=f?0:f,g,u?!0:!1);c.slice(u?1:0).forEach(function(n){var a=p*t[n].value,i=(r>a?r-a:0)/2;t[n].startAngle=l,t[n].endAngle=l+a,t[n].padAngle=i,t[n].percent=t[n].value/(g||1),l+=a+i+(t[n].skipPad?0:e)})}var p,h,y,m,v,A,x,k,b,w,E=function(t){return t[0]},M=function(t){return t[1]},S=function(t){return t[2]},C=function(t){return t},T=d3.ascending,z=.03,P=0,B=180,O=200,j=.7,G=.02,R=0,L=500,F=!0;return u.data=function(t){return arguments.length?(h=t,F=!0,u):h},u.fill=function(t){return arguments.length?(y=t,u):y},u.duration=function(t){return arguments.length?(L=t,u):L},u.chordOpacity=function(t){return arguments.length?(j=t,u):j},u.innerRadius=function(t){return arguments.length?(B=t,F=!0,u):B},u.outerRadius=function(t){return arguments.length?(O=t,F=!0,u):O},u.source=function(t){return arguments.length?(E=t,F=!0,u):E},u.target=function(t){return arguments.length?(M=t,F=!0,u):M},u.value=function(t){return arguments.length?(S=t,F=!0,u):S},u.padding=function(t){return arguments.length?(z=t,F=!0,u):z},u.labelPadding=function(t){return arguments.length?(G=t,u):G},u.sort=function(t){return arguments.length?(T=t,F=!0,u):T},u.startAngle=function(t){return arguments.length?(P=t,F=!0,u):P},u.chords=function(){return F&&f(),k},u.groups=function(){return F&&f(),x},u.valueFormat=function(t){return arguments.length?(C=t,u):C},u.mouseover=function(t){l(t.source),s(1)},u.mouseout=function(t){s(0)},u},u.defs=function(t){var n={},e=t;return n.sel=function(){return e},n.lG=function(){return e=e.append(\"linearGradient\"),n},n.rG=function(){return e=e.append(\"radialGradient\"),n},n.stop=function(){return e=e.append(\"stop\"),n},n.filter=function(){return e=e.append(\"filter\"),n},n.feFlood=function(){return e=e.append(\"feFlood\"),n},n.feComposite=function(){return e=e.append(\"feComposite\"),n},n.feOffset=function(){return e=e.append(\"feOffset\"),n},n.feGaussianBlur=function(){return e=e.append(\"feGaussianBlur\"),n},n.result=function(t){return e=e.attr(\"result\",t),n},n.floodColor=function(t){return e=e.attr(\"flood-color\",t),n},n.floodOpacity=function(t){return e=e.attr(\"flood-opacity\",t),n},n.stdDeviation=function(t){return e=e.attr(\"stdDeviation\",t),n},n.operator=function(t){return e=e.attr(\"operator\",t),n},n.height=function(t){return e=e.attr(\"height\",t),n},n.width=function(t){return e=e.attr(\"width\",t),n},n[\"in\"]=function(t){return e=e.attr(\"in\",t),n},n.in2=function(t){return e=e.attr(\"in2\",t),n},n.id=function(t){return e=e.attr(\"id\",t),n},n.fx=function(t){return e=e.attr(\"fx\",t),n},n.fy=function(t){return e=e.attr(\"fy\",t),n},n.dx=function(t){return e=e.attr(\"dx\",t),n},n.dy=function(t){return e=e.attr(\"dy\",t),n},n.x1=function(t){return e=e.attr(\"x1\",t),n},n.y1=function(t){return e=e.attr(\"y1\",t),n},n.x2=function(t){return e=e.attr(\"x2\",t),n},n.y2=function(t){return e=e.attr(\"y2\",t),n},n.x=function(t){return e=e.attr(\"x\",t),n},n.y=function(t){return e=e.attr(\"y\",t),n},n.r=function(t){return e=e.attr(\"r\",t),n},n.spreadMethod=function(t){return e=e.attr(\"spreadMethod\",t),n},n.gradientUnits=function(t){return e=e.attr(\"gradientUnits\",t),n},n.xlink=function(t){return e=e.attr(\"xlink:href\",t),n},n.offset=function(t){return e=e.attr(\"offset\",t),n},n.stopColor=function(t){return e=e.attr(\"stop-color\",t),n},n.path=function(){return e=e.append(\"path\"),n},n.d=function(t){return e=e.attr(\"d\",t),n},n},this.viz=u}();\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  demo5.js */\nvar data=[[\"plant1\",\"bee1\",6],\n[\"plant2\",\"bee1\",9],\n[\"plant3\",\"bee1\",3],\n[\"plant4\",\"bee1\",0],\n[\"plant1\",\"bee2\",0],\n[\"plant2\",\"bee2\",2],\n[\"plant3\",\"bee2\",0],\n[\"plant4\",\"bee2\",0],\n[\"plant1\",\"bee3\",0],\n[\"plant2\",\"bee3\",0],\n[\"plant3\",\"bee3\",0],\n[\"plant4\",\"bee3\",7]]\n\n\n\n function sort(sortOrder){\n                    return function(a,b){ return d3.ascending(sortOrder.indexOf(a),sortOrder.indexOf(b)) }\n                  }\nvar color = {'Unlinked ':'#3366CC','bee1':'#1B9E77','bee2':'#D95F02','bee3':'#7570B3'};\n\n\n\n\nvar g1 = svg.append(\"g\").attr(\"transform\",\"translate(188,50)\");\n                         var bp1=viz.bP()\n                         .data(data)\n                         .value(d=>d[2])\n                         .min(10)\n                         .pad(1)\n                         .height(400)\n                         .width(200)\n                         .barSize(35)\n                         .fill(d=>color[d.secondary])\n.orient(\"vertical\");\n\ng1.call(bp1);g1.append(\"text\")\n                        .attr(\"x\",-50).attr(\"y\",-8)\n                        .style(\"text-anchor\",\"middle\")\n                        .text(\"Primary\");\n                        g1.append(\"text\")\n                        .attr(\"x\", 250)\n                        .attr(\"y\",-8).style(\"text-anchor\",\"middle\")\n                        .text(\"Secondary\");\n                        g1.append(\"text\")\n                        .attr(\"x\",100).attr(\"y\",-25)\n                        .style(\"text-anchor\",\"middle\")\n                        .attr(\"class\",\"header\")\n                        .text(\"meadow\");\n\n g1.selectAll(\".mainBars\")\n                        .on(\"mouseover\",mouseover)\n                        .on(\"mouseout\",mouseout);\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"label\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -27.2:24.8))\n                        .attr(\"y\",d=>+6)\n                        .text(d=>d.key)\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\"));\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"perc\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -141:144))\n                        .attr(\"y\",d=>+6)\n                        .text(function(d){ return d3.format(\"0.0%\")(d.percent)})\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\")); \n\nfunction mouseover(d){\nbp1.mouseover(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\n}\n\n                     function mouseout(d){\nbp1.mouseout(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\n}\n\n\n};","style":"/* R2D3 Source File:  demo5.css */\n .mainBars{\n    shape-rendering: auto;\n    fill-opacity: 1;\n    stroke-width: 0.5px;\n    stroke: rgb(0, 0, 0);\n    stroke-opacity: 0;\n  }\n    .subBars{\n    shape-rendering:crispEdges;\n    }\n    .edges{\n    stroke:none;\n    fill-opacity:0.3;\n    }\n    .label{\n    color:#000000;\n    }","version":5,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div id="manual-colouring-by-secondary-layer" class="section level3">
<h3>Manual, colouring by secondary layer</h3>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>ManualColours<span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">bee1=</span><span class="st">&#39;green&#39;</span>, <span class="at">bee2=</span><span class="st">&#39;red&#39;</span>, <span class="at">bee3=</span><span class="st">&#39;yellow&#39;</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">bipartite_D3</span>(SmallTestWeb, <span class="at">colouroption =</span> <span class="st">&#39;manual&#39;</span>,</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">NamedColourVector =</span> ManualColours, <span class="at">ColourBy =</span> <span class="dv">2</span>,</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">filename =</span> <span class="st">&#39;demo7&#39;</span>)</span></code></pre></div>
<div id="htmlwidget-ae4f1b832a1ca2713b67" style="width:700px;height:700px;" class="r2d3 html-widget"></div>
<script type="application/json" data-for="htmlwidget-ae4f1b832a1ca2713b67">{"x":{"data":null,"type":"logical","container":"svg","options":null,"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n/* R2D3 Source File:  vizjs.js */\n!function(){function t(t){for(;t>o;)t-=o;for(;0>t;)t+=o;return t}function n(t,n,e,r,a,i){if(0>=a||0>=r)return 0;var u=t.concat().sort(d3.ascending),o=r-u.length*n+(i?n:0),s=[],c=0,d=0;return d3.range(u.length).forEach(function(t){d=(o-e*t)/(a-=u[t-1]||0),c+=u[t]*d<=e?1:0,s.push(d)}),s[c]}function e(t,e,r,a,i){var u=a,o=d3.sum(t),s=n(t,e,r,i-a,o,!1),c=t.map(function(t){var n=s*t,a=(r>n?r:n)/2;return u+=2*a+e,{c:u-a,v:n,w:a,value:t,percent:t/(o||1)}});return c}function r(t){function n(t,n){return[t*Math.cos(n),t*Math.sin(n)]}var e=n(t[0],t[2]),r=n(t[0],t[3]),a=n(t[1],t[2]),i=n(t[1],t[3]);return[\"M\",e,\"A\",t[0],t[0],\"0\",t[3]-t[2]>s?1:0,\"1\",r,\"L\",i,\"A\",t[1],t[1],\"0\",t[3]-t[2]>s?1:0,\"0\",a,\"z\"].join(\" \")}function a(t,n,e,r,a,i){function u(t,n,e){return\"A\"+t+\",\"+t+\" 0 \"+ +(e>s)+\",1 \"+n}function c(t,n){return[t*Math.cos(n),t*Math.sin(n)]}function d(t,n,e,r){e+=n>e?o:0;var a=e-n,i=1-(a>s?o-a:a)/s;i=Math.pow(i,5);var u=(e+n)/2-(e-n>s?s:0);return\"Q\"+i*r*Math.cos(u)+\",\"+i*r*Math.sin(u)+\" \"+t}var f=c(t,n),l=c(t,e),g=c(r,a),p=c(r,i);return\"M\"+f+u(t,l,e-n)+(n==a&&e==i?d(f,n,e,r):d(g,e,a,r)+u(r,p,i-a)+d(f,n,i,t))+\"Z\"}function i(t,n){ret=[];for(var e=n;e>n-t;e--)ret.push(0>e?e+t:e);return ret}var u={version:\"1.1.0\"},o=2*Math.PI,s=Math.PI,c=Math.PI/2;u.bP=function(){function t(i){y=i,i.each(function(){var i=d3.select(this),u=t.bars(),o=i.selectAll(\".subBars\").data(u.subBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"subBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);\"undefined\"!=typeof h&&o.style(\"fill\",function(t){return h(t)});var s=i.selectAll(\".edges\").data(u.edges).enter().append(\"path\").attr(\"class\",\"edges\").attr(\"d\",function(t){return t.path}).style(\"fill-opacity\",t.edgeOpacity());\"undefined\"!=typeof h&&s.style(\"fill\",function(t){return h(t)}),i.selectAll(\".mainBars\").data(u.mainBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"mainBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a).style(\"fill-opacity\",0).on(\"mouseover\",t.mouseover).on(\"mouseout\",t.mouseout)})}function n(t){return-t.width}function e(t){return-t.height}function r(t){return 2*t.width}function a(t){return 2*t.height}var i,u,o,s,c,d,f,l,g,p,h,y,m,v,A,x,k;return t.data=function(n){return arguments.length?(p=n,t):p},t.fill=function(n){return arguments.length?(h=n,t):h},t.keyPrimary=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:function(t){return t[0]}},t.sortPrimary=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:d3.ascending},t.keySecondary=function(n){return arguments.length?(u=n,t):\"undefined\"!=typeof u?u:function(t){return t[1]}},t.sortSecondary=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:d3.ascending},t.value=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:function(t){return t[2]}},t.width=function(n){return arguments.length?(s=n,t):\"undefined\"!=typeof s?s:400},t.height=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:600},t.barSize=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:35},t.min=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:0},t.orient=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:\"vertical\"},t.pad=function(n){return arguments.length?(g=n,t):\"undefined\"!=typeof g?g:0},t.duration=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:500},t.edgeOpacity=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:.4},t.edgeMode=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:\"curved\"},t.bars=function(n){function e(t,e){return\"undefined\"==typeof n||n.part===e||d[n.part](t)===n.key}function r(){var n=t.min()/2;s.primary.forEach(function(t){t.height<n&&(t.height=n)}),s.secondary.forEach(function(t){t.height<n&&(t.height=n)})}function a(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data()),i=o(a,t.pad(),t.min(),0,\"vertical\"==f?t.height():t.width()),u=t.barSize();a.forEach(function(e,r){s[n].push({x:\"horizontal\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.width()-u/2,y:\"vertical\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.height()-u/2,height:\"vertical\"==f?(i[r].e-i[r].s)/2:u/2,width:\"horizontal\"==f?(i[r].e-i[r].s)/2:u/2,part:n,key:e.key,value:e.value,percent:i[r].p})})}function i(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.map(s[n],function(t){return t.key}),i=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).key(\"secondary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"secondary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data());i.forEach(function(e){var r=a.get(e.key),i=o(e.values,0,0,\"vertical\"==f?r.y-r.height:r.x-r.width,\"vertical\"==f?r.y+r.height:r.x+r.width),u=t.barSize();e.values.forEach(function(a,o){c[n].push({x:\"vertical\"==f?\"primary\"==n?u/2:t.width()-u/2:(i[o].s+i[o].e)/2,y:\"horizontal\"==f?\"primary\"==n?u/2:t.height()-u/2:(i[o].s+i[o].e)/2,height:(\"vertical\"==f?i[o].e-i[o].s:u)/2,width:(\"horizontal\"==f?i[o].e-i[o].s:u)/2,part:n,primary:\"primary\"==n?e.key:a.key,secondary:\"primary\"==n?a.key:e.key,value:a.value,percent:i[o].p*r.percent,index:\"primary\"==n?e.key+\"|\"+a.key:a.key+\"|\"+e.key})})})}function u(){function n(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(t+e)/2,d=(i+o)/2;return[\"M\",t,\",\",n,\"C\",c,\",\",n,\" \",c,\",\",r,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",d,\",\",u,\" \",d,\",\",s,\",\",o,\",\",s,\"z\"].join(\"\")}function e(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(n+r)/2,d=(u+s)/2;return[\"M\",t,\",\",n,\"C\",t,\",\",c,\" \",e,\",\",c,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",i,\",\",d,\" \",o,\",\",d,\",\",o,\",\",s,\"z\"].join(\"\")}var r=d3.map(c.secondary,function(t){return t.index}),a=t.edgeMode();return c.primary.map(function(t){var a=r.get(t.index);return{path:\"vertical\"===f?n(t.x+t.width,t.y+t.height,a.x-a.width,a.y+a.height,a.x-a.width,a.y-a.height,t.x+t.width,t.y-t.height):e(t.x-t.width,t.y+t.height,a.x-a.width,a.y-a.height,a.x+a.width,a.y-a.height,t.x+t.width,t.y+t.height),primary:t.primary,secondary:t.secondary,value:t.value,percent:t.percent}})}function o(t,n,e,r,a){var i=e/(a-r-2*t.length*n),u=0,o=0,s=d3.sum(t,function(t){return t.value});t.forEach(function(t){t.value<i*s&&(u+=1,o+=t.value)});var c=1e-5>s?0:(a-r-2*t.length*n-u*e)/(s-o),d=r,f=[];return t.forEach(function(t){var r=t.value*c;f.push({s:d+n+(e>r?.5*(e-r):0),e:d+n+(e>r?.5*(e+r):r),p:1e-5>s?0:t.value/s}),d+=2*n+(e>r?e:r)}),f}var s={primary:[],secondary:[]},c={primary:[],secondary:[]},d={primary:t.keyPrimary(),secondary:t.keySecondary()},f=t.orient();return a(\"primary\"),a(\"secondary\"),i(\"primary\"),i(\"secondary\"),r(),{mainBars:s.primary.concat(s.secondary),subBars:c.primary.concat(c.secondary),edges:u()}},t.mouseover=function(i){var u=t.bars(i);y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",1),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);var o=y.selectAll(\".edges\").data(u.edges);o.filter(function(t){return t[i.part]===i.key}).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),o.filter(function(t){return t[i.part]!==i.key}).transition().duration(t.duration()).style(\"fill-opacity\",0).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t.mouseout=function(i){var u=t.bars();y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",0),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a),y.selectAll(\".edges\").data(u.edges).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t},u.gg=function(){function t(n){g=n,n.each(function(){var n=d3.select(this),e=t.scale(),r=t.minorTickStart(),a=t.minorTickEnd(),i=t.majorTickStart(),u=t.majorTickEnd(),o=t.ticks(),c=t.majorTicks(),d=t.labelLocation(),f=t.outerRadius();n.append(\"circle\").attr(\"r\",f).style(\"fill\",\"url(#vizgg3\"+p+\")\").attr(\"class\",\"face\"),n.append(\"circle\").attr(\"r\",t.innerRadius()).style(\"fill\",\"url(#vizgg2\"+p+\")\").style(\"filter\",\"url(#vizgg5\"+p+\")\").attr(\"class\",\"innerFace\");var l=n.append(\"g\");l.selectAll(\"line\").data(o).enter().append(\"line\").attr(\"class\",function(t){return c(t)?\"majorTicks\":\"minorTicks\"}).attr(\"x1\",function(t){return f*(c(t)?i:r)*Math.cos(e(t))}).attr(\"y1\",function(t){return f*(c(t)?i:r)*Math.sin(e(t))}).attr(\"x2\",function(t){return f*(c(t)?u:a)*Math.cos(e(t))}).attr(\"y2\",function(t){return f*(c(t)?u:a)*Math.sin(e(t))}),n.selectAll(\"text\").data(o.filter(c)).enter().append(\"text\").attr(\"class\",\"label\").attr(\"x\",function(t){return f*d*Math.cos(e(t))}).attr(\"y\",function(t){return f*d*Math.sin(e(t))}).attr(\"dy\",3).text(function(t){return t});var g=t.outerRadius()/b.outerRadius,h=180*t.scale()(t.value())/s+90;n.append(\"g\").attr(\"transform\",\"translate(1,1)\").selectAll(\".needleshadow\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needleshadow\").append(\"path\").attr(\"d\",[\"m 0\",-130*g,5*g,175*g,-10*g,\"0,z\"].join(\",\")).style(\"filter\",\"url(#vizgg6\"+p+\")\"),n.selectAll(\".needle\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needle\").append(\"polygon\").attr(\"points\",[-.5*g,-130*g,.5*g,-130*g,5*g,45*g,-5*g,45*g].join(\",\")).style(\"fill\",\"url(#vizgg4\"+p+\")\")})}var n,e,r,a,i,o,c,d,f,l,g,p,h,y,m,v,A,x,k,b={innerRadius:20,outerRadius:150,angleOffset:.7,startAngle:-1.5*s,endAngle:.5*s,minorTickStart:.9,minorTickEnd:.95,majorTickStart:.82,majorTickEnd:.95,needleColor:\"#de2c2c\",innerFaceColor:\"#999999\",faceColor:\"#666666\",domain:[0,100],duration:500,ease:\"cubicInOut\",ticks:d3.range(0,101,2),majorTicks:function(t){return t%10===0},labelLocation:.7};return t.scale=function(){return d3.scale.linear().domain(t.domain()).range([b.startAngle+t.angleOffset(),b.endAngle-t.angleOffset()])},t.innerRadius=function(e){return arguments.length?(n=e,t):\"undefined\"!=typeof n?n:b.innerRadius},t.outerRadius=function(n){return arguments.length?(e=n,t):\"undefined\"!=typeof e?e:b.outerRadius},t.angleOffset=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:b.angleOffset},t.labelLocation=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:b.labelLocation},t.ticks=function(n){return arguments.length?(h=n,t):\"undefined\"!=typeof h?h:b.ticks},t.majorTicks=function(n){return arguments.length?(y=n,t):\"undefined\"!=typeof y?y:b.majorTicks},t.minorTickStart=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:b.minorTickStart},t.minorTickEnd=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:b.minorTickEnd},t.majorTickStart=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:b.majorTickStart},t.majorTickEnd=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:b.majorTickEnd},t.needleColor=function(n){return arguments.length?(r=n,t):\"undefined\"!=typeof r?r:b.needleColor},t.innerFaceColor=function(n){return arguments.length?(a=n,t):\"undefined\"!=typeof a?a:b.innerFaceColor},t.faceColor=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:b.faceColor},t.domain=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:b.domain},t.duration=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:b.duration},t.ease=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:b.ease},t.value=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:.5*(b.domain[0]+b.domain[1])},t.defs=function(n,e){var r=n.append(\"defs\");p=e;var a=t.needleColor(),i=t.innerFaceColor(),o=t.faceColor(),s=u.defs(r).lG().id(\"vizgg1\"+e).sel();u.defs(s).stop().offset(\"0\").stopColor(a),u.defs(s).stop().offset(\"1\").stopColor(d3.rgb(a).darker(1));var c=u.defs(r).rG().id(\"vizgg2\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(c).stop().offset(\"0\").stopColor(i),u.defs(c).stop().offset(\"1\").stopColor(d3.rgb(i).darker(2));var d=u.defs(r).rG().id(\"vizgg3\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(d).stop().offset(\"0\").stopColor(o),u.defs(d).stop().offset(\"1\").stopColor(d3.rgb(o).darker(2)),u.defs(r).lG().id(\"vizgg4\"+e).gradientUnits(\"userSpaceOnUse\").y1(\"80\").x1(\"-10\").y2(\"80\").x2(\"10\").xlink(\"#vizgg1\"+e);var f=u.defs(r).filter().id(\"vizgg5\"+e).sel();u.defs(f).feFlood().result(\"flood\").floodColor(\"rgb(0,0,0)\").floodOpacity(\"0.6\"),u.defs(f).feComposite().result(\"composite1\").operator(\"in\").in2(\"SourceGraphic\")[\"in\"](\"flood\"),u.defs(f).feGaussianBlur().result(\"blur\").stdDeviation(\"2\")[\"in\"](\"composite1\"),u.defs(f).feOffset().result(\"offset\").dy(\"2\").dx(\"2\"),u.defs(f).feComposite().result(\"composite2\").operator(\"over\").in2(\"offset\")[\"in\"](\"SourceGraphic\");var l=u.defs(r).filter().x(\"-0.3\").y(\"-0.3\").height(\"1.8\").width(\"1.8\").id(\"vizgg6\"+e).sel();u.defs(l).feGaussianBlur().stdDeviation(\"2\")},t.setNeedle=function(n){function e(t,n){return d3.interpolateString(\"rotate(\"+t+\")\",\"rotate(\"+n+\")\")}var r=180*t.scale()(n)/s+90,a=180*t.scale()(t.value())/s+90,i=t.ease();g.selectAll(\".needle\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i),g.selectAll(\".needleshadow\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i).each(\"end\",function(){angle=n}),t.value(n)},t},u.ch=function(){function u(t){function n(t){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}p=t,k||f(),t.each(function(){var t=d3.select(this),r=t.selectAll(\".groups\").data(x).enter().append(\"g\").attr(\"class\",\"groups\").on(\"mouseover\",u.mouseover).on(\"mouseout\",u.mouseout),a=r.append(\"text\").attr(\"class\",\"label\"),i=(1+u.labelPadding())*u.outerRadius(),s=u.valueFormat();a.filter(function(t){return\"g\"==t.type}).attr(\"x\",function(t){return i*Math.cos(d(t))}).attr(\"y\",function(t){return i*Math.sin(d(t))}).text(function(t){return t.source+\" (\"+s(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"}).each(function(t){this._current=t}),r.append(\"path\").style(\"fill\",function(t){return y(t.source)}).style(\"stroke\",function(t){return y(t.source)}).attr(\"d\",n).each(function(t){this._current=t}).filter(function(t){return\"g\"==t.type}),t.append(\"g\").attr(\"class\",\"chords\").selectAll(\".chord\").data(k).enter().append(\"g\").attr(\"class\",\"chord\").append(\"path\").each(function(t){this._current=t}).attr(\"d\",e).style(\"fill\",function(t){return y(t.target)}).style(\"opacity\",u.chordOpacity()).style(\"stroke\",function(t){return y(t.target)}).style(\"display\",function(t){return t.display?\"inline\":\"none\"})})}function s(t){function n(t,n){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}function i(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return e(n(t))}}function s(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return n(e(t),t)}}function f(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.cos(d(n(t)))}}function l(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.sin(d(n(t)))}}var g=p.selectAll(\".groups\").data(t?b:u.groups()),h=(1+u.labelPadding())*u.outerRadius(),y=u.valueFormat();g.select(\"path\").transition().duration(L).attrTween(\"d\",s),g.select(\".label\").filter(function(t){return\"g\"==t.type}).transition().duration(L).attrTween(\"x\",f).attrTween(\"y\",l).text(function(t){return t.source+\" (\"+y(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"});var m=u.chordOpacity();p.select(\".chords\").selectAll(\".chord\").data(t?w:u.chords()).select(\"path\").transition().duration(L).attrTween(\"d\",i).style(\"opacity\",function(t){return t.display?m:0})}function d(n){return t((n.startAngle+n.endAngle)/2)}function f(){m=[],h.forEach(function(t){-1==m.indexOf(E(t))&&m.push(E(t)),-1==m.indexOf(M(t))&&m.push(M(t))}),m=m.sort(T),v={},A={},m.forEach(function(t){v[t]={},A[t]={},m.forEach(function(n){v[t][n]=0,A[t][n]=!1})}),h.forEach(function(t){var n=E(t),e=M(t);v[n][e]+=S(t),A[n][e]=!0}),x=[],m.forEach(function(t,n){x.push({source:t,type:\"gs\",value:0,skipPad:!0,index:n}),x.push({source:t,type:\"g\",value:d3.sum(m,function(n){return v[t][n]}),skipPad:!1,index:n})}),g(x,z,R,void 0,P),k=[],x.filter(function(t){return\"g\"==t.type}).forEach(function(t,n){var r=i(m.length,n),a=e(r.map(function(n){return v[t.source][m[n]]}),0,0,t.startAngle,t.endAngle);r.forEach(function(e,r){var i=a[r];k.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:t.source,target:m[e],type:\"c\",display:A[t.source][m[e]],index:n,subindex:e,indexsubindex:n+\"-\"+e})})});var t=d3.map(k,function(t){return t.indexsubindex});k.forEach(function(n){if(n.subindex==n.index)return n.endStartAngle=n.startAngle,void(n.endEndAngle=n.startAngle);var e=t.get(n.subindex+\"-\"+n.index);n.endStartAngle=e.startAngle,n.endEndAngle=e.startAngle}),F=!1}function l(t){function n(t){return t.endAngle+t.startAngle}var r=x.filter(function(n){return n.source==t&&\"g\"==n.type})[0];b=[],m.forEach(function(n,e){b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"gs\",value:n==t?v[n][n]:0,skipPad:n==t&&A[n][n]?!1:!0,index:e}),n==t?b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"g\",value:r.value,skipPad:!1,index:e}):b.push({source:n,type:\"g\",value:v[t][n],skipPad:!1,index:e})}),g(b,z,R,t,P);var a=n(r);x.forEach(function(t,e){var r=b[e],i=n(t)<a;r.startAngle-=i?o:0,r.endAngle-=i?o:0}),w=[],b.filter(function(t){return\"g\"==t.type}).forEach(function(n,r){var a=i(m.length,r),u=a.map(function(e){var r=m[e];return n.source==t?v[n.source][r]:r==t?v[r][n.source]:0}),o=e(u,0,0,n.startAngle,n.endAngle);a.forEach(function(e,a){var i=o[a];w.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:n.source,target:m[e],type:\"c\",display:n.source===t,index:r,subindex:e,indexsubindex:r+\"-\"+e})})});var u=d3.map(w.map(function(t){return{startAngle:t.startAngle,endAngle:t.endAngle,indexsubindex:t.indexsubindex}}),function(t){return t.indexsubindex}),s=d3.map(b.filter(function(t){return\"gs\"==t.type}),function(t){return t.source});w.forEach(function(n){if(n.subindex==n.index){var e=s.get(n.source);return n.endStartAngle=e.startAngle,void(n.endEndAngle=e.endAngle)}var r=u.get(n.subindex+\"-\"+n.index);n.endStartAngle=r.startAngle,n.endEndAngle=r.endAngle,n.source!==t&&(n.startAngle=n.endAngle,n.endEndAngle=n.endStartAngle)})}function g(t,e,r,a,i){var u=void 0!==a,o=0;if(u){for(var s=!1;o<t.length;o++)if(t[o].source==a&&\"g\"==t[o].type){s=!0;break}s||console.log(\"The fixed source '\"+a+\"' is not a valid key\")}var c=d3.range(t.length);u&&(c=c.slice(o).concat(c.slice(0,o)));var d=t.filter(function(t){return!(u&&t.source===a&&\"g\"==t.type||t.skipPad)}).map(function(t){return t.value}),f=2*Math.PI-(u?t[o].endAngle-t[o].startAngle+2*e:0),l=u?t[o].endAngle+e:i,g=d3.sum(d),p=n(d,e,r,0>=f?0:f,g,u?!0:!1);c.slice(u?1:0).forEach(function(n){var a=p*t[n].value,i=(r>a?r-a:0)/2;t[n].startAngle=l,t[n].endAngle=l+a,t[n].padAngle=i,t[n].percent=t[n].value/(g||1),l+=a+i+(t[n].skipPad?0:e)})}var p,h,y,m,v,A,x,k,b,w,E=function(t){return t[0]},M=function(t){return t[1]},S=function(t){return t[2]},C=function(t){return t},T=d3.ascending,z=.03,P=0,B=180,O=200,j=.7,G=.02,R=0,L=500,F=!0;return u.data=function(t){return arguments.length?(h=t,F=!0,u):h},u.fill=function(t){return arguments.length?(y=t,u):y},u.duration=function(t){return arguments.length?(L=t,u):L},u.chordOpacity=function(t){return arguments.length?(j=t,u):j},u.innerRadius=function(t){return arguments.length?(B=t,F=!0,u):B},u.outerRadius=function(t){return arguments.length?(O=t,F=!0,u):O},u.source=function(t){return arguments.length?(E=t,F=!0,u):E},u.target=function(t){return arguments.length?(M=t,F=!0,u):M},u.value=function(t){return arguments.length?(S=t,F=!0,u):S},u.padding=function(t){return arguments.length?(z=t,F=!0,u):z},u.labelPadding=function(t){return arguments.length?(G=t,u):G},u.sort=function(t){return arguments.length?(T=t,F=!0,u):T},u.startAngle=function(t){return arguments.length?(P=t,F=!0,u):P},u.chords=function(){return F&&f(),k},u.groups=function(){return F&&f(),x},u.valueFormat=function(t){return arguments.length?(C=t,u):C},u.mouseover=function(t){l(t.source),s(1)},u.mouseout=function(t){s(0)},u},u.defs=function(t){var n={},e=t;return n.sel=function(){return e},n.lG=function(){return e=e.append(\"linearGradient\"),n},n.rG=function(){return e=e.append(\"radialGradient\"),n},n.stop=function(){return e=e.append(\"stop\"),n},n.filter=function(){return e=e.append(\"filter\"),n},n.feFlood=function(){return e=e.append(\"feFlood\"),n},n.feComposite=function(){return e=e.append(\"feComposite\"),n},n.feOffset=function(){return e=e.append(\"feOffset\"),n},n.feGaussianBlur=function(){return e=e.append(\"feGaussianBlur\"),n},n.result=function(t){return e=e.attr(\"result\",t),n},n.floodColor=function(t){return e=e.attr(\"flood-color\",t),n},n.floodOpacity=function(t){return e=e.attr(\"flood-opacity\",t),n},n.stdDeviation=function(t){return e=e.attr(\"stdDeviation\",t),n},n.operator=function(t){return e=e.attr(\"operator\",t),n},n.height=function(t){return e=e.attr(\"height\",t),n},n.width=function(t){return e=e.attr(\"width\",t),n},n[\"in\"]=function(t){return e=e.attr(\"in\",t),n},n.in2=function(t){return e=e.attr(\"in2\",t),n},n.id=function(t){return e=e.attr(\"id\",t),n},n.fx=function(t){return e=e.attr(\"fx\",t),n},n.fy=function(t){return e=e.attr(\"fy\",t),n},n.dx=function(t){return e=e.attr(\"dx\",t),n},n.dy=function(t){return e=e.attr(\"dy\",t),n},n.x1=function(t){return e=e.attr(\"x1\",t),n},n.y1=function(t){return e=e.attr(\"y1\",t),n},n.x2=function(t){return e=e.attr(\"x2\",t),n},n.y2=function(t){return e=e.attr(\"y2\",t),n},n.x=function(t){return e=e.attr(\"x\",t),n},n.y=function(t){return e=e.attr(\"y\",t),n},n.r=function(t){return e=e.attr(\"r\",t),n},n.spreadMethod=function(t){return e=e.attr(\"spreadMethod\",t),n},n.gradientUnits=function(t){return e=e.attr(\"gradientUnits\",t),n},n.xlink=function(t){return e=e.attr(\"xlink:href\",t),n},n.offset=function(t){return e=e.attr(\"offset\",t),n},n.stopColor=function(t){return e=e.attr(\"stop-color\",t),n},n.path=function(){return e=e.append(\"path\"),n},n.d=function(t){return e=e.attr(\"d\",t),n},n},this.viz=u}();\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  demo7.js */\nvar data=[[\"plant1\",\"bee1\",6],\n[\"plant2\",\"bee1\",9],\n[\"plant3\",\"bee1\",3],\n[\"plant4\",\"bee1\",0],\n[\"plant1\",\"bee2\",0],\n[\"plant2\",\"bee2\",2],\n[\"plant3\",\"bee2\",0],\n[\"plant4\",\"bee2\",0],\n[\"plant1\",\"bee3\",0],\n[\"plant2\",\"bee3\",0],\n[\"plant3\",\"bee3\",0],\n[\"plant4\",\"bee3\",7]]\n\n\n\n function sort(sortOrder){\n                    return function(a,b){ return d3.ascending(sortOrder.indexOf(a),sortOrder.indexOf(b)) }\n                  }\nvar color = {'Unlinked':'#3366CC','bee1':'green','bee2':'red','bee3':'yellow'};\n\n\n\n\nvar g1 = svg.append(\"g\").attr(\"transform\",\"translate(188,50)\");\n                         var bp1=viz.bP()\n                         .data(data)\n                         .value(d=>d[2])\n                         .min(10)\n                         .pad(1)\n                         .height(400)\n                         .width(200)\n                         .barSize(35)\n                         .fill(d=>color[d.secondary])\n.orient(\"vertical\");\n\ng1.call(bp1);g1.append(\"text\")\n                        .attr(\"x\",-50).attr(\"y\",-8)\n                        .style(\"text-anchor\",\"middle\")\n                        .text(\"Primary\");\n                        g1.append(\"text\")\n                        .attr(\"x\", 250)\n                        .attr(\"y\",-8).style(\"text-anchor\",\"middle\")\n                        .text(\"Secondary\");\n                        g1.append(\"text\")\n                        .attr(\"x\",100).attr(\"y\",-25)\n                        .style(\"text-anchor\",\"middle\")\n                        .attr(\"class\",\"header\")\n                        .text(\"meadow\");\n\n g1.selectAll(\".mainBars\")\n                        .on(\"mouseover\",mouseover)\n                        .on(\"mouseout\",mouseout);\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"label\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -27.2:24.8))\n                        .attr(\"y\",d=>+6)\n                        .text(d=>d.key)\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\"));\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"perc\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -141:144))\n                        .attr(\"y\",d=>+6)\n                        .text(function(d){ return d3.format(\"0.0%\")(d.percent)})\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\")); \n\nfunction mouseover(d){\nbp1.mouseover(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\n}\n\n                     function mouseout(d){\nbp1.mouseout(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\n}\n\n\n};","style":"/* R2D3 Source File:  demo7.css */\n .mainBars{\n    shape-rendering: auto;\n    fill-opacity: 1;\n    stroke-width: 0.5px;\n    stroke: rgb(0, 0, 0);\n    stroke-opacity: 0;\n  }\n    .subBars{\n    shape-rendering:crispEdges;\n    }\n    .edges{\n    stroke:none;\n    fill-opacity:0.3;\n    }\n    .label{\n    color:#000000;\n    }","version":5,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div id="orientation" class="section level2">
<h2>Orientation</h2>
<p>Note that horizontal isnt yet supported as well as vertical, and labels often overlap when interactions are rare. Generally it is not recommended.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bipartite_D3</span>(SmallTestWeb,<span class="at">colouroption =</span> <span class="st">&#39;brewer&#39;</span>,</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">Orientation =</span> <span class="st">&#39;horizontal&#39;</span>, <span class="at">filename =</span> <span class="st">&#39;demo8&#39;</span>)</span></code></pre></div>
<div id="htmlwidget-320c039de991247f1d59" style="width:700px;height:700px;" class="r2d3 html-widget"></div>
<script type="application/json" data-for="htmlwidget-320c039de991247f1d59">{"x":{"data":null,"type":"logical","container":"svg","options":null,"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n/* R2D3 Source File:  vizjs.js */\n!function(){function t(t){for(;t>o;)t-=o;for(;0>t;)t+=o;return t}function n(t,n,e,r,a,i){if(0>=a||0>=r)return 0;var u=t.concat().sort(d3.ascending),o=r-u.length*n+(i?n:0),s=[],c=0,d=0;return d3.range(u.length).forEach(function(t){d=(o-e*t)/(a-=u[t-1]||0),c+=u[t]*d<=e?1:0,s.push(d)}),s[c]}function e(t,e,r,a,i){var u=a,o=d3.sum(t),s=n(t,e,r,i-a,o,!1),c=t.map(function(t){var n=s*t,a=(r>n?r:n)/2;return u+=2*a+e,{c:u-a,v:n,w:a,value:t,percent:t/(o||1)}});return c}function r(t){function n(t,n){return[t*Math.cos(n),t*Math.sin(n)]}var e=n(t[0],t[2]),r=n(t[0],t[3]),a=n(t[1],t[2]),i=n(t[1],t[3]);return[\"M\",e,\"A\",t[0],t[0],\"0\",t[3]-t[2]>s?1:0,\"1\",r,\"L\",i,\"A\",t[1],t[1],\"0\",t[3]-t[2]>s?1:0,\"0\",a,\"z\"].join(\" \")}function a(t,n,e,r,a,i){function u(t,n,e){return\"A\"+t+\",\"+t+\" 0 \"+ +(e>s)+\",1 \"+n}function c(t,n){return[t*Math.cos(n),t*Math.sin(n)]}function d(t,n,e,r){e+=n>e?o:0;var a=e-n,i=1-(a>s?o-a:a)/s;i=Math.pow(i,5);var u=(e+n)/2-(e-n>s?s:0);return\"Q\"+i*r*Math.cos(u)+\",\"+i*r*Math.sin(u)+\" \"+t}var f=c(t,n),l=c(t,e),g=c(r,a),p=c(r,i);return\"M\"+f+u(t,l,e-n)+(n==a&&e==i?d(f,n,e,r):d(g,e,a,r)+u(r,p,i-a)+d(f,n,i,t))+\"Z\"}function i(t,n){ret=[];for(var e=n;e>n-t;e--)ret.push(0>e?e+t:e);return ret}var u={version:\"1.1.0\"},o=2*Math.PI,s=Math.PI,c=Math.PI/2;u.bP=function(){function t(i){y=i,i.each(function(){var i=d3.select(this),u=t.bars(),o=i.selectAll(\".subBars\").data(u.subBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"subBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);\"undefined\"!=typeof h&&o.style(\"fill\",function(t){return h(t)});var s=i.selectAll(\".edges\").data(u.edges).enter().append(\"path\").attr(\"class\",\"edges\").attr(\"d\",function(t){return t.path}).style(\"fill-opacity\",t.edgeOpacity());\"undefined\"!=typeof h&&s.style(\"fill\",function(t){return h(t)}),i.selectAll(\".mainBars\").data(u.mainBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"mainBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a).style(\"fill-opacity\",0).on(\"mouseover\",t.mouseover).on(\"mouseout\",t.mouseout)})}function n(t){return-t.width}function e(t){return-t.height}function r(t){return 2*t.width}function a(t){return 2*t.height}var i,u,o,s,c,d,f,l,g,p,h,y,m,v,A,x,k;return t.data=function(n){return arguments.length?(p=n,t):p},t.fill=function(n){return arguments.length?(h=n,t):h},t.keyPrimary=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:function(t){return t[0]}},t.sortPrimary=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:d3.ascending},t.keySecondary=function(n){return arguments.length?(u=n,t):\"undefined\"!=typeof u?u:function(t){return t[1]}},t.sortSecondary=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:d3.ascending},t.value=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:function(t){return t[2]}},t.width=function(n){return arguments.length?(s=n,t):\"undefined\"!=typeof s?s:400},t.height=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:600},t.barSize=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:35},t.min=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:0},t.orient=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:\"vertical\"},t.pad=function(n){return arguments.length?(g=n,t):\"undefined\"!=typeof g?g:0},t.duration=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:500},t.edgeOpacity=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:.4},t.edgeMode=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:\"curved\"},t.bars=function(n){function e(t,e){return\"undefined\"==typeof n||n.part===e||d[n.part](t)===n.key}function r(){var n=t.min()/2;s.primary.forEach(function(t){t.height<n&&(t.height=n)}),s.secondary.forEach(function(t){t.height<n&&(t.height=n)})}function a(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data()),i=o(a,t.pad(),t.min(),0,\"vertical\"==f?t.height():t.width()),u=t.barSize();a.forEach(function(e,r){s[n].push({x:\"horizontal\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.width()-u/2,y:\"vertical\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.height()-u/2,height:\"vertical\"==f?(i[r].e-i[r].s)/2:u/2,width:\"horizontal\"==f?(i[r].e-i[r].s)/2:u/2,part:n,key:e.key,value:e.value,percent:i[r].p})})}function i(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.map(s[n],function(t){return t.key}),i=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).key(\"secondary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"secondary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data());i.forEach(function(e){var r=a.get(e.key),i=o(e.values,0,0,\"vertical\"==f?r.y-r.height:r.x-r.width,\"vertical\"==f?r.y+r.height:r.x+r.width),u=t.barSize();e.values.forEach(function(a,o){c[n].push({x:\"vertical\"==f?\"primary\"==n?u/2:t.width()-u/2:(i[o].s+i[o].e)/2,y:\"horizontal\"==f?\"primary\"==n?u/2:t.height()-u/2:(i[o].s+i[o].e)/2,height:(\"vertical\"==f?i[o].e-i[o].s:u)/2,width:(\"horizontal\"==f?i[o].e-i[o].s:u)/2,part:n,primary:\"primary\"==n?e.key:a.key,secondary:\"primary\"==n?a.key:e.key,value:a.value,percent:i[o].p*r.percent,index:\"primary\"==n?e.key+\"|\"+a.key:a.key+\"|\"+e.key})})})}function u(){function n(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(t+e)/2,d=(i+o)/2;return[\"M\",t,\",\",n,\"C\",c,\",\",n,\" \",c,\",\",r,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",d,\",\",u,\" \",d,\",\",s,\",\",o,\",\",s,\"z\"].join(\"\")}function e(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(n+r)/2,d=(u+s)/2;return[\"M\",t,\",\",n,\"C\",t,\",\",c,\" \",e,\",\",c,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",i,\",\",d,\" \",o,\",\",d,\",\",o,\",\",s,\"z\"].join(\"\")}var r=d3.map(c.secondary,function(t){return t.index}),a=t.edgeMode();return c.primary.map(function(t){var a=r.get(t.index);return{path:\"vertical\"===f?n(t.x+t.width,t.y+t.height,a.x-a.width,a.y+a.height,a.x-a.width,a.y-a.height,t.x+t.width,t.y-t.height):e(t.x-t.width,t.y+t.height,a.x-a.width,a.y-a.height,a.x+a.width,a.y-a.height,t.x+t.width,t.y+t.height),primary:t.primary,secondary:t.secondary,value:t.value,percent:t.percent}})}function o(t,n,e,r,a){var i=e/(a-r-2*t.length*n),u=0,o=0,s=d3.sum(t,function(t){return t.value});t.forEach(function(t){t.value<i*s&&(u+=1,o+=t.value)});var c=1e-5>s?0:(a-r-2*t.length*n-u*e)/(s-o),d=r,f=[];return t.forEach(function(t){var r=t.value*c;f.push({s:d+n+(e>r?.5*(e-r):0),e:d+n+(e>r?.5*(e+r):r),p:1e-5>s?0:t.value/s}),d+=2*n+(e>r?e:r)}),f}var s={primary:[],secondary:[]},c={primary:[],secondary:[]},d={primary:t.keyPrimary(),secondary:t.keySecondary()},f=t.orient();return a(\"primary\"),a(\"secondary\"),i(\"primary\"),i(\"secondary\"),r(),{mainBars:s.primary.concat(s.secondary),subBars:c.primary.concat(c.secondary),edges:u()}},t.mouseover=function(i){var u=t.bars(i);y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",1),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);var o=y.selectAll(\".edges\").data(u.edges);o.filter(function(t){return t[i.part]===i.key}).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),o.filter(function(t){return t[i.part]!==i.key}).transition().duration(t.duration()).style(\"fill-opacity\",0).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t.mouseout=function(i){var u=t.bars();y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",0),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a),y.selectAll(\".edges\").data(u.edges).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t},u.gg=function(){function t(n){g=n,n.each(function(){var n=d3.select(this),e=t.scale(),r=t.minorTickStart(),a=t.minorTickEnd(),i=t.majorTickStart(),u=t.majorTickEnd(),o=t.ticks(),c=t.majorTicks(),d=t.labelLocation(),f=t.outerRadius();n.append(\"circle\").attr(\"r\",f).style(\"fill\",\"url(#vizgg3\"+p+\")\").attr(\"class\",\"face\"),n.append(\"circle\").attr(\"r\",t.innerRadius()).style(\"fill\",\"url(#vizgg2\"+p+\")\").style(\"filter\",\"url(#vizgg5\"+p+\")\").attr(\"class\",\"innerFace\");var l=n.append(\"g\");l.selectAll(\"line\").data(o).enter().append(\"line\").attr(\"class\",function(t){return c(t)?\"majorTicks\":\"minorTicks\"}).attr(\"x1\",function(t){return f*(c(t)?i:r)*Math.cos(e(t))}).attr(\"y1\",function(t){return f*(c(t)?i:r)*Math.sin(e(t))}).attr(\"x2\",function(t){return f*(c(t)?u:a)*Math.cos(e(t))}).attr(\"y2\",function(t){return f*(c(t)?u:a)*Math.sin(e(t))}),n.selectAll(\"text\").data(o.filter(c)).enter().append(\"text\").attr(\"class\",\"label\").attr(\"x\",function(t){return f*d*Math.cos(e(t))}).attr(\"y\",function(t){return f*d*Math.sin(e(t))}).attr(\"dy\",3).text(function(t){return t});var g=t.outerRadius()/b.outerRadius,h=180*t.scale()(t.value())/s+90;n.append(\"g\").attr(\"transform\",\"translate(1,1)\").selectAll(\".needleshadow\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needleshadow\").append(\"path\").attr(\"d\",[\"m 0\",-130*g,5*g,175*g,-10*g,\"0,z\"].join(\",\")).style(\"filter\",\"url(#vizgg6\"+p+\")\"),n.selectAll(\".needle\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needle\").append(\"polygon\").attr(\"points\",[-.5*g,-130*g,.5*g,-130*g,5*g,45*g,-5*g,45*g].join(\",\")).style(\"fill\",\"url(#vizgg4\"+p+\")\")})}var n,e,r,a,i,o,c,d,f,l,g,p,h,y,m,v,A,x,k,b={innerRadius:20,outerRadius:150,angleOffset:.7,startAngle:-1.5*s,endAngle:.5*s,minorTickStart:.9,minorTickEnd:.95,majorTickStart:.82,majorTickEnd:.95,needleColor:\"#de2c2c\",innerFaceColor:\"#999999\",faceColor:\"#666666\",domain:[0,100],duration:500,ease:\"cubicInOut\",ticks:d3.range(0,101,2),majorTicks:function(t){return t%10===0},labelLocation:.7};return t.scale=function(){return d3.scale.linear().domain(t.domain()).range([b.startAngle+t.angleOffset(),b.endAngle-t.angleOffset()])},t.innerRadius=function(e){return arguments.length?(n=e,t):\"undefined\"!=typeof n?n:b.innerRadius},t.outerRadius=function(n){return arguments.length?(e=n,t):\"undefined\"!=typeof e?e:b.outerRadius},t.angleOffset=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:b.angleOffset},t.labelLocation=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:b.labelLocation},t.ticks=function(n){return arguments.length?(h=n,t):\"undefined\"!=typeof h?h:b.ticks},t.majorTicks=function(n){return arguments.length?(y=n,t):\"undefined\"!=typeof y?y:b.majorTicks},t.minorTickStart=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:b.minorTickStart},t.minorTickEnd=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:b.minorTickEnd},t.majorTickStart=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:b.majorTickStart},t.majorTickEnd=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:b.majorTickEnd},t.needleColor=function(n){return arguments.length?(r=n,t):\"undefined\"!=typeof r?r:b.needleColor},t.innerFaceColor=function(n){return arguments.length?(a=n,t):\"undefined\"!=typeof a?a:b.innerFaceColor},t.faceColor=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:b.faceColor},t.domain=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:b.domain},t.duration=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:b.duration},t.ease=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:b.ease},t.value=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:.5*(b.domain[0]+b.domain[1])},t.defs=function(n,e){var r=n.append(\"defs\");p=e;var a=t.needleColor(),i=t.innerFaceColor(),o=t.faceColor(),s=u.defs(r).lG().id(\"vizgg1\"+e).sel();u.defs(s).stop().offset(\"0\").stopColor(a),u.defs(s).stop().offset(\"1\").stopColor(d3.rgb(a).darker(1));var c=u.defs(r).rG().id(\"vizgg2\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(c).stop().offset(\"0\").stopColor(i),u.defs(c).stop().offset(\"1\").stopColor(d3.rgb(i).darker(2));var d=u.defs(r).rG().id(\"vizgg3\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(d).stop().offset(\"0\").stopColor(o),u.defs(d).stop().offset(\"1\").stopColor(d3.rgb(o).darker(2)),u.defs(r).lG().id(\"vizgg4\"+e).gradientUnits(\"userSpaceOnUse\").y1(\"80\").x1(\"-10\").y2(\"80\").x2(\"10\").xlink(\"#vizgg1\"+e);var f=u.defs(r).filter().id(\"vizgg5\"+e).sel();u.defs(f).feFlood().result(\"flood\").floodColor(\"rgb(0,0,0)\").floodOpacity(\"0.6\"),u.defs(f).feComposite().result(\"composite1\").operator(\"in\").in2(\"SourceGraphic\")[\"in\"](\"flood\"),u.defs(f).feGaussianBlur().result(\"blur\").stdDeviation(\"2\")[\"in\"](\"composite1\"),u.defs(f).feOffset().result(\"offset\").dy(\"2\").dx(\"2\"),u.defs(f).feComposite().result(\"composite2\").operator(\"over\").in2(\"offset\")[\"in\"](\"SourceGraphic\");var l=u.defs(r).filter().x(\"-0.3\").y(\"-0.3\").height(\"1.8\").width(\"1.8\").id(\"vizgg6\"+e).sel();u.defs(l).feGaussianBlur().stdDeviation(\"2\")},t.setNeedle=function(n){function e(t,n){return d3.interpolateString(\"rotate(\"+t+\")\",\"rotate(\"+n+\")\")}var r=180*t.scale()(n)/s+90,a=180*t.scale()(t.value())/s+90,i=t.ease();g.selectAll(\".needle\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i),g.selectAll(\".needleshadow\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i).each(\"end\",function(){angle=n}),t.value(n)},t},u.ch=function(){function u(t){function n(t){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}p=t,k||f(),t.each(function(){var t=d3.select(this),r=t.selectAll(\".groups\").data(x).enter().append(\"g\").attr(\"class\",\"groups\").on(\"mouseover\",u.mouseover).on(\"mouseout\",u.mouseout),a=r.append(\"text\").attr(\"class\",\"label\"),i=(1+u.labelPadding())*u.outerRadius(),s=u.valueFormat();a.filter(function(t){return\"g\"==t.type}).attr(\"x\",function(t){return i*Math.cos(d(t))}).attr(\"y\",function(t){return i*Math.sin(d(t))}).text(function(t){return t.source+\" (\"+s(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"}).each(function(t){this._current=t}),r.append(\"path\").style(\"fill\",function(t){return y(t.source)}).style(\"stroke\",function(t){return y(t.source)}).attr(\"d\",n).each(function(t){this._current=t}).filter(function(t){return\"g\"==t.type}),t.append(\"g\").attr(\"class\",\"chords\").selectAll(\".chord\").data(k).enter().append(\"g\").attr(\"class\",\"chord\").append(\"path\").each(function(t){this._current=t}).attr(\"d\",e).style(\"fill\",function(t){return y(t.target)}).style(\"opacity\",u.chordOpacity()).style(\"stroke\",function(t){return y(t.target)}).style(\"display\",function(t){return t.display?\"inline\":\"none\"})})}function s(t){function n(t,n){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}function i(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return e(n(t))}}function s(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return n(e(t),t)}}function f(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.cos(d(n(t)))}}function l(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.sin(d(n(t)))}}var g=p.selectAll(\".groups\").data(t?b:u.groups()),h=(1+u.labelPadding())*u.outerRadius(),y=u.valueFormat();g.select(\"path\").transition().duration(L).attrTween(\"d\",s),g.select(\".label\").filter(function(t){return\"g\"==t.type}).transition().duration(L).attrTween(\"x\",f).attrTween(\"y\",l).text(function(t){return t.source+\" (\"+y(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"});var m=u.chordOpacity();p.select(\".chords\").selectAll(\".chord\").data(t?w:u.chords()).select(\"path\").transition().duration(L).attrTween(\"d\",i).style(\"opacity\",function(t){return t.display?m:0})}function d(n){return t((n.startAngle+n.endAngle)/2)}function f(){m=[],h.forEach(function(t){-1==m.indexOf(E(t))&&m.push(E(t)),-1==m.indexOf(M(t))&&m.push(M(t))}),m=m.sort(T),v={},A={},m.forEach(function(t){v[t]={},A[t]={},m.forEach(function(n){v[t][n]=0,A[t][n]=!1})}),h.forEach(function(t){var n=E(t),e=M(t);v[n][e]+=S(t),A[n][e]=!0}),x=[],m.forEach(function(t,n){x.push({source:t,type:\"gs\",value:0,skipPad:!0,index:n}),x.push({source:t,type:\"g\",value:d3.sum(m,function(n){return v[t][n]}),skipPad:!1,index:n})}),g(x,z,R,void 0,P),k=[],x.filter(function(t){return\"g\"==t.type}).forEach(function(t,n){var r=i(m.length,n),a=e(r.map(function(n){return v[t.source][m[n]]}),0,0,t.startAngle,t.endAngle);r.forEach(function(e,r){var i=a[r];k.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:t.source,target:m[e],type:\"c\",display:A[t.source][m[e]],index:n,subindex:e,indexsubindex:n+\"-\"+e})})});var t=d3.map(k,function(t){return t.indexsubindex});k.forEach(function(n){if(n.subindex==n.index)return n.endStartAngle=n.startAngle,void(n.endEndAngle=n.startAngle);var e=t.get(n.subindex+\"-\"+n.index);n.endStartAngle=e.startAngle,n.endEndAngle=e.startAngle}),F=!1}function l(t){function n(t){return t.endAngle+t.startAngle}var r=x.filter(function(n){return n.source==t&&\"g\"==n.type})[0];b=[],m.forEach(function(n,e){b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"gs\",value:n==t?v[n][n]:0,skipPad:n==t&&A[n][n]?!1:!0,index:e}),n==t?b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"g\",value:r.value,skipPad:!1,index:e}):b.push({source:n,type:\"g\",value:v[t][n],skipPad:!1,index:e})}),g(b,z,R,t,P);var a=n(r);x.forEach(function(t,e){var r=b[e],i=n(t)<a;r.startAngle-=i?o:0,r.endAngle-=i?o:0}),w=[],b.filter(function(t){return\"g\"==t.type}).forEach(function(n,r){var a=i(m.length,r),u=a.map(function(e){var r=m[e];return n.source==t?v[n.source][r]:r==t?v[r][n.source]:0}),o=e(u,0,0,n.startAngle,n.endAngle);a.forEach(function(e,a){var i=o[a];w.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:n.source,target:m[e],type:\"c\",display:n.source===t,index:r,subindex:e,indexsubindex:r+\"-\"+e})})});var u=d3.map(w.map(function(t){return{startAngle:t.startAngle,endAngle:t.endAngle,indexsubindex:t.indexsubindex}}),function(t){return t.indexsubindex}),s=d3.map(b.filter(function(t){return\"gs\"==t.type}),function(t){return t.source});w.forEach(function(n){if(n.subindex==n.index){var e=s.get(n.source);return n.endStartAngle=e.startAngle,void(n.endEndAngle=e.endAngle)}var r=u.get(n.subindex+\"-\"+n.index);n.endStartAngle=r.startAngle,n.endEndAngle=r.endAngle,n.source!==t&&(n.startAngle=n.endAngle,n.endEndAngle=n.endStartAngle)})}function g(t,e,r,a,i){var u=void 0!==a,o=0;if(u){for(var s=!1;o<t.length;o++)if(t[o].source==a&&\"g\"==t[o].type){s=!0;break}s||console.log(\"The fixed source '\"+a+\"' is not a valid key\")}var c=d3.range(t.length);u&&(c=c.slice(o).concat(c.slice(0,o)));var d=t.filter(function(t){return!(u&&t.source===a&&\"g\"==t.type||t.skipPad)}).map(function(t){return t.value}),f=2*Math.PI-(u?t[o].endAngle-t[o].startAngle+2*e:0),l=u?t[o].endAngle+e:i,g=d3.sum(d),p=n(d,e,r,0>=f?0:f,g,u?!0:!1);c.slice(u?1:0).forEach(function(n){var a=p*t[n].value,i=(r>a?r-a:0)/2;t[n].startAngle=l,t[n].endAngle=l+a,t[n].padAngle=i,t[n].percent=t[n].value/(g||1),l+=a+i+(t[n].skipPad?0:e)})}var p,h,y,m,v,A,x,k,b,w,E=function(t){return t[0]},M=function(t){return t[1]},S=function(t){return t[2]},C=function(t){return t},T=d3.ascending,z=.03,P=0,B=180,O=200,j=.7,G=.02,R=0,L=500,F=!0;return u.data=function(t){return arguments.length?(h=t,F=!0,u):h},u.fill=function(t){return arguments.length?(y=t,u):y},u.duration=function(t){return arguments.length?(L=t,u):L},u.chordOpacity=function(t){return arguments.length?(j=t,u):j},u.innerRadius=function(t){return arguments.length?(B=t,F=!0,u):B},u.outerRadius=function(t){return arguments.length?(O=t,F=!0,u):O},u.source=function(t){return arguments.length?(E=t,F=!0,u):E},u.target=function(t){return arguments.length?(M=t,F=!0,u):M},u.value=function(t){return arguments.length?(S=t,F=!0,u):S},u.padding=function(t){return arguments.length?(z=t,F=!0,u):z},u.labelPadding=function(t){return arguments.length?(G=t,u):G},u.sort=function(t){return arguments.length?(T=t,F=!0,u):T},u.startAngle=function(t){return arguments.length?(P=t,F=!0,u):P},u.chords=function(){return F&&f(),k},u.groups=function(){return F&&f(),x},u.valueFormat=function(t){return arguments.length?(C=t,u):C},u.mouseover=function(t){l(t.source),s(1)},u.mouseout=function(t){s(0)},u},u.defs=function(t){var n={},e=t;return n.sel=function(){return e},n.lG=function(){return e=e.append(\"linearGradient\"),n},n.rG=function(){return e=e.append(\"radialGradient\"),n},n.stop=function(){return e=e.append(\"stop\"),n},n.filter=function(){return e=e.append(\"filter\"),n},n.feFlood=function(){return e=e.append(\"feFlood\"),n},n.feComposite=function(){return e=e.append(\"feComposite\"),n},n.feOffset=function(){return e=e.append(\"feOffset\"),n},n.feGaussianBlur=function(){return e=e.append(\"feGaussianBlur\"),n},n.result=function(t){return e=e.attr(\"result\",t),n},n.floodColor=function(t){return e=e.attr(\"flood-color\",t),n},n.floodOpacity=function(t){return e=e.attr(\"flood-opacity\",t),n},n.stdDeviation=function(t){return e=e.attr(\"stdDeviation\",t),n},n.operator=function(t){return e=e.attr(\"operator\",t),n},n.height=function(t){return e=e.attr(\"height\",t),n},n.width=function(t){return e=e.attr(\"width\",t),n},n[\"in\"]=function(t){return e=e.attr(\"in\",t),n},n.in2=function(t){return e=e.attr(\"in2\",t),n},n.id=function(t){return e=e.attr(\"id\",t),n},n.fx=function(t){return e=e.attr(\"fx\",t),n},n.fy=function(t){return e=e.attr(\"fy\",t),n},n.dx=function(t){return e=e.attr(\"dx\",t),n},n.dy=function(t){return e=e.attr(\"dy\",t),n},n.x1=function(t){return e=e.attr(\"x1\",t),n},n.y1=function(t){return e=e.attr(\"y1\",t),n},n.x2=function(t){return e=e.attr(\"x2\",t),n},n.y2=function(t){return e=e.attr(\"y2\",t),n},n.x=function(t){return e=e.attr(\"x\",t),n},n.y=function(t){return e=e.attr(\"y\",t),n},n.r=function(t){return e=e.attr(\"r\",t),n},n.spreadMethod=function(t){return e=e.attr(\"spreadMethod\",t),n},n.gradientUnits=function(t){return e=e.attr(\"gradientUnits\",t),n},n.xlink=function(t){return e=e.attr(\"xlink:href\",t),n},n.offset=function(t){return e=e.attr(\"offset\",t),n},n.stopColor=function(t){return e=e.attr(\"stop-color\",t),n},n.path=function(){return e=e.append(\"path\"),n},n.d=function(t){return e=e.attr(\"d\",t),n},n},this.viz=u}();\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  demo8.js */\nvar data=[[\"plant1\",\"bee1\",6],\n[\"plant2\",\"bee1\",9],\n[\"plant3\",\"bee1\",3],\n[\"plant4\",\"bee1\",0],\n[\"plant1\",\"bee2\",0],\n[\"plant2\",\"bee2\",2],\n[\"plant3\",\"bee2\",0],\n[\"plant4\",\"bee2\",0],\n[\"plant1\",\"bee3\",0],\n[\"plant2\",\"bee3\",0],\n[\"plant3\",\"bee3\",0],\n[\"plant4\",\"bee3\",7]]\n\n\n\n function sort(sortOrder){\n                    return function(a,b){ return d3.ascending(sortOrder.indexOf(a),sortOrder.indexOf(b)) }\n                  }\nvar color = {'Unlinked ':'#3366CC','bee1':'#7FC97F','bee2':'#BEAED4','bee3':'#FDC086'};\n\n\n\n\nvar g1 = svg.append(\"g\").attr(\"transform\",\"translate(188,50)\");\n                         var bp1=viz.bP()\n                         .data(data)\n                         .value(d=>d[2])\n                         .min(10)\n                         .pad(1)\n                         .height(200)\n                         .width(400)\n                         .barSize(35)\n                         .fill(d=>color[d.secondary])\n.orient(\"horizontal\");\n\ng1.call(bp1);g1.append(\"text\")\n                        .attr(\"x\",0).attr(\"y\",-10)\n                        .style(\"text-anchor\",\"middle\")\n                        .attr(\"class\",\"header\")\n                        .text(\"meadow\");\n\n g1.selectAll(\".mainBars\")\n                        .on(\"mouseover\",mouseover)\n                        .on(\"mouseout\",mouseout);\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"label\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -0:0))\n                        .attr(\"y\",d=>(d.part==\"primary\"? -35:35))\n                        .text(d=>d.key)\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"middle \": \"middle \"));\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"perc\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -0:0))\n                        .attr(\"y\",d=>(d.part==\"primary\"? -50:50))\n                        .text(function(d){ return d3.format(\"0.0%\")(d.percent)})\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"middle \": \"middle \")); \n\nfunction mouseover(d){\nbp1.mouseover(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\n}\n\n                     function mouseout(d){\nbp1.mouseout(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\n}\n\n\n};","style":"/* R2D3 Source File:  demo8.css */\n .mainBars{\n    shape-rendering: auto;\n    fill-opacity: 1;\n    stroke-width: 0.5px;\n    stroke: rgb(0, 0, 0);\n    stroke-opacity: 0;\n  }\n    .subBars{\n    shape-rendering:crispEdges;\n    }\n    .edges{\n    stroke:none;\n    fill-opacity:0.3;\n    }\n    .label{\n    color:#000000;\n    }","version":5,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div id="labels" class="section level2">
<h2>Labels</h2>
<div id="main-labels" class="section level3">
<h3>Main Labels</h3>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bipartite_D3</span>(SmallTestWeb, <span class="at">PrimaryLab =</span> <span class="st">&#39;Flowers&#39;</span>,</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">SecondaryLab =</span> <span class="st">&#39;Pollinators&#39;</span>,</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">SiteNames =</span> <span class="st">&#39;Nice Meadow&#39;</span>, <span class="at">filename =</span> <span class="st">&#39;demo9&#39;</span>)</span></code></pre></div>
<div id="htmlwidget-c85919ce3ed919508829" style="width:700px;height:700px;" class="r2d3 html-widget"></div>
<script type="application/json" data-for="htmlwidget-c85919ce3ed919508829">{"x":{"data":null,"type":"logical","container":"svg","options":null,"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n/* R2D3 Source File:  vizjs.js */\n!function(){function t(t){for(;t>o;)t-=o;for(;0>t;)t+=o;return t}function n(t,n,e,r,a,i){if(0>=a||0>=r)return 0;var u=t.concat().sort(d3.ascending),o=r-u.length*n+(i?n:0),s=[],c=0,d=0;return d3.range(u.length).forEach(function(t){d=(o-e*t)/(a-=u[t-1]||0),c+=u[t]*d<=e?1:0,s.push(d)}),s[c]}function e(t,e,r,a,i){var u=a,o=d3.sum(t),s=n(t,e,r,i-a,o,!1),c=t.map(function(t){var n=s*t,a=(r>n?r:n)/2;return u+=2*a+e,{c:u-a,v:n,w:a,value:t,percent:t/(o||1)}});return c}function r(t){function n(t,n){return[t*Math.cos(n),t*Math.sin(n)]}var e=n(t[0],t[2]),r=n(t[0],t[3]),a=n(t[1],t[2]),i=n(t[1],t[3]);return[\"M\",e,\"A\",t[0],t[0],\"0\",t[3]-t[2]>s?1:0,\"1\",r,\"L\",i,\"A\",t[1],t[1],\"0\",t[3]-t[2]>s?1:0,\"0\",a,\"z\"].join(\" \")}function a(t,n,e,r,a,i){function u(t,n,e){return\"A\"+t+\",\"+t+\" 0 \"+ +(e>s)+\",1 \"+n}function c(t,n){return[t*Math.cos(n),t*Math.sin(n)]}function d(t,n,e,r){e+=n>e?o:0;var a=e-n,i=1-(a>s?o-a:a)/s;i=Math.pow(i,5);var u=(e+n)/2-(e-n>s?s:0);return\"Q\"+i*r*Math.cos(u)+\",\"+i*r*Math.sin(u)+\" \"+t}var f=c(t,n),l=c(t,e),g=c(r,a),p=c(r,i);return\"M\"+f+u(t,l,e-n)+(n==a&&e==i?d(f,n,e,r):d(g,e,a,r)+u(r,p,i-a)+d(f,n,i,t))+\"Z\"}function i(t,n){ret=[];for(var e=n;e>n-t;e--)ret.push(0>e?e+t:e);return ret}var u={version:\"1.1.0\"},o=2*Math.PI,s=Math.PI,c=Math.PI/2;u.bP=function(){function t(i){y=i,i.each(function(){var i=d3.select(this),u=t.bars(),o=i.selectAll(\".subBars\").data(u.subBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"subBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);\"undefined\"!=typeof h&&o.style(\"fill\",function(t){return h(t)});var s=i.selectAll(\".edges\").data(u.edges).enter().append(\"path\").attr(\"class\",\"edges\").attr(\"d\",function(t){return t.path}).style(\"fill-opacity\",t.edgeOpacity());\"undefined\"!=typeof h&&s.style(\"fill\",function(t){return h(t)}),i.selectAll(\".mainBars\").data(u.mainBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"mainBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a).style(\"fill-opacity\",0).on(\"mouseover\",t.mouseover).on(\"mouseout\",t.mouseout)})}function n(t){return-t.width}function e(t){return-t.height}function r(t){return 2*t.width}function a(t){return 2*t.height}var i,u,o,s,c,d,f,l,g,p,h,y,m,v,A,x,k;return t.data=function(n){return arguments.length?(p=n,t):p},t.fill=function(n){return arguments.length?(h=n,t):h},t.keyPrimary=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:function(t){return t[0]}},t.sortPrimary=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:d3.ascending},t.keySecondary=function(n){return arguments.length?(u=n,t):\"undefined\"!=typeof u?u:function(t){return t[1]}},t.sortSecondary=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:d3.ascending},t.value=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:function(t){return t[2]}},t.width=function(n){return arguments.length?(s=n,t):\"undefined\"!=typeof s?s:400},t.height=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:600},t.barSize=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:35},t.min=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:0},t.orient=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:\"vertical\"},t.pad=function(n){return arguments.length?(g=n,t):\"undefined\"!=typeof g?g:0},t.duration=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:500},t.edgeOpacity=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:.4},t.edgeMode=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:\"curved\"},t.bars=function(n){function e(t,e){return\"undefined\"==typeof n||n.part===e||d[n.part](t)===n.key}function r(){var n=t.min()/2;s.primary.forEach(function(t){t.height<n&&(t.height=n)}),s.secondary.forEach(function(t){t.height<n&&(t.height=n)})}function a(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data()),i=o(a,t.pad(),t.min(),0,\"vertical\"==f?t.height():t.width()),u=t.barSize();a.forEach(function(e,r){s[n].push({x:\"horizontal\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.width()-u/2,y:\"vertical\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.height()-u/2,height:\"vertical\"==f?(i[r].e-i[r].s)/2:u/2,width:\"horizontal\"==f?(i[r].e-i[r].s)/2:u/2,part:n,key:e.key,value:e.value,percent:i[r].p})})}function i(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.map(s[n],function(t){return t.key}),i=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).key(\"secondary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"secondary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data());i.forEach(function(e){var r=a.get(e.key),i=o(e.values,0,0,\"vertical\"==f?r.y-r.height:r.x-r.width,\"vertical\"==f?r.y+r.height:r.x+r.width),u=t.barSize();e.values.forEach(function(a,o){c[n].push({x:\"vertical\"==f?\"primary\"==n?u/2:t.width()-u/2:(i[o].s+i[o].e)/2,y:\"horizontal\"==f?\"primary\"==n?u/2:t.height()-u/2:(i[o].s+i[o].e)/2,height:(\"vertical\"==f?i[o].e-i[o].s:u)/2,width:(\"horizontal\"==f?i[o].e-i[o].s:u)/2,part:n,primary:\"primary\"==n?e.key:a.key,secondary:\"primary\"==n?a.key:e.key,value:a.value,percent:i[o].p*r.percent,index:\"primary\"==n?e.key+\"|\"+a.key:a.key+\"|\"+e.key})})})}function u(){function n(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(t+e)/2,d=(i+o)/2;return[\"M\",t,\",\",n,\"C\",c,\",\",n,\" \",c,\",\",r,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",d,\",\",u,\" \",d,\",\",s,\",\",o,\",\",s,\"z\"].join(\"\")}function e(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(n+r)/2,d=(u+s)/2;return[\"M\",t,\",\",n,\"C\",t,\",\",c,\" \",e,\",\",c,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",i,\",\",d,\" \",o,\",\",d,\",\",o,\",\",s,\"z\"].join(\"\")}var r=d3.map(c.secondary,function(t){return t.index}),a=t.edgeMode();return c.primary.map(function(t){var a=r.get(t.index);return{path:\"vertical\"===f?n(t.x+t.width,t.y+t.height,a.x-a.width,a.y+a.height,a.x-a.width,a.y-a.height,t.x+t.width,t.y-t.height):e(t.x-t.width,t.y+t.height,a.x-a.width,a.y-a.height,a.x+a.width,a.y-a.height,t.x+t.width,t.y+t.height),primary:t.primary,secondary:t.secondary,value:t.value,percent:t.percent}})}function o(t,n,e,r,a){var i=e/(a-r-2*t.length*n),u=0,o=0,s=d3.sum(t,function(t){return t.value});t.forEach(function(t){t.value<i*s&&(u+=1,o+=t.value)});var c=1e-5>s?0:(a-r-2*t.length*n-u*e)/(s-o),d=r,f=[];return t.forEach(function(t){var r=t.value*c;f.push({s:d+n+(e>r?.5*(e-r):0),e:d+n+(e>r?.5*(e+r):r),p:1e-5>s?0:t.value/s}),d+=2*n+(e>r?e:r)}),f}var s={primary:[],secondary:[]},c={primary:[],secondary:[]},d={primary:t.keyPrimary(),secondary:t.keySecondary()},f=t.orient();return a(\"primary\"),a(\"secondary\"),i(\"primary\"),i(\"secondary\"),r(),{mainBars:s.primary.concat(s.secondary),subBars:c.primary.concat(c.secondary),edges:u()}},t.mouseover=function(i){var u=t.bars(i);y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",1),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);var o=y.selectAll(\".edges\").data(u.edges);o.filter(function(t){return t[i.part]===i.key}).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),o.filter(function(t){return t[i.part]!==i.key}).transition().duration(t.duration()).style(\"fill-opacity\",0).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t.mouseout=function(i){var u=t.bars();y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",0),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a),y.selectAll(\".edges\").data(u.edges).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t},u.gg=function(){function t(n){g=n,n.each(function(){var n=d3.select(this),e=t.scale(),r=t.minorTickStart(),a=t.minorTickEnd(),i=t.majorTickStart(),u=t.majorTickEnd(),o=t.ticks(),c=t.majorTicks(),d=t.labelLocation(),f=t.outerRadius();n.append(\"circle\").attr(\"r\",f).style(\"fill\",\"url(#vizgg3\"+p+\")\").attr(\"class\",\"face\"),n.append(\"circle\").attr(\"r\",t.innerRadius()).style(\"fill\",\"url(#vizgg2\"+p+\")\").style(\"filter\",\"url(#vizgg5\"+p+\")\").attr(\"class\",\"innerFace\");var l=n.append(\"g\");l.selectAll(\"line\").data(o).enter().append(\"line\").attr(\"class\",function(t){return c(t)?\"majorTicks\":\"minorTicks\"}).attr(\"x1\",function(t){return f*(c(t)?i:r)*Math.cos(e(t))}).attr(\"y1\",function(t){return f*(c(t)?i:r)*Math.sin(e(t))}).attr(\"x2\",function(t){return f*(c(t)?u:a)*Math.cos(e(t))}).attr(\"y2\",function(t){return f*(c(t)?u:a)*Math.sin(e(t))}),n.selectAll(\"text\").data(o.filter(c)).enter().append(\"text\").attr(\"class\",\"label\").attr(\"x\",function(t){return f*d*Math.cos(e(t))}).attr(\"y\",function(t){return f*d*Math.sin(e(t))}).attr(\"dy\",3).text(function(t){return t});var g=t.outerRadius()/b.outerRadius,h=180*t.scale()(t.value())/s+90;n.append(\"g\").attr(\"transform\",\"translate(1,1)\").selectAll(\".needleshadow\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needleshadow\").append(\"path\").attr(\"d\",[\"m 0\",-130*g,5*g,175*g,-10*g,\"0,z\"].join(\",\")).style(\"filter\",\"url(#vizgg6\"+p+\")\"),n.selectAll(\".needle\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needle\").append(\"polygon\").attr(\"points\",[-.5*g,-130*g,.5*g,-130*g,5*g,45*g,-5*g,45*g].join(\",\")).style(\"fill\",\"url(#vizgg4\"+p+\")\")})}var n,e,r,a,i,o,c,d,f,l,g,p,h,y,m,v,A,x,k,b={innerRadius:20,outerRadius:150,angleOffset:.7,startAngle:-1.5*s,endAngle:.5*s,minorTickStart:.9,minorTickEnd:.95,majorTickStart:.82,majorTickEnd:.95,needleColor:\"#de2c2c\",innerFaceColor:\"#999999\",faceColor:\"#666666\",domain:[0,100],duration:500,ease:\"cubicInOut\",ticks:d3.range(0,101,2),majorTicks:function(t){return t%10===0},labelLocation:.7};return t.scale=function(){return d3.scale.linear().domain(t.domain()).range([b.startAngle+t.angleOffset(),b.endAngle-t.angleOffset()])},t.innerRadius=function(e){return arguments.length?(n=e,t):\"undefined\"!=typeof n?n:b.innerRadius},t.outerRadius=function(n){return arguments.length?(e=n,t):\"undefined\"!=typeof e?e:b.outerRadius},t.angleOffset=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:b.angleOffset},t.labelLocation=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:b.labelLocation},t.ticks=function(n){return arguments.length?(h=n,t):\"undefined\"!=typeof h?h:b.ticks},t.majorTicks=function(n){return arguments.length?(y=n,t):\"undefined\"!=typeof y?y:b.majorTicks},t.minorTickStart=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:b.minorTickStart},t.minorTickEnd=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:b.minorTickEnd},t.majorTickStart=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:b.majorTickStart},t.majorTickEnd=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:b.majorTickEnd},t.needleColor=function(n){return arguments.length?(r=n,t):\"undefined\"!=typeof r?r:b.needleColor},t.innerFaceColor=function(n){return arguments.length?(a=n,t):\"undefined\"!=typeof a?a:b.innerFaceColor},t.faceColor=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:b.faceColor},t.domain=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:b.domain},t.duration=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:b.duration},t.ease=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:b.ease},t.value=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:.5*(b.domain[0]+b.domain[1])},t.defs=function(n,e){var r=n.append(\"defs\");p=e;var a=t.needleColor(),i=t.innerFaceColor(),o=t.faceColor(),s=u.defs(r).lG().id(\"vizgg1\"+e).sel();u.defs(s).stop().offset(\"0\").stopColor(a),u.defs(s).stop().offset(\"1\").stopColor(d3.rgb(a).darker(1));var c=u.defs(r).rG().id(\"vizgg2\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(c).stop().offset(\"0\").stopColor(i),u.defs(c).stop().offset(\"1\").stopColor(d3.rgb(i).darker(2));var d=u.defs(r).rG().id(\"vizgg3\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(d).stop().offset(\"0\").stopColor(o),u.defs(d).stop().offset(\"1\").stopColor(d3.rgb(o).darker(2)),u.defs(r).lG().id(\"vizgg4\"+e).gradientUnits(\"userSpaceOnUse\").y1(\"80\").x1(\"-10\").y2(\"80\").x2(\"10\").xlink(\"#vizgg1\"+e);var f=u.defs(r).filter().id(\"vizgg5\"+e).sel();u.defs(f).feFlood().result(\"flood\").floodColor(\"rgb(0,0,0)\").floodOpacity(\"0.6\"),u.defs(f).feComposite().result(\"composite1\").operator(\"in\").in2(\"SourceGraphic\")[\"in\"](\"flood\"),u.defs(f).feGaussianBlur().result(\"blur\").stdDeviation(\"2\")[\"in\"](\"composite1\"),u.defs(f).feOffset().result(\"offset\").dy(\"2\").dx(\"2\"),u.defs(f).feComposite().result(\"composite2\").operator(\"over\").in2(\"offset\")[\"in\"](\"SourceGraphic\");var l=u.defs(r).filter().x(\"-0.3\").y(\"-0.3\").height(\"1.8\").width(\"1.8\").id(\"vizgg6\"+e).sel();u.defs(l).feGaussianBlur().stdDeviation(\"2\")},t.setNeedle=function(n){function e(t,n){return d3.interpolateString(\"rotate(\"+t+\")\",\"rotate(\"+n+\")\")}var r=180*t.scale()(n)/s+90,a=180*t.scale()(t.value())/s+90,i=t.ease();g.selectAll(\".needle\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i),g.selectAll(\".needleshadow\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i).each(\"end\",function(){angle=n}),t.value(n)},t},u.ch=function(){function u(t){function n(t){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}p=t,k||f(),t.each(function(){var t=d3.select(this),r=t.selectAll(\".groups\").data(x).enter().append(\"g\").attr(\"class\",\"groups\").on(\"mouseover\",u.mouseover).on(\"mouseout\",u.mouseout),a=r.append(\"text\").attr(\"class\",\"label\"),i=(1+u.labelPadding())*u.outerRadius(),s=u.valueFormat();a.filter(function(t){return\"g\"==t.type}).attr(\"x\",function(t){return i*Math.cos(d(t))}).attr(\"y\",function(t){return i*Math.sin(d(t))}).text(function(t){return t.source+\" (\"+s(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"}).each(function(t){this._current=t}),r.append(\"path\").style(\"fill\",function(t){return y(t.source)}).style(\"stroke\",function(t){return y(t.source)}).attr(\"d\",n).each(function(t){this._current=t}).filter(function(t){return\"g\"==t.type}),t.append(\"g\").attr(\"class\",\"chords\").selectAll(\".chord\").data(k).enter().append(\"g\").attr(\"class\",\"chord\").append(\"path\").each(function(t){this._current=t}).attr(\"d\",e).style(\"fill\",function(t){return y(t.target)}).style(\"opacity\",u.chordOpacity()).style(\"stroke\",function(t){return y(t.target)}).style(\"display\",function(t){return t.display?\"inline\":\"none\"})})}function s(t){function n(t,n){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}function i(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return e(n(t))}}function s(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return n(e(t),t)}}function f(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.cos(d(n(t)))}}function l(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.sin(d(n(t)))}}var g=p.selectAll(\".groups\").data(t?b:u.groups()),h=(1+u.labelPadding())*u.outerRadius(),y=u.valueFormat();g.select(\"path\").transition().duration(L).attrTween(\"d\",s),g.select(\".label\").filter(function(t){return\"g\"==t.type}).transition().duration(L).attrTween(\"x\",f).attrTween(\"y\",l).text(function(t){return t.source+\" (\"+y(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"});var m=u.chordOpacity();p.select(\".chords\").selectAll(\".chord\").data(t?w:u.chords()).select(\"path\").transition().duration(L).attrTween(\"d\",i).style(\"opacity\",function(t){return t.display?m:0})}function d(n){return t((n.startAngle+n.endAngle)/2)}function f(){m=[],h.forEach(function(t){-1==m.indexOf(E(t))&&m.push(E(t)),-1==m.indexOf(M(t))&&m.push(M(t))}),m=m.sort(T),v={},A={},m.forEach(function(t){v[t]={},A[t]={},m.forEach(function(n){v[t][n]=0,A[t][n]=!1})}),h.forEach(function(t){var n=E(t),e=M(t);v[n][e]+=S(t),A[n][e]=!0}),x=[],m.forEach(function(t,n){x.push({source:t,type:\"gs\",value:0,skipPad:!0,index:n}),x.push({source:t,type:\"g\",value:d3.sum(m,function(n){return v[t][n]}),skipPad:!1,index:n})}),g(x,z,R,void 0,P),k=[],x.filter(function(t){return\"g\"==t.type}).forEach(function(t,n){var r=i(m.length,n),a=e(r.map(function(n){return v[t.source][m[n]]}),0,0,t.startAngle,t.endAngle);r.forEach(function(e,r){var i=a[r];k.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:t.source,target:m[e],type:\"c\",display:A[t.source][m[e]],index:n,subindex:e,indexsubindex:n+\"-\"+e})})});var t=d3.map(k,function(t){return t.indexsubindex});k.forEach(function(n){if(n.subindex==n.index)return n.endStartAngle=n.startAngle,void(n.endEndAngle=n.startAngle);var e=t.get(n.subindex+\"-\"+n.index);n.endStartAngle=e.startAngle,n.endEndAngle=e.startAngle}),F=!1}function l(t){function n(t){return t.endAngle+t.startAngle}var r=x.filter(function(n){return n.source==t&&\"g\"==n.type})[0];b=[],m.forEach(function(n,e){b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"gs\",value:n==t?v[n][n]:0,skipPad:n==t&&A[n][n]?!1:!0,index:e}),n==t?b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"g\",value:r.value,skipPad:!1,index:e}):b.push({source:n,type:\"g\",value:v[t][n],skipPad:!1,index:e})}),g(b,z,R,t,P);var a=n(r);x.forEach(function(t,e){var r=b[e],i=n(t)<a;r.startAngle-=i?o:0,r.endAngle-=i?o:0}),w=[],b.filter(function(t){return\"g\"==t.type}).forEach(function(n,r){var a=i(m.length,r),u=a.map(function(e){var r=m[e];return n.source==t?v[n.source][r]:r==t?v[r][n.source]:0}),o=e(u,0,0,n.startAngle,n.endAngle);a.forEach(function(e,a){var i=o[a];w.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:n.source,target:m[e],type:\"c\",display:n.source===t,index:r,subindex:e,indexsubindex:r+\"-\"+e})})});var u=d3.map(w.map(function(t){return{startAngle:t.startAngle,endAngle:t.endAngle,indexsubindex:t.indexsubindex}}),function(t){return t.indexsubindex}),s=d3.map(b.filter(function(t){return\"gs\"==t.type}),function(t){return t.source});w.forEach(function(n){if(n.subindex==n.index){var e=s.get(n.source);return n.endStartAngle=e.startAngle,void(n.endEndAngle=e.endAngle)}var r=u.get(n.subindex+\"-\"+n.index);n.endStartAngle=r.startAngle,n.endEndAngle=r.endAngle,n.source!==t&&(n.startAngle=n.endAngle,n.endEndAngle=n.endStartAngle)})}function g(t,e,r,a,i){var u=void 0!==a,o=0;if(u){for(var s=!1;o<t.length;o++)if(t[o].source==a&&\"g\"==t[o].type){s=!0;break}s||console.log(\"The fixed source '\"+a+\"' is not a valid key\")}var c=d3.range(t.length);u&&(c=c.slice(o).concat(c.slice(0,o)));var d=t.filter(function(t){return!(u&&t.source===a&&\"g\"==t.type||t.skipPad)}).map(function(t){return t.value}),f=2*Math.PI-(u?t[o].endAngle-t[o].startAngle+2*e:0),l=u?t[o].endAngle+e:i,g=d3.sum(d),p=n(d,e,r,0>=f?0:f,g,u?!0:!1);c.slice(u?1:0).forEach(function(n){var a=p*t[n].value,i=(r>a?r-a:0)/2;t[n].startAngle=l,t[n].endAngle=l+a,t[n].padAngle=i,t[n].percent=t[n].value/(g||1),l+=a+i+(t[n].skipPad?0:e)})}var p,h,y,m,v,A,x,k,b,w,E=function(t){return t[0]},M=function(t){return t[1]},S=function(t){return t[2]},C=function(t){return t},T=d3.ascending,z=.03,P=0,B=180,O=200,j=.7,G=.02,R=0,L=500,F=!0;return u.data=function(t){return arguments.length?(h=t,F=!0,u):h},u.fill=function(t){return arguments.length?(y=t,u):y},u.duration=function(t){return arguments.length?(L=t,u):L},u.chordOpacity=function(t){return arguments.length?(j=t,u):j},u.innerRadius=function(t){return arguments.length?(B=t,F=!0,u):B},u.outerRadius=function(t){return arguments.length?(O=t,F=!0,u):O},u.source=function(t){return arguments.length?(E=t,F=!0,u):E},u.target=function(t){return arguments.length?(M=t,F=!0,u):M},u.value=function(t){return arguments.length?(S=t,F=!0,u):S},u.padding=function(t){return arguments.length?(z=t,F=!0,u):z},u.labelPadding=function(t){return arguments.length?(G=t,u):G},u.sort=function(t){return arguments.length?(T=t,F=!0,u):T},u.startAngle=function(t){return arguments.length?(P=t,F=!0,u):P},u.chords=function(){return F&&f(),k},u.groups=function(){return F&&f(),x},u.valueFormat=function(t){return arguments.length?(C=t,u):C},u.mouseover=function(t){l(t.source),s(1)},u.mouseout=function(t){s(0)},u},u.defs=function(t){var n={},e=t;return n.sel=function(){return e},n.lG=function(){return e=e.append(\"linearGradient\"),n},n.rG=function(){return e=e.append(\"radialGradient\"),n},n.stop=function(){return e=e.append(\"stop\"),n},n.filter=function(){return e=e.append(\"filter\"),n},n.feFlood=function(){return e=e.append(\"feFlood\"),n},n.feComposite=function(){return e=e.append(\"feComposite\"),n},n.feOffset=function(){return e=e.append(\"feOffset\"),n},n.feGaussianBlur=function(){return e=e.append(\"feGaussianBlur\"),n},n.result=function(t){return e=e.attr(\"result\",t),n},n.floodColor=function(t){return e=e.attr(\"flood-color\",t),n},n.floodOpacity=function(t){return e=e.attr(\"flood-opacity\",t),n},n.stdDeviation=function(t){return e=e.attr(\"stdDeviation\",t),n},n.operator=function(t){return e=e.attr(\"operator\",t),n},n.height=function(t){return e=e.attr(\"height\",t),n},n.width=function(t){return e=e.attr(\"width\",t),n},n[\"in\"]=function(t){return e=e.attr(\"in\",t),n},n.in2=function(t){return e=e.attr(\"in2\",t),n},n.id=function(t){return e=e.attr(\"id\",t),n},n.fx=function(t){return e=e.attr(\"fx\",t),n},n.fy=function(t){return e=e.attr(\"fy\",t),n},n.dx=function(t){return e=e.attr(\"dx\",t),n},n.dy=function(t){return e=e.attr(\"dy\",t),n},n.x1=function(t){return e=e.attr(\"x1\",t),n},n.y1=function(t){return e=e.attr(\"y1\",t),n},n.x2=function(t){return e=e.attr(\"x2\",t),n},n.y2=function(t){return e=e.attr(\"y2\",t),n},n.x=function(t){return e=e.attr(\"x\",t),n},n.y=function(t){return e=e.attr(\"y\",t),n},n.r=function(t){return e=e.attr(\"r\",t),n},n.spreadMethod=function(t){return e=e.attr(\"spreadMethod\",t),n},n.gradientUnits=function(t){return e=e.attr(\"gradientUnits\",t),n},n.xlink=function(t){return e=e.attr(\"xlink:href\",t),n},n.offset=function(t){return e=e.attr(\"offset\",t),n},n.stopColor=function(t){return e=e.attr(\"stop-color\",t),n},n.path=function(){return e=e.append(\"path\"),n},n.d=function(t){return e=e.attr(\"d\",t),n},n},this.viz=u}();\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  demo9.js */\nvar data=[[\"plant1\",\"bee1\",6],\n[\"plant2\",\"bee1\",9],\n[\"plant3\",\"bee1\",3],\n[\"plant4\",\"bee1\",0],\n[\"plant1\",\"bee2\",0],\n[\"plant2\",\"bee2\",2],\n[\"plant3\",\"bee2\",0],\n[\"plant4\",\"bee2\",0],\n[\"plant1\",\"bee3\",0],\n[\"plant2\",\"bee3\",0],\n[\"plant3\",\"bee3\",0],\n[\"plant4\",\"bee3\",7]]\n\n\n\n function sort(sortOrder){\n                    return function(a,b){ return d3.ascending(sortOrder.indexOf(a),sortOrder.indexOf(b)) }\n                  }\nvar color = {'Unlinked':'#3366CC','bee1':'rgb(56,43,61)','bee2':'rgb(56,43,61)','bee3':'rgb(56,43,61)'};\n\n\n\n\nvar g1 = svg.append(\"g\").attr(\"transform\",\"translate(188,50)\");\n                         var bp1=viz.bP()\n                         .data(data)\n                         .value(d=>d[2])\n                         .min(10)\n                         .pad(1)\n                         .height(400)\n                         .width(200)\n                         .barSize(35)\n                         .fill(d=>color[d.secondary])\n.orient(\"vertical\");\n\ng1.call(bp1);g1.append(\"text\")\n                        .attr(\"x\",-50).attr(\"y\",-8)\n                        .style(\"text-anchor\",\"middle\")\n                        .text(\"Flowers\");\n                        g1.append(\"text\")\n                        .attr(\"x\", 250)\n                        .attr(\"y\",-8).style(\"text-anchor\",\"middle\")\n                        .text(\"Pollinators\");\n                        g1.append(\"text\")\n                        .attr(\"x\",100).attr(\"y\",-25)\n                        .style(\"text-anchor\",\"middle\")\n                        .attr(\"class\",\"header\")\n                        .text(\"Nice Meadow\");\n\n g1.selectAll(\".mainBars\")\n                        .on(\"mouseover\",mouseover)\n                        .on(\"mouseout\",mouseout);\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"label\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -27.2:24.8))\n                        .attr(\"y\",d=>+6)\n                        .text(d=>d.key)\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\"));\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"perc\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -141:144))\n                        .attr(\"y\",d=>+6)\n                        .text(function(d){ return d3.format(\"0.0%\")(d.percent)})\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\")); \n\nfunction mouseover(d){\nbp1.mouseover(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\n}\n\n                     function mouseout(d){\nbp1.mouseout(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\n}\n\n\n};","style":"/* R2D3 Source File:  demo9.css */\n .mainBars{\n    shape-rendering: auto;\n    fill-opacity: 1;\n    stroke-width: 0.5px;\n    stroke: rgb(0, 0, 0);\n    stroke-opacity: 0;\n  }\n    .subBars{\n    shape-rendering:crispEdges;\n    }\n    .edges{\n    stroke:none;\n    fill-opacity:0.3;\n    }\n    .label{\n    color:#000000;\n    }","version":5,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div id="species-labels" class="section level3">
<h3>Species Labels</h3>
<p>These are inherited directly from the data. If you want to change these it is best to do that upstream of bipartite_d3.</p>
</div>
</div>
<div id="percentage-labels" class="section level2">
<h2>Percentage Labels</h2>
<p>If you have many small interactions, that would otherwise be 0, can extend the number of decimal places shown:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bipartite_D3</span>(SmallTestWeb, <span class="at">PercentageDecimals =</span> <span class="dv">2</span>, <span class="at">filename =</span> <span class="st">&#39;demo9.2&#39;</span>)</span></code></pre></div>
<div id="htmlwidget-4c649f07197899b18e6d" style="width:700px;height:700px;" class="r2d3 html-widget"></div>
<script type="application/json" data-for="htmlwidget-4c649f07197899b18e6d">{"x":{"data":null,"type":"logical","container":"svg","options":null,"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n/* R2D3 Source File:  vizjs.js */\n!function(){function t(t){for(;t>o;)t-=o;for(;0>t;)t+=o;return t}function n(t,n,e,r,a,i){if(0>=a||0>=r)return 0;var u=t.concat().sort(d3.ascending),o=r-u.length*n+(i?n:0),s=[],c=0,d=0;return d3.range(u.length).forEach(function(t){d=(o-e*t)/(a-=u[t-1]||0),c+=u[t]*d<=e?1:0,s.push(d)}),s[c]}function e(t,e,r,a,i){var u=a,o=d3.sum(t),s=n(t,e,r,i-a,o,!1),c=t.map(function(t){var n=s*t,a=(r>n?r:n)/2;return u+=2*a+e,{c:u-a,v:n,w:a,value:t,percent:t/(o||1)}});return c}function r(t){function n(t,n){return[t*Math.cos(n),t*Math.sin(n)]}var e=n(t[0],t[2]),r=n(t[0],t[3]),a=n(t[1],t[2]),i=n(t[1],t[3]);return[\"M\",e,\"A\",t[0],t[0],\"0\",t[3]-t[2]>s?1:0,\"1\",r,\"L\",i,\"A\",t[1],t[1],\"0\",t[3]-t[2]>s?1:0,\"0\",a,\"z\"].join(\" \")}function a(t,n,e,r,a,i){function u(t,n,e){return\"A\"+t+\",\"+t+\" 0 \"+ +(e>s)+\",1 \"+n}function c(t,n){return[t*Math.cos(n),t*Math.sin(n)]}function d(t,n,e,r){e+=n>e?o:0;var a=e-n,i=1-(a>s?o-a:a)/s;i=Math.pow(i,5);var u=(e+n)/2-(e-n>s?s:0);return\"Q\"+i*r*Math.cos(u)+\",\"+i*r*Math.sin(u)+\" \"+t}var f=c(t,n),l=c(t,e),g=c(r,a),p=c(r,i);return\"M\"+f+u(t,l,e-n)+(n==a&&e==i?d(f,n,e,r):d(g,e,a,r)+u(r,p,i-a)+d(f,n,i,t))+\"Z\"}function i(t,n){ret=[];for(var e=n;e>n-t;e--)ret.push(0>e?e+t:e);return ret}var u={version:\"1.1.0\"},o=2*Math.PI,s=Math.PI,c=Math.PI/2;u.bP=function(){function t(i){y=i,i.each(function(){var i=d3.select(this),u=t.bars(),o=i.selectAll(\".subBars\").data(u.subBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"subBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);\"undefined\"!=typeof h&&o.style(\"fill\",function(t){return h(t)});var s=i.selectAll(\".edges\").data(u.edges).enter().append(\"path\").attr(\"class\",\"edges\").attr(\"d\",function(t){return t.path}).style(\"fill-opacity\",t.edgeOpacity());\"undefined\"!=typeof h&&s.style(\"fill\",function(t){return h(t)}),i.selectAll(\".mainBars\").data(u.mainBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"mainBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a).style(\"fill-opacity\",0).on(\"mouseover\",t.mouseover).on(\"mouseout\",t.mouseout)})}function n(t){return-t.width}function e(t){return-t.height}function r(t){return 2*t.width}function a(t){return 2*t.height}var i,u,o,s,c,d,f,l,g,p,h,y,m,v,A,x,k;return t.data=function(n){return arguments.length?(p=n,t):p},t.fill=function(n){return arguments.length?(h=n,t):h},t.keyPrimary=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:function(t){return t[0]}},t.sortPrimary=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:d3.ascending},t.keySecondary=function(n){return arguments.length?(u=n,t):\"undefined\"!=typeof u?u:function(t){return t[1]}},t.sortSecondary=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:d3.ascending},t.value=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:function(t){return t[2]}},t.width=function(n){return arguments.length?(s=n,t):\"undefined\"!=typeof s?s:400},t.height=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:600},t.barSize=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:35},t.min=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:0},t.orient=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:\"vertical\"},t.pad=function(n){return arguments.length?(g=n,t):\"undefined\"!=typeof g?g:0},t.duration=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:500},t.edgeOpacity=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:.4},t.edgeMode=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:\"curved\"},t.bars=function(n){function e(t,e){return\"undefined\"==typeof n||n.part===e||d[n.part](t)===n.key}function r(){var n=t.min()/2;s.primary.forEach(function(t){t.height<n&&(t.height=n)}),s.secondary.forEach(function(t){t.height<n&&(t.height=n)})}function a(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data()),i=o(a,t.pad(),t.min(),0,\"vertical\"==f?t.height():t.width()),u=t.barSize();a.forEach(function(e,r){s[n].push({x:\"horizontal\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.width()-u/2,y:\"vertical\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.height()-u/2,height:\"vertical\"==f?(i[r].e-i[r].s)/2:u/2,width:\"horizontal\"==f?(i[r].e-i[r].s)/2:u/2,part:n,key:e.key,value:e.value,percent:i[r].p})})}function i(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.map(s[n],function(t){return t.key}),i=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).key(\"secondary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"secondary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data());i.forEach(function(e){var r=a.get(e.key),i=o(e.values,0,0,\"vertical\"==f?r.y-r.height:r.x-r.width,\"vertical\"==f?r.y+r.height:r.x+r.width),u=t.barSize();e.values.forEach(function(a,o){c[n].push({x:\"vertical\"==f?\"primary\"==n?u/2:t.width()-u/2:(i[o].s+i[o].e)/2,y:\"horizontal\"==f?\"primary\"==n?u/2:t.height()-u/2:(i[o].s+i[o].e)/2,height:(\"vertical\"==f?i[o].e-i[o].s:u)/2,width:(\"horizontal\"==f?i[o].e-i[o].s:u)/2,part:n,primary:\"primary\"==n?e.key:a.key,secondary:\"primary\"==n?a.key:e.key,value:a.value,percent:i[o].p*r.percent,index:\"primary\"==n?e.key+\"|\"+a.key:a.key+\"|\"+e.key})})})}function u(){function n(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(t+e)/2,d=(i+o)/2;return[\"M\",t,\",\",n,\"C\",c,\",\",n,\" \",c,\",\",r,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",d,\",\",u,\" \",d,\",\",s,\",\",o,\",\",s,\"z\"].join(\"\")}function e(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(n+r)/2,d=(u+s)/2;return[\"M\",t,\",\",n,\"C\",t,\",\",c,\" \",e,\",\",c,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",i,\",\",d,\" \",o,\",\",d,\",\",o,\",\",s,\"z\"].join(\"\")}var r=d3.map(c.secondary,function(t){return t.index}),a=t.edgeMode();return c.primary.map(function(t){var a=r.get(t.index);return{path:\"vertical\"===f?n(t.x+t.width,t.y+t.height,a.x-a.width,a.y+a.height,a.x-a.width,a.y-a.height,t.x+t.width,t.y-t.height):e(t.x-t.width,t.y+t.height,a.x-a.width,a.y-a.height,a.x+a.width,a.y-a.height,t.x+t.width,t.y+t.height),primary:t.primary,secondary:t.secondary,value:t.value,percent:t.percent}})}function o(t,n,e,r,a){var i=e/(a-r-2*t.length*n),u=0,o=0,s=d3.sum(t,function(t){return t.value});t.forEach(function(t){t.value<i*s&&(u+=1,o+=t.value)});var c=1e-5>s?0:(a-r-2*t.length*n-u*e)/(s-o),d=r,f=[];return t.forEach(function(t){var r=t.value*c;f.push({s:d+n+(e>r?.5*(e-r):0),e:d+n+(e>r?.5*(e+r):r),p:1e-5>s?0:t.value/s}),d+=2*n+(e>r?e:r)}),f}var s={primary:[],secondary:[]},c={primary:[],secondary:[]},d={primary:t.keyPrimary(),secondary:t.keySecondary()},f=t.orient();return a(\"primary\"),a(\"secondary\"),i(\"primary\"),i(\"secondary\"),r(),{mainBars:s.primary.concat(s.secondary),subBars:c.primary.concat(c.secondary),edges:u()}},t.mouseover=function(i){var u=t.bars(i);y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",1),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);var o=y.selectAll(\".edges\").data(u.edges);o.filter(function(t){return t[i.part]===i.key}).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),o.filter(function(t){return t[i.part]!==i.key}).transition().duration(t.duration()).style(\"fill-opacity\",0).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t.mouseout=function(i){var u=t.bars();y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",0),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a),y.selectAll(\".edges\").data(u.edges).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t},u.gg=function(){function t(n){g=n,n.each(function(){var n=d3.select(this),e=t.scale(),r=t.minorTickStart(),a=t.minorTickEnd(),i=t.majorTickStart(),u=t.majorTickEnd(),o=t.ticks(),c=t.majorTicks(),d=t.labelLocation(),f=t.outerRadius();n.append(\"circle\").attr(\"r\",f).style(\"fill\",\"url(#vizgg3\"+p+\")\").attr(\"class\",\"face\"),n.append(\"circle\").attr(\"r\",t.innerRadius()).style(\"fill\",\"url(#vizgg2\"+p+\")\").style(\"filter\",\"url(#vizgg5\"+p+\")\").attr(\"class\",\"innerFace\");var l=n.append(\"g\");l.selectAll(\"line\").data(o).enter().append(\"line\").attr(\"class\",function(t){return c(t)?\"majorTicks\":\"minorTicks\"}).attr(\"x1\",function(t){return f*(c(t)?i:r)*Math.cos(e(t))}).attr(\"y1\",function(t){return f*(c(t)?i:r)*Math.sin(e(t))}).attr(\"x2\",function(t){return f*(c(t)?u:a)*Math.cos(e(t))}).attr(\"y2\",function(t){return f*(c(t)?u:a)*Math.sin(e(t))}),n.selectAll(\"text\").data(o.filter(c)).enter().append(\"text\").attr(\"class\",\"label\").attr(\"x\",function(t){return f*d*Math.cos(e(t))}).attr(\"y\",function(t){return f*d*Math.sin(e(t))}).attr(\"dy\",3).text(function(t){return t});var g=t.outerRadius()/b.outerRadius,h=180*t.scale()(t.value())/s+90;n.append(\"g\").attr(\"transform\",\"translate(1,1)\").selectAll(\".needleshadow\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needleshadow\").append(\"path\").attr(\"d\",[\"m 0\",-130*g,5*g,175*g,-10*g,\"0,z\"].join(\",\")).style(\"filter\",\"url(#vizgg6\"+p+\")\"),n.selectAll(\".needle\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needle\").append(\"polygon\").attr(\"points\",[-.5*g,-130*g,.5*g,-130*g,5*g,45*g,-5*g,45*g].join(\",\")).style(\"fill\",\"url(#vizgg4\"+p+\")\")})}var n,e,r,a,i,o,c,d,f,l,g,p,h,y,m,v,A,x,k,b={innerRadius:20,outerRadius:150,angleOffset:.7,startAngle:-1.5*s,endAngle:.5*s,minorTickStart:.9,minorTickEnd:.95,majorTickStart:.82,majorTickEnd:.95,needleColor:\"#de2c2c\",innerFaceColor:\"#999999\",faceColor:\"#666666\",domain:[0,100],duration:500,ease:\"cubicInOut\",ticks:d3.range(0,101,2),majorTicks:function(t){return t%10===0},labelLocation:.7};return t.scale=function(){return d3.scale.linear().domain(t.domain()).range([b.startAngle+t.angleOffset(),b.endAngle-t.angleOffset()])},t.innerRadius=function(e){return arguments.length?(n=e,t):\"undefined\"!=typeof n?n:b.innerRadius},t.outerRadius=function(n){return arguments.length?(e=n,t):\"undefined\"!=typeof e?e:b.outerRadius},t.angleOffset=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:b.angleOffset},t.labelLocation=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:b.labelLocation},t.ticks=function(n){return arguments.length?(h=n,t):\"undefined\"!=typeof h?h:b.ticks},t.majorTicks=function(n){return arguments.length?(y=n,t):\"undefined\"!=typeof y?y:b.majorTicks},t.minorTickStart=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:b.minorTickStart},t.minorTickEnd=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:b.minorTickEnd},t.majorTickStart=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:b.majorTickStart},t.majorTickEnd=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:b.majorTickEnd},t.needleColor=function(n){return arguments.length?(r=n,t):\"undefined\"!=typeof r?r:b.needleColor},t.innerFaceColor=function(n){return arguments.length?(a=n,t):\"undefined\"!=typeof a?a:b.innerFaceColor},t.faceColor=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:b.faceColor},t.domain=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:b.domain},t.duration=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:b.duration},t.ease=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:b.ease},t.value=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:.5*(b.domain[0]+b.domain[1])},t.defs=function(n,e){var r=n.append(\"defs\");p=e;var a=t.needleColor(),i=t.innerFaceColor(),o=t.faceColor(),s=u.defs(r).lG().id(\"vizgg1\"+e).sel();u.defs(s).stop().offset(\"0\").stopColor(a),u.defs(s).stop().offset(\"1\").stopColor(d3.rgb(a).darker(1));var c=u.defs(r).rG().id(\"vizgg2\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(c).stop().offset(\"0\").stopColor(i),u.defs(c).stop().offset(\"1\").stopColor(d3.rgb(i).darker(2));var d=u.defs(r).rG().id(\"vizgg3\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(d).stop().offset(\"0\").stopColor(o),u.defs(d).stop().offset(\"1\").stopColor(d3.rgb(o).darker(2)),u.defs(r).lG().id(\"vizgg4\"+e).gradientUnits(\"userSpaceOnUse\").y1(\"80\").x1(\"-10\").y2(\"80\").x2(\"10\").xlink(\"#vizgg1\"+e);var f=u.defs(r).filter().id(\"vizgg5\"+e).sel();u.defs(f).feFlood().result(\"flood\").floodColor(\"rgb(0,0,0)\").floodOpacity(\"0.6\"),u.defs(f).feComposite().result(\"composite1\").operator(\"in\").in2(\"SourceGraphic\")[\"in\"](\"flood\"),u.defs(f).feGaussianBlur().result(\"blur\").stdDeviation(\"2\")[\"in\"](\"composite1\"),u.defs(f).feOffset().result(\"offset\").dy(\"2\").dx(\"2\"),u.defs(f).feComposite().result(\"composite2\").operator(\"over\").in2(\"offset\")[\"in\"](\"SourceGraphic\");var l=u.defs(r).filter().x(\"-0.3\").y(\"-0.3\").height(\"1.8\").width(\"1.8\").id(\"vizgg6\"+e).sel();u.defs(l).feGaussianBlur().stdDeviation(\"2\")},t.setNeedle=function(n){function e(t,n){return d3.interpolateString(\"rotate(\"+t+\")\",\"rotate(\"+n+\")\")}var r=180*t.scale()(n)/s+90,a=180*t.scale()(t.value())/s+90,i=t.ease();g.selectAll(\".needle\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i),g.selectAll(\".needleshadow\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i).each(\"end\",function(){angle=n}),t.value(n)},t},u.ch=function(){function u(t){function n(t){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}p=t,k||f(),t.each(function(){var t=d3.select(this),r=t.selectAll(\".groups\").data(x).enter().append(\"g\").attr(\"class\",\"groups\").on(\"mouseover\",u.mouseover).on(\"mouseout\",u.mouseout),a=r.append(\"text\").attr(\"class\",\"label\"),i=(1+u.labelPadding())*u.outerRadius(),s=u.valueFormat();a.filter(function(t){return\"g\"==t.type}).attr(\"x\",function(t){return i*Math.cos(d(t))}).attr(\"y\",function(t){return i*Math.sin(d(t))}).text(function(t){return t.source+\" (\"+s(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"}).each(function(t){this._current=t}),r.append(\"path\").style(\"fill\",function(t){return y(t.source)}).style(\"stroke\",function(t){return y(t.source)}).attr(\"d\",n).each(function(t){this._current=t}).filter(function(t){return\"g\"==t.type}),t.append(\"g\").attr(\"class\",\"chords\").selectAll(\".chord\").data(k).enter().append(\"g\").attr(\"class\",\"chord\").append(\"path\").each(function(t){this._current=t}).attr(\"d\",e).style(\"fill\",function(t){return y(t.target)}).style(\"opacity\",u.chordOpacity()).style(\"stroke\",function(t){return y(t.target)}).style(\"display\",function(t){return t.display?\"inline\":\"none\"})})}function s(t){function n(t,n){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}function i(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return e(n(t))}}function s(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return n(e(t),t)}}function f(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.cos(d(n(t)))}}function l(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.sin(d(n(t)))}}var g=p.selectAll(\".groups\").data(t?b:u.groups()),h=(1+u.labelPadding())*u.outerRadius(),y=u.valueFormat();g.select(\"path\").transition().duration(L).attrTween(\"d\",s),g.select(\".label\").filter(function(t){return\"g\"==t.type}).transition().duration(L).attrTween(\"x\",f).attrTween(\"y\",l).text(function(t){return t.source+\" (\"+y(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"});var m=u.chordOpacity();p.select(\".chords\").selectAll(\".chord\").data(t?w:u.chords()).select(\"path\").transition().duration(L).attrTween(\"d\",i).style(\"opacity\",function(t){return t.display?m:0})}function d(n){return t((n.startAngle+n.endAngle)/2)}function f(){m=[],h.forEach(function(t){-1==m.indexOf(E(t))&&m.push(E(t)),-1==m.indexOf(M(t))&&m.push(M(t))}),m=m.sort(T),v={},A={},m.forEach(function(t){v[t]={},A[t]={},m.forEach(function(n){v[t][n]=0,A[t][n]=!1})}),h.forEach(function(t){var n=E(t),e=M(t);v[n][e]+=S(t),A[n][e]=!0}),x=[],m.forEach(function(t,n){x.push({source:t,type:\"gs\",value:0,skipPad:!0,index:n}),x.push({source:t,type:\"g\",value:d3.sum(m,function(n){return v[t][n]}),skipPad:!1,index:n})}),g(x,z,R,void 0,P),k=[],x.filter(function(t){return\"g\"==t.type}).forEach(function(t,n){var r=i(m.length,n),a=e(r.map(function(n){return v[t.source][m[n]]}),0,0,t.startAngle,t.endAngle);r.forEach(function(e,r){var i=a[r];k.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:t.source,target:m[e],type:\"c\",display:A[t.source][m[e]],index:n,subindex:e,indexsubindex:n+\"-\"+e})})});var t=d3.map(k,function(t){return t.indexsubindex});k.forEach(function(n){if(n.subindex==n.index)return n.endStartAngle=n.startAngle,void(n.endEndAngle=n.startAngle);var e=t.get(n.subindex+\"-\"+n.index);n.endStartAngle=e.startAngle,n.endEndAngle=e.startAngle}),F=!1}function l(t){function n(t){return t.endAngle+t.startAngle}var r=x.filter(function(n){return n.source==t&&\"g\"==n.type})[0];b=[],m.forEach(function(n,e){b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"gs\",value:n==t?v[n][n]:0,skipPad:n==t&&A[n][n]?!1:!0,index:e}),n==t?b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"g\",value:r.value,skipPad:!1,index:e}):b.push({source:n,type:\"g\",value:v[t][n],skipPad:!1,index:e})}),g(b,z,R,t,P);var a=n(r);x.forEach(function(t,e){var r=b[e],i=n(t)<a;r.startAngle-=i?o:0,r.endAngle-=i?o:0}),w=[],b.filter(function(t){return\"g\"==t.type}).forEach(function(n,r){var a=i(m.length,r),u=a.map(function(e){var r=m[e];return n.source==t?v[n.source][r]:r==t?v[r][n.source]:0}),o=e(u,0,0,n.startAngle,n.endAngle);a.forEach(function(e,a){var i=o[a];w.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:n.source,target:m[e],type:\"c\",display:n.source===t,index:r,subindex:e,indexsubindex:r+\"-\"+e})})});var u=d3.map(w.map(function(t){return{startAngle:t.startAngle,endAngle:t.endAngle,indexsubindex:t.indexsubindex}}),function(t){return t.indexsubindex}),s=d3.map(b.filter(function(t){return\"gs\"==t.type}),function(t){return t.source});w.forEach(function(n){if(n.subindex==n.index){var e=s.get(n.source);return n.endStartAngle=e.startAngle,void(n.endEndAngle=e.endAngle)}var r=u.get(n.subindex+\"-\"+n.index);n.endStartAngle=r.startAngle,n.endEndAngle=r.endAngle,n.source!==t&&(n.startAngle=n.endAngle,n.endEndAngle=n.endStartAngle)})}function g(t,e,r,a,i){var u=void 0!==a,o=0;if(u){for(var s=!1;o<t.length;o++)if(t[o].source==a&&\"g\"==t[o].type){s=!0;break}s||console.log(\"The fixed source '\"+a+\"' is not a valid key\")}var c=d3.range(t.length);u&&(c=c.slice(o).concat(c.slice(0,o)));var d=t.filter(function(t){return!(u&&t.source===a&&\"g\"==t.type||t.skipPad)}).map(function(t){return t.value}),f=2*Math.PI-(u?t[o].endAngle-t[o].startAngle+2*e:0),l=u?t[o].endAngle+e:i,g=d3.sum(d),p=n(d,e,r,0>=f?0:f,g,u?!0:!1);c.slice(u?1:0).forEach(function(n){var a=p*t[n].value,i=(r>a?r-a:0)/2;t[n].startAngle=l,t[n].endAngle=l+a,t[n].padAngle=i,t[n].percent=t[n].value/(g||1),l+=a+i+(t[n].skipPad?0:e)})}var p,h,y,m,v,A,x,k,b,w,E=function(t){return t[0]},M=function(t){return t[1]},S=function(t){return t[2]},C=function(t){return t},T=d3.ascending,z=.03,P=0,B=180,O=200,j=.7,G=.02,R=0,L=500,F=!0;return u.data=function(t){return arguments.length?(h=t,F=!0,u):h},u.fill=function(t){return arguments.length?(y=t,u):y},u.duration=function(t){return arguments.length?(L=t,u):L},u.chordOpacity=function(t){return arguments.length?(j=t,u):j},u.innerRadius=function(t){return arguments.length?(B=t,F=!0,u):B},u.outerRadius=function(t){return arguments.length?(O=t,F=!0,u):O},u.source=function(t){return arguments.length?(E=t,F=!0,u):E},u.target=function(t){return arguments.length?(M=t,F=!0,u):M},u.value=function(t){return arguments.length?(S=t,F=!0,u):S},u.padding=function(t){return arguments.length?(z=t,F=!0,u):z},u.labelPadding=function(t){return arguments.length?(G=t,u):G},u.sort=function(t){return arguments.length?(T=t,F=!0,u):T},u.startAngle=function(t){return arguments.length?(P=t,F=!0,u):P},u.chords=function(){return F&&f(),k},u.groups=function(){return F&&f(),x},u.valueFormat=function(t){return arguments.length?(C=t,u):C},u.mouseover=function(t){l(t.source),s(1)},u.mouseout=function(t){s(0)},u},u.defs=function(t){var n={},e=t;return n.sel=function(){return e},n.lG=function(){return e=e.append(\"linearGradient\"),n},n.rG=function(){return e=e.append(\"radialGradient\"),n},n.stop=function(){return e=e.append(\"stop\"),n},n.filter=function(){return e=e.append(\"filter\"),n},n.feFlood=function(){return e=e.append(\"feFlood\"),n},n.feComposite=function(){return e=e.append(\"feComposite\"),n},n.feOffset=function(){return e=e.append(\"feOffset\"),n},n.feGaussianBlur=function(){return e=e.append(\"feGaussianBlur\"),n},n.result=function(t){return e=e.attr(\"result\",t),n},n.floodColor=function(t){return e=e.attr(\"flood-color\",t),n},n.floodOpacity=function(t){return e=e.attr(\"flood-opacity\",t),n},n.stdDeviation=function(t){return e=e.attr(\"stdDeviation\",t),n},n.operator=function(t){return e=e.attr(\"operator\",t),n},n.height=function(t){return e=e.attr(\"height\",t),n},n.width=function(t){return e=e.attr(\"width\",t),n},n[\"in\"]=function(t){return e=e.attr(\"in\",t),n},n.in2=function(t){return e=e.attr(\"in2\",t),n},n.id=function(t){return e=e.attr(\"id\",t),n},n.fx=function(t){return e=e.attr(\"fx\",t),n},n.fy=function(t){return e=e.attr(\"fy\",t),n},n.dx=function(t){return e=e.attr(\"dx\",t),n},n.dy=function(t){return e=e.attr(\"dy\",t),n},n.x1=function(t){return e=e.attr(\"x1\",t),n},n.y1=function(t){return e=e.attr(\"y1\",t),n},n.x2=function(t){return e=e.attr(\"x2\",t),n},n.y2=function(t){return e=e.attr(\"y2\",t),n},n.x=function(t){return e=e.attr(\"x\",t),n},n.y=function(t){return e=e.attr(\"y\",t),n},n.r=function(t){return e=e.attr(\"r\",t),n},n.spreadMethod=function(t){return e=e.attr(\"spreadMethod\",t),n},n.gradientUnits=function(t){return e=e.attr(\"gradientUnits\",t),n},n.xlink=function(t){return e=e.attr(\"xlink:href\",t),n},n.offset=function(t){return e=e.attr(\"offset\",t),n},n.stopColor=function(t){return e=e.attr(\"stop-color\",t),n},n.path=function(){return e=e.append(\"path\"),n},n.d=function(t){return e=e.attr(\"d\",t),n},n},this.viz=u}();\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  demo9.2.js */\nvar data=[[\"plant1\",\"bee1\",6],\n[\"plant2\",\"bee1\",9],\n[\"plant3\",\"bee1\",3],\n[\"plant4\",\"bee1\",0],\n[\"plant1\",\"bee2\",0],\n[\"plant2\",\"bee2\",2],\n[\"plant3\",\"bee2\",0],\n[\"plant4\",\"bee2\",0],\n[\"plant1\",\"bee3\",0],\n[\"plant2\",\"bee3\",0],\n[\"plant3\",\"bee3\",0],\n[\"plant4\",\"bee3\",7]]\n\n\n\n function sort(sortOrder){\n                    return function(a,b){ return d3.ascending(sortOrder.indexOf(a),sortOrder.indexOf(b)) }\n                  }\nvar color = {'Unlinked':'#3366CC','bee1':'rgb(56,43,61)','bee2':'rgb(56,43,61)','bee3':'rgb(56,43,61)'};\n\n\n\n\nvar g1 = svg.append(\"g\").attr(\"transform\",\"translate(188,50)\");\n                         var bp1=viz.bP()\n                         .data(data)\n                         .value(d=>d[2])\n                         .min(10)\n                         .pad(1)\n                         .height(400)\n                         .width(200)\n                         .barSize(35)\n                         .fill(d=>color[d.secondary])\n.orient(\"vertical\");\n\ng1.call(bp1);g1.append(\"text\")\n                        .attr(\"x\",-50).attr(\"y\",-8)\n                        .style(\"text-anchor\",\"middle\")\n                        .text(\"Primary\");\n                        g1.append(\"text\")\n                        .attr(\"x\", 250)\n                        .attr(\"y\",-8).style(\"text-anchor\",\"middle\")\n                        .text(\"Secondary\");\n                        g1.append(\"text\")\n                        .attr(\"x\",100).attr(\"y\",-25)\n                        .style(\"text-anchor\",\"middle\")\n                        .attr(\"class\",\"header\")\n                        .text(\"meadow\");\n\n g1.selectAll(\".mainBars\")\n                        .on(\"mouseover\",mouseover)\n                        .on(\"mouseout\",mouseout);\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"label\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -27.2:24.8))\n                        .attr(\"y\",d=>+6)\n                        .text(d=>d.key)\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\"));\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"perc\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -141:144))\n                        .attr(\"y\",d=>+6)\n                        .text(function(d){ return d3.format(\"0.2%\")(d.percent)})\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\")); \n\nfunction mouseover(d){\nbp1.mouseover(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.2%\")(d.percent)});\n}\n\n                     function mouseout(d){\nbp1.mouseout(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.2%\")(d.percent)});\n}\n\n\n};","style":"/* R2D3 Source File:  demo9.2.css */\n .mainBars{\n    shape-rendering: auto;\n    fill-opacity: 1;\n    stroke-width: 0.5px;\n    stroke: rgb(0, 0, 0);\n    stroke-opacity: 0;\n  }\n    .subBars{\n    shape-rendering:crispEdges;\n    }\n    .edges{\n    stroke:none;\n    fill-opacity:0.3;\n    }\n    .label{\n    color:#000000;\n    }","version":5,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div id="other-properties-of-the-labels" class="section level2">
<h2>Other properties of the Labels</h2>
<p>To change other properties of the labels, the easiest way is to change the CSS file, then set the <code>CSS_Output_Supress</code> argument to <code>TRUE</code>. The CSS file controls things like the size, color and font of the labels. Detailing this is beyond the scope of this vignette. If you want an easy way experiment with this, you can open a html document in a browser and use the inspect element or equivalent feature to see how the different elements relate to each other.</p>
</div>
<div id="edge-mode" class="section level2">
<h2>Edge mode</h2>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bipartite_D3</span>(SmallTestWeb,<span class="at">EdgeMode =</span> <span class="st">&#39;straight&#39;</span>, <span class="at">filename =</span> <span class="st">&#39;demo10&#39;</span>)</span></code></pre></div>
<div id="htmlwidget-e42a18b04b6083a724a3" style="width:700px;height:700px;" class="r2d3 html-widget"></div>
<script type="application/json" data-for="htmlwidget-e42a18b04b6083a724a3">{"x":{"data":null,"type":"logical","container":"svg","options":null,"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n/* R2D3 Source File:  vizjs.js */\n!function(){function t(t){for(;t>o;)t-=o;for(;0>t;)t+=o;return t}function n(t,n,e,r,a,i){if(0>=a||0>=r)return 0;var u=t.concat().sort(d3.ascending),o=r-u.length*n+(i?n:0),s=[],c=0,d=0;return d3.range(u.length).forEach(function(t){d=(o-e*t)/(a-=u[t-1]||0),c+=u[t]*d<=e?1:0,s.push(d)}),s[c]}function e(t,e,r,a,i){var u=a,o=d3.sum(t),s=n(t,e,r,i-a,o,!1),c=t.map(function(t){var n=s*t,a=(r>n?r:n)/2;return u+=2*a+e,{c:u-a,v:n,w:a,value:t,percent:t/(o||1)}});return c}function r(t){function n(t,n){return[t*Math.cos(n),t*Math.sin(n)]}var e=n(t[0],t[2]),r=n(t[0],t[3]),a=n(t[1],t[2]),i=n(t[1],t[3]);return[\"M\",e,\"A\",t[0],t[0],\"0\",t[3]-t[2]>s?1:0,\"1\",r,\"L\",i,\"A\",t[1],t[1],\"0\",t[3]-t[2]>s?1:0,\"0\",a,\"z\"].join(\" \")}function a(t,n,e,r,a,i){function u(t,n,e){return\"A\"+t+\",\"+t+\" 0 \"+ +(e>s)+\",1 \"+n}function c(t,n){return[t*Math.cos(n),t*Math.sin(n)]}function d(t,n,e,r){e+=n>e?o:0;var a=e-n,i=1-(a>s?o-a:a)/s;i=Math.pow(i,5);var u=(e+n)/2-(e-n>s?s:0);return\"Q\"+i*r*Math.cos(u)+\",\"+i*r*Math.sin(u)+\" \"+t}var f=c(t,n),l=c(t,e),g=c(r,a),p=c(r,i);return\"M\"+f+u(t,l,e-n)+(n==a&&e==i?d(f,n,e,r):d(g,e,a,r)+u(r,p,i-a)+d(f,n,i,t))+\"Z\"}function i(t,n){ret=[];for(var e=n;e>n-t;e--)ret.push(0>e?e+t:e);return ret}var u={version:\"1.1.0\"},o=2*Math.PI,s=Math.PI,c=Math.PI/2;u.bP=function(){function t(i){y=i,i.each(function(){var i=d3.select(this),u=t.bars(),o=i.selectAll(\".subBars\").data(u.subBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"subBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);\"undefined\"!=typeof h&&o.style(\"fill\",function(t){return h(t)});var s=i.selectAll(\".edges\").data(u.edges).enter().append(\"path\").attr(\"class\",\"edges\").attr(\"d\",function(t){return t.path}).style(\"fill-opacity\",t.edgeOpacity());\"undefined\"!=typeof h&&s.style(\"fill\",function(t){return h(t)}),i.selectAll(\".mainBars\").data(u.mainBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"mainBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a).style(\"fill-opacity\",0).on(\"mouseover\",t.mouseover).on(\"mouseout\",t.mouseout)})}function n(t){return-t.width}function e(t){return-t.height}function r(t){return 2*t.width}function a(t){return 2*t.height}var i,u,o,s,c,d,f,l,g,p,h,y,m,v,A,x,k;return t.data=function(n){return arguments.length?(p=n,t):p},t.fill=function(n){return arguments.length?(h=n,t):h},t.keyPrimary=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:function(t){return t[0]}},t.sortPrimary=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:d3.ascending},t.keySecondary=function(n){return arguments.length?(u=n,t):\"undefined\"!=typeof u?u:function(t){return t[1]}},t.sortSecondary=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:d3.ascending},t.value=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:function(t){return t[2]}},t.width=function(n){return arguments.length?(s=n,t):\"undefined\"!=typeof s?s:400},t.height=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:600},t.barSize=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:35},t.min=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:0},t.orient=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:\"vertical\"},t.pad=function(n){return arguments.length?(g=n,t):\"undefined\"!=typeof g?g:0},t.duration=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:500},t.edgeOpacity=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:.4},t.edgeMode=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:\"curved\"},t.bars=function(n){function e(t,e){return\"undefined\"==typeof n||n.part===e||d[n.part](t)===n.key}function r(){var n=t.min()/2;s.primary.forEach(function(t){t.height<n&&(t.height=n)}),s.secondary.forEach(function(t){t.height<n&&(t.height=n)})}function a(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data()),i=o(a,t.pad(),t.min(),0,\"vertical\"==f?t.height():t.width()),u=t.barSize();a.forEach(function(e,r){s[n].push({x:\"horizontal\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.width()-u/2,y:\"vertical\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.height()-u/2,height:\"vertical\"==f?(i[r].e-i[r].s)/2:u/2,width:\"horizontal\"==f?(i[r].e-i[r].s)/2:u/2,part:n,key:e.key,value:e.value,percent:i[r].p})})}function i(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.map(s[n],function(t){return t.key}),i=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).key(\"secondary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"secondary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data());i.forEach(function(e){var r=a.get(e.key),i=o(e.values,0,0,\"vertical\"==f?r.y-r.height:r.x-r.width,\"vertical\"==f?r.y+r.height:r.x+r.width),u=t.barSize();e.values.forEach(function(a,o){c[n].push({x:\"vertical\"==f?\"primary\"==n?u/2:t.width()-u/2:(i[o].s+i[o].e)/2,y:\"horizontal\"==f?\"primary\"==n?u/2:t.height()-u/2:(i[o].s+i[o].e)/2,height:(\"vertical\"==f?i[o].e-i[o].s:u)/2,width:(\"horizontal\"==f?i[o].e-i[o].s:u)/2,part:n,primary:\"primary\"==n?e.key:a.key,secondary:\"primary\"==n?a.key:e.key,value:a.value,percent:i[o].p*r.percent,index:\"primary\"==n?e.key+\"|\"+a.key:a.key+\"|\"+e.key})})})}function u(){function n(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(t+e)/2,d=(i+o)/2;return[\"M\",t,\",\",n,\"C\",c,\",\",n,\" \",c,\",\",r,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",d,\",\",u,\" \",d,\",\",s,\",\",o,\",\",s,\"z\"].join(\"\")}function e(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(n+r)/2,d=(u+s)/2;return[\"M\",t,\",\",n,\"C\",t,\",\",c,\" \",e,\",\",c,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",i,\",\",d,\" \",o,\",\",d,\",\",o,\",\",s,\"z\"].join(\"\")}var r=d3.map(c.secondary,function(t){return t.index}),a=t.edgeMode();return c.primary.map(function(t){var a=r.get(t.index);return{path:\"vertical\"===f?n(t.x+t.width,t.y+t.height,a.x-a.width,a.y+a.height,a.x-a.width,a.y-a.height,t.x+t.width,t.y-t.height):e(t.x-t.width,t.y+t.height,a.x-a.width,a.y-a.height,a.x+a.width,a.y-a.height,t.x+t.width,t.y+t.height),primary:t.primary,secondary:t.secondary,value:t.value,percent:t.percent}})}function o(t,n,e,r,a){var i=e/(a-r-2*t.length*n),u=0,o=0,s=d3.sum(t,function(t){return t.value});t.forEach(function(t){t.value<i*s&&(u+=1,o+=t.value)});var c=1e-5>s?0:(a-r-2*t.length*n-u*e)/(s-o),d=r,f=[];return t.forEach(function(t){var r=t.value*c;f.push({s:d+n+(e>r?.5*(e-r):0),e:d+n+(e>r?.5*(e+r):r),p:1e-5>s?0:t.value/s}),d+=2*n+(e>r?e:r)}),f}var s={primary:[],secondary:[]},c={primary:[],secondary:[]},d={primary:t.keyPrimary(),secondary:t.keySecondary()},f=t.orient();return a(\"primary\"),a(\"secondary\"),i(\"primary\"),i(\"secondary\"),r(),{mainBars:s.primary.concat(s.secondary),subBars:c.primary.concat(c.secondary),edges:u()}},t.mouseover=function(i){var u=t.bars(i);y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",1),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);var o=y.selectAll(\".edges\").data(u.edges);o.filter(function(t){return t[i.part]===i.key}).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),o.filter(function(t){return t[i.part]!==i.key}).transition().duration(t.duration()).style(\"fill-opacity\",0).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t.mouseout=function(i){var u=t.bars();y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",0),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a),y.selectAll(\".edges\").data(u.edges).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t},u.gg=function(){function t(n){g=n,n.each(function(){var n=d3.select(this),e=t.scale(),r=t.minorTickStart(),a=t.minorTickEnd(),i=t.majorTickStart(),u=t.majorTickEnd(),o=t.ticks(),c=t.majorTicks(),d=t.labelLocation(),f=t.outerRadius();n.append(\"circle\").attr(\"r\",f).style(\"fill\",\"url(#vizgg3\"+p+\")\").attr(\"class\",\"face\"),n.append(\"circle\").attr(\"r\",t.innerRadius()).style(\"fill\",\"url(#vizgg2\"+p+\")\").style(\"filter\",\"url(#vizgg5\"+p+\")\").attr(\"class\",\"innerFace\");var l=n.append(\"g\");l.selectAll(\"line\").data(o).enter().append(\"line\").attr(\"class\",function(t){return c(t)?\"majorTicks\":\"minorTicks\"}).attr(\"x1\",function(t){return f*(c(t)?i:r)*Math.cos(e(t))}).attr(\"y1\",function(t){return f*(c(t)?i:r)*Math.sin(e(t))}).attr(\"x2\",function(t){return f*(c(t)?u:a)*Math.cos(e(t))}).attr(\"y2\",function(t){return f*(c(t)?u:a)*Math.sin(e(t))}),n.selectAll(\"text\").data(o.filter(c)).enter().append(\"text\").attr(\"class\",\"label\").attr(\"x\",function(t){return f*d*Math.cos(e(t))}).attr(\"y\",function(t){return f*d*Math.sin(e(t))}).attr(\"dy\",3).text(function(t){return t});var g=t.outerRadius()/b.outerRadius,h=180*t.scale()(t.value())/s+90;n.append(\"g\").attr(\"transform\",\"translate(1,1)\").selectAll(\".needleshadow\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needleshadow\").append(\"path\").attr(\"d\",[\"m 0\",-130*g,5*g,175*g,-10*g,\"0,z\"].join(\",\")).style(\"filter\",\"url(#vizgg6\"+p+\")\"),n.selectAll(\".needle\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needle\").append(\"polygon\").attr(\"points\",[-.5*g,-130*g,.5*g,-130*g,5*g,45*g,-5*g,45*g].join(\",\")).style(\"fill\",\"url(#vizgg4\"+p+\")\")})}var n,e,r,a,i,o,c,d,f,l,g,p,h,y,m,v,A,x,k,b={innerRadius:20,outerRadius:150,angleOffset:.7,startAngle:-1.5*s,endAngle:.5*s,minorTickStart:.9,minorTickEnd:.95,majorTickStart:.82,majorTickEnd:.95,needleColor:\"#de2c2c\",innerFaceColor:\"#999999\",faceColor:\"#666666\",domain:[0,100],duration:500,ease:\"cubicInOut\",ticks:d3.range(0,101,2),majorTicks:function(t){return t%10===0},labelLocation:.7};return t.scale=function(){return d3.scale.linear().domain(t.domain()).range([b.startAngle+t.angleOffset(),b.endAngle-t.angleOffset()])},t.innerRadius=function(e){return arguments.length?(n=e,t):\"undefined\"!=typeof n?n:b.innerRadius},t.outerRadius=function(n){return arguments.length?(e=n,t):\"undefined\"!=typeof e?e:b.outerRadius},t.angleOffset=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:b.angleOffset},t.labelLocation=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:b.labelLocation},t.ticks=function(n){return arguments.length?(h=n,t):\"undefined\"!=typeof h?h:b.ticks},t.majorTicks=function(n){return arguments.length?(y=n,t):\"undefined\"!=typeof y?y:b.majorTicks},t.minorTickStart=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:b.minorTickStart},t.minorTickEnd=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:b.minorTickEnd},t.majorTickStart=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:b.majorTickStart},t.majorTickEnd=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:b.majorTickEnd},t.needleColor=function(n){return arguments.length?(r=n,t):\"undefined\"!=typeof r?r:b.needleColor},t.innerFaceColor=function(n){return arguments.length?(a=n,t):\"undefined\"!=typeof a?a:b.innerFaceColor},t.faceColor=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:b.faceColor},t.domain=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:b.domain},t.duration=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:b.duration},t.ease=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:b.ease},t.value=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:.5*(b.domain[0]+b.domain[1])},t.defs=function(n,e){var r=n.append(\"defs\");p=e;var a=t.needleColor(),i=t.innerFaceColor(),o=t.faceColor(),s=u.defs(r).lG().id(\"vizgg1\"+e).sel();u.defs(s).stop().offset(\"0\").stopColor(a),u.defs(s).stop().offset(\"1\").stopColor(d3.rgb(a).darker(1));var c=u.defs(r).rG().id(\"vizgg2\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(c).stop().offset(\"0\").stopColor(i),u.defs(c).stop().offset(\"1\").stopColor(d3.rgb(i).darker(2));var d=u.defs(r).rG().id(\"vizgg3\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(d).stop().offset(\"0\").stopColor(o),u.defs(d).stop().offset(\"1\").stopColor(d3.rgb(o).darker(2)),u.defs(r).lG().id(\"vizgg4\"+e).gradientUnits(\"userSpaceOnUse\").y1(\"80\").x1(\"-10\").y2(\"80\").x2(\"10\").xlink(\"#vizgg1\"+e);var f=u.defs(r).filter().id(\"vizgg5\"+e).sel();u.defs(f).feFlood().result(\"flood\").floodColor(\"rgb(0,0,0)\").floodOpacity(\"0.6\"),u.defs(f).feComposite().result(\"composite1\").operator(\"in\").in2(\"SourceGraphic\")[\"in\"](\"flood\"),u.defs(f).feGaussianBlur().result(\"blur\").stdDeviation(\"2\")[\"in\"](\"composite1\"),u.defs(f).feOffset().result(\"offset\").dy(\"2\").dx(\"2\"),u.defs(f).feComposite().result(\"composite2\").operator(\"over\").in2(\"offset\")[\"in\"](\"SourceGraphic\");var l=u.defs(r).filter().x(\"-0.3\").y(\"-0.3\").height(\"1.8\").width(\"1.8\").id(\"vizgg6\"+e).sel();u.defs(l).feGaussianBlur().stdDeviation(\"2\")},t.setNeedle=function(n){function e(t,n){return d3.interpolateString(\"rotate(\"+t+\")\",\"rotate(\"+n+\")\")}var r=180*t.scale()(n)/s+90,a=180*t.scale()(t.value())/s+90,i=t.ease();g.selectAll(\".needle\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i),g.selectAll(\".needleshadow\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i).each(\"end\",function(){angle=n}),t.value(n)},t},u.ch=function(){function u(t){function n(t){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}p=t,k||f(),t.each(function(){var t=d3.select(this),r=t.selectAll(\".groups\").data(x).enter().append(\"g\").attr(\"class\",\"groups\").on(\"mouseover\",u.mouseover).on(\"mouseout\",u.mouseout),a=r.append(\"text\").attr(\"class\",\"label\"),i=(1+u.labelPadding())*u.outerRadius(),s=u.valueFormat();a.filter(function(t){return\"g\"==t.type}).attr(\"x\",function(t){return i*Math.cos(d(t))}).attr(\"y\",function(t){return i*Math.sin(d(t))}).text(function(t){return t.source+\" (\"+s(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"}).each(function(t){this._current=t}),r.append(\"path\").style(\"fill\",function(t){return y(t.source)}).style(\"stroke\",function(t){return y(t.source)}).attr(\"d\",n).each(function(t){this._current=t}).filter(function(t){return\"g\"==t.type}),t.append(\"g\").attr(\"class\",\"chords\").selectAll(\".chord\").data(k).enter().append(\"g\").attr(\"class\",\"chord\").append(\"path\").each(function(t){this._current=t}).attr(\"d\",e).style(\"fill\",function(t){return y(t.target)}).style(\"opacity\",u.chordOpacity()).style(\"stroke\",function(t){return y(t.target)}).style(\"display\",function(t){return t.display?\"inline\":\"none\"})})}function s(t){function n(t,n){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}function i(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return e(n(t))}}function s(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return n(e(t),t)}}function f(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.cos(d(n(t)))}}function l(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.sin(d(n(t)))}}var g=p.selectAll(\".groups\").data(t?b:u.groups()),h=(1+u.labelPadding())*u.outerRadius(),y=u.valueFormat();g.select(\"path\").transition().duration(L).attrTween(\"d\",s),g.select(\".label\").filter(function(t){return\"g\"==t.type}).transition().duration(L).attrTween(\"x\",f).attrTween(\"y\",l).text(function(t){return t.source+\" (\"+y(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"});var m=u.chordOpacity();p.select(\".chords\").selectAll(\".chord\").data(t?w:u.chords()).select(\"path\").transition().duration(L).attrTween(\"d\",i).style(\"opacity\",function(t){return t.display?m:0})}function d(n){return t((n.startAngle+n.endAngle)/2)}function f(){m=[],h.forEach(function(t){-1==m.indexOf(E(t))&&m.push(E(t)),-1==m.indexOf(M(t))&&m.push(M(t))}),m=m.sort(T),v={},A={},m.forEach(function(t){v[t]={},A[t]={},m.forEach(function(n){v[t][n]=0,A[t][n]=!1})}),h.forEach(function(t){var n=E(t),e=M(t);v[n][e]+=S(t),A[n][e]=!0}),x=[],m.forEach(function(t,n){x.push({source:t,type:\"gs\",value:0,skipPad:!0,index:n}),x.push({source:t,type:\"g\",value:d3.sum(m,function(n){return v[t][n]}),skipPad:!1,index:n})}),g(x,z,R,void 0,P),k=[],x.filter(function(t){return\"g\"==t.type}).forEach(function(t,n){var r=i(m.length,n),a=e(r.map(function(n){return v[t.source][m[n]]}),0,0,t.startAngle,t.endAngle);r.forEach(function(e,r){var i=a[r];k.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:t.source,target:m[e],type:\"c\",display:A[t.source][m[e]],index:n,subindex:e,indexsubindex:n+\"-\"+e})})});var t=d3.map(k,function(t){return t.indexsubindex});k.forEach(function(n){if(n.subindex==n.index)return n.endStartAngle=n.startAngle,void(n.endEndAngle=n.startAngle);var e=t.get(n.subindex+\"-\"+n.index);n.endStartAngle=e.startAngle,n.endEndAngle=e.startAngle}),F=!1}function l(t){function n(t){return t.endAngle+t.startAngle}var r=x.filter(function(n){return n.source==t&&\"g\"==n.type})[0];b=[],m.forEach(function(n,e){b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"gs\",value:n==t?v[n][n]:0,skipPad:n==t&&A[n][n]?!1:!0,index:e}),n==t?b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"g\",value:r.value,skipPad:!1,index:e}):b.push({source:n,type:\"g\",value:v[t][n],skipPad:!1,index:e})}),g(b,z,R,t,P);var a=n(r);x.forEach(function(t,e){var r=b[e],i=n(t)<a;r.startAngle-=i?o:0,r.endAngle-=i?o:0}),w=[],b.filter(function(t){return\"g\"==t.type}).forEach(function(n,r){var a=i(m.length,r),u=a.map(function(e){var r=m[e];return n.source==t?v[n.source][r]:r==t?v[r][n.source]:0}),o=e(u,0,0,n.startAngle,n.endAngle);a.forEach(function(e,a){var i=o[a];w.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:n.source,target:m[e],type:\"c\",display:n.source===t,index:r,subindex:e,indexsubindex:r+\"-\"+e})})});var u=d3.map(w.map(function(t){return{startAngle:t.startAngle,endAngle:t.endAngle,indexsubindex:t.indexsubindex}}),function(t){return t.indexsubindex}),s=d3.map(b.filter(function(t){return\"gs\"==t.type}),function(t){return t.source});w.forEach(function(n){if(n.subindex==n.index){var e=s.get(n.source);return n.endStartAngle=e.startAngle,void(n.endEndAngle=e.endAngle)}var r=u.get(n.subindex+\"-\"+n.index);n.endStartAngle=r.startAngle,n.endEndAngle=r.endAngle,n.source!==t&&(n.startAngle=n.endAngle,n.endEndAngle=n.endStartAngle)})}function g(t,e,r,a,i){var u=void 0!==a,o=0;if(u){for(var s=!1;o<t.length;o++)if(t[o].source==a&&\"g\"==t[o].type){s=!0;break}s||console.log(\"The fixed source '\"+a+\"' is not a valid key\")}var c=d3.range(t.length);u&&(c=c.slice(o).concat(c.slice(0,o)));var d=t.filter(function(t){return!(u&&t.source===a&&\"g\"==t.type||t.skipPad)}).map(function(t){return t.value}),f=2*Math.PI-(u?t[o].endAngle-t[o].startAngle+2*e:0),l=u?t[o].endAngle+e:i,g=d3.sum(d),p=n(d,e,r,0>=f?0:f,g,u?!0:!1);c.slice(u?1:0).forEach(function(n){var a=p*t[n].value,i=(r>a?r-a:0)/2;t[n].startAngle=l,t[n].endAngle=l+a,t[n].padAngle=i,t[n].percent=t[n].value/(g||1),l+=a+i+(t[n].skipPad?0:e)})}var p,h,y,m,v,A,x,k,b,w,E=function(t){return t[0]},M=function(t){return t[1]},S=function(t){return t[2]},C=function(t){return t},T=d3.ascending,z=.03,P=0,B=180,O=200,j=.7,G=.02,R=0,L=500,F=!0;return u.data=function(t){return arguments.length?(h=t,F=!0,u):h},u.fill=function(t){return arguments.length?(y=t,u):y},u.duration=function(t){return arguments.length?(L=t,u):L},u.chordOpacity=function(t){return arguments.length?(j=t,u):j},u.innerRadius=function(t){return arguments.length?(B=t,F=!0,u):B},u.outerRadius=function(t){return arguments.length?(O=t,F=!0,u):O},u.source=function(t){return arguments.length?(E=t,F=!0,u):E},u.target=function(t){return arguments.length?(M=t,F=!0,u):M},u.value=function(t){return arguments.length?(S=t,F=!0,u):S},u.padding=function(t){return arguments.length?(z=t,F=!0,u):z},u.labelPadding=function(t){return arguments.length?(G=t,u):G},u.sort=function(t){return arguments.length?(T=t,F=!0,u):T},u.startAngle=function(t){return arguments.length?(P=t,F=!0,u):P},u.chords=function(){return F&&f(),k},u.groups=function(){return F&&f(),x},u.valueFormat=function(t){return arguments.length?(C=t,u):C},u.mouseover=function(t){l(t.source),s(1)},u.mouseout=function(t){s(0)},u},u.defs=function(t){var n={},e=t;return n.sel=function(){return e},n.lG=function(){return e=e.append(\"linearGradient\"),n},n.rG=function(){return e=e.append(\"radialGradient\"),n},n.stop=function(){return e=e.append(\"stop\"),n},n.filter=function(){return e=e.append(\"filter\"),n},n.feFlood=function(){return e=e.append(\"feFlood\"),n},n.feComposite=function(){return e=e.append(\"feComposite\"),n},n.feOffset=function(){return e=e.append(\"feOffset\"),n},n.feGaussianBlur=function(){return e=e.append(\"feGaussianBlur\"),n},n.result=function(t){return e=e.attr(\"result\",t),n},n.floodColor=function(t){return e=e.attr(\"flood-color\",t),n},n.floodOpacity=function(t){return e=e.attr(\"flood-opacity\",t),n},n.stdDeviation=function(t){return e=e.attr(\"stdDeviation\",t),n},n.operator=function(t){return e=e.attr(\"operator\",t),n},n.height=function(t){return e=e.attr(\"height\",t),n},n.width=function(t){return e=e.attr(\"width\",t),n},n[\"in\"]=function(t){return e=e.attr(\"in\",t),n},n.in2=function(t){return e=e.attr(\"in2\",t),n},n.id=function(t){return e=e.attr(\"id\",t),n},n.fx=function(t){return e=e.attr(\"fx\",t),n},n.fy=function(t){return e=e.attr(\"fy\",t),n},n.dx=function(t){return e=e.attr(\"dx\",t),n},n.dy=function(t){return e=e.attr(\"dy\",t),n},n.x1=function(t){return e=e.attr(\"x1\",t),n},n.y1=function(t){return e=e.attr(\"y1\",t),n},n.x2=function(t){return e=e.attr(\"x2\",t),n},n.y2=function(t){return e=e.attr(\"y2\",t),n},n.x=function(t){return e=e.attr(\"x\",t),n},n.y=function(t){return e=e.attr(\"y\",t),n},n.r=function(t){return e=e.attr(\"r\",t),n},n.spreadMethod=function(t){return e=e.attr(\"spreadMethod\",t),n},n.gradientUnits=function(t){return e=e.attr(\"gradientUnits\",t),n},n.xlink=function(t){return e=e.attr(\"xlink:href\",t),n},n.offset=function(t){return e=e.attr(\"offset\",t),n},n.stopColor=function(t){return e=e.attr(\"stop-color\",t),n},n.path=function(){return e=e.append(\"path\"),n},n.d=function(t){return e=e.attr(\"d\",t),n},n},this.viz=u}();\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  demo10.js */\nvar data=[[\"plant1\",\"bee1\",6],\n[\"plant2\",\"bee1\",9],\n[\"plant3\",\"bee1\",3],\n[\"plant4\",\"bee1\",0],\n[\"plant1\",\"bee2\",0],\n[\"plant2\",\"bee2\",2],\n[\"plant3\",\"bee2\",0],\n[\"plant4\",\"bee2\",0],\n[\"plant1\",\"bee3\",0],\n[\"plant2\",\"bee3\",0],\n[\"plant3\",\"bee3\",0],\n[\"plant4\",\"bee3\",7]]\n\n\n\n function sort(sortOrder){\n                    return function(a,b){ return d3.ascending(sortOrder.indexOf(a),sortOrder.indexOf(b)) }\n                  }\nvar color = {'Unlinked':'#3366CC','bee1':'rgb(56,43,61)','bee2':'rgb(56,43,61)','bee3':'rgb(56,43,61)'};\n\n\n\n\nvar g1 = svg.append(\"g\").attr(\"transform\",\"translate(188,50)\");\n                         var bp1=viz.bP()\n                         .data(data)\n                         .value(d=>d[2])\n                         .min(10)\n                         .pad(1)\n                         .height(400)\n                         .width(200)\n                         .barSize(35)\n                         .fill(d=>color[d.secondary])\n.edgeMode(\"straight\")\n.orient(\"vertical\");\n\ng1.call(bp1);g1.append(\"text\")\n                        .attr(\"x\",-50).attr(\"y\",-8)\n                        .style(\"text-anchor\",\"middle\")\n                        .text(\"Primary\");\n                        g1.append(\"text\")\n                        .attr(\"x\", 250)\n                        .attr(\"y\",-8).style(\"text-anchor\",\"middle\")\n                        .text(\"Secondary\");\n                        g1.append(\"text\")\n                        .attr(\"x\",100).attr(\"y\",-25)\n                        .style(\"text-anchor\",\"middle\")\n                        .attr(\"class\",\"header\")\n                        .text(\"meadow\");\n\n g1.selectAll(\".mainBars\")\n                        .on(\"mouseover\",mouseover)\n                        .on(\"mouseout\",mouseout);\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"label\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -27.2:24.8))\n                        .attr(\"y\",d=>+6)\n                        .text(d=>d.key)\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\"));\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"perc\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -141:144))\n                        .attr(\"y\",d=>+6)\n                        .text(function(d){ return d3.format(\"0.0%\")(d.percent)})\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\")); \n\nfunction mouseover(d){\nbp1.mouseover(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\n}\n\n                     function mouseout(d){\nbp1.mouseout(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\n}\n\n\n};","style":"/* R2D3 Source File:  demo10.css */\n .mainBars{\n    shape-rendering: auto;\n    fill-opacity: 1;\n    stroke-width: 0.5px;\n    stroke: rgb(0, 0, 0);\n    stroke-opacity: 0;\n  }\n    .subBars{\n    shape-rendering:crispEdges;\n    }\n    .edges{\n    stroke:none;\n    fill-opacity:0.3;\n    }\n    .label{\n    color:#000000;\n    }","version":5,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div id="sorting" class="section level2">
<h2>Sorting</h2>
<p>Can supply the order of either sides of the bipartite diagram.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>df<span class="ot">&lt;-</span><span class="fu">List2DF</span>(SmallTestWeb)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co"># To sort primary by total size:</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Primary) <span class="sc">%&gt;%</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Total=</span><span class="fu">sum</span>(meadow))<span class="sc">%&gt;%</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Total)<span class="ot">-&gt;</span> SortDf</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="co"># To sort secondary manually</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>SortSec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;bee2&#39;</span>, <span class="st">&#39;bee3&#39;</span>, <span class="st">&#39;bee1&#39;</span>)</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a><span class="fu">bipartite_D3</span>(df, <span class="at">SortPrimary =</span> SortDf<span class="sc">$</span>Primary, <span class="at">SortSecondary =</span> SortSec,</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">filename =</span> <span class="st">&#39;demo11&#39;</span>)</span></code></pre></div>
<div id="htmlwidget-0588b4c56c3ae329e1b6" style="width:700px;height:700px;" class="r2d3 html-widget"></div>
<script type="application/json" data-for="htmlwidget-0588b4c56c3ae329e1b6">{"x":{"data":null,"type":"logical","container":"svg","options":null,"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n/* R2D3 Source File:  vizjs.js */\n!function(){function t(t){for(;t>o;)t-=o;for(;0>t;)t+=o;return t}function n(t,n,e,r,a,i){if(0>=a||0>=r)return 0;var u=t.concat().sort(d3.ascending),o=r-u.length*n+(i?n:0),s=[],c=0,d=0;return d3.range(u.length).forEach(function(t){d=(o-e*t)/(a-=u[t-1]||0),c+=u[t]*d<=e?1:0,s.push(d)}),s[c]}function e(t,e,r,a,i){var u=a,o=d3.sum(t),s=n(t,e,r,i-a,o,!1),c=t.map(function(t){var n=s*t,a=(r>n?r:n)/2;return u+=2*a+e,{c:u-a,v:n,w:a,value:t,percent:t/(o||1)}});return c}function r(t){function n(t,n){return[t*Math.cos(n),t*Math.sin(n)]}var e=n(t[0],t[2]),r=n(t[0],t[3]),a=n(t[1],t[2]),i=n(t[1],t[3]);return[\"M\",e,\"A\",t[0],t[0],\"0\",t[3]-t[2]>s?1:0,\"1\",r,\"L\",i,\"A\",t[1],t[1],\"0\",t[3]-t[2]>s?1:0,\"0\",a,\"z\"].join(\" \")}function a(t,n,e,r,a,i){function u(t,n,e){return\"A\"+t+\",\"+t+\" 0 \"+ +(e>s)+\",1 \"+n}function c(t,n){return[t*Math.cos(n),t*Math.sin(n)]}function d(t,n,e,r){e+=n>e?o:0;var a=e-n,i=1-(a>s?o-a:a)/s;i=Math.pow(i,5);var u=(e+n)/2-(e-n>s?s:0);return\"Q\"+i*r*Math.cos(u)+\",\"+i*r*Math.sin(u)+\" \"+t}var f=c(t,n),l=c(t,e),g=c(r,a),p=c(r,i);return\"M\"+f+u(t,l,e-n)+(n==a&&e==i?d(f,n,e,r):d(g,e,a,r)+u(r,p,i-a)+d(f,n,i,t))+\"Z\"}function i(t,n){ret=[];for(var e=n;e>n-t;e--)ret.push(0>e?e+t:e);return ret}var u={version:\"1.1.0\"},o=2*Math.PI,s=Math.PI,c=Math.PI/2;u.bP=function(){function t(i){y=i,i.each(function(){var i=d3.select(this),u=t.bars(),o=i.selectAll(\".subBars\").data(u.subBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"subBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);\"undefined\"!=typeof h&&o.style(\"fill\",function(t){return h(t)});var s=i.selectAll(\".edges\").data(u.edges).enter().append(\"path\").attr(\"class\",\"edges\").attr(\"d\",function(t){return t.path}).style(\"fill-opacity\",t.edgeOpacity());\"undefined\"!=typeof h&&s.style(\"fill\",function(t){return h(t)}),i.selectAll(\".mainBars\").data(u.mainBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"mainBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a).style(\"fill-opacity\",0).on(\"mouseover\",t.mouseover).on(\"mouseout\",t.mouseout)})}function n(t){return-t.width}function e(t){return-t.height}function r(t){return 2*t.width}function a(t){return 2*t.height}var i,u,o,s,c,d,f,l,g,p,h,y,m,v,A,x,k;return t.data=function(n){return arguments.length?(p=n,t):p},t.fill=function(n){return arguments.length?(h=n,t):h},t.keyPrimary=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:function(t){return t[0]}},t.sortPrimary=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:d3.ascending},t.keySecondary=function(n){return arguments.length?(u=n,t):\"undefined\"!=typeof u?u:function(t){return t[1]}},t.sortSecondary=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:d3.ascending},t.value=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:function(t){return t[2]}},t.width=function(n){return arguments.length?(s=n,t):\"undefined\"!=typeof s?s:400},t.height=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:600},t.barSize=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:35},t.min=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:0},t.orient=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:\"vertical\"},t.pad=function(n){return arguments.length?(g=n,t):\"undefined\"!=typeof g?g:0},t.duration=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:500},t.edgeOpacity=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:.4},t.edgeMode=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:\"curved\"},t.bars=function(n){function e(t,e){return\"undefined\"==typeof n||n.part===e||d[n.part](t)===n.key}function r(){var n=t.min()/2;s.primary.forEach(function(t){t.height<n&&(t.height=n)}),s.secondary.forEach(function(t){t.height<n&&(t.height=n)})}function a(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data()),i=o(a,t.pad(),t.min(),0,\"vertical\"==f?t.height():t.width()),u=t.barSize();a.forEach(function(e,r){s[n].push({x:\"horizontal\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.width()-u/2,y:\"vertical\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.height()-u/2,height:\"vertical\"==f?(i[r].e-i[r].s)/2:u/2,width:\"horizontal\"==f?(i[r].e-i[r].s)/2:u/2,part:n,key:e.key,value:e.value,percent:i[r].p})})}function i(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.map(s[n],function(t){return t.key}),i=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).key(\"secondary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"secondary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data());i.forEach(function(e){var r=a.get(e.key),i=o(e.values,0,0,\"vertical\"==f?r.y-r.height:r.x-r.width,\"vertical\"==f?r.y+r.height:r.x+r.width),u=t.barSize();e.values.forEach(function(a,o){c[n].push({x:\"vertical\"==f?\"primary\"==n?u/2:t.width()-u/2:(i[o].s+i[o].e)/2,y:\"horizontal\"==f?\"primary\"==n?u/2:t.height()-u/2:(i[o].s+i[o].e)/2,height:(\"vertical\"==f?i[o].e-i[o].s:u)/2,width:(\"horizontal\"==f?i[o].e-i[o].s:u)/2,part:n,primary:\"primary\"==n?e.key:a.key,secondary:\"primary\"==n?a.key:e.key,value:a.value,percent:i[o].p*r.percent,index:\"primary\"==n?e.key+\"|\"+a.key:a.key+\"|\"+e.key})})})}function u(){function n(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(t+e)/2,d=(i+o)/2;return[\"M\",t,\",\",n,\"C\",c,\",\",n,\" \",c,\",\",r,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",d,\",\",u,\" \",d,\",\",s,\",\",o,\",\",s,\"z\"].join(\"\")}function e(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(n+r)/2,d=(u+s)/2;return[\"M\",t,\",\",n,\"C\",t,\",\",c,\" \",e,\",\",c,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",i,\",\",d,\" \",o,\",\",d,\",\",o,\",\",s,\"z\"].join(\"\")}var r=d3.map(c.secondary,function(t){return t.index}),a=t.edgeMode();return c.primary.map(function(t){var a=r.get(t.index);return{path:\"vertical\"===f?n(t.x+t.width,t.y+t.height,a.x-a.width,a.y+a.height,a.x-a.width,a.y-a.height,t.x+t.width,t.y-t.height):e(t.x-t.width,t.y+t.height,a.x-a.width,a.y-a.height,a.x+a.width,a.y-a.height,t.x+t.width,t.y+t.height),primary:t.primary,secondary:t.secondary,value:t.value,percent:t.percent}})}function o(t,n,e,r,a){var i=e/(a-r-2*t.length*n),u=0,o=0,s=d3.sum(t,function(t){return t.value});t.forEach(function(t){t.value<i*s&&(u+=1,o+=t.value)});var c=1e-5>s?0:(a-r-2*t.length*n-u*e)/(s-o),d=r,f=[];return t.forEach(function(t){var r=t.value*c;f.push({s:d+n+(e>r?.5*(e-r):0),e:d+n+(e>r?.5*(e+r):r),p:1e-5>s?0:t.value/s}),d+=2*n+(e>r?e:r)}),f}var s={primary:[],secondary:[]},c={primary:[],secondary:[]},d={primary:t.keyPrimary(),secondary:t.keySecondary()},f=t.orient();return a(\"primary\"),a(\"secondary\"),i(\"primary\"),i(\"secondary\"),r(),{mainBars:s.primary.concat(s.secondary),subBars:c.primary.concat(c.secondary),edges:u()}},t.mouseover=function(i){var u=t.bars(i);y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",1),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);var o=y.selectAll(\".edges\").data(u.edges);o.filter(function(t){return t[i.part]===i.key}).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),o.filter(function(t){return t[i.part]!==i.key}).transition().duration(t.duration()).style(\"fill-opacity\",0).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t.mouseout=function(i){var u=t.bars();y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",0),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a),y.selectAll(\".edges\").data(u.edges).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t},u.gg=function(){function t(n){g=n,n.each(function(){var n=d3.select(this),e=t.scale(),r=t.minorTickStart(),a=t.minorTickEnd(),i=t.majorTickStart(),u=t.majorTickEnd(),o=t.ticks(),c=t.majorTicks(),d=t.labelLocation(),f=t.outerRadius();n.append(\"circle\").attr(\"r\",f).style(\"fill\",\"url(#vizgg3\"+p+\")\").attr(\"class\",\"face\"),n.append(\"circle\").attr(\"r\",t.innerRadius()).style(\"fill\",\"url(#vizgg2\"+p+\")\").style(\"filter\",\"url(#vizgg5\"+p+\")\").attr(\"class\",\"innerFace\");var l=n.append(\"g\");l.selectAll(\"line\").data(o).enter().append(\"line\").attr(\"class\",function(t){return c(t)?\"majorTicks\":\"minorTicks\"}).attr(\"x1\",function(t){return f*(c(t)?i:r)*Math.cos(e(t))}).attr(\"y1\",function(t){return f*(c(t)?i:r)*Math.sin(e(t))}).attr(\"x2\",function(t){return f*(c(t)?u:a)*Math.cos(e(t))}).attr(\"y2\",function(t){return f*(c(t)?u:a)*Math.sin(e(t))}),n.selectAll(\"text\").data(o.filter(c)).enter().append(\"text\").attr(\"class\",\"label\").attr(\"x\",function(t){return f*d*Math.cos(e(t))}).attr(\"y\",function(t){return f*d*Math.sin(e(t))}).attr(\"dy\",3).text(function(t){return t});var g=t.outerRadius()/b.outerRadius,h=180*t.scale()(t.value())/s+90;n.append(\"g\").attr(\"transform\",\"translate(1,1)\").selectAll(\".needleshadow\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needleshadow\").append(\"path\").attr(\"d\",[\"m 0\",-130*g,5*g,175*g,-10*g,\"0,z\"].join(\",\")).style(\"filter\",\"url(#vizgg6\"+p+\")\"),n.selectAll(\".needle\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needle\").append(\"polygon\").attr(\"points\",[-.5*g,-130*g,.5*g,-130*g,5*g,45*g,-5*g,45*g].join(\",\")).style(\"fill\",\"url(#vizgg4\"+p+\")\")})}var n,e,r,a,i,o,c,d,f,l,g,p,h,y,m,v,A,x,k,b={innerRadius:20,outerRadius:150,angleOffset:.7,startAngle:-1.5*s,endAngle:.5*s,minorTickStart:.9,minorTickEnd:.95,majorTickStart:.82,majorTickEnd:.95,needleColor:\"#de2c2c\",innerFaceColor:\"#999999\",faceColor:\"#666666\",domain:[0,100],duration:500,ease:\"cubicInOut\",ticks:d3.range(0,101,2),majorTicks:function(t){return t%10===0},labelLocation:.7};return t.scale=function(){return d3.scale.linear().domain(t.domain()).range([b.startAngle+t.angleOffset(),b.endAngle-t.angleOffset()])},t.innerRadius=function(e){return arguments.length?(n=e,t):\"undefined\"!=typeof n?n:b.innerRadius},t.outerRadius=function(n){return arguments.length?(e=n,t):\"undefined\"!=typeof e?e:b.outerRadius},t.angleOffset=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:b.angleOffset},t.labelLocation=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:b.labelLocation},t.ticks=function(n){return arguments.length?(h=n,t):\"undefined\"!=typeof h?h:b.ticks},t.majorTicks=function(n){return arguments.length?(y=n,t):\"undefined\"!=typeof y?y:b.majorTicks},t.minorTickStart=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:b.minorTickStart},t.minorTickEnd=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:b.minorTickEnd},t.majorTickStart=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:b.majorTickStart},t.majorTickEnd=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:b.majorTickEnd},t.needleColor=function(n){return arguments.length?(r=n,t):\"undefined\"!=typeof r?r:b.needleColor},t.innerFaceColor=function(n){return arguments.length?(a=n,t):\"undefined\"!=typeof a?a:b.innerFaceColor},t.faceColor=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:b.faceColor},t.domain=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:b.domain},t.duration=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:b.duration},t.ease=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:b.ease},t.value=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:.5*(b.domain[0]+b.domain[1])},t.defs=function(n,e){var r=n.append(\"defs\");p=e;var a=t.needleColor(),i=t.innerFaceColor(),o=t.faceColor(),s=u.defs(r).lG().id(\"vizgg1\"+e).sel();u.defs(s).stop().offset(\"0\").stopColor(a),u.defs(s).stop().offset(\"1\").stopColor(d3.rgb(a).darker(1));var c=u.defs(r).rG().id(\"vizgg2\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(c).stop().offset(\"0\").stopColor(i),u.defs(c).stop().offset(\"1\").stopColor(d3.rgb(i).darker(2));var d=u.defs(r).rG().id(\"vizgg3\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(d).stop().offset(\"0\").stopColor(o),u.defs(d).stop().offset(\"1\").stopColor(d3.rgb(o).darker(2)),u.defs(r).lG().id(\"vizgg4\"+e).gradientUnits(\"userSpaceOnUse\").y1(\"80\").x1(\"-10\").y2(\"80\").x2(\"10\").xlink(\"#vizgg1\"+e);var f=u.defs(r).filter().id(\"vizgg5\"+e).sel();u.defs(f).feFlood().result(\"flood\").floodColor(\"rgb(0,0,0)\").floodOpacity(\"0.6\"),u.defs(f).feComposite().result(\"composite1\").operator(\"in\").in2(\"SourceGraphic\")[\"in\"](\"flood\"),u.defs(f).feGaussianBlur().result(\"blur\").stdDeviation(\"2\")[\"in\"](\"composite1\"),u.defs(f).feOffset().result(\"offset\").dy(\"2\").dx(\"2\"),u.defs(f).feComposite().result(\"composite2\").operator(\"over\").in2(\"offset\")[\"in\"](\"SourceGraphic\");var l=u.defs(r).filter().x(\"-0.3\").y(\"-0.3\").height(\"1.8\").width(\"1.8\").id(\"vizgg6\"+e).sel();u.defs(l).feGaussianBlur().stdDeviation(\"2\")},t.setNeedle=function(n){function e(t,n){return d3.interpolateString(\"rotate(\"+t+\")\",\"rotate(\"+n+\")\")}var r=180*t.scale()(n)/s+90,a=180*t.scale()(t.value())/s+90,i=t.ease();g.selectAll(\".needle\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i),g.selectAll(\".needleshadow\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i).each(\"end\",function(){angle=n}),t.value(n)},t},u.ch=function(){function u(t){function n(t){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}p=t,k||f(),t.each(function(){var t=d3.select(this),r=t.selectAll(\".groups\").data(x).enter().append(\"g\").attr(\"class\",\"groups\").on(\"mouseover\",u.mouseover).on(\"mouseout\",u.mouseout),a=r.append(\"text\").attr(\"class\",\"label\"),i=(1+u.labelPadding())*u.outerRadius(),s=u.valueFormat();a.filter(function(t){return\"g\"==t.type}).attr(\"x\",function(t){return i*Math.cos(d(t))}).attr(\"y\",function(t){return i*Math.sin(d(t))}).text(function(t){return t.source+\" (\"+s(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"}).each(function(t){this._current=t}),r.append(\"path\").style(\"fill\",function(t){return y(t.source)}).style(\"stroke\",function(t){return y(t.source)}).attr(\"d\",n).each(function(t){this._current=t}).filter(function(t){return\"g\"==t.type}),t.append(\"g\").attr(\"class\",\"chords\").selectAll(\".chord\").data(k).enter().append(\"g\").attr(\"class\",\"chord\").append(\"path\").each(function(t){this._current=t}).attr(\"d\",e).style(\"fill\",function(t){return y(t.target)}).style(\"opacity\",u.chordOpacity()).style(\"stroke\",function(t){return y(t.target)}).style(\"display\",function(t){return t.display?\"inline\":\"none\"})})}function s(t){function n(t,n){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}function i(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return e(n(t))}}function s(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return n(e(t),t)}}function f(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.cos(d(n(t)))}}function l(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.sin(d(n(t)))}}var g=p.selectAll(\".groups\").data(t?b:u.groups()),h=(1+u.labelPadding())*u.outerRadius(),y=u.valueFormat();g.select(\"path\").transition().duration(L).attrTween(\"d\",s),g.select(\".label\").filter(function(t){return\"g\"==t.type}).transition().duration(L).attrTween(\"x\",f).attrTween(\"y\",l).text(function(t){return t.source+\" (\"+y(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"});var m=u.chordOpacity();p.select(\".chords\").selectAll(\".chord\").data(t?w:u.chords()).select(\"path\").transition().duration(L).attrTween(\"d\",i).style(\"opacity\",function(t){return t.display?m:0})}function d(n){return t((n.startAngle+n.endAngle)/2)}function f(){m=[],h.forEach(function(t){-1==m.indexOf(E(t))&&m.push(E(t)),-1==m.indexOf(M(t))&&m.push(M(t))}),m=m.sort(T),v={},A={},m.forEach(function(t){v[t]={},A[t]={},m.forEach(function(n){v[t][n]=0,A[t][n]=!1})}),h.forEach(function(t){var n=E(t),e=M(t);v[n][e]+=S(t),A[n][e]=!0}),x=[],m.forEach(function(t,n){x.push({source:t,type:\"gs\",value:0,skipPad:!0,index:n}),x.push({source:t,type:\"g\",value:d3.sum(m,function(n){return v[t][n]}),skipPad:!1,index:n})}),g(x,z,R,void 0,P),k=[],x.filter(function(t){return\"g\"==t.type}).forEach(function(t,n){var r=i(m.length,n),a=e(r.map(function(n){return v[t.source][m[n]]}),0,0,t.startAngle,t.endAngle);r.forEach(function(e,r){var i=a[r];k.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:t.source,target:m[e],type:\"c\",display:A[t.source][m[e]],index:n,subindex:e,indexsubindex:n+\"-\"+e})})});var t=d3.map(k,function(t){return t.indexsubindex});k.forEach(function(n){if(n.subindex==n.index)return n.endStartAngle=n.startAngle,void(n.endEndAngle=n.startAngle);var e=t.get(n.subindex+\"-\"+n.index);n.endStartAngle=e.startAngle,n.endEndAngle=e.startAngle}),F=!1}function l(t){function n(t){return t.endAngle+t.startAngle}var r=x.filter(function(n){return n.source==t&&\"g\"==n.type})[0];b=[],m.forEach(function(n,e){b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"gs\",value:n==t?v[n][n]:0,skipPad:n==t&&A[n][n]?!1:!0,index:e}),n==t?b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"g\",value:r.value,skipPad:!1,index:e}):b.push({source:n,type:\"g\",value:v[t][n],skipPad:!1,index:e})}),g(b,z,R,t,P);var a=n(r);x.forEach(function(t,e){var r=b[e],i=n(t)<a;r.startAngle-=i?o:0,r.endAngle-=i?o:0}),w=[],b.filter(function(t){return\"g\"==t.type}).forEach(function(n,r){var a=i(m.length,r),u=a.map(function(e){var r=m[e];return n.source==t?v[n.source][r]:r==t?v[r][n.source]:0}),o=e(u,0,0,n.startAngle,n.endAngle);a.forEach(function(e,a){var i=o[a];w.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:n.source,target:m[e],type:\"c\",display:n.source===t,index:r,subindex:e,indexsubindex:r+\"-\"+e})})});var u=d3.map(w.map(function(t){return{startAngle:t.startAngle,endAngle:t.endAngle,indexsubindex:t.indexsubindex}}),function(t){return t.indexsubindex}),s=d3.map(b.filter(function(t){return\"gs\"==t.type}),function(t){return t.source});w.forEach(function(n){if(n.subindex==n.index){var e=s.get(n.source);return n.endStartAngle=e.startAngle,void(n.endEndAngle=e.endAngle)}var r=u.get(n.subindex+\"-\"+n.index);n.endStartAngle=r.startAngle,n.endEndAngle=r.endAngle,n.source!==t&&(n.startAngle=n.endAngle,n.endEndAngle=n.endStartAngle)})}function g(t,e,r,a,i){var u=void 0!==a,o=0;if(u){for(var s=!1;o<t.length;o++)if(t[o].source==a&&\"g\"==t[o].type){s=!0;break}s||console.log(\"The fixed source '\"+a+\"' is not a valid key\")}var c=d3.range(t.length);u&&(c=c.slice(o).concat(c.slice(0,o)));var d=t.filter(function(t){return!(u&&t.source===a&&\"g\"==t.type||t.skipPad)}).map(function(t){return t.value}),f=2*Math.PI-(u?t[o].endAngle-t[o].startAngle+2*e:0),l=u?t[o].endAngle+e:i,g=d3.sum(d),p=n(d,e,r,0>=f?0:f,g,u?!0:!1);c.slice(u?1:0).forEach(function(n){var a=p*t[n].value,i=(r>a?r-a:0)/2;t[n].startAngle=l,t[n].endAngle=l+a,t[n].padAngle=i,t[n].percent=t[n].value/(g||1),l+=a+i+(t[n].skipPad?0:e)})}var p,h,y,m,v,A,x,k,b,w,E=function(t){return t[0]},M=function(t){return t[1]},S=function(t){return t[2]},C=function(t){return t},T=d3.ascending,z=.03,P=0,B=180,O=200,j=.7,G=.02,R=0,L=500,F=!0;return u.data=function(t){return arguments.length?(h=t,F=!0,u):h},u.fill=function(t){return arguments.length?(y=t,u):y},u.duration=function(t){return arguments.length?(L=t,u):L},u.chordOpacity=function(t){return arguments.length?(j=t,u):j},u.innerRadius=function(t){return arguments.length?(B=t,F=!0,u):B},u.outerRadius=function(t){return arguments.length?(O=t,F=!0,u):O},u.source=function(t){return arguments.length?(E=t,F=!0,u):E},u.target=function(t){return arguments.length?(M=t,F=!0,u):M},u.value=function(t){return arguments.length?(S=t,F=!0,u):S},u.padding=function(t){return arguments.length?(z=t,F=!0,u):z},u.labelPadding=function(t){return arguments.length?(G=t,u):G},u.sort=function(t){return arguments.length?(T=t,F=!0,u):T},u.startAngle=function(t){return arguments.length?(P=t,F=!0,u):P},u.chords=function(){return F&&f(),k},u.groups=function(){return F&&f(),x},u.valueFormat=function(t){return arguments.length?(C=t,u):C},u.mouseover=function(t){l(t.source),s(1)},u.mouseout=function(t){s(0)},u},u.defs=function(t){var n={},e=t;return n.sel=function(){return e},n.lG=function(){return e=e.append(\"linearGradient\"),n},n.rG=function(){return e=e.append(\"radialGradient\"),n},n.stop=function(){return e=e.append(\"stop\"),n},n.filter=function(){return e=e.append(\"filter\"),n},n.feFlood=function(){return e=e.append(\"feFlood\"),n},n.feComposite=function(){return e=e.append(\"feComposite\"),n},n.feOffset=function(){return e=e.append(\"feOffset\"),n},n.feGaussianBlur=function(){return e=e.append(\"feGaussianBlur\"),n},n.result=function(t){return e=e.attr(\"result\",t),n},n.floodColor=function(t){return e=e.attr(\"flood-color\",t),n},n.floodOpacity=function(t){return e=e.attr(\"flood-opacity\",t),n},n.stdDeviation=function(t){return e=e.attr(\"stdDeviation\",t),n},n.operator=function(t){return e=e.attr(\"operator\",t),n},n.height=function(t){return e=e.attr(\"height\",t),n},n.width=function(t){return e=e.attr(\"width\",t),n},n[\"in\"]=function(t){return e=e.attr(\"in\",t),n},n.in2=function(t){return e=e.attr(\"in2\",t),n},n.id=function(t){return e=e.attr(\"id\",t),n},n.fx=function(t){return e=e.attr(\"fx\",t),n},n.fy=function(t){return e=e.attr(\"fy\",t),n},n.dx=function(t){return e=e.attr(\"dx\",t),n},n.dy=function(t){return e=e.attr(\"dy\",t),n},n.x1=function(t){return e=e.attr(\"x1\",t),n},n.y1=function(t){return e=e.attr(\"y1\",t),n},n.x2=function(t){return e=e.attr(\"x2\",t),n},n.y2=function(t){return e=e.attr(\"y2\",t),n},n.x=function(t){return e=e.attr(\"x\",t),n},n.y=function(t){return e=e.attr(\"y\",t),n},n.r=function(t){return e=e.attr(\"r\",t),n},n.spreadMethod=function(t){return e=e.attr(\"spreadMethod\",t),n},n.gradientUnits=function(t){return e=e.attr(\"gradientUnits\",t),n},n.xlink=function(t){return e=e.attr(\"xlink:href\",t),n},n.offset=function(t){return e=e.attr(\"offset\",t),n},n.stopColor=function(t){return e=e.attr(\"stop-color\",t),n},n.path=function(){return e=e.append(\"path\"),n},n.d=function(t){return e=e.attr(\"d\",t),n},n},this.viz=u}();\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  demo11.js */\nvar data=[[\"plant1\",\"bee1\",6],\n[\"plant2\",\"bee1\",9],\n[\"plant3\",\"bee1\",3],\n[\"plant4\",\"bee1\",0],\n[\"plant1\",\"bee2\",0],\n[\"plant2\",\"bee2\",2],\n[\"plant3\",\"bee2\",0],\n[\"plant4\",\"bee2\",0],\n[\"plant1\",\"bee3\",0],\n[\"plant2\",\"bee3\",0],\n[\"plant3\",\"bee3\",0],\n[\"plant4\",\"bee3\",7]]\n\n\n\n function sort(sortOrder){\n                    return function(a,b){ return d3.ascending(sortOrder.indexOf(a),sortOrder.indexOf(b)) }\n                  }\nvar color = {'Unlinked':'#3366CC','bee1':'rgb(56,43,61)','bee2':'rgb(56,43,61)','bee3':'rgb(56,43,61)'};\n\n\n\n\nvar g1 = svg.append(\"g\").attr(\"transform\",\"translate(188,50)\");\n                         var bp1=viz.bP()\n                         .data(data)\n                         .value(d=>d[2])\n                         .min(10)\n                         .pad(1)\n                         .height(400)\n                         .width(200)\n                         .barSize(35)\n                         .fill(d=>color[d.secondary])\n.sortSecondary(sort([\"bee2\",\"bee3\",\"bee1\"]))\n.sortPrimary(sort([\"plant3\",\"plant1\",\"plant4\",\"plant2\"]))\n.orient(\"vertical\");\n\ng1.call(bp1);g1.append(\"text\")\n                        .attr(\"x\",-50).attr(\"y\",-8)\n                        .style(\"text-anchor\",\"middle\")\n                        .text(\"Primary\");\n                        g1.append(\"text\")\n                        .attr(\"x\", 250)\n                        .attr(\"y\",-8).style(\"text-anchor\",\"middle\")\n                        .text(\"Secondary\");\n                        g1.append(\"text\")\n                        .attr(\"x\",100).attr(\"y\",-25)\n                        .style(\"text-anchor\",\"middle\")\n                        .attr(\"class\",\"header\")\n                        .text(\"meadow\");\n\n g1.selectAll(\".mainBars\")\n                        .on(\"mouseover\",mouseover)\n                        .on(\"mouseout\",mouseout);\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"label\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -27.2:24.8))\n                        .attr(\"y\",d=>+6)\n                        .text(d=>d.key)\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\"));\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"perc\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -141:144))\n                        .attr(\"y\",d=>+6)\n                        .text(function(d){ return d3.format(\"0.0%\")(d.percent)})\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\")); \n\nfunction mouseover(d){\nbp1.mouseover(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\n}\n\n                     function mouseout(d){\nbp1.mouseout(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\n}\n\n\n};","style":"/* R2D3 Source File:  demo11.css */\n .mainBars{\n    shape-rendering: auto;\n    fill-opacity: 1;\n    stroke-width: 0.5px;\n    stroke: rgb(0, 0, 0);\n    stroke-opacity: 0;\n  }\n    .subBars{\n    shape-rendering:crispEdges;\n    }\n    .edges{\n    stroke:none;\n    fill-opacity:0.3;\n    }\n    .label{\n    color:#000000;\n    }","version":5,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
<p>Also included is a function that finds an order that minimises crossovers, by first dividing the networks by compartments, then sorting by compartment size, then minimising within-compartment cross-over using a CCA, similar to that used by the <code>plotweb</code> function in <code>bipartite</code>. These orders can be then passed to <code>bipartite_D3()</code></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">OrderByCrossover</span>(Safariland)</span></code></pre></div>
<pre><code>## $PrimaryOrder
## [1] &quot;Cynanchum diemii&quot;         &quot;Mutisia decurrens&quot;       
## [3] &quot;Berberis darwinii&quot;        &quot;Alstroemeria aurea&quot;      
## [5] &quot;Calceolaria crenatiflora&quot; &quot;Ribes magellanicum&quot;      
## [7] &quot;Rosa eglanteria&quot;          &quot;Aristotelia chilensis&quot;   
## [9] &quot;Schinus patagonicus&quot;     
## 
## $SecondaryOrder
##  [1] &quot;Formicidae3&quot;             &quot;Nitidulidae&quot;            
##  [3] &quot;Braconidae3&quot;             &quot;Torymidae2&quot;             
##  [5] &quot;Bombus dahlbomii&quot;        &quot;Phthiria&quot;               
##  [7] &quot;Sapromyza.Minettia&quot;      &quot;Vespula germanica&quot;      
##  [9] &quot;Phthiria1&quot;               &quot;Sphecidae&quot;              
## [11] &quot;Thomisidae&quot;              &quot;Ichneumonidae2&quot;         
## [13] &quot;Ruizantheda proxima&quot;     &quot;Manuelia gayi&quot;          
## [15] &quot;Trichophthalma jaffueli&quot; &quot;Svastrides melanura&quot;    
## [17] &quot;Syrphus octomaculatus&quot;   &quot;Staphilinidae&quot;          
## [19] &quot;Corynura prothysteres&quot;   &quot;Chalepogenus caeruleus&quot; 
## [21] &quot;Trichophthalma amoena&quot;   &quot;Allograpta.Toxomerus&quot;   
## [23] &quot;Platycheirus1&quot;           &quot;Ruizantheda mutabilis&quot;  
## [25] &quot;Braconidae2&quot;             &quot;Policana albopilosa&quot;    
## [27] &quot;Ichneumonidae4&quot;</code></pre>
</div>
</div>
<div id="sizing-and-positioning" class="section level1">
<h1>Sizing and Positioning</h1>
<p>The sizing and positioning of the various elements is one of the hardest features to balance. Large plots need to have sufficient space, but too much leads to large white gaps. With a more complex plot it is worth playing around with the various parameters. These are:</p>
<p>MainFigSize : The total size of the html canvas or widget that the figure is put in. By default it is 700x700 per facet. Increase this if things look cramped, the sides of the plot are uneven or bars are getting inverted.</p>
<p>IndivFigSize : This controls the size of the area in which the links are plotted. Only really worth changing in most cases if you want to change the ratios in some way</p>
<p>mp: This sets the number of rows and columns to plot the individual facets of multiple graphs. By default it assumes you want just one row.</p>
<p>BarSize: This the thickness of the bars. Defaults to 35</p>
<p>MinWidth: This sets the size to which each segment shrinks too when others are highlighted</p>
<p>Pad: Padding between boxes to make them more readable.</p>
<p>BoxLabPos: This is two numbers for primary and secondary levels that shift the label text. Larger values shift the text away from the graph. By default it takes a guess based on the maximum number of characters.</p>
<p>PercPos: This does the equivalent for the percentages</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With larger datasets the default can look a bit awkward, with overlaps and inversions</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(Safariland, vazquenc, <span class="at">package =</span> <span class="st">&#39;bipartite&#39;</span>)</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>data2<span class="ot">&lt;-</span>bipartite<span class="sc">::</span><span class="fu">webs2array</span>(Safariland, vazquenc)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="fu">bipartite_D3</span>(<span class="at">data =</span> data2, <span class="at">filename =</span> <span class="st">&#39;demo12&#39;</span>)</span></code></pre></div>
<pre><code>## Warning in bipartite_D3(data = data2, filename = &quot;demo12&quot;): Making too few
## facets. Guessing you want 1 row</code></pre>
<div id="htmlwidget-db9cbe8d16ff33743cc7" style="width:1400px;height:700px;" class="r2d3 html-widget"></div>
<script type="application/json" data-for="htmlwidget-db9cbe8d16ff33743cc7">{"x":{"data":null,"type":"logical","container":"svg","options":null,"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n/* R2D3 Source File:  vizjs.js */\n!function(){function t(t){for(;t>o;)t-=o;for(;0>t;)t+=o;return t}function n(t,n,e,r,a,i){if(0>=a||0>=r)return 0;var u=t.concat().sort(d3.ascending),o=r-u.length*n+(i?n:0),s=[],c=0,d=0;return d3.range(u.length).forEach(function(t){d=(o-e*t)/(a-=u[t-1]||0),c+=u[t]*d<=e?1:0,s.push(d)}),s[c]}function e(t,e,r,a,i){var u=a,o=d3.sum(t),s=n(t,e,r,i-a,o,!1),c=t.map(function(t){var n=s*t,a=(r>n?r:n)/2;return u+=2*a+e,{c:u-a,v:n,w:a,value:t,percent:t/(o||1)}});return c}function r(t){function n(t,n){return[t*Math.cos(n),t*Math.sin(n)]}var e=n(t[0],t[2]),r=n(t[0],t[3]),a=n(t[1],t[2]),i=n(t[1],t[3]);return[\"M\",e,\"A\",t[0],t[0],\"0\",t[3]-t[2]>s?1:0,\"1\",r,\"L\",i,\"A\",t[1],t[1],\"0\",t[3]-t[2]>s?1:0,\"0\",a,\"z\"].join(\" \")}function a(t,n,e,r,a,i){function u(t,n,e){return\"A\"+t+\",\"+t+\" 0 \"+ +(e>s)+\",1 \"+n}function c(t,n){return[t*Math.cos(n),t*Math.sin(n)]}function d(t,n,e,r){e+=n>e?o:0;var a=e-n,i=1-(a>s?o-a:a)/s;i=Math.pow(i,5);var u=(e+n)/2-(e-n>s?s:0);return\"Q\"+i*r*Math.cos(u)+\",\"+i*r*Math.sin(u)+\" \"+t}var f=c(t,n),l=c(t,e),g=c(r,a),p=c(r,i);return\"M\"+f+u(t,l,e-n)+(n==a&&e==i?d(f,n,e,r):d(g,e,a,r)+u(r,p,i-a)+d(f,n,i,t))+\"Z\"}function i(t,n){ret=[];for(var e=n;e>n-t;e--)ret.push(0>e?e+t:e);return ret}var u={version:\"1.1.0\"},o=2*Math.PI,s=Math.PI,c=Math.PI/2;u.bP=function(){function t(i){y=i,i.each(function(){var i=d3.select(this),u=t.bars(),o=i.selectAll(\".subBars\").data(u.subBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"subBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);\"undefined\"!=typeof h&&o.style(\"fill\",function(t){return h(t)});var s=i.selectAll(\".edges\").data(u.edges).enter().append(\"path\").attr(\"class\",\"edges\").attr(\"d\",function(t){return t.path}).style(\"fill-opacity\",t.edgeOpacity());\"undefined\"!=typeof h&&s.style(\"fill\",function(t){return h(t)}),i.selectAll(\".mainBars\").data(u.mainBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"mainBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a).style(\"fill-opacity\",0).on(\"mouseover\",t.mouseover).on(\"mouseout\",t.mouseout)})}function n(t){return-t.width}function e(t){return-t.height}function r(t){return 2*t.width}function a(t){return 2*t.height}var i,u,o,s,c,d,f,l,g,p,h,y,m,v,A,x,k;return t.data=function(n){return arguments.length?(p=n,t):p},t.fill=function(n){return arguments.length?(h=n,t):h},t.keyPrimary=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:function(t){return t[0]}},t.sortPrimary=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:d3.ascending},t.keySecondary=function(n){return arguments.length?(u=n,t):\"undefined\"!=typeof u?u:function(t){return t[1]}},t.sortSecondary=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:d3.ascending},t.value=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:function(t){return t[2]}},t.width=function(n){return arguments.length?(s=n,t):\"undefined\"!=typeof s?s:400},t.height=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:600},t.barSize=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:35},t.min=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:0},t.orient=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:\"vertical\"},t.pad=function(n){return arguments.length?(g=n,t):\"undefined\"!=typeof g?g:0},t.duration=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:500},t.edgeOpacity=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:.4},t.edgeMode=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:\"curved\"},t.bars=function(n){function e(t,e){return\"undefined\"==typeof n||n.part===e||d[n.part](t)===n.key}function r(){var n=t.min()/2;s.primary.forEach(function(t){t.height<n&&(t.height=n)}),s.secondary.forEach(function(t){t.height<n&&(t.height=n)})}function a(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data()),i=o(a,t.pad(),t.min(),0,\"vertical\"==f?t.height():t.width()),u=t.barSize();a.forEach(function(e,r){s[n].push({x:\"horizontal\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.width()-u/2,y:\"vertical\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.height()-u/2,height:\"vertical\"==f?(i[r].e-i[r].s)/2:u/2,width:\"horizontal\"==f?(i[r].e-i[r].s)/2:u/2,part:n,key:e.key,value:e.value,percent:i[r].p})})}function i(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.map(s[n],function(t){return t.key}),i=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).key(\"secondary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"secondary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data());i.forEach(function(e){var r=a.get(e.key),i=o(e.values,0,0,\"vertical\"==f?r.y-r.height:r.x-r.width,\"vertical\"==f?r.y+r.height:r.x+r.width),u=t.barSize();e.values.forEach(function(a,o){c[n].push({x:\"vertical\"==f?\"primary\"==n?u/2:t.width()-u/2:(i[o].s+i[o].e)/2,y:\"horizontal\"==f?\"primary\"==n?u/2:t.height()-u/2:(i[o].s+i[o].e)/2,height:(\"vertical\"==f?i[o].e-i[o].s:u)/2,width:(\"horizontal\"==f?i[o].e-i[o].s:u)/2,part:n,primary:\"primary\"==n?e.key:a.key,secondary:\"primary\"==n?a.key:e.key,value:a.value,percent:i[o].p*r.percent,index:\"primary\"==n?e.key+\"|\"+a.key:a.key+\"|\"+e.key})})})}function u(){function n(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(t+e)/2,d=(i+o)/2;return[\"M\",t,\",\",n,\"C\",c,\",\",n,\" \",c,\",\",r,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",d,\",\",u,\" \",d,\",\",s,\",\",o,\",\",s,\"z\"].join(\"\")}function e(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(n+r)/2,d=(u+s)/2;return[\"M\",t,\",\",n,\"C\",t,\",\",c,\" \",e,\",\",c,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",i,\",\",d,\" \",o,\",\",d,\",\",o,\",\",s,\"z\"].join(\"\")}var r=d3.map(c.secondary,function(t){return t.index}),a=t.edgeMode();return c.primary.map(function(t){var a=r.get(t.index);return{path:\"vertical\"===f?n(t.x+t.width,t.y+t.height,a.x-a.width,a.y+a.height,a.x-a.width,a.y-a.height,t.x+t.width,t.y-t.height):e(t.x-t.width,t.y+t.height,a.x-a.width,a.y-a.height,a.x+a.width,a.y-a.height,t.x+t.width,t.y+t.height),primary:t.primary,secondary:t.secondary,value:t.value,percent:t.percent}})}function o(t,n,e,r,a){var i=e/(a-r-2*t.length*n),u=0,o=0,s=d3.sum(t,function(t){return t.value});t.forEach(function(t){t.value<i*s&&(u+=1,o+=t.value)});var c=1e-5>s?0:(a-r-2*t.length*n-u*e)/(s-o),d=r,f=[];return t.forEach(function(t){var r=t.value*c;f.push({s:d+n+(e>r?.5*(e-r):0),e:d+n+(e>r?.5*(e+r):r),p:1e-5>s?0:t.value/s}),d+=2*n+(e>r?e:r)}),f}var s={primary:[],secondary:[]},c={primary:[],secondary:[]},d={primary:t.keyPrimary(),secondary:t.keySecondary()},f=t.orient();return a(\"primary\"),a(\"secondary\"),i(\"primary\"),i(\"secondary\"),r(),{mainBars:s.primary.concat(s.secondary),subBars:c.primary.concat(c.secondary),edges:u()}},t.mouseover=function(i){var u=t.bars(i);y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",1),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);var o=y.selectAll(\".edges\").data(u.edges);o.filter(function(t){return t[i.part]===i.key}).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),o.filter(function(t){return t[i.part]!==i.key}).transition().duration(t.duration()).style(\"fill-opacity\",0).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t.mouseout=function(i){var u=t.bars();y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",0),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a),y.selectAll(\".edges\").data(u.edges).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t},u.gg=function(){function t(n){g=n,n.each(function(){var n=d3.select(this),e=t.scale(),r=t.minorTickStart(),a=t.minorTickEnd(),i=t.majorTickStart(),u=t.majorTickEnd(),o=t.ticks(),c=t.majorTicks(),d=t.labelLocation(),f=t.outerRadius();n.append(\"circle\").attr(\"r\",f).style(\"fill\",\"url(#vizgg3\"+p+\")\").attr(\"class\",\"face\"),n.append(\"circle\").attr(\"r\",t.innerRadius()).style(\"fill\",\"url(#vizgg2\"+p+\")\").style(\"filter\",\"url(#vizgg5\"+p+\")\").attr(\"class\",\"innerFace\");var l=n.append(\"g\");l.selectAll(\"line\").data(o).enter().append(\"line\").attr(\"class\",function(t){return c(t)?\"majorTicks\":\"minorTicks\"}).attr(\"x1\",function(t){return f*(c(t)?i:r)*Math.cos(e(t))}).attr(\"y1\",function(t){return f*(c(t)?i:r)*Math.sin(e(t))}).attr(\"x2\",function(t){return f*(c(t)?u:a)*Math.cos(e(t))}).attr(\"y2\",function(t){return f*(c(t)?u:a)*Math.sin(e(t))}),n.selectAll(\"text\").data(o.filter(c)).enter().append(\"text\").attr(\"class\",\"label\").attr(\"x\",function(t){return f*d*Math.cos(e(t))}).attr(\"y\",function(t){return f*d*Math.sin(e(t))}).attr(\"dy\",3).text(function(t){return t});var g=t.outerRadius()/b.outerRadius,h=180*t.scale()(t.value())/s+90;n.append(\"g\").attr(\"transform\",\"translate(1,1)\").selectAll(\".needleshadow\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needleshadow\").append(\"path\").attr(\"d\",[\"m 0\",-130*g,5*g,175*g,-10*g,\"0,z\"].join(\",\")).style(\"filter\",\"url(#vizgg6\"+p+\")\"),n.selectAll(\".needle\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needle\").append(\"polygon\").attr(\"points\",[-.5*g,-130*g,.5*g,-130*g,5*g,45*g,-5*g,45*g].join(\",\")).style(\"fill\",\"url(#vizgg4\"+p+\")\")})}var n,e,r,a,i,o,c,d,f,l,g,p,h,y,m,v,A,x,k,b={innerRadius:20,outerRadius:150,angleOffset:.7,startAngle:-1.5*s,endAngle:.5*s,minorTickStart:.9,minorTickEnd:.95,majorTickStart:.82,majorTickEnd:.95,needleColor:\"#de2c2c\",innerFaceColor:\"#999999\",faceColor:\"#666666\",domain:[0,100],duration:500,ease:\"cubicInOut\",ticks:d3.range(0,101,2),majorTicks:function(t){return t%10===0},labelLocation:.7};return t.scale=function(){return d3.scale.linear().domain(t.domain()).range([b.startAngle+t.angleOffset(),b.endAngle-t.angleOffset()])},t.innerRadius=function(e){return arguments.length?(n=e,t):\"undefined\"!=typeof n?n:b.innerRadius},t.outerRadius=function(n){return arguments.length?(e=n,t):\"undefined\"!=typeof e?e:b.outerRadius},t.angleOffset=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:b.angleOffset},t.labelLocation=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:b.labelLocation},t.ticks=function(n){return arguments.length?(h=n,t):\"undefined\"!=typeof h?h:b.ticks},t.majorTicks=function(n){return arguments.length?(y=n,t):\"undefined\"!=typeof y?y:b.majorTicks},t.minorTickStart=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:b.minorTickStart},t.minorTickEnd=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:b.minorTickEnd},t.majorTickStart=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:b.majorTickStart},t.majorTickEnd=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:b.majorTickEnd},t.needleColor=function(n){return arguments.length?(r=n,t):\"undefined\"!=typeof r?r:b.needleColor},t.innerFaceColor=function(n){return arguments.length?(a=n,t):\"undefined\"!=typeof a?a:b.innerFaceColor},t.faceColor=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:b.faceColor},t.domain=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:b.domain},t.duration=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:b.duration},t.ease=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:b.ease},t.value=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:.5*(b.domain[0]+b.domain[1])},t.defs=function(n,e){var r=n.append(\"defs\");p=e;var a=t.needleColor(),i=t.innerFaceColor(),o=t.faceColor(),s=u.defs(r).lG().id(\"vizgg1\"+e).sel();u.defs(s).stop().offset(\"0\").stopColor(a),u.defs(s).stop().offset(\"1\").stopColor(d3.rgb(a).darker(1));var c=u.defs(r).rG().id(\"vizgg2\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(c).stop().offset(\"0\").stopColor(i),u.defs(c).stop().offset(\"1\").stopColor(d3.rgb(i).darker(2));var d=u.defs(r).rG().id(\"vizgg3\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(d).stop().offset(\"0\").stopColor(o),u.defs(d).stop().offset(\"1\").stopColor(d3.rgb(o).darker(2)),u.defs(r).lG().id(\"vizgg4\"+e).gradientUnits(\"userSpaceOnUse\").y1(\"80\").x1(\"-10\").y2(\"80\").x2(\"10\").xlink(\"#vizgg1\"+e);var f=u.defs(r).filter().id(\"vizgg5\"+e).sel();u.defs(f).feFlood().result(\"flood\").floodColor(\"rgb(0,0,0)\").floodOpacity(\"0.6\"),u.defs(f).feComposite().result(\"composite1\").operator(\"in\").in2(\"SourceGraphic\")[\"in\"](\"flood\"),u.defs(f).feGaussianBlur().result(\"blur\").stdDeviation(\"2\")[\"in\"](\"composite1\"),u.defs(f).feOffset().result(\"offset\").dy(\"2\").dx(\"2\"),u.defs(f).feComposite().result(\"composite2\").operator(\"over\").in2(\"offset\")[\"in\"](\"SourceGraphic\");var l=u.defs(r).filter().x(\"-0.3\").y(\"-0.3\").height(\"1.8\").width(\"1.8\").id(\"vizgg6\"+e).sel();u.defs(l).feGaussianBlur().stdDeviation(\"2\")},t.setNeedle=function(n){function e(t,n){return d3.interpolateString(\"rotate(\"+t+\")\",\"rotate(\"+n+\")\")}var r=180*t.scale()(n)/s+90,a=180*t.scale()(t.value())/s+90,i=t.ease();g.selectAll(\".needle\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i),g.selectAll(\".needleshadow\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i).each(\"end\",function(){angle=n}),t.value(n)},t},u.ch=function(){function u(t){function n(t){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}p=t,k||f(),t.each(function(){var t=d3.select(this),r=t.selectAll(\".groups\").data(x).enter().append(\"g\").attr(\"class\",\"groups\").on(\"mouseover\",u.mouseover).on(\"mouseout\",u.mouseout),a=r.append(\"text\").attr(\"class\",\"label\"),i=(1+u.labelPadding())*u.outerRadius(),s=u.valueFormat();a.filter(function(t){return\"g\"==t.type}).attr(\"x\",function(t){return i*Math.cos(d(t))}).attr(\"y\",function(t){return i*Math.sin(d(t))}).text(function(t){return t.source+\" (\"+s(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"}).each(function(t){this._current=t}),r.append(\"path\").style(\"fill\",function(t){return y(t.source)}).style(\"stroke\",function(t){return y(t.source)}).attr(\"d\",n).each(function(t){this._current=t}).filter(function(t){return\"g\"==t.type}),t.append(\"g\").attr(\"class\",\"chords\").selectAll(\".chord\").data(k).enter().append(\"g\").attr(\"class\",\"chord\").append(\"path\").each(function(t){this._current=t}).attr(\"d\",e).style(\"fill\",function(t){return y(t.target)}).style(\"opacity\",u.chordOpacity()).style(\"stroke\",function(t){return y(t.target)}).style(\"display\",function(t){return t.display?\"inline\":\"none\"})})}function s(t){function n(t,n){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}function i(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return e(n(t))}}function s(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return n(e(t),t)}}function f(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.cos(d(n(t)))}}function l(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.sin(d(n(t)))}}var g=p.selectAll(\".groups\").data(t?b:u.groups()),h=(1+u.labelPadding())*u.outerRadius(),y=u.valueFormat();g.select(\"path\").transition().duration(L).attrTween(\"d\",s),g.select(\".label\").filter(function(t){return\"g\"==t.type}).transition().duration(L).attrTween(\"x\",f).attrTween(\"y\",l).text(function(t){return t.source+\" (\"+y(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"});var m=u.chordOpacity();p.select(\".chords\").selectAll(\".chord\").data(t?w:u.chords()).select(\"path\").transition().duration(L).attrTween(\"d\",i).style(\"opacity\",function(t){return t.display?m:0})}function d(n){return t((n.startAngle+n.endAngle)/2)}function f(){m=[],h.forEach(function(t){-1==m.indexOf(E(t))&&m.push(E(t)),-1==m.indexOf(M(t))&&m.push(M(t))}),m=m.sort(T),v={},A={},m.forEach(function(t){v[t]={},A[t]={},m.forEach(function(n){v[t][n]=0,A[t][n]=!1})}),h.forEach(function(t){var n=E(t),e=M(t);v[n][e]+=S(t),A[n][e]=!0}),x=[],m.forEach(function(t,n){x.push({source:t,type:\"gs\",value:0,skipPad:!0,index:n}),x.push({source:t,type:\"g\",value:d3.sum(m,function(n){return v[t][n]}),skipPad:!1,index:n})}),g(x,z,R,void 0,P),k=[],x.filter(function(t){return\"g\"==t.type}).forEach(function(t,n){var r=i(m.length,n),a=e(r.map(function(n){return v[t.source][m[n]]}),0,0,t.startAngle,t.endAngle);r.forEach(function(e,r){var i=a[r];k.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:t.source,target:m[e],type:\"c\",display:A[t.source][m[e]],index:n,subindex:e,indexsubindex:n+\"-\"+e})})});var t=d3.map(k,function(t){return t.indexsubindex});k.forEach(function(n){if(n.subindex==n.index)return n.endStartAngle=n.startAngle,void(n.endEndAngle=n.startAngle);var e=t.get(n.subindex+\"-\"+n.index);n.endStartAngle=e.startAngle,n.endEndAngle=e.startAngle}),F=!1}function l(t){function n(t){return t.endAngle+t.startAngle}var r=x.filter(function(n){return n.source==t&&\"g\"==n.type})[0];b=[],m.forEach(function(n,e){b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"gs\",value:n==t?v[n][n]:0,skipPad:n==t&&A[n][n]?!1:!0,index:e}),n==t?b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"g\",value:r.value,skipPad:!1,index:e}):b.push({source:n,type:\"g\",value:v[t][n],skipPad:!1,index:e})}),g(b,z,R,t,P);var a=n(r);x.forEach(function(t,e){var r=b[e],i=n(t)<a;r.startAngle-=i?o:0,r.endAngle-=i?o:0}),w=[],b.filter(function(t){return\"g\"==t.type}).forEach(function(n,r){var a=i(m.length,r),u=a.map(function(e){var r=m[e];return n.source==t?v[n.source][r]:r==t?v[r][n.source]:0}),o=e(u,0,0,n.startAngle,n.endAngle);a.forEach(function(e,a){var i=o[a];w.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:n.source,target:m[e],type:\"c\",display:n.source===t,index:r,subindex:e,indexsubindex:r+\"-\"+e})})});var u=d3.map(w.map(function(t){return{startAngle:t.startAngle,endAngle:t.endAngle,indexsubindex:t.indexsubindex}}),function(t){return t.indexsubindex}),s=d3.map(b.filter(function(t){return\"gs\"==t.type}),function(t){return t.source});w.forEach(function(n){if(n.subindex==n.index){var e=s.get(n.source);return n.endStartAngle=e.startAngle,void(n.endEndAngle=e.endAngle)}var r=u.get(n.subindex+\"-\"+n.index);n.endStartAngle=r.startAngle,n.endEndAngle=r.endAngle,n.source!==t&&(n.startAngle=n.endAngle,n.endEndAngle=n.endStartAngle)})}function g(t,e,r,a,i){var u=void 0!==a,o=0;if(u){for(var s=!1;o<t.length;o++)if(t[o].source==a&&\"g\"==t[o].type){s=!0;break}s||console.log(\"The fixed source '\"+a+\"' is not a valid key\")}var c=d3.range(t.length);u&&(c=c.slice(o).concat(c.slice(0,o)));var d=t.filter(function(t){return!(u&&t.source===a&&\"g\"==t.type||t.skipPad)}).map(function(t){return t.value}),f=2*Math.PI-(u?t[o].endAngle-t[o].startAngle+2*e:0),l=u?t[o].endAngle+e:i,g=d3.sum(d),p=n(d,e,r,0>=f?0:f,g,u?!0:!1);c.slice(u?1:0).forEach(function(n){var a=p*t[n].value,i=(r>a?r-a:0)/2;t[n].startAngle=l,t[n].endAngle=l+a,t[n].padAngle=i,t[n].percent=t[n].value/(g||1),l+=a+i+(t[n].skipPad?0:e)})}var p,h,y,m,v,A,x,k,b,w,E=function(t){return t[0]},M=function(t){return t[1]},S=function(t){return t[2]},C=function(t){return t},T=d3.ascending,z=.03,P=0,B=180,O=200,j=.7,G=.02,R=0,L=500,F=!0;return u.data=function(t){return arguments.length?(h=t,F=!0,u):h},u.fill=function(t){return arguments.length?(y=t,u):y},u.duration=function(t){return arguments.length?(L=t,u):L},u.chordOpacity=function(t){return arguments.length?(j=t,u):j},u.innerRadius=function(t){return arguments.length?(B=t,F=!0,u):B},u.outerRadius=function(t){return arguments.length?(O=t,F=!0,u):O},u.source=function(t){return arguments.length?(E=t,F=!0,u):E},u.target=function(t){return arguments.length?(M=t,F=!0,u):M},u.value=function(t){return arguments.length?(S=t,F=!0,u):S},u.padding=function(t){return arguments.length?(z=t,F=!0,u):z},u.labelPadding=function(t){return arguments.length?(G=t,u):G},u.sort=function(t){return arguments.length?(T=t,F=!0,u):T},u.startAngle=function(t){return arguments.length?(P=t,F=!0,u):P},u.chords=function(){return F&&f(),k},u.groups=function(){return F&&f(),x},u.valueFormat=function(t){return arguments.length?(C=t,u):C},u.mouseover=function(t){l(t.source),s(1)},u.mouseout=function(t){s(0)},u},u.defs=function(t){var n={},e=t;return n.sel=function(){return e},n.lG=function(){return e=e.append(\"linearGradient\"),n},n.rG=function(){return e=e.append(\"radialGradient\"),n},n.stop=function(){return e=e.append(\"stop\"),n},n.filter=function(){return e=e.append(\"filter\"),n},n.feFlood=function(){return e=e.append(\"feFlood\"),n},n.feComposite=function(){return e=e.append(\"feComposite\"),n},n.feOffset=function(){return e=e.append(\"feOffset\"),n},n.feGaussianBlur=function(){return e=e.append(\"feGaussianBlur\"),n},n.result=function(t){return e=e.attr(\"result\",t),n},n.floodColor=function(t){return e=e.attr(\"flood-color\",t),n},n.floodOpacity=function(t){return e=e.attr(\"flood-opacity\",t),n},n.stdDeviation=function(t){return e=e.attr(\"stdDeviation\",t),n},n.operator=function(t){return e=e.attr(\"operator\",t),n},n.height=function(t){return e=e.attr(\"height\",t),n},n.width=function(t){return e=e.attr(\"width\",t),n},n[\"in\"]=function(t){return e=e.attr(\"in\",t),n},n.in2=function(t){return e=e.attr(\"in2\",t),n},n.id=function(t){return e=e.attr(\"id\",t),n},n.fx=function(t){return e=e.attr(\"fx\",t),n},n.fy=function(t){return e=e.attr(\"fy\",t),n},n.dx=function(t){return e=e.attr(\"dx\",t),n},n.dy=function(t){return e=e.attr(\"dy\",t),n},n.x1=function(t){return e=e.attr(\"x1\",t),n},n.y1=function(t){return e=e.attr(\"y1\",t),n},n.x2=function(t){return e=e.attr(\"x2\",t),n},n.y2=function(t){return e=e.attr(\"y2\",t),n},n.x=function(t){return e=e.attr(\"x\",t),n},n.y=function(t){return e=e.attr(\"y\",t),n},n.r=function(t){return e=e.attr(\"r\",t),n},n.spreadMethod=function(t){return e=e.attr(\"spreadMethod\",t),n},n.gradientUnits=function(t){return e=e.attr(\"gradientUnits\",t),n},n.xlink=function(t){return e=e.attr(\"xlink:href\",t),n},n.offset=function(t){return e=e.attr(\"offset\",t),n},n.stopColor=function(t){return e=e.attr(\"stop-color\",t),n},n.path=function(){return e=e.append(\"path\"),n},n.d=function(t){return e=e.attr(\"d\",t),n},n},this.viz=u}();\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  demo12.js */\nvar data=[[\"Alstroemeria aurea\",\"Allograpta.Toxomerus\",1,1],\n[\"Aristotelia chilensis\",\"Allograpta.Toxomerus\",0,0],\n[\"Berberis darwinii\",\"Allograpta.Toxomerus\",0,0],\n[\"Calceolaria crenatiflora\",\"Allograpta.Toxomerus\",1,0],\n[\"Cynanchum diemii\",\"Allograpta.Toxomerus\",0,0],\n[\"Mutisia decurrens\",\"Allograpta.Toxomerus\",0,0],\n[\"Ribes magellanicum\",\"Allograpta.Toxomerus\",3,0],\n[\"Rosa eglanteria\",\"Allograpta.Toxomerus\",2,0],\n[\"Schinus patagonicus\",\"Allograpta.Toxomerus\",0,5],\n[\"Tristerix corymbosus\",\"Allograpta.Toxomerus\",0,0],\n[\"Vicia nigricans\",\"Allograpta.Toxomerus\",0,0],\n[\"Alstroemeria aurea\",\"Bombus dahlbomii\",154,147],\n[\"Aristotelia chilensis\",\"Bombus dahlbomii\",0,0],\n[\"Berberis darwinii\",\"Bombus dahlbomii\",67,0],\n[\"Calceolaria crenatiflora\",\"Bombus dahlbomii\",0,0],\n[\"Cynanchum diemii\",\"Bombus dahlbomii\",0,0],\n[\"Mutisia decurrens\",\"Bombus dahlbomii\",0,0],\n[\"Ribes magellanicum\",\"Bombus dahlbomii\",0,0],\n[\"Rosa eglanteria\",\"Bombus dahlbomii\",0,0],\n[\"Schinus patagonicus\",\"Bombus dahlbomii\",0,0],\n[\"Tristerix corymbosus\",\"Bombus dahlbomii\",0,0],\n[\"Vicia nigricans\",\"Bombus dahlbomii\",0,37],\n[\"Alstroemeria aurea\",\"Bombus ruderatus\",0,7],\n[\"Aristotelia chilensis\",\"Bombus ruderatus\",0,0],\n[\"Berberis darwinii\",\"Bombus ruderatus\",0,0],\n[\"Calceolaria crenatiflora\",\"Bombus ruderatus\",0,0],\n[\"Cynanchum diemii\",\"Bombus ruderatus\",0,0],\n[\"Mutisia decurrens\",\"Bombus ruderatus\",0,0],\n[\"Ribes magellanicum\",\"Bombus ruderatus\",0,0],\n[\"Rosa eglanteria\",\"Bombus ruderatus\",0,0],\n[\"Schinus patagonicus\",\"Bombus ruderatus\",0,0],\n[\"Tristerix corymbosus\",\"Bombus ruderatus\",0,0],\n[\"Vicia nigricans\",\"Bombus ruderatus\",0,0],\n[\"Alstroemeria aurea\",\"Braconidae2\",0,0],\n[\"Aristotelia chilensis\",\"Braconidae2\",1,0],\n[\"Berberis darwinii\",\"Braconidae2\",0,0],\n[\"Calceolaria crenatiflora\",\"Braconidae2\",0,0],\n[\"Cynanchum diemii\",\"Braconidae2\",0,0],\n[\"Mutisia decurrens\",\"Braconidae2\",0,0],\n[\"Ribes magellanicum\",\"Braconidae2\",0,0],\n[\"Rosa eglanteria\",\"Braconidae2\",0,0],\n[\"Schinus patagonicus\",\"Braconidae2\",0,0],\n[\"Tristerix corymbosus\",\"Braconidae2\",0,0],\n[\"Vicia nigricans\",\"Braconidae2\",0,0],\n[\"Alstroemeria aurea\",\"Braconidae3\",0,0],\n[\"Aristotelia chilensis\",\"Braconidae3\",0,0],\n[\"Berberis darwinii\",\"Braconidae3\",0,0],\n[\"Calceolaria crenatiflora\",\"Braconidae3\",0,0],\n[\"Cynanchum diemii\",\"Braconidae3\",2,5],\n[\"Mutisia decurrens\",\"Braconidae3\",0,0],\n[\"Ribes magellanicum\",\"Braconidae3\",0,0],\n[\"Rosa eglanteria\",\"Braconidae3\",0,0],\n[\"Schinus patagonicus\",\"Braconidae3\",0,0],\n[\"Tristerix corymbosus\",\"Braconidae3\",0,0],\n[\"Vicia nigricans\",\"Braconidae3\",0,0],\n[\"Alstroemeria aurea\",\"Chalepogenus caeruleus\",0,0],\n[\"Aristotelia chilensis\",\"Chalepogenus caeruleus\",0,0],\n[\"Berberis darwinii\",\"Chalepogenus caeruleus\",0,0],\n[\"Calceolaria crenatiflora\",\"Chalepogenus caeruleus\",3,0],\n[\"Cynanchum diemii\",\"Chalepogenus caeruleus\",0,0],\n[\"Mutisia decurrens\",\"Chalepogenus caeruleus\",0,0],\n[\"Ribes magellanicum\",\"Chalepogenus caeruleus\",0,0],\n[\"Rosa eglanteria\",\"Chalepogenus caeruleus\",0,0],\n[\"Schinus patagonicus\",\"Chalepogenus caeruleus\",0,0],\n[\"Tristerix corymbosus\",\"Chalepogenus caeruleus\",0,0],\n[\"Vicia nigricans\",\"Chalepogenus caeruleus\",0,0],\n[\"Alstroemeria aurea\",\"Coleoptera9\",0,0],\n[\"Aristotelia chilensis\",\"Coleoptera9\",0,0],\n[\"Berberis darwinii\",\"Coleoptera9\",0,0],\n[\"Calceolaria crenatiflora\",\"Coleoptera9\",0,0],\n[\"Cynanchum diemii\",\"Coleoptera9\",0,1],\n[\"Mutisia decurrens\",\"Coleoptera9\",0,0],\n[\"Ribes magellanicum\",\"Coleoptera9\",0,0],\n[\"Rosa eglanteria\",\"Coleoptera9\",0,0],\n[\"Schinus patagonicus\",\"Coleoptera9\",0,0],\n[\"Tristerix corymbosus\",\"Coleoptera9\",0,0],\n[\"Vicia nigricans\",\"Coleoptera9\",0,0],\n[\"Alstroemeria aurea\",\"Corynura prothysteres\",3,0],\n[\"Aristotelia chilensis\",\"Corynura prothysteres\",1,0],\n[\"Berberis darwinii\",\"Corynura prothysteres\",0,0],\n[\"Calceolaria crenatiflora\",\"Corynura prothysteres\",0,0],\n[\"Cynanchum diemii\",\"Corynura prothysteres\",0,0],\n[\"Mutisia decurrens\",\"Corynura prothysteres\",0,0],\n[\"Ribes magellanicum\",\"Corynura prothysteres\",0,0],\n[\"Rosa eglanteria\",\"Corynura prothysteres\",0,0],\n[\"Schinus patagonicus\",\"Corynura prothysteres\",0,0],\n[\"Tristerix corymbosus\",\"Corynura prothysteres\",0,0],\n[\"Vicia nigricans\",\"Corynura prothysteres\",0,0],\n[\"Alstroemeria aurea\",\"Diptera3\",0,1],\n[\"Aristotelia chilensis\",\"Diptera3\",0,0],\n[\"Berberis darwinii\",\"Diptera3\",0,0],\n[\"Calceolaria crenatiflora\",\"Diptera3\",0,0],\n[\"Cynanchum diemii\",\"Diptera3\",0,0],\n[\"Mutisia decurrens\",\"Diptera3\",0,0],\n[\"Ribes magellanicum\",\"Diptera3\",0,0],\n[\"Rosa eglanteria\",\"Diptera3\",0,0],\n[\"Schinus patagonicus\",\"Diptera3\",0,0],\n[\"Tristerix corymbosus\",\"Diptera3\",0,0],\n[\"Vicia nigricans\",\"Diptera3\",0,0],\n[\"Alstroemeria aurea\",\"Diptera5\",0,1],\n[\"Aristotelia chilensis\",\"Diptera5\",0,0],\n[\"Berberis darwinii\",\"Diptera5\",0,0],\n[\"Calceolaria crenatiflora\",\"Diptera5\",0,0],\n[\"Cynanchum diemii\",\"Diptera5\",0,0],\n[\"Mutisia decurrens\",\"Diptera5\",0,0],\n[\"Ribes magellanicum\",\"Diptera5\",0,0],\n[\"Rosa eglanteria\",\"Diptera5\",0,0],\n[\"Schinus patagonicus\",\"Diptera5\",0,0],\n[\"Tristerix corymbosus\",\"Diptera5\",0,0],\n[\"Vicia nigricans\",\"Diptera5\",0,0],\n[\"Alstroemeria aurea\",\"Formicidae3\",0,0],\n[\"Aristotelia chilensis\",\"Formicidae3\",0,0],\n[\"Berberis darwinii\",\"Formicidae3\",0,0],\n[\"Calceolaria crenatiflora\",\"Formicidae3\",0,0],\n[\"Cynanchum diemii\",\"Formicidae3\",8,0],\n[\"Mutisia decurrens\",\"Formicidae3\",0,0],\n[\"Ribes magellanicum\",\"Formicidae3\",0,0],\n[\"Rosa eglanteria\",\"Formicidae3\",0,0],\n[\"Schinus patagonicus\",\"Formicidae3\",0,0],\n[\"Tristerix corymbosus\",\"Formicidae3\",0,0],\n[\"Vicia nigricans\",\"Formicidae3\",0,0],\n[\"Alstroemeria aurea\",\"Ichneumonidae2\",4,0],\n[\"Aristotelia chilensis\",\"Ichneumonidae2\",0,0],\n[\"Berberis darwinii\",\"Ichneumonidae2\",0,0],\n[\"Calceolaria crenatiflora\",\"Ichneumonidae2\",0,0],\n[\"Cynanchum diemii\",\"Ichneumonidae2\",0,0],\n[\"Mutisia decurrens\",\"Ichneumonidae2\",0,0],\n[\"Ribes magellanicum\",\"Ichneumonidae2\",0,0],\n[\"Rosa eglanteria\",\"Ichneumonidae2\",0,0],\n[\"Schinus patagonicus\",\"Ichneumonidae2\",0,0],\n[\"Tristerix corymbosus\",\"Ichneumonidae2\",0,0],\n[\"Vicia nigricans\",\"Ichneumonidae2\",0,0],\n[\"Alstroemeria aurea\",\"Ichneumonidae4\",0,0],\n[\"Aristotelia chilensis\",\"Ichneumonidae4\",1,0],\n[\"Berberis darwinii\",\"Ichneumonidae4\",0,0],\n[\"Calceolaria crenatiflora\",\"Ichneumonidae4\",0,0],\n[\"Cynanchum diemii\",\"Ichneumonidae4\",0,0],\n[\"Mutisia decurrens\",\"Ichneumonidae4\",0,0],\n[\"Ribes magellanicum\",\"Ichneumonidae4\",0,0],\n[\"Rosa eglanteria\",\"Ichneumonidae4\",0,0],\n[\"Schinus patagonicus\",\"Ichneumonidae4\",15,0],\n[\"Tristerix corymbosus\",\"Ichneumonidae4\",0,0],\n[\"Vicia nigricans\",\"Ichneumonidae4\",0,0],\n[\"Alstroemeria aurea\",\"Ichneumonidae7\",0,0],\n[\"Aristotelia chilensis\",\"Ichneumonidae7\",0,0],\n[\"Berberis darwinii\",\"Ichneumonidae7\",0,0],\n[\"Calceolaria crenatiflora\",\"Ichneumonidae7\",0,0],\n[\"Cynanchum diemii\",\"Ichneumonidae7\",0,1],\n[\"Mutisia decurrens\",\"Ichneumonidae7\",0,0],\n[\"Ribes magellanicum\",\"Ichneumonidae7\",0,0],\n[\"Rosa eglanteria\",\"Ichneumonidae7\",0,0],\n[\"Schinus patagonicus\",\"Ichneumonidae7\",0,0],\n[\"Tristerix corymbosus\",\"Ichneumonidae7\",0,0],\n[\"Vicia nigricans\",\"Ichneumonidae7\",0,0],\n[\"Alstroemeria aurea\",\"Manuelia gayi\",7,0],\n[\"Aristotelia chilensis\",\"Manuelia gayi\",0,0],\n[\"Berberis darwinii\",\"Manuelia gayi\",0,0],\n[\"Calceolaria crenatiflora\",\"Manuelia gayi\",0,0],\n[\"Cynanchum diemii\",\"Manuelia gayi\",0,0],\n[\"Mutisia decurrens\",\"Manuelia gayi\",0,0],\n[\"Ribes magellanicum\",\"Manuelia gayi\",0,0],\n[\"Rosa eglanteria\",\"Manuelia gayi\",0,0],\n[\"Schinus patagonicus\",\"Manuelia gayi\",0,0],\n[\"Tristerix corymbosus\",\"Manuelia gayi\",0,0],\n[\"Vicia nigricans\",\"Manuelia gayi\",0,0],\n[\"Alstroemeria aurea\",\"Manuelia postica\",0,2],\n[\"Aristotelia chilensis\",\"Manuelia postica\",0,0],\n[\"Berberis darwinii\",\"Manuelia postica\",0,0],\n[\"Calceolaria crenatiflora\",\"Manuelia postica\",0,0],\n[\"Cynanchum diemii\",\"Manuelia postica\",0,0],\n[\"Mutisia decurrens\",\"Manuelia postica\",0,0],\n[\"Ribes magellanicum\",\"Manuelia postica\",0,0],\n[\"Rosa eglanteria\",\"Manuelia postica\",0,0],\n[\"Schinus patagonicus\",\"Manuelia postica\",0,10],\n[\"Tristerix corymbosus\",\"Manuelia postica\",0,2],\n[\"Vicia nigricans\",\"Manuelia postica\",0,0],\n[\"Alstroemeria aurea\",\"Megachile1\",0,6],\n[\"Aristotelia chilensis\",\"Megachile1\",0,0],\n[\"Berberis darwinii\",\"Megachile1\",0,0],\n[\"Calceolaria crenatiflora\",\"Megachile1\",0,0],\n[\"Cynanchum diemii\",\"Megachile1\",0,0],\n[\"Mutisia decurrens\",\"Megachile1\",0,0],\n[\"Ribes magellanicum\",\"Megachile1\",0,0],\n[\"Rosa eglanteria\",\"Megachile1\",0,0],\n[\"Schinus patagonicus\",\"Megachile1\",0,0],\n[\"Tristerix corymbosus\",\"Megachile1\",0,0],\n[\"Vicia nigricans\",\"Megachile1\",0,0],\n[\"Alstroemeria aurea\",\"Megachile2\",0,12],\n[\"Aristotelia chilensis\",\"Megachile2\",0,0],\n[\"Berberis darwinii\",\"Megachile2\",0,0],\n[\"Calceolaria crenatiflora\",\"Megachile2\",0,0],\n[\"Cynanchum diemii\",\"Megachile2\",0,0],\n[\"Mutisia decurrens\",\"Megachile2\",0,0],\n[\"Ribes magellanicum\",\"Megachile2\",0,0],\n[\"Rosa eglanteria\",\"Megachile2\",0,0],\n[\"Schinus patagonicus\",\"Megachile2\",0,0],\n[\"Tristerix corymbosus\",\"Megachile2\",0,0],\n[\"Vicia nigricans\",\"Megachile2\",0,0],\n[\"Alstroemeria aurea\",\"Nitidulidae\",0,0],\n[\"Aristotelia chilensis\",\"Nitidulidae\",0,0],\n[\"Berberis darwinii\",\"Nitidulidae\",0,0],\n[\"Calceolaria crenatiflora\",\"Nitidulidae\",0,0],\n[\"Cynanchum diemii\",\"Nitidulidae\",1,7],\n[\"Mutisia decurrens\",\"Nitidulidae\",0,0],\n[\"Ribes magellanicum\",\"Nitidulidae\",0,4],\n[\"Rosa eglanteria\",\"Nitidulidae\",0,0],\n[\"Schinus patagonicus\",\"Nitidulidae\",0,0],\n[\"Tristerix corymbosus\",\"Nitidulidae\",0,0],\n[\"Vicia nigricans\",\"Nitidulidae\",0,0],\n[\"Alstroemeria aurea\",\"Phthiria\",8,3],\n[\"Aristotelia chilensis\",\"Phthiria\",0,0],\n[\"Berberis darwinii\",\"Phthiria\",0,0],\n[\"Calceolaria crenatiflora\",\"Phthiria\",0,0],\n[\"Cynanchum diemii\",\"Phthiria\",0,0],\n[\"Mutisia decurrens\",\"Phthiria\",1,0],\n[\"Ribes magellanicum\",\"Phthiria\",0,0],\n[\"Rosa eglanteria\",\"Phthiria\",0,0],\n[\"Schinus patagonicus\",\"Phthiria\",0,0],\n[\"Tristerix corymbosus\",\"Phthiria\",0,0],\n[\"Vicia nigricans\",\"Phthiria\",0,0],\n[\"Alstroemeria aurea\",\"Phthiria1\",1,1],\n[\"Aristotelia chilensis\",\"Phthiria1\",0,0],\n[\"Berberis darwinii\",\"Phthiria1\",0,0],\n[\"Calceolaria crenatiflora\",\"Phthiria1\",0,0],\n[\"Cynanchum diemii\",\"Phthiria1\",0,0],\n[\"Mutisia decurrens\",\"Phthiria1\",0,0],\n[\"Ribes magellanicum\",\"Phthiria1\",0,0],\n[\"Rosa eglanteria\",\"Phthiria1\",0,0],\n[\"Schinus patagonicus\",\"Phthiria1\",0,0],\n[\"Tristerix corymbosus\",\"Phthiria1\",0,0],\n[\"Vicia nigricans\",\"Phthiria1\",0,0],\n[\"Alstroemeria aurea\",\"Platycheirus1\",1,0],\n[\"Aristotelia chilensis\",\"Platycheirus1\",4,0],\n[\"Berberis darwinii\",\"Platycheirus1\",0,0],\n[\"Calceolaria crenatiflora\",\"Platycheirus1\",0,0],\n[\"Cynanchum diemii\",\"Platycheirus1\",0,0],\n[\"Mutisia decurrens\",\"Platycheirus1\",0,0],\n[\"Ribes magellanicum\",\"Platycheirus1\",0,0],\n[\"Rosa eglanteria\",\"Platycheirus1\",0,0],\n[\"Schinus patagonicus\",\"Platycheirus1\",0,0],\n[\"Tristerix corymbosus\",\"Platycheirus1\",0,0],\n[\"Vicia nigricans\",\"Platycheirus1\",0,0],\n[\"Alstroemeria aurea\",\"Policana albopilosa\",0,0],\n[\"Aristotelia chilensis\",\"Policana albopilosa\",673,89],\n[\"Berberis darwinii\",\"Policana albopilosa\",0,0],\n[\"Calceolaria crenatiflora\",\"Policana albopilosa\",0,0],\n[\"Cynanchum diemii\",\"Policana albopilosa\",0,0],\n[\"Mutisia decurrens\",\"Policana albopilosa\",0,0],\n[\"Ribes magellanicum\",\"Policana albopilosa\",0,0],\n[\"Rosa eglanteria\",\"Policana albopilosa\",0,0],\n[\"Schinus patagonicus\",\"Policana albopilosa\",0,404],\n[\"Tristerix corymbosus\",\"Policana albopilosa\",0,0],\n[\"Vicia nigricans\",\"Policana albopilosa\",0,0],\n[\"Alstroemeria aurea\",\"Ruizantheda mutabilis\",0,0],\n[\"Aristotelia chilensis\",\"Ruizantheda mutabilis\",110,0],\n[\"Berberis darwinii\",\"Ruizantheda mutabilis\",0,0],\n[\"Calceolaria crenatiflora\",\"Ruizantheda mutabilis\",0,0],\n[\"Cynanchum diemii\",\"Ruizantheda mutabilis\",0,0],\n[\"Mutisia decurrens\",\"Ruizantheda mutabilis\",0,0],\n[\"Ribes magellanicum\",\"Ruizantheda mutabilis\",0,0],\n[\"Rosa eglanteria\",\"Ruizantheda mutabilis\",6,0],\n[\"Schinus patagonicus\",\"Ruizantheda mutabilis\",0,0],\n[\"Tristerix corymbosus\",\"Ruizantheda mutabilis\",0,0],\n[\"Vicia nigricans\",\"Ruizantheda mutabilis\",0,0],\n[\"Alstroemeria aurea\",\"Ruizantheda nigrocaerulea\",0,1],\n[\"Aristotelia chilensis\",\"Ruizantheda nigrocaerulea\",0,0],\n[\"Berberis darwinii\",\"Ruizantheda nigrocaerulea\",0,0],\n[\"Calceolaria crenatiflora\",\"Ruizantheda nigrocaerulea\",0,0],\n[\"Cynanchum diemii\",\"Ruizantheda nigrocaerulea\",0,0],\n[\"Mutisia decurrens\",\"Ruizantheda nigrocaerulea\",0,0],\n[\"Ribes magellanicum\",\"Ruizantheda nigrocaerulea\",0,0],\n[\"Rosa eglanteria\",\"Ruizantheda nigrocaerulea\",0,0],\n[\"Schinus patagonicus\",\"Ruizantheda nigrocaerulea\",0,0],\n[\"Tristerix corymbosus\",\"Ruizantheda nigrocaerulea\",0,0],\n[\"Vicia nigricans\",\"Ruizantheda nigrocaerulea\",0,0],\n[\"Alstroemeria aurea\",\"Ruizantheda proxima\",4,0],\n[\"Aristotelia chilensis\",\"Ruizantheda proxima\",0,0],\n[\"Berberis darwinii\",\"Ruizantheda proxima\",0,0],\n[\"Calceolaria crenatiflora\",\"Ruizantheda proxima\",0,0],\n[\"Cynanchum diemii\",\"Ruizantheda proxima\",0,0],\n[\"Mutisia decurrens\",\"Ruizantheda proxima\",0,0],\n[\"Ribes magellanicum\",\"Ruizantheda proxima\",0,0],\n[\"Rosa eglanteria\",\"Ruizantheda proxima\",0,0],\n[\"Schinus patagonicus\",\"Ruizantheda proxima\",0,0],\n[\"Tristerix corymbosus\",\"Ruizantheda proxima\",0,0],\n[\"Vicia nigricans\",\"Ruizantheda proxima\",0,0],\n[\"Alstroemeria aurea\",\"Salpingidae\",0,0],\n[\"Aristotelia chilensis\",\"Salpingidae\",0,0],\n[\"Berberis darwinii\",\"Salpingidae\",0,0],\n[\"Calceolaria crenatiflora\",\"Salpingidae\",0,0],\n[\"Cynanchum diemii\",\"Salpingidae\",0,1],\n[\"Mutisia decurrens\",\"Salpingidae\",0,0],\n[\"Ribes magellanicum\",\"Salpingidae\",0,0],\n[\"Rosa eglanteria\",\"Salpingidae\",0,0],\n[\"Schinus patagonicus\",\"Salpingidae\",0,0],\n[\"Tristerix corymbosus\",\"Salpingidae\",0,0],\n[\"Vicia nigricans\",\"Salpingidae\",0,0],\n[\"Alstroemeria aurea\",\"Sapromyza.Minettia\",1,0],\n[\"Aristotelia chilensis\",\"Sapromyza.Minettia\",0,0],\n[\"Berberis darwinii\",\"Sapromyza.Minettia\",0,0],\n[\"Calceolaria crenatiflora\",\"Sapromyza.Minettia\",0,0],\n[\"Cynanchum diemii\",\"Sapromyza.Minettia\",0,0],\n[\"Mutisia decurrens\",\"Sapromyza.Minettia\",0,0],\n[\"Ribes magellanicum\",\"Sapromyza.Minettia\",0,0],\n[\"Rosa eglanteria\",\"Sapromyza.Minettia\",0,0],\n[\"Schinus patagonicus\",\"Sapromyza.Minettia\",0,0],\n[\"Tristerix corymbosus\",\"Sapromyza.Minettia\",0,0],\n[\"Vicia nigricans\",\"Sapromyza.Minettia\",0,0],\n[\"Alstroemeria aurea\",\"Sephanoides galeritus\",0,1],\n[\"Aristotelia chilensis\",\"Sephanoides galeritus\",0,0],\n[\"Berberis darwinii\",\"Sephanoides galeritus\",0,0],\n[\"Calceolaria crenatiflora\",\"Sephanoides galeritus\",0,0],\n[\"Cynanchum diemii\",\"Sephanoides galeritus\",0,0],\n[\"Mutisia decurrens\",\"Sephanoides galeritus\",0,0],\n[\"Ribes magellanicum\",\"Sephanoides galeritus\",0,0],\n[\"Rosa eglanteria\",\"Sephanoides galeritus\",0,0],\n[\"Schinus patagonicus\",\"Sephanoides galeritus\",0,0],\n[\"Tristerix corymbosus\",\"Sephanoides galeritus\",0,1],\n[\"Vicia nigricans\",\"Sephanoides galeritus\",0,0],\n[\"Alstroemeria aurea\",\"Sphecidae\",1,0],\n[\"Aristotelia chilensis\",\"Sphecidae\",0,0],\n[\"Berberis darwinii\",\"Sphecidae\",0,0],\n[\"Calceolaria crenatiflora\",\"Sphecidae\",0,0],\n[\"Cynanchum diemii\",\"Sphecidae\",0,0],\n[\"Mutisia decurrens\",\"Sphecidae\",0,0],\n[\"Ribes magellanicum\",\"Sphecidae\",0,0],\n[\"Rosa eglanteria\",\"Sphecidae\",0,0],\n[\"Schinus patagonicus\",\"Sphecidae\",0,0],\n[\"Tristerix corymbosus\",\"Sphecidae\",0,0],\n[\"Vicia nigricans\",\"Sphecidae\",0,0],\n[\"Alstroemeria aurea\",\"Staphilinidae\",4,0],\n[\"Aristotelia chilensis\",\"Staphilinidae\",0,0],\n[\"Berberis darwinii\",\"Staphilinidae\",0,0],\n[\"Calceolaria crenatiflora\",\"Staphilinidae\",0,0],\n[\"Cynanchum diemii\",\"Staphilinidae\",0,0],\n[\"Mutisia decurrens\",\"Staphilinidae\",0,0],\n[\"Ribes magellanicum\",\"Staphilinidae\",0,0],\n[\"Rosa eglanteria\",\"Staphilinidae\",3,0],\n[\"Schinus patagonicus\",\"Staphilinidae\",0,0],\n[\"Tristerix corymbosus\",\"Staphilinidae\",0,0],\n[\"Vicia nigricans\",\"Staphilinidae\",0,0],\n[\"Alstroemeria aurea\",\"Svastrides melanura\",6,1],\n[\"Aristotelia chilensis\",\"Svastrides melanura\",0,0],\n[\"Berberis darwinii\",\"Svastrides melanura\",0,0],\n[\"Calceolaria crenatiflora\",\"Svastrides melanura\",0,0],\n[\"Cynanchum diemii\",\"Svastrides melanura\",0,0],\n[\"Mutisia decurrens\",\"Svastrides melanura\",0,0],\n[\"Ribes magellanicum\",\"Svastrides melanura\",0,0],\n[\"Rosa eglanteria\",\"Svastrides melanura\",0,0],\n[\"Schinus patagonicus\",\"Svastrides melanura\",0,0],\n[\"Tristerix corymbosus\",\"Svastrides melanura\",0,0],\n[\"Vicia nigricans\",\"Svastrides melanura\",0,0],\n[\"Alstroemeria aurea\",\"Syrphus octomaculatus\",5,4],\n[\"Aristotelia chilensis\",\"Syrphus octomaculatus\",0,0],\n[\"Berberis darwinii\",\"Syrphus octomaculatus\",5,0],\n[\"Calceolaria crenatiflora\",\"Syrphus octomaculatus\",0,0],\n[\"Cynanchum diemii\",\"Syrphus octomaculatus\",0,0],\n[\"Mutisia decurrens\",\"Syrphus octomaculatus\",0,0],\n[\"Ribes magellanicum\",\"Syrphus octomaculatus\",0,0],\n[\"Rosa eglanteria\",\"Syrphus octomaculatus\",4,0],\n[\"Schinus patagonicus\",\"Syrphus octomaculatus\",0,0],\n[\"Tristerix corymbosus\",\"Syrphus octomaculatus\",0,0],\n[\"Vicia nigricans\",\"Syrphus octomaculatus\",0,0],\n[\"Alstroemeria aurea\",\"Thomisidae\",1,0],\n[\"Aristotelia chilensis\",\"Thomisidae\",0,0],\n[\"Berberis darwinii\",\"Thomisidae\",0,0],\n[\"Calceolaria crenatiflora\",\"Thomisidae\",0,0],\n[\"Cynanchum diemii\",\"Thomisidae\",0,0],\n[\"Mutisia decurrens\",\"Thomisidae\",0,0],\n[\"Ribes magellanicum\",\"Thomisidae\",0,0],\n[\"Rosa eglanteria\",\"Thomisidae\",0,0],\n[\"Schinus patagonicus\",\"Thomisidae\",0,0],\n[\"Tristerix corymbosus\",\"Thomisidae\",0,0],\n[\"Vicia nigricans\",\"Thomisidae\",0,0],\n[\"Alstroemeria aurea\",\"Torymidae2\",0,0],\n[\"Aristotelia chilensis\",\"Torymidae2\",0,0],\n[\"Berberis darwinii\",\"Torymidae2\",0,0],\n[\"Calceolaria crenatiflora\",\"Torymidae2\",0,0],\n[\"Cynanchum diemii\",\"Torymidae2\",9,1],\n[\"Mutisia decurrens\",\"Torymidae2\",0,0],\n[\"Ribes magellanicum\",\"Torymidae2\",0,0],\n[\"Rosa eglanteria\",\"Torymidae2\",0,0],\n[\"Schinus patagonicus\",\"Torymidae2\",0,0],\n[\"Tristerix corymbosus\",\"Torymidae2\",0,0],\n[\"Vicia nigricans\",\"Torymidae2\",0,0],\n[\"Alstroemeria aurea\",\"Trichophthalma amoena\",0,0],\n[\"Aristotelia chilensis\",\"Trichophthalma amoena\",0,0],\n[\"Berberis darwinii\",\"Trichophthalma amoena\",0,0],\n[\"Calceolaria crenatiflora\",\"Trichophthalma amoena\",0,0],\n[\"Cynanchum diemii\",\"Trichophthalma amoena\",0,0],\n[\"Mutisia decurrens\",\"Trichophthalma amoena\",0,0],\n[\"Ribes magellanicum\",\"Trichophthalma amoena\",2,0],\n[\"Rosa eglanteria\",\"Trichophthalma amoena\",0,0],\n[\"Schinus patagonicus\",\"Trichophthalma amoena\",0,3],\n[\"Tristerix corymbosus\",\"Trichophthalma amoena\",0,0],\n[\"Vicia nigricans\",\"Trichophthalma amoena\",0,0],\n[\"Alstroemeria aurea\",\"Trichophthalma jaffueli\",3,1],\n[\"Aristotelia chilensis\",\"Trichophthalma jaffueli\",0,0],\n[\"Berberis darwinii\",\"Trichophthalma jaffueli\",0,0],\n[\"Calceolaria crenatiflora\",\"Trichophthalma jaffueli\",0,0],\n[\"Cynanchum diemii\",\"Trichophthalma jaffueli\",0,0],\n[\"Mutisia decurrens\",\"Trichophthalma jaffueli\",0,0],\n[\"Ribes magellanicum\",\"Trichophthalma jaffueli\",0,0],\n[\"Rosa eglanteria\",\"Trichophthalma jaffueli\",0,0],\n[\"Schinus patagonicus\",\"Trichophthalma jaffueli\",0,0],\n[\"Tristerix corymbosus\",\"Trichophthalma jaffueli\",0,0],\n[\"Vicia nigricans\",\"Trichophthalma jaffueli\",0,0],\n[\"Alstroemeria aurea\",\"Vespula germanica\",4,1],\n[\"Aristotelia chilensis\",\"Vespula germanica\",0,0],\n[\"Berberis darwinii\",\"Vespula germanica\",0,0],\n[\"Calceolaria crenatiflora\",\"Vespula germanica\",0,0],\n[\"Cynanchum diemii\",\"Vespula germanica\",0,0],\n[\"Mutisia decurrens\",\"Vespula germanica\",0,0],\n[\"Ribes magellanicum\",\"Vespula germanica\",0,0],\n[\"Rosa eglanteria\",\"Vespula germanica\",0,0],\n[\"Schinus patagonicus\",\"Vespula germanica\",0,0],\n[\"Tristerix corymbosus\",\"Vespula germanica\",0,0],\n[\"Vicia nigricans\",\"Vespula germanica\",0,0]]\n\n\n\n function sort(sortOrder){\n                    return function(a,b){ return d3.ascending(sortOrder.indexOf(a),sortOrder.indexOf(b)) }\n                  }\nvar color = {'Unlinked':'#3366CC','Allograpta.Toxomerus':'rgb(56,43,61)','Bombus dahlbomii':'rgb(56,43,61)','Bombus ruderatus':'rgb(56,43,61)','Braconidae2':'rgb(56,43,61)','Braconidae3':'rgb(56,43,61)','Chalepogenus caeruleus':'rgb(56,43,61)','Coleoptera9':'rgb(56,43,61)','Corynura prothysteres':'rgb(56,43,61)','Diptera3':'rgb(56,43,61)','Diptera5':'rgb(56,43,61)','Formicidae3':'rgb(56,43,61)','Ichneumonidae2':'rgb(56,43,61)','Ichneumonidae4':'rgb(56,43,61)','Ichneumonidae7':'rgb(56,43,61)','Manuelia gayi':'rgb(56,43,61)','Manuelia postica':'rgb(56,43,61)','Megachile1':'rgb(56,43,61)','Megachile2':'rgb(56,43,61)','Nitidulidae':'rgb(56,43,61)','Phthiria':'rgb(56,43,61)','Phthiria1':'rgb(56,43,61)','Platycheirus1':'rgb(56,43,61)','Policana albopilosa':'rgb(56,43,61)','Ruizantheda mutabilis':'rgb(56,43,61)','Ruizantheda nigrocaerulea':'rgb(56,43,61)','Ruizantheda proxima':'rgb(56,43,61)','Salpingidae':'rgb(56,43,61)','Sapromyza.Minettia':'rgb(56,43,61)','Sephanoides galeritus':'rgb(56,43,61)','Sphecidae':'rgb(56,43,61)','Staphilinidae':'rgb(56,43,61)','Svastrides melanura':'rgb(56,43,61)','Syrphus octomaculatus':'rgb(56,43,61)','Thomisidae':'rgb(56,43,61)','Torymidae2':'rgb(56,43,61)','Trichophthalma amoena':'rgb(56,43,61)','Trichophthalma jaffueli':'rgb(56,43,61)','Vespula germanica':'rgb(56,43,61)'};\n\n\n\n\nvar g1 = svg.append(\"g\").attr(\"transform\",\"translate(317,50)\");\n                         var bp1=viz.bP()\n                         .data(data)\n                         .value(d=>d[2])\n                         .min(10)\n                         .pad(1)\n                         .height(400)\n                         .width(200)\n                         .barSize(35)\n                         .fill(d=>color[d.secondary])\n.orient(\"vertical\");\n\ng1.call(bp1);g1.append(\"text\")\n                        .attr(\"x\",-50).attr(\"y\",-8)\n                        .style(\"text-anchor\",\"middle\")\n                        .text(\"Primary\");\n                        g1.append(\"text\")\n                        .attr(\"x\", 250)\n                        .attr(\"y\",-8).style(\"text-anchor\",\"middle\")\n                        .text(\"Secondary\");\n                        g1.append(\"text\")\n                        .attr(\"x\",100).attr(\"y\",-25)\n                        .style(\"text-anchor\",\"middle\")\n                        .attr(\"class\",\"header\")\n                        .text(\"Safariland\");\n\n g1.selectAll(\".mainBars\")\n                        .on(\"mouseover\",mouseover)\n                        .on(\"mouseout\",mouseout);\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"label\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -48.8:50))\n                        .attr(\"y\",d=>+6)\n                        .text(d=>d.key)\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\"));\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"perc\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -249:270))\n                        .attr(\"y\",d=>+6)\n                        .text(function(d){ return d3.format(\"0.0%\")(d.percent)})\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\")); \n\n\nvar g2 = svg.append(\"g\").attr(\"transform\",\"translate(858,50)\");\n                         var bp2=viz.bP()\n                         .data(data)\n                         .value(d=>d[3])\n                         .min(10)\n                         .pad(1)\n                         .height(400)\n                         .width(200)\n                         .barSize(35)\n                         .fill(d=>color[d.secondary])\n.orient(\"vertical\");\n\ng2.call(bp2);g2.append(\"text\")\n                        .attr(\"x\",-50).attr(\"y\",-8)\n                        .style(\"text-anchor\",\"middle\")\n                        .text(\"Primary\");\n                        g2.append(\"text\")\n                        .attr(\"x\", 250)\n                        .attr(\"y\",-8).style(\"text-anchor\",\"middle\")\n                        .text(\"Secondary\");\n                        g2.append(\"text\")\n                        .attr(\"x\",100).attr(\"y\",-25)\n                        .style(\"text-anchor\",\"middle\")\n                        .attr(\"class\",\"header\")\n                        .text(\"vazquenc\");\n\n g2.selectAll(\".mainBars\")\n                        .on(\"mouseover\",mouseover)\n                        .on(\"mouseout\",mouseout);\n\n g2.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"label\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -48.8:50))\n                        .attr(\"y\",d=>+6)\n                        .text(d=>d.key)\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\"));\n\n g2.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"perc\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -249:270))\n                        .attr(\"y\",d=>+6)\n                        .text(function(d){ return d3.format(\"0.0%\")(d.percent)})\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\")); \n\nfunction mouseover(d){\nbp1.mouseover(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\nbp2.mouseover(d);\n                            g2.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\n}\n\n                     function mouseout(d){\nbp1.mouseout(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\nbp2.mouseout(d);\n                            g2.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.0%\")(d.percent)});\n}\n\n\n};","style":"/* R2D3 Source File:  demo12.css */\n .mainBars{\n    shape-rendering: auto;\n    fill-opacity: 1;\n    stroke-width: 0.5px;\n    stroke: rgb(0, 0, 0);\n    stroke-opacity: 0;\n  }\n    .subBars{\n    shape-rendering:crispEdges;\n    }\n    .edges{\n    stroke:none;\n    fill-opacity:0.3;\n    }\n    .label{\n    color:#000000;\n    }","version":5,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Adjusting Sizes to fit a complex figure:</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="fu">bipartite_D3</span>(<span class="at">data =</span> data2,</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">mp=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>),</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">MainFigSize =</span> <span class="fu">c</span>(<span class="dv">800</span>, <span class="dv">1500</span>), </span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">IndivFigSize =</span> <span class="fu">c</span>(<span class="dv">200</span>, <span class="dv">600</span>),</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">BoxLabPos =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">20</span>),</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">PercPos =</span> <span class="fu">c</span>(<span class="dv">200</span>,<span class="dv">200</span>),</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">BarSize =</span> <span class="dv">20</span>,</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">MinWidth =</span> <span class="dv">5</span>,</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">Pad=</span><span class="dv">5</span>,</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">PercentageDecimals =</span> <span class="dv">2</span>,</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">filename =</span> <span class="st">&#39;demo13&#39;</span>)</span></code></pre></div>
<div id="htmlwidget-a896977590c206ef1a61" style="width:800px;height:1500px;" class="r2d3 html-widget"></div>
<script type="application/json" data-for="htmlwidget-a896977590c206ef1a61">{"x":{"data":null,"type":"logical","container":"svg","options":null,"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n/* R2D3 Source File:  vizjs.js */\n!function(){function t(t){for(;t>o;)t-=o;for(;0>t;)t+=o;return t}function n(t,n,e,r,a,i){if(0>=a||0>=r)return 0;var u=t.concat().sort(d3.ascending),o=r-u.length*n+(i?n:0),s=[],c=0,d=0;return d3.range(u.length).forEach(function(t){d=(o-e*t)/(a-=u[t-1]||0),c+=u[t]*d<=e?1:0,s.push(d)}),s[c]}function e(t,e,r,a,i){var u=a,o=d3.sum(t),s=n(t,e,r,i-a,o,!1),c=t.map(function(t){var n=s*t,a=(r>n?r:n)/2;return u+=2*a+e,{c:u-a,v:n,w:a,value:t,percent:t/(o||1)}});return c}function r(t){function n(t,n){return[t*Math.cos(n),t*Math.sin(n)]}var e=n(t[0],t[2]),r=n(t[0],t[3]),a=n(t[1],t[2]),i=n(t[1],t[3]);return[\"M\",e,\"A\",t[0],t[0],\"0\",t[3]-t[2]>s?1:0,\"1\",r,\"L\",i,\"A\",t[1],t[1],\"0\",t[3]-t[2]>s?1:0,\"0\",a,\"z\"].join(\" \")}function a(t,n,e,r,a,i){function u(t,n,e){return\"A\"+t+\",\"+t+\" 0 \"+ +(e>s)+\",1 \"+n}function c(t,n){return[t*Math.cos(n),t*Math.sin(n)]}function d(t,n,e,r){e+=n>e?o:0;var a=e-n,i=1-(a>s?o-a:a)/s;i=Math.pow(i,5);var u=(e+n)/2-(e-n>s?s:0);return\"Q\"+i*r*Math.cos(u)+\",\"+i*r*Math.sin(u)+\" \"+t}var f=c(t,n),l=c(t,e),g=c(r,a),p=c(r,i);return\"M\"+f+u(t,l,e-n)+(n==a&&e==i?d(f,n,e,r):d(g,e,a,r)+u(r,p,i-a)+d(f,n,i,t))+\"Z\"}function i(t,n){ret=[];for(var e=n;e>n-t;e--)ret.push(0>e?e+t:e);return ret}var u={version:\"1.1.0\"},o=2*Math.PI,s=Math.PI,c=Math.PI/2;u.bP=function(){function t(i){y=i,i.each(function(){var i=d3.select(this),u=t.bars(),o=i.selectAll(\".subBars\").data(u.subBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"subBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);\"undefined\"!=typeof h&&o.style(\"fill\",function(t){return h(t)});var s=i.selectAll(\".edges\").data(u.edges).enter().append(\"path\").attr(\"class\",\"edges\").attr(\"d\",function(t){return t.path}).style(\"fill-opacity\",t.edgeOpacity());\"undefined\"!=typeof h&&s.style(\"fill\",function(t){return h(t)}),i.selectAll(\".mainBars\").data(u.mainBars).enter().append(\"g\").attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).attr(\"class\",\"mainBars\").append(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a).style(\"fill-opacity\",0).on(\"mouseover\",t.mouseover).on(\"mouseout\",t.mouseout)})}function n(t){return-t.width}function e(t){return-t.height}function r(t){return 2*t.width}function a(t){return 2*t.height}var i,u,o,s,c,d,f,l,g,p,h,y,m,v,A,x,k;return t.data=function(n){return arguments.length?(p=n,t):p},t.fill=function(n){return arguments.length?(h=n,t):h},t.keyPrimary=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:function(t){return t[0]}},t.sortPrimary=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:d3.ascending},t.keySecondary=function(n){return arguments.length?(u=n,t):\"undefined\"!=typeof u?u:function(t){return t[1]}},t.sortSecondary=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:d3.ascending},t.value=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:function(t){return t[2]}},t.width=function(n){return arguments.length?(s=n,t):\"undefined\"!=typeof s?s:400},t.height=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:600},t.barSize=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:35},t.min=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:0},t.orient=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:\"vertical\"},t.pad=function(n){return arguments.length?(g=n,t):\"undefined\"!=typeof g?g:0},t.duration=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:500},t.edgeOpacity=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:.4},t.edgeMode=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:\"curved\"},t.bars=function(n){function e(t,e){return\"undefined\"==typeof n||n.part===e||d[n.part](t)===n.key}function r(){var n=t.min()/2;s.primary.forEach(function(t){t.height<n&&(t.height=n)}),s.secondary.forEach(function(t){t.height<n&&(t.height=n)})}function a(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data()),i=o(a,t.pad(),t.min(),0,\"vertical\"==f?t.height():t.width()),u=t.barSize();a.forEach(function(e,r){s[n].push({x:\"horizontal\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.width()-u/2,y:\"vertical\"==f?(i[r].s+i[r].e)/2:\"primary\"==n?u/2:t.height()-u/2,height:\"vertical\"==f?(i[r].e-i[r].s)/2:u/2,width:\"horizontal\"==f?(i[r].e-i[r].s)/2:u/2,part:n,key:e.key,value:e.value,percent:i[r].p})})}function i(n){function r(r){return e(r,n)?t.value()(r):0}var a=d3.map(s[n],function(t){return t.key}),i=d3.nest().key(\"primary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"primary\"==n?t.sortPrimary():t.sortSecondary()).key(\"secondary\"==n?t.keyPrimary():t.keySecondary()).sortKeys(\"secondary\"==n?t.sortPrimary():t.sortSecondary()).rollup(function(t){return d3.sum(t,r)}).entries(t.data());i.forEach(function(e){var r=a.get(e.key),i=o(e.values,0,0,\"vertical\"==f?r.y-r.height:r.x-r.width,\"vertical\"==f?r.y+r.height:r.x+r.width),u=t.barSize();e.values.forEach(function(a,o){c[n].push({x:\"vertical\"==f?\"primary\"==n?u/2:t.width()-u/2:(i[o].s+i[o].e)/2,y:\"horizontal\"==f?\"primary\"==n?u/2:t.height()-u/2:(i[o].s+i[o].e)/2,height:(\"vertical\"==f?i[o].e-i[o].s:u)/2,width:(\"horizontal\"==f?i[o].e-i[o].s:u)/2,part:n,primary:\"primary\"==n?e.key:a.key,secondary:\"primary\"==n?a.key:e.key,value:a.value,percent:i[o].p*r.percent,index:\"primary\"==n?e.key+\"|\"+a.key:a.key+\"|\"+e.key})})})}function u(){function n(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(t+e)/2,d=(i+o)/2;return[\"M\",t,\",\",n,\"C\",c,\",\",n,\" \",c,\",\",r,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",d,\",\",u,\" \",d,\",\",s,\",\",o,\",\",s,\"z\"].join(\"\")}function e(t,n,e,r,i,u,o,s){if(\"straight\"==a)return[\"M\",t,\",\",n,\"L\",e,\",\",r,\"L\",i,\",\",u,\"L\",o,\",\",s,\"z\"].join(\"\");var c=(n+r)/2,d=(u+s)/2;return[\"M\",t,\",\",n,\"C\",t,\",\",c,\" \",e,\",\",c,\",\",e,\",\",r,\"L\",i,\",\",u,\"C\",i,\",\",d,\" \",o,\",\",d,\",\",o,\",\",s,\"z\"].join(\"\")}var r=d3.map(c.secondary,function(t){return t.index}),a=t.edgeMode();return c.primary.map(function(t){var a=r.get(t.index);return{path:\"vertical\"===f?n(t.x+t.width,t.y+t.height,a.x-a.width,a.y+a.height,a.x-a.width,a.y-a.height,t.x+t.width,t.y-t.height):e(t.x-t.width,t.y+t.height,a.x-a.width,a.y-a.height,a.x+a.width,a.y-a.height,t.x+t.width,t.y+t.height),primary:t.primary,secondary:t.secondary,value:t.value,percent:t.percent}})}function o(t,n,e,r,a){var i=e/(a-r-2*t.length*n),u=0,o=0,s=d3.sum(t,function(t){return t.value});t.forEach(function(t){t.value<i*s&&(u+=1,o+=t.value)});var c=1e-5>s?0:(a-r-2*t.length*n-u*e)/(s-o),d=r,f=[];return t.forEach(function(t){var r=t.value*c;f.push({s:d+n+(e>r?.5*(e-r):0),e:d+n+(e>r?.5*(e+r):r),p:1e-5>s?0:t.value/s}),d+=2*n+(e>r?e:r)}),f}var s={primary:[],secondary:[]},c={primary:[],secondary:[]},d={primary:t.keyPrimary(),secondary:t.keySecondary()},f=t.orient();return a(\"primary\"),a(\"secondary\"),i(\"primary\"),i(\"secondary\"),r(),{mainBars:s.primary.concat(s.secondary),subBars:c.primary.concat(c.secondary),edges:u()}},t.mouseover=function(i){var u=t.bars(i);y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",1),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a);var o=y.selectAll(\".edges\").data(u.edges);o.filter(function(t){return t[i.part]===i.key}).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),o.filter(function(t){return t[i.part]!==i.key}).transition().duration(t.duration()).style(\"fill-opacity\",0).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t.mouseout=function(i){var u=t.bars();y.selectAll(\".mainBars\").filter(function(t){return t.part===i.part&&t.key===i.key}).select(\"rect\").style(\"stroke-opacity\",0),y.selectAll(\".subBars\").data(u.subBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a),y.selectAll(\".edges\").data(u.edges).transition().duration(t.duration()).style(\"fill-opacity\",t.edgeOpacity()).attr(\"d\",function(t){return t.path}),y.selectAll(\".mainBars\").data(u.mainBars).transition().duration(t.duration()).attr(\"transform\",function(t){return\"translate(\"+t.x+\",\"+t.y+\")\"}).select(\"rect\").attr(\"x\",n).attr(\"y\",e).attr(\"width\",r).attr(\"height\",a)},t},u.gg=function(){function t(n){g=n,n.each(function(){var n=d3.select(this),e=t.scale(),r=t.minorTickStart(),a=t.minorTickEnd(),i=t.majorTickStart(),u=t.majorTickEnd(),o=t.ticks(),c=t.majorTicks(),d=t.labelLocation(),f=t.outerRadius();n.append(\"circle\").attr(\"r\",f).style(\"fill\",\"url(#vizgg3\"+p+\")\").attr(\"class\",\"face\"),n.append(\"circle\").attr(\"r\",t.innerRadius()).style(\"fill\",\"url(#vizgg2\"+p+\")\").style(\"filter\",\"url(#vizgg5\"+p+\")\").attr(\"class\",\"innerFace\");var l=n.append(\"g\");l.selectAll(\"line\").data(o).enter().append(\"line\").attr(\"class\",function(t){return c(t)?\"majorTicks\":\"minorTicks\"}).attr(\"x1\",function(t){return f*(c(t)?i:r)*Math.cos(e(t))}).attr(\"y1\",function(t){return f*(c(t)?i:r)*Math.sin(e(t))}).attr(\"x2\",function(t){return f*(c(t)?u:a)*Math.cos(e(t))}).attr(\"y2\",function(t){return f*(c(t)?u:a)*Math.sin(e(t))}),n.selectAll(\"text\").data(o.filter(c)).enter().append(\"text\").attr(\"class\",\"label\").attr(\"x\",function(t){return f*d*Math.cos(e(t))}).attr(\"y\",function(t){return f*d*Math.sin(e(t))}).attr(\"dy\",3).text(function(t){return t});var g=t.outerRadius()/b.outerRadius,h=180*t.scale()(t.value())/s+90;n.append(\"g\").attr(\"transform\",\"translate(1,1)\").selectAll(\".needleshadow\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needleshadow\").append(\"path\").attr(\"d\",[\"m 0\",-130*g,5*g,175*g,-10*g,\"0,z\"].join(\",\")).style(\"filter\",\"url(#vizgg6\"+p+\")\"),n.selectAll(\".needle\").data([0]).enter().append(\"g\").attr(\"transform\",\"rotate(\"+h+\")\").attr(\"class\",\"needle\").append(\"polygon\").attr(\"points\",[-.5*g,-130*g,.5*g,-130*g,5*g,45*g,-5*g,45*g].join(\",\")).style(\"fill\",\"url(#vizgg4\"+p+\")\")})}var n,e,r,a,i,o,c,d,f,l,g,p,h,y,m,v,A,x,k,b={innerRadius:20,outerRadius:150,angleOffset:.7,startAngle:-1.5*s,endAngle:.5*s,minorTickStart:.9,minorTickEnd:.95,majorTickStart:.82,majorTickEnd:.95,needleColor:\"#de2c2c\",innerFaceColor:\"#999999\",faceColor:\"#666666\",domain:[0,100],duration:500,ease:\"cubicInOut\",ticks:d3.range(0,101,2),majorTicks:function(t){return t%10===0},labelLocation:.7};return t.scale=function(){return d3.scale.linear().domain(t.domain()).range([b.startAngle+t.angleOffset(),b.endAngle-t.angleOffset()])},t.innerRadius=function(e){return arguments.length?(n=e,t):\"undefined\"!=typeof n?n:b.innerRadius},t.outerRadius=function(n){return arguments.length?(e=n,t):\"undefined\"!=typeof e?e:b.outerRadius},t.angleOffset=function(n){return arguments.length?(d=n,t):\"undefined\"!=typeof d?d:b.angleOffset},t.labelLocation=function(n){return arguments.length?(k=n,t):\"undefined\"!=typeof k?k:b.labelLocation},t.ticks=function(n){return arguments.length?(h=n,t):\"undefined\"!=typeof h?h:b.ticks},t.majorTicks=function(n){return arguments.length?(y=n,t):\"undefined\"!=typeof y?y:b.majorTicks},t.minorTickStart=function(n){return arguments.length?(m=n,t):\"undefined\"!=typeof m?m:b.minorTickStart},t.minorTickEnd=function(n){return arguments.length?(v=n,t):\"undefined\"!=typeof v?v:b.minorTickEnd},t.majorTickStart=function(n){return arguments.length?(A=n,t):\"undefined\"!=typeof A?A:b.majorTickStart},t.majorTickEnd=function(n){return arguments.length?(x=n,t):\"undefined\"!=typeof x?x:b.majorTickEnd},t.needleColor=function(n){return arguments.length?(r=n,t):\"undefined\"!=typeof r?r:b.needleColor},t.innerFaceColor=function(n){return arguments.length?(a=n,t):\"undefined\"!=typeof a?a:b.innerFaceColor},t.faceColor=function(n){return arguments.length?(i=n,t):\"undefined\"!=typeof i?i:b.faceColor},t.domain=function(n){return arguments.length?(o=n,t):\"undefined\"!=typeof o?o:b.domain},t.duration=function(n){return arguments.length?(f=n,t):\"undefined\"!=typeof f?f:b.duration},t.ease=function(n){return arguments.length?(l=n,t):\"undefined\"!=typeof l?l:b.ease},t.value=function(n){return arguments.length?(c=n,t):\"undefined\"!=typeof c?c:.5*(b.domain[0]+b.domain[1])},t.defs=function(n,e){var r=n.append(\"defs\");p=e;var a=t.needleColor(),i=t.innerFaceColor(),o=t.faceColor(),s=u.defs(r).lG().id(\"vizgg1\"+e).sel();u.defs(s).stop().offset(\"0\").stopColor(a),u.defs(s).stop().offset(\"1\").stopColor(d3.rgb(a).darker(1));var c=u.defs(r).rG().id(\"vizgg2\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(c).stop().offset(\"0\").stopColor(i),u.defs(c).stop().offset(\"1\").stopColor(d3.rgb(i).darker(2));var d=u.defs(r).rG().id(\"vizgg3\"+e).fx(\"35%\").fy(\"65%\").r(\"65%\").spreadMethod(\"pad\").sel();u.defs(d).stop().offset(\"0\").stopColor(o),u.defs(d).stop().offset(\"1\").stopColor(d3.rgb(o).darker(2)),u.defs(r).lG().id(\"vizgg4\"+e).gradientUnits(\"userSpaceOnUse\").y1(\"80\").x1(\"-10\").y2(\"80\").x2(\"10\").xlink(\"#vizgg1\"+e);var f=u.defs(r).filter().id(\"vizgg5\"+e).sel();u.defs(f).feFlood().result(\"flood\").floodColor(\"rgb(0,0,0)\").floodOpacity(\"0.6\"),u.defs(f).feComposite().result(\"composite1\").operator(\"in\").in2(\"SourceGraphic\")[\"in\"](\"flood\"),u.defs(f).feGaussianBlur().result(\"blur\").stdDeviation(\"2\")[\"in\"](\"composite1\"),u.defs(f).feOffset().result(\"offset\").dy(\"2\").dx(\"2\"),u.defs(f).feComposite().result(\"composite2\").operator(\"over\").in2(\"offset\")[\"in\"](\"SourceGraphic\");var l=u.defs(r).filter().x(\"-0.3\").y(\"-0.3\").height(\"1.8\").width(\"1.8\").id(\"vizgg6\"+e).sel();u.defs(l).feGaussianBlur().stdDeviation(\"2\")},t.setNeedle=function(n){function e(t,n){return d3.interpolateString(\"rotate(\"+t+\")\",\"rotate(\"+n+\")\")}var r=180*t.scale()(n)/s+90,a=180*t.scale()(t.value())/s+90,i=t.ease();g.selectAll(\".needle\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i),g.selectAll(\".needleshadow\").data([n]).transition().duration(t.duration()).attrTween(\"transform\",function(t){return e(a,r)}).ease(i).each(\"end\",function(){angle=n}),t.value(n)},t},u.ch=function(){function u(t){function n(t){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}p=t,k||f(),t.each(function(){var t=d3.select(this),r=t.selectAll(\".groups\").data(x).enter().append(\"g\").attr(\"class\",\"groups\").on(\"mouseover\",u.mouseover).on(\"mouseout\",u.mouseout),a=r.append(\"text\").attr(\"class\",\"label\"),i=(1+u.labelPadding())*u.outerRadius(),s=u.valueFormat();a.filter(function(t){return\"g\"==t.type}).attr(\"x\",function(t){return i*Math.cos(d(t))}).attr(\"y\",function(t){return i*Math.sin(d(t))}).text(function(t){return t.source+\" (\"+s(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"}).each(function(t){this._current=t}),r.append(\"path\").style(\"fill\",function(t){return y(t.source)}).style(\"stroke\",function(t){return y(t.source)}).attr(\"d\",n).each(function(t){this._current=t}).filter(function(t){return\"g\"==t.type}),t.append(\"g\").attr(\"class\",\"chords\").selectAll(\".chord\").data(k).enter().append(\"g\").attr(\"class\",\"chord\").append(\"path\").each(function(t){this._current=t}).attr(\"d\",e).style(\"fill\",function(t){return y(t.target)}).style(\"opacity\",u.chordOpacity()).style(\"stroke\",function(t){return y(t.target)}).style(\"display\",function(t){return t.display?\"inline\":\"none\"})})}function s(t){function n(t,n){return r([B,O,t.startAngle,t.endAngle])}function e(t){return a(B,t.startAngle,t.endAngle,B,t.endStartAngle,t.endEndAngle)}function i(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return e(n(t))}}function s(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return n(e(t),t)}}function f(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.cos(d(n(t)))}}function l(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return h*Math.sin(d(n(t)))}}var g=p.selectAll(\".groups\").data(t?b:u.groups()),h=(1+u.labelPadding())*u.outerRadius(),y=u.valueFormat();g.select(\"path\").transition().duration(L).attrTween(\"d\",s),g.select(\".label\").filter(function(t){return\"g\"==t.type}).transition().duration(L).attrTween(\"x\",f).attrTween(\"y\",l).text(function(t){return t.source+\" (\"+y(t.value)+\")\"}).style(\"text-anchor\",function(t){var n=d(t);return c>n||n>o-c?\"start\":\"end\"});var m=u.chordOpacity();p.select(\".chords\").selectAll(\".chord\").data(t?w:u.chords()).select(\"path\").transition().duration(L).attrTween(\"d\",i).style(\"opacity\",function(t){return t.display?m:0})}function d(n){return t((n.startAngle+n.endAngle)/2)}function f(){m=[],h.forEach(function(t){-1==m.indexOf(E(t))&&m.push(E(t)),-1==m.indexOf(M(t))&&m.push(M(t))}),m=m.sort(T),v={},A={},m.forEach(function(t){v[t]={},A[t]={},m.forEach(function(n){v[t][n]=0,A[t][n]=!1})}),h.forEach(function(t){var n=E(t),e=M(t);v[n][e]+=S(t),A[n][e]=!0}),x=[],m.forEach(function(t,n){x.push({source:t,type:\"gs\",value:0,skipPad:!0,index:n}),x.push({source:t,type:\"g\",value:d3.sum(m,function(n){return v[t][n]}),skipPad:!1,index:n})}),g(x,z,R,void 0,P),k=[],x.filter(function(t){return\"g\"==t.type}).forEach(function(t,n){var r=i(m.length,n),a=e(r.map(function(n){return v[t.source][m[n]]}),0,0,t.startAngle,t.endAngle);r.forEach(function(e,r){var i=a[r];k.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:t.source,target:m[e],type:\"c\",display:A[t.source][m[e]],index:n,subindex:e,indexsubindex:n+\"-\"+e})})});var t=d3.map(k,function(t){return t.indexsubindex});k.forEach(function(n){if(n.subindex==n.index)return n.endStartAngle=n.startAngle,void(n.endEndAngle=n.startAngle);var e=t.get(n.subindex+\"-\"+n.index);n.endStartAngle=e.startAngle,n.endEndAngle=e.startAngle}),F=!1}function l(t){function n(t){return t.endAngle+t.startAngle}var r=x.filter(function(n){return n.source==t&&\"g\"==n.type})[0];b=[],m.forEach(function(n,e){b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"gs\",value:n==t?v[n][n]:0,skipPad:n==t&&A[n][n]?!1:!0,index:e}),n==t?b.push({source:n,startAngle:r.startAngle,endAngle:r.endAngle,padAngle:r.padAngle,percent:r.percent,type:\"g\",value:r.value,skipPad:!1,index:e}):b.push({source:n,type:\"g\",value:v[t][n],skipPad:!1,index:e})}),g(b,z,R,t,P);var a=n(r);x.forEach(function(t,e){var r=b[e],i=n(t)<a;r.startAngle-=i?o:0,r.endAngle-=i?o:0}),w=[],b.filter(function(t){return\"g\"==t.type}).forEach(function(n,r){var a=i(m.length,r),u=a.map(function(e){var r=m[e];return n.source==t?v[n.source][r]:r==t?v[r][n.source]:0}),o=e(u,0,0,n.startAngle,n.endAngle);a.forEach(function(e,a){var i=o[a];w.push({startAngle:i.c-i.v/2,endAngle:i.c+i.v/2,value:i.value,source:n.source,target:m[e],type:\"c\",display:n.source===t,index:r,subindex:e,indexsubindex:r+\"-\"+e})})});var u=d3.map(w.map(function(t){return{startAngle:t.startAngle,endAngle:t.endAngle,indexsubindex:t.indexsubindex}}),function(t){return t.indexsubindex}),s=d3.map(b.filter(function(t){return\"gs\"==t.type}),function(t){return t.source});w.forEach(function(n){if(n.subindex==n.index){var e=s.get(n.source);return n.endStartAngle=e.startAngle,void(n.endEndAngle=e.endAngle)}var r=u.get(n.subindex+\"-\"+n.index);n.endStartAngle=r.startAngle,n.endEndAngle=r.endAngle,n.source!==t&&(n.startAngle=n.endAngle,n.endEndAngle=n.endStartAngle)})}function g(t,e,r,a,i){var u=void 0!==a,o=0;if(u){for(var s=!1;o<t.length;o++)if(t[o].source==a&&\"g\"==t[o].type){s=!0;break}s||console.log(\"The fixed source '\"+a+\"' is not a valid key\")}var c=d3.range(t.length);u&&(c=c.slice(o).concat(c.slice(0,o)));var d=t.filter(function(t){return!(u&&t.source===a&&\"g\"==t.type||t.skipPad)}).map(function(t){return t.value}),f=2*Math.PI-(u?t[o].endAngle-t[o].startAngle+2*e:0),l=u?t[o].endAngle+e:i,g=d3.sum(d),p=n(d,e,r,0>=f?0:f,g,u?!0:!1);c.slice(u?1:0).forEach(function(n){var a=p*t[n].value,i=(r>a?r-a:0)/2;t[n].startAngle=l,t[n].endAngle=l+a,t[n].padAngle=i,t[n].percent=t[n].value/(g||1),l+=a+i+(t[n].skipPad?0:e)})}var p,h,y,m,v,A,x,k,b,w,E=function(t){return t[0]},M=function(t){return t[1]},S=function(t){return t[2]},C=function(t){return t},T=d3.ascending,z=.03,P=0,B=180,O=200,j=.7,G=.02,R=0,L=500,F=!0;return u.data=function(t){return arguments.length?(h=t,F=!0,u):h},u.fill=function(t){return arguments.length?(y=t,u):y},u.duration=function(t){return arguments.length?(L=t,u):L},u.chordOpacity=function(t){return arguments.length?(j=t,u):j},u.innerRadius=function(t){return arguments.length?(B=t,F=!0,u):B},u.outerRadius=function(t){return arguments.length?(O=t,F=!0,u):O},u.source=function(t){return arguments.length?(E=t,F=!0,u):E},u.target=function(t){return arguments.length?(M=t,F=!0,u):M},u.value=function(t){return arguments.length?(S=t,F=!0,u):S},u.padding=function(t){return arguments.length?(z=t,F=!0,u):z},u.labelPadding=function(t){return arguments.length?(G=t,u):G},u.sort=function(t){return arguments.length?(T=t,F=!0,u):T},u.startAngle=function(t){return arguments.length?(P=t,F=!0,u):P},u.chords=function(){return F&&f(),k},u.groups=function(){return F&&f(),x},u.valueFormat=function(t){return arguments.length?(C=t,u):C},u.mouseover=function(t){l(t.source),s(1)},u.mouseout=function(t){s(0)},u},u.defs=function(t){var n={},e=t;return n.sel=function(){return e},n.lG=function(){return e=e.append(\"linearGradient\"),n},n.rG=function(){return e=e.append(\"radialGradient\"),n},n.stop=function(){return e=e.append(\"stop\"),n},n.filter=function(){return e=e.append(\"filter\"),n},n.feFlood=function(){return e=e.append(\"feFlood\"),n},n.feComposite=function(){return e=e.append(\"feComposite\"),n},n.feOffset=function(){return e=e.append(\"feOffset\"),n},n.feGaussianBlur=function(){return e=e.append(\"feGaussianBlur\"),n},n.result=function(t){return e=e.attr(\"result\",t),n},n.floodColor=function(t){return e=e.attr(\"flood-color\",t),n},n.floodOpacity=function(t){return e=e.attr(\"flood-opacity\",t),n},n.stdDeviation=function(t){return e=e.attr(\"stdDeviation\",t),n},n.operator=function(t){return e=e.attr(\"operator\",t),n},n.height=function(t){return e=e.attr(\"height\",t),n},n.width=function(t){return e=e.attr(\"width\",t),n},n[\"in\"]=function(t){return e=e.attr(\"in\",t),n},n.in2=function(t){return e=e.attr(\"in2\",t),n},n.id=function(t){return e=e.attr(\"id\",t),n},n.fx=function(t){return e=e.attr(\"fx\",t),n},n.fy=function(t){return e=e.attr(\"fy\",t),n},n.dx=function(t){return e=e.attr(\"dx\",t),n},n.dy=function(t){return e=e.attr(\"dy\",t),n},n.x1=function(t){return e=e.attr(\"x1\",t),n},n.y1=function(t){return e=e.attr(\"y1\",t),n},n.x2=function(t){return e=e.attr(\"x2\",t),n},n.y2=function(t){return e=e.attr(\"y2\",t),n},n.x=function(t){return e=e.attr(\"x\",t),n},n.y=function(t){return e=e.attr(\"y\",t),n},n.r=function(t){return e=e.attr(\"r\",t),n},n.spreadMethod=function(t){return e=e.attr(\"spreadMethod\",t),n},n.gradientUnits=function(t){return e=e.attr(\"gradientUnits\",t),n},n.xlink=function(t){return e=e.attr(\"xlink:href\",t),n},n.offset=function(t){return e=e.attr(\"offset\",t),n},n.stopColor=function(t){return e=e.attr(\"stop-color\",t),n},n.path=function(){return e=e.append(\"path\"),n},n.d=function(t){return e=e.attr(\"d\",t),n},n},this.viz=u}();\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  demo13.js */\nvar data=[[\"Alstroemeria aurea\",\"Allograpta.Toxomerus\",1,1],\n[\"Aristotelia chilensis\",\"Allograpta.Toxomerus\",0,0],\n[\"Berberis darwinii\",\"Allograpta.Toxomerus\",0,0],\n[\"Calceolaria crenatiflora\",\"Allograpta.Toxomerus\",1,0],\n[\"Cynanchum diemii\",\"Allograpta.Toxomerus\",0,0],\n[\"Mutisia decurrens\",\"Allograpta.Toxomerus\",0,0],\n[\"Ribes magellanicum\",\"Allograpta.Toxomerus\",3,0],\n[\"Rosa eglanteria\",\"Allograpta.Toxomerus\",2,0],\n[\"Schinus patagonicus\",\"Allograpta.Toxomerus\",0,5],\n[\"Tristerix corymbosus\",\"Allograpta.Toxomerus\",0,0],\n[\"Vicia nigricans\",\"Allograpta.Toxomerus\",0,0],\n[\"Alstroemeria aurea\",\"Bombus dahlbomii\",154,147],\n[\"Aristotelia chilensis\",\"Bombus dahlbomii\",0,0],\n[\"Berberis darwinii\",\"Bombus dahlbomii\",67,0],\n[\"Calceolaria crenatiflora\",\"Bombus dahlbomii\",0,0],\n[\"Cynanchum diemii\",\"Bombus dahlbomii\",0,0],\n[\"Mutisia decurrens\",\"Bombus dahlbomii\",0,0],\n[\"Ribes magellanicum\",\"Bombus dahlbomii\",0,0],\n[\"Rosa eglanteria\",\"Bombus dahlbomii\",0,0],\n[\"Schinus patagonicus\",\"Bombus dahlbomii\",0,0],\n[\"Tristerix corymbosus\",\"Bombus dahlbomii\",0,0],\n[\"Vicia nigricans\",\"Bombus dahlbomii\",0,37],\n[\"Alstroemeria aurea\",\"Bombus ruderatus\",0,7],\n[\"Aristotelia chilensis\",\"Bombus ruderatus\",0,0],\n[\"Berberis darwinii\",\"Bombus ruderatus\",0,0],\n[\"Calceolaria crenatiflora\",\"Bombus ruderatus\",0,0],\n[\"Cynanchum diemii\",\"Bombus ruderatus\",0,0],\n[\"Mutisia decurrens\",\"Bombus ruderatus\",0,0],\n[\"Ribes magellanicum\",\"Bombus ruderatus\",0,0],\n[\"Rosa eglanteria\",\"Bombus ruderatus\",0,0],\n[\"Schinus patagonicus\",\"Bombus ruderatus\",0,0],\n[\"Tristerix corymbosus\",\"Bombus ruderatus\",0,0],\n[\"Vicia nigricans\",\"Bombus ruderatus\",0,0],\n[\"Alstroemeria aurea\",\"Braconidae2\",0,0],\n[\"Aristotelia chilensis\",\"Braconidae2\",1,0],\n[\"Berberis darwinii\",\"Braconidae2\",0,0],\n[\"Calceolaria crenatiflora\",\"Braconidae2\",0,0],\n[\"Cynanchum diemii\",\"Braconidae2\",0,0],\n[\"Mutisia decurrens\",\"Braconidae2\",0,0],\n[\"Ribes magellanicum\",\"Braconidae2\",0,0],\n[\"Rosa eglanteria\",\"Braconidae2\",0,0],\n[\"Schinus patagonicus\",\"Braconidae2\",0,0],\n[\"Tristerix corymbosus\",\"Braconidae2\",0,0],\n[\"Vicia nigricans\",\"Braconidae2\",0,0],\n[\"Alstroemeria aurea\",\"Braconidae3\",0,0],\n[\"Aristotelia chilensis\",\"Braconidae3\",0,0],\n[\"Berberis darwinii\",\"Braconidae3\",0,0],\n[\"Calceolaria crenatiflora\",\"Braconidae3\",0,0],\n[\"Cynanchum diemii\",\"Braconidae3\",2,5],\n[\"Mutisia decurrens\",\"Braconidae3\",0,0],\n[\"Ribes magellanicum\",\"Braconidae3\",0,0],\n[\"Rosa eglanteria\",\"Braconidae3\",0,0],\n[\"Schinus patagonicus\",\"Braconidae3\",0,0],\n[\"Tristerix corymbosus\",\"Braconidae3\",0,0],\n[\"Vicia nigricans\",\"Braconidae3\",0,0],\n[\"Alstroemeria aurea\",\"Chalepogenus caeruleus\",0,0],\n[\"Aristotelia chilensis\",\"Chalepogenus caeruleus\",0,0],\n[\"Berberis darwinii\",\"Chalepogenus caeruleus\",0,0],\n[\"Calceolaria crenatiflora\",\"Chalepogenus caeruleus\",3,0],\n[\"Cynanchum diemii\",\"Chalepogenus caeruleus\",0,0],\n[\"Mutisia decurrens\",\"Chalepogenus caeruleus\",0,0],\n[\"Ribes magellanicum\",\"Chalepogenus caeruleus\",0,0],\n[\"Rosa eglanteria\",\"Chalepogenus caeruleus\",0,0],\n[\"Schinus patagonicus\",\"Chalepogenus caeruleus\",0,0],\n[\"Tristerix corymbosus\",\"Chalepogenus caeruleus\",0,0],\n[\"Vicia nigricans\",\"Chalepogenus caeruleus\",0,0],\n[\"Alstroemeria aurea\",\"Coleoptera9\",0,0],\n[\"Aristotelia chilensis\",\"Coleoptera9\",0,0],\n[\"Berberis darwinii\",\"Coleoptera9\",0,0],\n[\"Calceolaria crenatiflora\",\"Coleoptera9\",0,0],\n[\"Cynanchum diemii\",\"Coleoptera9\",0,1],\n[\"Mutisia decurrens\",\"Coleoptera9\",0,0],\n[\"Ribes magellanicum\",\"Coleoptera9\",0,0],\n[\"Rosa eglanteria\",\"Coleoptera9\",0,0],\n[\"Schinus patagonicus\",\"Coleoptera9\",0,0],\n[\"Tristerix corymbosus\",\"Coleoptera9\",0,0],\n[\"Vicia nigricans\",\"Coleoptera9\",0,0],\n[\"Alstroemeria aurea\",\"Corynura prothysteres\",3,0],\n[\"Aristotelia chilensis\",\"Corynura prothysteres\",1,0],\n[\"Berberis darwinii\",\"Corynura prothysteres\",0,0],\n[\"Calceolaria crenatiflora\",\"Corynura prothysteres\",0,0],\n[\"Cynanchum diemii\",\"Corynura prothysteres\",0,0],\n[\"Mutisia decurrens\",\"Corynura prothysteres\",0,0],\n[\"Ribes magellanicum\",\"Corynura prothysteres\",0,0],\n[\"Rosa eglanteria\",\"Corynura prothysteres\",0,0],\n[\"Schinus patagonicus\",\"Corynura prothysteres\",0,0],\n[\"Tristerix corymbosus\",\"Corynura prothysteres\",0,0],\n[\"Vicia nigricans\",\"Corynura prothysteres\",0,0],\n[\"Alstroemeria aurea\",\"Diptera3\",0,1],\n[\"Aristotelia chilensis\",\"Diptera3\",0,0],\n[\"Berberis darwinii\",\"Diptera3\",0,0],\n[\"Calceolaria crenatiflora\",\"Diptera3\",0,0],\n[\"Cynanchum diemii\",\"Diptera3\",0,0],\n[\"Mutisia decurrens\",\"Diptera3\",0,0],\n[\"Ribes magellanicum\",\"Diptera3\",0,0],\n[\"Rosa eglanteria\",\"Diptera3\",0,0],\n[\"Schinus patagonicus\",\"Diptera3\",0,0],\n[\"Tristerix corymbosus\",\"Diptera3\",0,0],\n[\"Vicia nigricans\",\"Diptera3\",0,0],\n[\"Alstroemeria aurea\",\"Diptera5\",0,1],\n[\"Aristotelia chilensis\",\"Diptera5\",0,0],\n[\"Berberis darwinii\",\"Diptera5\",0,0],\n[\"Calceolaria crenatiflora\",\"Diptera5\",0,0],\n[\"Cynanchum diemii\",\"Diptera5\",0,0],\n[\"Mutisia decurrens\",\"Diptera5\",0,0],\n[\"Ribes magellanicum\",\"Diptera5\",0,0],\n[\"Rosa eglanteria\",\"Diptera5\",0,0],\n[\"Schinus patagonicus\",\"Diptera5\",0,0],\n[\"Tristerix corymbosus\",\"Diptera5\",0,0],\n[\"Vicia nigricans\",\"Diptera5\",0,0],\n[\"Alstroemeria aurea\",\"Formicidae3\",0,0],\n[\"Aristotelia chilensis\",\"Formicidae3\",0,0],\n[\"Berberis darwinii\",\"Formicidae3\",0,0],\n[\"Calceolaria crenatiflora\",\"Formicidae3\",0,0],\n[\"Cynanchum diemii\",\"Formicidae3\",8,0],\n[\"Mutisia decurrens\",\"Formicidae3\",0,0],\n[\"Ribes magellanicum\",\"Formicidae3\",0,0],\n[\"Rosa eglanteria\",\"Formicidae3\",0,0],\n[\"Schinus patagonicus\",\"Formicidae3\",0,0],\n[\"Tristerix corymbosus\",\"Formicidae3\",0,0],\n[\"Vicia nigricans\",\"Formicidae3\",0,0],\n[\"Alstroemeria aurea\",\"Ichneumonidae2\",4,0],\n[\"Aristotelia chilensis\",\"Ichneumonidae2\",0,0],\n[\"Berberis darwinii\",\"Ichneumonidae2\",0,0],\n[\"Calceolaria crenatiflora\",\"Ichneumonidae2\",0,0],\n[\"Cynanchum diemii\",\"Ichneumonidae2\",0,0],\n[\"Mutisia decurrens\",\"Ichneumonidae2\",0,0],\n[\"Ribes magellanicum\",\"Ichneumonidae2\",0,0],\n[\"Rosa eglanteria\",\"Ichneumonidae2\",0,0],\n[\"Schinus patagonicus\",\"Ichneumonidae2\",0,0],\n[\"Tristerix corymbosus\",\"Ichneumonidae2\",0,0],\n[\"Vicia nigricans\",\"Ichneumonidae2\",0,0],\n[\"Alstroemeria aurea\",\"Ichneumonidae4\",0,0],\n[\"Aristotelia chilensis\",\"Ichneumonidae4\",1,0],\n[\"Berberis darwinii\",\"Ichneumonidae4\",0,0],\n[\"Calceolaria crenatiflora\",\"Ichneumonidae4\",0,0],\n[\"Cynanchum diemii\",\"Ichneumonidae4\",0,0],\n[\"Mutisia decurrens\",\"Ichneumonidae4\",0,0],\n[\"Ribes magellanicum\",\"Ichneumonidae4\",0,0],\n[\"Rosa eglanteria\",\"Ichneumonidae4\",0,0],\n[\"Schinus patagonicus\",\"Ichneumonidae4\",15,0],\n[\"Tristerix corymbosus\",\"Ichneumonidae4\",0,0],\n[\"Vicia nigricans\",\"Ichneumonidae4\",0,0],\n[\"Alstroemeria aurea\",\"Ichneumonidae7\",0,0],\n[\"Aristotelia chilensis\",\"Ichneumonidae7\",0,0],\n[\"Berberis darwinii\",\"Ichneumonidae7\",0,0],\n[\"Calceolaria crenatiflora\",\"Ichneumonidae7\",0,0],\n[\"Cynanchum diemii\",\"Ichneumonidae7\",0,1],\n[\"Mutisia decurrens\",\"Ichneumonidae7\",0,0],\n[\"Ribes magellanicum\",\"Ichneumonidae7\",0,0],\n[\"Rosa eglanteria\",\"Ichneumonidae7\",0,0],\n[\"Schinus patagonicus\",\"Ichneumonidae7\",0,0],\n[\"Tristerix corymbosus\",\"Ichneumonidae7\",0,0],\n[\"Vicia nigricans\",\"Ichneumonidae7\",0,0],\n[\"Alstroemeria aurea\",\"Manuelia gayi\",7,0],\n[\"Aristotelia chilensis\",\"Manuelia gayi\",0,0],\n[\"Berberis darwinii\",\"Manuelia gayi\",0,0],\n[\"Calceolaria crenatiflora\",\"Manuelia gayi\",0,0],\n[\"Cynanchum diemii\",\"Manuelia gayi\",0,0],\n[\"Mutisia decurrens\",\"Manuelia gayi\",0,0],\n[\"Ribes magellanicum\",\"Manuelia gayi\",0,0],\n[\"Rosa eglanteria\",\"Manuelia gayi\",0,0],\n[\"Schinus patagonicus\",\"Manuelia gayi\",0,0],\n[\"Tristerix corymbosus\",\"Manuelia gayi\",0,0],\n[\"Vicia nigricans\",\"Manuelia gayi\",0,0],\n[\"Alstroemeria aurea\",\"Manuelia postica\",0,2],\n[\"Aristotelia chilensis\",\"Manuelia postica\",0,0],\n[\"Berberis darwinii\",\"Manuelia postica\",0,0],\n[\"Calceolaria crenatiflora\",\"Manuelia postica\",0,0],\n[\"Cynanchum diemii\",\"Manuelia postica\",0,0],\n[\"Mutisia decurrens\",\"Manuelia postica\",0,0],\n[\"Ribes magellanicum\",\"Manuelia postica\",0,0],\n[\"Rosa eglanteria\",\"Manuelia postica\",0,0],\n[\"Schinus patagonicus\",\"Manuelia postica\",0,10],\n[\"Tristerix corymbosus\",\"Manuelia postica\",0,2],\n[\"Vicia nigricans\",\"Manuelia postica\",0,0],\n[\"Alstroemeria aurea\",\"Megachile1\",0,6],\n[\"Aristotelia chilensis\",\"Megachile1\",0,0],\n[\"Berberis darwinii\",\"Megachile1\",0,0],\n[\"Calceolaria crenatiflora\",\"Megachile1\",0,0],\n[\"Cynanchum diemii\",\"Megachile1\",0,0],\n[\"Mutisia decurrens\",\"Megachile1\",0,0],\n[\"Ribes magellanicum\",\"Megachile1\",0,0],\n[\"Rosa eglanteria\",\"Megachile1\",0,0],\n[\"Schinus patagonicus\",\"Megachile1\",0,0],\n[\"Tristerix corymbosus\",\"Megachile1\",0,0],\n[\"Vicia nigricans\",\"Megachile1\",0,0],\n[\"Alstroemeria aurea\",\"Megachile2\",0,12],\n[\"Aristotelia chilensis\",\"Megachile2\",0,0],\n[\"Berberis darwinii\",\"Megachile2\",0,0],\n[\"Calceolaria crenatiflora\",\"Megachile2\",0,0],\n[\"Cynanchum diemii\",\"Megachile2\",0,0],\n[\"Mutisia decurrens\",\"Megachile2\",0,0],\n[\"Ribes magellanicum\",\"Megachile2\",0,0],\n[\"Rosa eglanteria\",\"Megachile2\",0,0],\n[\"Schinus patagonicus\",\"Megachile2\",0,0],\n[\"Tristerix corymbosus\",\"Megachile2\",0,0],\n[\"Vicia nigricans\",\"Megachile2\",0,0],\n[\"Alstroemeria aurea\",\"Nitidulidae\",0,0],\n[\"Aristotelia chilensis\",\"Nitidulidae\",0,0],\n[\"Berberis darwinii\",\"Nitidulidae\",0,0],\n[\"Calceolaria crenatiflora\",\"Nitidulidae\",0,0],\n[\"Cynanchum diemii\",\"Nitidulidae\",1,7],\n[\"Mutisia decurrens\",\"Nitidulidae\",0,0],\n[\"Ribes magellanicum\",\"Nitidulidae\",0,4],\n[\"Rosa eglanteria\",\"Nitidulidae\",0,0],\n[\"Schinus patagonicus\",\"Nitidulidae\",0,0],\n[\"Tristerix corymbosus\",\"Nitidulidae\",0,0],\n[\"Vicia nigricans\",\"Nitidulidae\",0,0],\n[\"Alstroemeria aurea\",\"Phthiria\",8,3],\n[\"Aristotelia chilensis\",\"Phthiria\",0,0],\n[\"Berberis darwinii\",\"Phthiria\",0,0],\n[\"Calceolaria crenatiflora\",\"Phthiria\",0,0],\n[\"Cynanchum diemii\",\"Phthiria\",0,0],\n[\"Mutisia decurrens\",\"Phthiria\",1,0],\n[\"Ribes magellanicum\",\"Phthiria\",0,0],\n[\"Rosa eglanteria\",\"Phthiria\",0,0],\n[\"Schinus patagonicus\",\"Phthiria\",0,0],\n[\"Tristerix corymbosus\",\"Phthiria\",0,0],\n[\"Vicia nigricans\",\"Phthiria\",0,0],\n[\"Alstroemeria aurea\",\"Phthiria1\",1,1],\n[\"Aristotelia chilensis\",\"Phthiria1\",0,0],\n[\"Berberis darwinii\",\"Phthiria1\",0,0],\n[\"Calceolaria crenatiflora\",\"Phthiria1\",0,0],\n[\"Cynanchum diemii\",\"Phthiria1\",0,0],\n[\"Mutisia decurrens\",\"Phthiria1\",0,0],\n[\"Ribes magellanicum\",\"Phthiria1\",0,0],\n[\"Rosa eglanteria\",\"Phthiria1\",0,0],\n[\"Schinus patagonicus\",\"Phthiria1\",0,0],\n[\"Tristerix corymbosus\",\"Phthiria1\",0,0],\n[\"Vicia nigricans\",\"Phthiria1\",0,0],\n[\"Alstroemeria aurea\",\"Platycheirus1\",1,0],\n[\"Aristotelia chilensis\",\"Platycheirus1\",4,0],\n[\"Berberis darwinii\",\"Platycheirus1\",0,0],\n[\"Calceolaria crenatiflora\",\"Platycheirus1\",0,0],\n[\"Cynanchum diemii\",\"Platycheirus1\",0,0],\n[\"Mutisia decurrens\",\"Platycheirus1\",0,0],\n[\"Ribes magellanicum\",\"Platycheirus1\",0,0],\n[\"Rosa eglanteria\",\"Platycheirus1\",0,0],\n[\"Schinus patagonicus\",\"Platycheirus1\",0,0],\n[\"Tristerix corymbosus\",\"Platycheirus1\",0,0],\n[\"Vicia nigricans\",\"Platycheirus1\",0,0],\n[\"Alstroemeria aurea\",\"Policana albopilosa\",0,0],\n[\"Aristotelia chilensis\",\"Policana albopilosa\",673,89],\n[\"Berberis darwinii\",\"Policana albopilosa\",0,0],\n[\"Calceolaria crenatiflora\",\"Policana albopilosa\",0,0],\n[\"Cynanchum diemii\",\"Policana albopilosa\",0,0],\n[\"Mutisia decurrens\",\"Policana albopilosa\",0,0],\n[\"Ribes magellanicum\",\"Policana albopilosa\",0,0],\n[\"Rosa eglanteria\",\"Policana albopilosa\",0,0],\n[\"Schinus patagonicus\",\"Policana albopilosa\",0,404],\n[\"Tristerix corymbosus\",\"Policana albopilosa\",0,0],\n[\"Vicia nigricans\",\"Policana albopilosa\",0,0],\n[\"Alstroemeria aurea\",\"Ruizantheda mutabilis\",0,0],\n[\"Aristotelia chilensis\",\"Ruizantheda mutabilis\",110,0],\n[\"Berberis darwinii\",\"Ruizantheda mutabilis\",0,0],\n[\"Calceolaria crenatiflora\",\"Ruizantheda mutabilis\",0,0],\n[\"Cynanchum diemii\",\"Ruizantheda mutabilis\",0,0],\n[\"Mutisia decurrens\",\"Ruizantheda mutabilis\",0,0],\n[\"Ribes magellanicum\",\"Ruizantheda mutabilis\",0,0],\n[\"Rosa eglanteria\",\"Ruizantheda mutabilis\",6,0],\n[\"Schinus patagonicus\",\"Ruizantheda mutabilis\",0,0],\n[\"Tristerix corymbosus\",\"Ruizantheda mutabilis\",0,0],\n[\"Vicia nigricans\",\"Ruizantheda mutabilis\",0,0],\n[\"Alstroemeria aurea\",\"Ruizantheda nigrocaerulea\",0,1],\n[\"Aristotelia chilensis\",\"Ruizantheda nigrocaerulea\",0,0],\n[\"Berberis darwinii\",\"Ruizantheda nigrocaerulea\",0,0],\n[\"Calceolaria crenatiflora\",\"Ruizantheda nigrocaerulea\",0,0],\n[\"Cynanchum diemii\",\"Ruizantheda nigrocaerulea\",0,0],\n[\"Mutisia decurrens\",\"Ruizantheda nigrocaerulea\",0,0],\n[\"Ribes magellanicum\",\"Ruizantheda nigrocaerulea\",0,0],\n[\"Rosa eglanteria\",\"Ruizantheda nigrocaerulea\",0,0],\n[\"Schinus patagonicus\",\"Ruizantheda nigrocaerulea\",0,0],\n[\"Tristerix corymbosus\",\"Ruizantheda nigrocaerulea\",0,0],\n[\"Vicia nigricans\",\"Ruizantheda nigrocaerulea\",0,0],\n[\"Alstroemeria aurea\",\"Ruizantheda proxima\",4,0],\n[\"Aristotelia chilensis\",\"Ruizantheda proxima\",0,0],\n[\"Berberis darwinii\",\"Ruizantheda proxima\",0,0],\n[\"Calceolaria crenatiflora\",\"Ruizantheda proxima\",0,0],\n[\"Cynanchum diemii\",\"Ruizantheda proxima\",0,0],\n[\"Mutisia decurrens\",\"Ruizantheda proxima\",0,0],\n[\"Ribes magellanicum\",\"Ruizantheda proxima\",0,0],\n[\"Rosa eglanteria\",\"Ruizantheda proxima\",0,0],\n[\"Schinus patagonicus\",\"Ruizantheda proxima\",0,0],\n[\"Tristerix corymbosus\",\"Ruizantheda proxima\",0,0],\n[\"Vicia nigricans\",\"Ruizantheda proxima\",0,0],\n[\"Alstroemeria aurea\",\"Salpingidae\",0,0],\n[\"Aristotelia chilensis\",\"Salpingidae\",0,0],\n[\"Berberis darwinii\",\"Salpingidae\",0,0],\n[\"Calceolaria crenatiflora\",\"Salpingidae\",0,0],\n[\"Cynanchum diemii\",\"Salpingidae\",0,1],\n[\"Mutisia decurrens\",\"Salpingidae\",0,0],\n[\"Ribes magellanicum\",\"Salpingidae\",0,0],\n[\"Rosa eglanteria\",\"Salpingidae\",0,0],\n[\"Schinus patagonicus\",\"Salpingidae\",0,0],\n[\"Tristerix corymbosus\",\"Salpingidae\",0,0],\n[\"Vicia nigricans\",\"Salpingidae\",0,0],\n[\"Alstroemeria aurea\",\"Sapromyza.Minettia\",1,0],\n[\"Aristotelia chilensis\",\"Sapromyza.Minettia\",0,0],\n[\"Berberis darwinii\",\"Sapromyza.Minettia\",0,0],\n[\"Calceolaria crenatiflora\",\"Sapromyza.Minettia\",0,0],\n[\"Cynanchum diemii\",\"Sapromyza.Minettia\",0,0],\n[\"Mutisia decurrens\",\"Sapromyza.Minettia\",0,0],\n[\"Ribes magellanicum\",\"Sapromyza.Minettia\",0,0],\n[\"Rosa eglanteria\",\"Sapromyza.Minettia\",0,0],\n[\"Schinus patagonicus\",\"Sapromyza.Minettia\",0,0],\n[\"Tristerix corymbosus\",\"Sapromyza.Minettia\",0,0],\n[\"Vicia nigricans\",\"Sapromyza.Minettia\",0,0],\n[\"Alstroemeria aurea\",\"Sephanoides galeritus\",0,1],\n[\"Aristotelia chilensis\",\"Sephanoides galeritus\",0,0],\n[\"Berberis darwinii\",\"Sephanoides galeritus\",0,0],\n[\"Calceolaria crenatiflora\",\"Sephanoides galeritus\",0,0],\n[\"Cynanchum diemii\",\"Sephanoides galeritus\",0,0],\n[\"Mutisia decurrens\",\"Sephanoides galeritus\",0,0],\n[\"Ribes magellanicum\",\"Sephanoides galeritus\",0,0],\n[\"Rosa eglanteria\",\"Sephanoides galeritus\",0,0],\n[\"Schinus patagonicus\",\"Sephanoides galeritus\",0,0],\n[\"Tristerix corymbosus\",\"Sephanoides galeritus\",0,1],\n[\"Vicia nigricans\",\"Sephanoides galeritus\",0,0],\n[\"Alstroemeria aurea\",\"Sphecidae\",1,0],\n[\"Aristotelia chilensis\",\"Sphecidae\",0,0],\n[\"Berberis darwinii\",\"Sphecidae\",0,0],\n[\"Calceolaria crenatiflora\",\"Sphecidae\",0,0],\n[\"Cynanchum diemii\",\"Sphecidae\",0,0],\n[\"Mutisia decurrens\",\"Sphecidae\",0,0],\n[\"Ribes magellanicum\",\"Sphecidae\",0,0],\n[\"Rosa eglanteria\",\"Sphecidae\",0,0],\n[\"Schinus patagonicus\",\"Sphecidae\",0,0],\n[\"Tristerix corymbosus\",\"Sphecidae\",0,0],\n[\"Vicia nigricans\",\"Sphecidae\",0,0],\n[\"Alstroemeria aurea\",\"Staphilinidae\",4,0],\n[\"Aristotelia chilensis\",\"Staphilinidae\",0,0],\n[\"Berberis darwinii\",\"Staphilinidae\",0,0],\n[\"Calceolaria crenatiflora\",\"Staphilinidae\",0,0],\n[\"Cynanchum diemii\",\"Staphilinidae\",0,0],\n[\"Mutisia decurrens\",\"Staphilinidae\",0,0],\n[\"Ribes magellanicum\",\"Staphilinidae\",0,0],\n[\"Rosa eglanteria\",\"Staphilinidae\",3,0],\n[\"Schinus patagonicus\",\"Staphilinidae\",0,0],\n[\"Tristerix corymbosus\",\"Staphilinidae\",0,0],\n[\"Vicia nigricans\",\"Staphilinidae\",0,0],\n[\"Alstroemeria aurea\",\"Svastrides melanura\",6,1],\n[\"Aristotelia chilensis\",\"Svastrides melanura\",0,0],\n[\"Berberis darwinii\",\"Svastrides melanura\",0,0],\n[\"Calceolaria crenatiflora\",\"Svastrides melanura\",0,0],\n[\"Cynanchum diemii\",\"Svastrides melanura\",0,0],\n[\"Mutisia decurrens\",\"Svastrides melanura\",0,0],\n[\"Ribes magellanicum\",\"Svastrides melanura\",0,0],\n[\"Rosa eglanteria\",\"Svastrides melanura\",0,0],\n[\"Schinus patagonicus\",\"Svastrides melanura\",0,0],\n[\"Tristerix corymbosus\",\"Svastrides melanura\",0,0],\n[\"Vicia nigricans\",\"Svastrides melanura\",0,0],\n[\"Alstroemeria aurea\",\"Syrphus octomaculatus\",5,4],\n[\"Aristotelia chilensis\",\"Syrphus octomaculatus\",0,0],\n[\"Berberis darwinii\",\"Syrphus octomaculatus\",5,0],\n[\"Calceolaria crenatiflora\",\"Syrphus octomaculatus\",0,0],\n[\"Cynanchum diemii\",\"Syrphus octomaculatus\",0,0],\n[\"Mutisia decurrens\",\"Syrphus octomaculatus\",0,0],\n[\"Ribes magellanicum\",\"Syrphus octomaculatus\",0,0],\n[\"Rosa eglanteria\",\"Syrphus octomaculatus\",4,0],\n[\"Schinus patagonicus\",\"Syrphus octomaculatus\",0,0],\n[\"Tristerix corymbosus\",\"Syrphus octomaculatus\",0,0],\n[\"Vicia nigricans\",\"Syrphus octomaculatus\",0,0],\n[\"Alstroemeria aurea\",\"Thomisidae\",1,0],\n[\"Aristotelia chilensis\",\"Thomisidae\",0,0],\n[\"Berberis darwinii\",\"Thomisidae\",0,0],\n[\"Calceolaria crenatiflora\",\"Thomisidae\",0,0],\n[\"Cynanchum diemii\",\"Thomisidae\",0,0],\n[\"Mutisia decurrens\",\"Thomisidae\",0,0],\n[\"Ribes magellanicum\",\"Thomisidae\",0,0],\n[\"Rosa eglanteria\",\"Thomisidae\",0,0],\n[\"Schinus patagonicus\",\"Thomisidae\",0,0],\n[\"Tristerix corymbosus\",\"Thomisidae\",0,0],\n[\"Vicia nigricans\",\"Thomisidae\",0,0],\n[\"Alstroemeria aurea\",\"Torymidae2\",0,0],\n[\"Aristotelia chilensis\",\"Torymidae2\",0,0],\n[\"Berberis darwinii\",\"Torymidae2\",0,0],\n[\"Calceolaria crenatiflora\",\"Torymidae2\",0,0],\n[\"Cynanchum diemii\",\"Torymidae2\",9,1],\n[\"Mutisia decurrens\",\"Torymidae2\",0,0],\n[\"Ribes magellanicum\",\"Torymidae2\",0,0],\n[\"Rosa eglanteria\",\"Torymidae2\",0,0],\n[\"Schinus patagonicus\",\"Torymidae2\",0,0],\n[\"Tristerix corymbosus\",\"Torymidae2\",0,0],\n[\"Vicia nigricans\",\"Torymidae2\",0,0],\n[\"Alstroemeria aurea\",\"Trichophthalma amoena\",0,0],\n[\"Aristotelia chilensis\",\"Trichophthalma amoena\",0,0],\n[\"Berberis darwinii\",\"Trichophthalma amoena\",0,0],\n[\"Calceolaria crenatiflora\",\"Trichophthalma amoena\",0,0],\n[\"Cynanchum diemii\",\"Trichophthalma amoena\",0,0],\n[\"Mutisia decurrens\",\"Trichophthalma amoena\",0,0],\n[\"Ribes magellanicum\",\"Trichophthalma amoena\",2,0],\n[\"Rosa eglanteria\",\"Trichophthalma amoena\",0,0],\n[\"Schinus patagonicus\",\"Trichophthalma amoena\",0,3],\n[\"Tristerix corymbosus\",\"Trichophthalma amoena\",0,0],\n[\"Vicia nigricans\",\"Trichophthalma amoena\",0,0],\n[\"Alstroemeria aurea\",\"Trichophthalma jaffueli\",3,1],\n[\"Aristotelia chilensis\",\"Trichophthalma jaffueli\",0,0],\n[\"Berberis darwinii\",\"Trichophthalma jaffueli\",0,0],\n[\"Calceolaria crenatiflora\",\"Trichophthalma jaffueli\",0,0],\n[\"Cynanchum diemii\",\"Trichophthalma jaffueli\",0,0],\n[\"Mutisia decurrens\",\"Trichophthalma jaffueli\",0,0],\n[\"Ribes magellanicum\",\"Trichophthalma jaffueli\",0,0],\n[\"Rosa eglanteria\",\"Trichophthalma jaffueli\",0,0],\n[\"Schinus patagonicus\",\"Trichophthalma jaffueli\",0,0],\n[\"Tristerix corymbosus\",\"Trichophthalma jaffueli\",0,0],\n[\"Vicia nigricans\",\"Trichophthalma jaffueli\",0,0],\n[\"Alstroemeria aurea\",\"Vespula germanica\",4,1],\n[\"Aristotelia chilensis\",\"Vespula germanica\",0,0],\n[\"Berberis darwinii\",\"Vespula germanica\",0,0],\n[\"Calceolaria crenatiflora\",\"Vespula germanica\",0,0],\n[\"Cynanchum diemii\",\"Vespula germanica\",0,0],\n[\"Mutisia decurrens\",\"Vespula germanica\",0,0],\n[\"Ribes magellanicum\",\"Vespula germanica\",0,0],\n[\"Rosa eglanteria\",\"Vespula germanica\",0,0],\n[\"Schinus patagonicus\",\"Vespula germanica\",0,0],\n[\"Tristerix corymbosus\",\"Vespula germanica\",0,0],\n[\"Vicia nigricans\",\"Vespula germanica\",0,0]]\n\n\n\n function sort(sortOrder){\n                    return function(a,b){ return d3.ascending(sortOrder.indexOf(a),sortOrder.indexOf(b)) }\n                  }\nvar color = {'Unlinked':'#3366CC','Allograpta.Toxomerus':'rgb(56,43,61)','Bombus dahlbomii':'rgb(56,43,61)','Bombus ruderatus':'rgb(56,43,61)','Braconidae2':'rgb(56,43,61)','Braconidae3':'rgb(56,43,61)','Chalepogenus caeruleus':'rgb(56,43,61)','Coleoptera9':'rgb(56,43,61)','Corynura prothysteres':'rgb(56,43,61)','Diptera3':'rgb(56,43,61)','Diptera5':'rgb(56,43,61)','Formicidae3':'rgb(56,43,61)','Ichneumonidae2':'rgb(56,43,61)','Ichneumonidae4':'rgb(56,43,61)','Ichneumonidae7':'rgb(56,43,61)','Manuelia gayi':'rgb(56,43,61)','Manuelia postica':'rgb(56,43,61)','Megachile1':'rgb(56,43,61)','Megachile2':'rgb(56,43,61)','Nitidulidae':'rgb(56,43,61)','Phthiria':'rgb(56,43,61)','Phthiria1':'rgb(56,43,61)','Platycheirus1':'rgb(56,43,61)','Policana albopilosa':'rgb(56,43,61)','Ruizantheda mutabilis':'rgb(56,43,61)','Ruizantheda nigrocaerulea':'rgb(56,43,61)','Ruizantheda proxima':'rgb(56,43,61)','Salpingidae':'rgb(56,43,61)','Sapromyza.Minettia':'rgb(56,43,61)','Sephanoides galeritus':'rgb(56,43,61)','Sphecidae':'rgb(56,43,61)','Staphilinidae':'rgb(56,43,61)','Svastrides melanura':'rgb(56,43,61)','Syrphus octomaculatus':'rgb(56,43,61)','Thomisidae':'rgb(56,43,61)','Torymidae2':'rgb(56,43,61)','Trichophthalma amoena':'rgb(56,43,61)','Trichophthalma jaffueli':'rgb(56,43,61)','Vespula germanica':'rgb(56,43,61)'};\n\n\n\n\nvar g1 = svg.append(\"g\").attr(\"transform\",\"translate(240,50)\");\n                         var bp1=viz.bP()\n                         .data(data)\n                         .value(d=>d[2])\n                         .min(5)\n                         .pad(5)\n                         .height(600)\n                         .width(200)\n                         .barSize(20)\n                         .fill(d=>color[d.secondary])\n.orient(\"vertical\");\n\ng1.call(bp1);g1.append(\"text\")\n                        .attr(\"x\",-50).attr(\"y\",-8)\n                        .style(\"text-anchor\",\"middle\")\n                        .text(\"Primary\");\n                        g1.append(\"text\")\n                        .attr(\"x\", 250)\n                        .attr(\"y\",-8).style(\"text-anchor\",\"middle\")\n                        .text(\"Secondary\");\n                        g1.append(\"text\")\n                        .attr(\"x\",100).attr(\"y\",-25)\n                        .style(\"text-anchor\",\"middle\")\n                        .attr(\"class\",\"header\")\n                        .text(\"Safariland\");\n\n g1.selectAll(\".mainBars\")\n                        .on(\"mouseover\",mouseover)\n                        .on(\"mouseout\",mouseout);\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"label\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -20:20))\n                        .attr(\"y\",d=>+6)\n                        .text(d=>d.key)\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\"));\n\n g1.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"perc\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -200:200))\n                        .attr(\"y\",d=>+6)\n                        .text(function(d){ return d3.format(\"0.2%\")(d.percent)})\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\")); \n\n\nvar g2 = svg.append(\"g\").attr(\"transform\",\"translate(240,750)\");\n                         var bp2=viz.bP()\n                         .data(data)\n                         .value(d=>d[3])\n                         .min(5)\n                         .pad(5)\n                         .height(600)\n                         .width(200)\n                         .barSize(20)\n                         .fill(d=>color[d.secondary])\n.orient(\"vertical\");\n\ng2.call(bp2);g2.append(\"text\")\n                        .attr(\"x\",-50).attr(\"y\",-8)\n                        .style(\"text-anchor\",\"middle\")\n                        .text(\"Primary\");\n                        g2.append(\"text\")\n                        .attr(\"x\", 250)\n                        .attr(\"y\",-8).style(\"text-anchor\",\"middle\")\n                        .text(\"Secondary\");\n                        g2.append(\"text\")\n                        .attr(\"x\",100).attr(\"y\",-25)\n                        .style(\"text-anchor\",\"middle\")\n                        .attr(\"class\",\"header\")\n                        .text(\"vazquenc\");\n\n g2.selectAll(\".mainBars\")\n                        .on(\"mouseover\",mouseover)\n                        .on(\"mouseout\",mouseout);\n\n g2.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"label\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -20:20))\n                        .attr(\"y\",d=>+6)\n                        .text(d=>d.key)\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\"));\n\n g2.selectAll(\".mainBars\").append(\"text\").attr(\"class\",\"perc\")\n                        .attr(\"x\",d=>(d.part==\"primary\"? -200:200))\n                        .attr(\"y\",d=>+6)\n                        .text(function(d){ return d3.format(\"0.2%\")(d.percent)})\n                        .attr(\"text-anchor\",d=>(d.part==\"primary\"? \"end\": \"start\")); \n\nfunction mouseover(d){\nbp1.mouseover(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.2%\")(d.percent)});\nbp2.mouseover(d);\n                            g2.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.2%\")(d.percent)});\n}\n\n                     function mouseout(d){\nbp1.mouseout(d);\n                            g1.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.2%\")(d.percent)});\nbp2.mouseout(d);\n                            g2.selectAll(\".mainBars\")\n                            .select(\".perc\")\n                            .text(function(d){ return d3.format(\"0.2%\")(d.percent)});\n}\n\n\n};","style":"/* R2D3 Source File:  demo13.css */\n .mainBars{\n    shape-rendering: auto;\n    fill-opacity: 1;\n    stroke-width: 0.5px;\n    stroke: rgb(0, 0, 0);\n    stroke-opacity: 0;\n  }\n    .subBars{\n    shape-rendering:crispEdges;\n    }\n    .edges{\n    stroke:none;\n    fill-opacity:0.3;\n    }\n    .label{\n    color:#000000;\n    }","version":5,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tidying-up" class="section level1">
<h1>Tidying up</h1>
<p>The scripts above leave behind two JavaScript files, the library <code>vizjs.js</code>, and the graph itself which by default is called <code>JSBP.js</code>, and a matching style file <code>JSBP.css</code>. Most of the time these are no problem, and in fact are actually useful to be able to inspect and directly edit. However, to keep the CRAN checks happy, this tidies them up.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">file.remove</span>(<span class="st">&#39;vizjs.js&#39;</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">file.remove</span>(<span class="st">&#39;JSBP.js&#39;</span>)</span></code></pre></div>
<pre><code>## Warning in file.remove(&quot;JSBP.js&quot;): cannot remove file &#39;JSBP.js&#39;, reason &#39;No such
## file or directory&#39;</code></pre>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">file.remove</span>(<span class="st">&#39;JSBP.css&#39;</span>)</span></code></pre></div>
<pre><code>## Warning in file.remove(&quot;JSBP.css&quot;): cannot remove file &#39;JSBP.css&#39;, reason &#39;No
## such file or directory&#39;</code></pre>
<pre><code>## [1] FALSE</code></pre>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
